import{c as we,j as c,R as J,d as Pt,r as fe,e as Be,Q as sr,X as nr,f as ar,b as ir,L as or}from"./index-udgkt900.js";import{a as cr,b as lr,c as ur,d as dr}from"./useTrades-Mz5mtErk.js";import{P as fr,M as Qe,S as hr,T as mr,u as yr}from"./Modal-BkksZlnd.js";import{H as ft}from"./Header-ZuGaujWX.js";import{B as ve}from"./Button-BTnulEid.js";import{t as U,s as ht,m as gr,a as Vt,g as xr,b as ze,d as br,e as vr,h as wr,f as Et,i as mt,j as pr}from"./utils-BzqZVbUb.js";import{u as Xe}from"./settingsStore-DuIfe9vi.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=we("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=we("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=we("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=we("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=we("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=we("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);function ce(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function Ct(e,t){const r=U(e);if(isNaN(t))return ce(e,NaN);if(!t)return r;const s=r.getDate(),a=ce(e,r.getTime());a.setMonth(r.getMonth()+t+1,0);const i=a.getDate();return s>=i?a:(r.setFullYear(a.getFullYear(),a.getMonth(),s),r)}let Tr={};function Ce(){return Tr}function Te(e,t){var d,v,D,_;const r=Ce(),s=(t==null?void 0:t.weekStartsOn)??((v=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:v.weekStartsOn)??r.weekStartsOn??((_=(D=r.locale)==null?void 0:D.options)==null?void 0:_.weekStartsOn)??0,a=U(e),i=a.getDay(),l=(i<s?7:0)+i-s;return a.setDate(a.getDate()-l),a.setHours(0,0,0,0),a}function Pe(e){return Te(e,{weekStartsOn:1})}function At(e){const t=U(e),r=t.getFullYear(),s=ce(e,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const a=Pe(s),i=ce(e,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const l=Pe(i);return t.getTime()>=a.getTime()?r+1:t.getTime()>=l.getTime()?r:r-1}function yt(e){const t=U(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function Sr(e,t){const r=ht(e),s=ht(t),a=+r-yt(r),i=+s-yt(s);return Math.round((a-i)/gr)}function Or(e){const t=At(e),r=ce(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Pe(r)}function _r(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Pr(e){if(!_r(e)&&typeof e!="number")return!1;const t=U(e);return!isNaN(Number(t))}function Vr(e){const t=U(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function Er(e,t){const r=U(e.start),s=U(e.end);let a=+r>+s;const i=a?+r:+s,l=a?s:r;l.setHours(0,0,0,0);let d=1;const v=[];for(;+l<=i;)v.push(U(l)),l.setDate(l.getDate()+d),l.setHours(0,0,0,0);return a?v.reverse():v}function Cr(e){const t=U(e);return t.setDate(1),t.setHours(0,0,0,0),t}function Ar(e){const t=U(e),r=ce(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}const Wr={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Ir=(e,t,r)=>{let s;const a=Wr[e];return typeof a=="string"?s=a:t===1?s=a.one:s=a.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};function qe(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const Lr={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Yr={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Rr={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},qr={date:qe({formats:Lr,defaultWidth:"full"}),time:qe({formats:Yr,defaultWidth:"full"}),dateTime:qe({formats:Rr,defaultWidth:"full"})},Ur={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Br=(e,t,r,s)=>Ur[e];function je(e){return(t,r)=>{const s=r!=null&&r.context?String(r.context):"standalone";let a;if(s==="formatting"&&e.formattingValues){const l=e.defaultFormattingWidth||e.defaultWidth,d=r!=null&&r.width?String(r.width):l;a=e.formattingValues[d]||e.formattingValues[l]}else{const l=e.defaultWidth,d=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[d]||e.values[l]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const Hr={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},$r={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Qr={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},zr={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Xr={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Gr={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Jr=(e,t)=>{const r=Number(e),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Kr={ordinalNumber:Jr,era:je({values:Hr,defaultWidth:"wide"}),quarter:je({values:$r,defaultWidth:"wide",argumentCallback:e=>e-1}),month:je({values:Qr,defaultWidth:"wide"}),day:je({values:zr,defaultWidth:"wide"}),dayPeriod:je({values:Xr,defaultWidth:"wide",formattingValues:Gr,defaultFormattingWidth:"wide"})};function De(e){return(t,r={})=>{const s=r.width,a=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const l=i[0],d=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],v=Array.isArray(d)?es(d,k=>k.test(l)):Zr(d,k=>k.test(l));let D;D=e.valueCallback?e.valueCallback(v):v,D=r.valueCallback?r.valueCallback(D):D;const _=t.slice(l.length);return{value:D,rest:_}}}function Zr(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function es(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function ts(e){return(t,r={})=>{const s=t.match(e.matchPattern);if(!s)return null;const a=s[0],i=t.match(e.parsePattern);if(!i)return null;let l=e.valueCallback?e.valueCallback(i[0]):i[0];l=r.valueCallback?r.valueCallback(l):l;const d=t.slice(a.length);return{value:l,rest:d}}}const rs=/^(\d+)(th|st|nd|rd)?/i,ss=/\d+/i,ns={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},as={any:[/^b/i,/^(a|c)/i]},is={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},os={any:[/1/i,/2/i,/3/i,/4/i]},cs={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},ls={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},us={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},ds={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},fs={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},hs={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ms={ordinalNumber:ts({matchPattern:rs,parsePattern:ss,valueCallback:e=>parseInt(e,10)}),era:De({matchPatterns:ns,defaultMatchWidth:"wide",parsePatterns:as,defaultParseWidth:"any"}),quarter:De({matchPatterns:is,defaultMatchWidth:"wide",parsePatterns:os,defaultParseWidth:"any",valueCallback:e=>e+1}),month:De({matchPatterns:cs,defaultMatchWidth:"wide",parsePatterns:ls,defaultParseWidth:"any"}),day:De({matchPatterns:us,defaultMatchWidth:"wide",parsePatterns:ds,defaultParseWidth:"any"}),dayPeriod:De({matchPatterns:fs,defaultMatchWidth:"any",parsePatterns:hs,defaultParseWidth:"any"})},ys={code:"en-US",formatDistance:Ir,formatLong:qr,formatRelative:Br,localize:Kr,match:ms,options:{weekStartsOn:0,firstWeekContainsDate:1}};function gs(e){const t=U(e);return Sr(t,Ar(t))+1}function xs(e){const t=U(e),r=+Pe(t)-+Or(t);return Math.round(r/Vt)+1}function Wt(e,t){var _,k,T,g;const r=U(e),s=r.getFullYear(),a=Ce(),i=(t==null?void 0:t.firstWeekContainsDate)??((k=(_=t==null?void 0:t.locale)==null?void 0:_.options)==null?void 0:k.firstWeekContainsDate)??a.firstWeekContainsDate??((g=(T=a.locale)==null?void 0:T.options)==null?void 0:g.firstWeekContainsDate)??1,l=ce(e,0);l.setFullYear(s+1,0,i),l.setHours(0,0,0,0);const d=Te(l,t),v=ce(e,0);v.setFullYear(s,0,i),v.setHours(0,0,0,0);const D=Te(v,t);return r.getTime()>=d.getTime()?s+1:r.getTime()>=D.getTime()?s:s-1}function bs(e,t){var d,v,D,_;const r=Ce(),s=(t==null?void 0:t.firstWeekContainsDate)??((v=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:v.firstWeekContainsDate)??r.firstWeekContainsDate??((_=(D=r.locale)==null?void 0:D.options)==null?void 0:_.firstWeekContainsDate)??1,a=Wt(e,t),i=ce(e,0);return i.setFullYear(a,0,s),i.setHours(0,0,0,0),Te(i,t)}function vs(e,t){const r=U(e),s=+Te(r,t)-+bs(r,t);return Math.round(s/Vt)+1}function O(e,t){const r=e<0?"-":"",s=Math.abs(e).toString().padStart(t,"0");return r+s}const ue={y(e,t){const r=e.getFullYear(),s=r>0?r:1-r;return O(t==="yy"?s%100:s,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):O(r+1,2)},d(e,t){return O(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return O(e.getHours()%12||12,t.length)},H(e,t){return O(e.getHours(),t.length)},m(e,t){return O(e.getMinutes(),t.length)},s(e,t){return O(e.getSeconds(),t.length)},S(e,t){const r=t.length,s=e.getMilliseconds(),a=Math.trunc(s*Math.pow(10,r-3));return O(a,t.length)}},ge={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},gt={G:function(e,t,r){const s=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});case"GGGG":default:return r.era(s,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const s=e.getFullYear(),a=s>0?s:1-s;return r.ordinalNumber(a,{unit:"year"})}return ue.y(e,t)},Y:function(e,t,r,s){const a=Wt(e,s),i=a>0?a:1-a;if(t==="YY"){const l=i%100;return O(l,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):O(i,t.length)},R:function(e,t){const r=At(e);return O(r,t.length)},u:function(e,t){const r=e.getFullYear();return O(r,t.length)},Q:function(e,t,r){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(s);case"QQ":return O(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,t,r){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(s);case"qq":return O(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,t,r){const s=e.getMonth();switch(t){case"M":case"MM":return ue.M(e,t);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(e,t,r){const s=e.getMonth();switch(t){case"L":return String(s+1);case"LL":return O(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(e,t,r,s){const a=vs(e,s);return t==="wo"?r.ordinalNumber(a,{unit:"week"}):O(a,t.length)},I:function(e,t,r){const s=xs(e);return t==="Io"?r.ordinalNumber(s,{unit:"week"}):O(s,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):ue.d(e,t)},D:function(e,t,r){const s=gs(e);return t==="Do"?r.ordinalNumber(s,{unit:"dayOfYear"}):O(s,t.length)},E:function(e,t,r){const s=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});case"EEEE":default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(e,t,r,s){const a=e.getDay(),i=(a-s.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return O(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,s){const a=e.getDay(),i=(a-s.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return O(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const s=e.getDay(),a=s===0?7:s;switch(t){case"i":return String(a);case"ii":return O(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});case"iiii":default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(e,t,r){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){const s=e.getHours();let a;switch(s===12?a=ge.noon:s===0?a=ge.midnight:a=s/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const s=e.getHours();let a;switch(s>=17?a=ge.evening:s>=12?a=ge.afternoon:s>=4?a=ge.morning:a=ge.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let s=e.getHours()%12;return s===0&&(s=12),r.ordinalNumber(s,{unit:"hour"})}return ue.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):ue.H(e,t)},K:function(e,t,r){const s=e.getHours()%12;return t==="Ko"?r.ordinalNumber(s,{unit:"hour"}):O(s,t.length)},k:function(e,t,r){let s=e.getHours();return s===0&&(s=24),t==="ko"?r.ordinalNumber(s,{unit:"hour"}):O(s,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):ue.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):ue.s(e,t)},S:function(e,t){return ue.S(e,t)},X:function(e,t,r){const s=e.getTimezoneOffset();if(s===0)return"Z";switch(t){case"X":return bt(s);case"XXXX":case"XX":return he(s);case"XXXXX":case"XXX":default:return he(s,":")}},x:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"x":return bt(s);case"xxxx":case"xx":return he(s);case"xxxxx":case"xxx":default:return he(s,":")}},O:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+xt(s,":");case"OOOO":default:return"GMT"+he(s,":")}},z:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+xt(s,":");case"zzzz":default:return"GMT"+he(s,":")}},t:function(e,t,r){const s=Math.trunc(e.getTime()/1e3);return O(s,t.length)},T:function(e,t,r){const s=e.getTime();return O(s,t.length)}};function xt(e,t=""){const r=e>0?"-":"+",s=Math.abs(e),a=Math.trunc(s/60),i=s%60;return i===0?r+String(a):r+String(a)+t+O(i,2)}function bt(e,t){return e%60===0?(e>0?"-":"+")+O(Math.abs(e)/60,2):he(e,t)}function he(e,t=""){const r=e>0?"-":"+",s=Math.abs(e),a=O(Math.trunc(s/60),2),i=O(s%60,2);return r+a+t+i}const vt=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},It=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},ws=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],s=r[1],a=r[2];if(!a)return vt(e,t);let i;switch(s){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",vt(s,t)).replace("{{time}}",It(a,t))},ps={p:It,P:ws},ks=/^D+$/,js=/^Y+$/,Ds=["D","DD","YY","YYYY"];function Ns(e){return ks.test(e)}function Ms(e){return js.test(e)}function Fs(e,t,r){const s=Ts(e,t,r);if(console.warn(s),Ds.includes(e))throw new RangeError(s)}function Ts(e,t,r){const s=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${s} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Ss=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Os=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,_s=/^'([^]*?)'?$/,Ps=/''/g,Vs=/[a-zA-Z]/;function me(e,t,r){var _,k,T,g;const s=Ce(),a=s.locale??ys,i=s.firstWeekContainsDate??((k=(_=s.locale)==null?void 0:_.options)==null?void 0:k.firstWeekContainsDate)??1,l=s.weekStartsOn??((g=(T=s.locale)==null?void 0:T.options)==null?void 0:g.weekStartsOn)??0,d=U(e);if(!Pr(d))throw new RangeError("Invalid time value");let v=t.match(Os).map(w=>{const N=w[0];if(N==="p"||N==="P"){const R=ps[N];return R(w,a.formatLong)}return w}).join("").match(Ss).map(w=>{if(w==="''")return{isToken:!1,value:"'"};const N=w[0];if(N==="'")return{isToken:!1,value:Es(w)};if(gt[N])return{isToken:!0,value:w};if(N.match(Vs))throw new RangeError("Format string contains an unescaped latin alphabet character `"+N+"`");return{isToken:!1,value:w}});a.localize.preprocessor&&(v=a.localize.preprocessor(d,v));const D={firstWeekContainsDate:i,weekStartsOn:l,locale:a};return v.map(w=>{if(!w.isToken)return w.value;const N=w.value;(Ms(N)||Ns(N))&&Fs(N,t,String(e));const R=gt[N[0]];return R(d,N,a.localize,D)}).join("")}function Es(e){const t=e.match(_s);return t?t[1].replace(Ps,"'"):e}function Cs(e){return U(e).getDay()}function As(e,t){return Ct(e,-1)}const Ws=({onClick:e,icon:t=fr,label:r="Add"})=>c.jsx("button",{onClick:e,className:"fixed bottom-6 right-6 z-30 w-14 h-14 bg-accent hover:bg-accent-hover text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-200 flex items-center justify-center active:scale-95","aria-label":r,children:c.jsx(t,{size:24})});var Se=e=>e.type==="checkbox",ye=e=>e instanceof Date,X=e=>e==null;const Lt=e=>typeof e=="object";var Y=e=>!X(e)&&!Array.isArray(e)&&Lt(e)&&!ye(e),Is=e=>Y(e)&&e.target?Se(e.target)?e.target.checked:e.target.value:e,Ls=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Ys=(e,t)=>e.has(Ls(t)),Rs=e=>{const t=e.constructor&&e.constructor.prototype;return Y(t)&&t.hasOwnProperty("isPrototypeOf")},Ge=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function q(e){if(e instanceof Date)return new Date(e);const t=typeof FileList<"u"&&e instanceof FileList;if(Ge&&(e instanceof Blob||t))return e;const r=Array.isArray(e);if(!r&&!(Y(e)&&Rs(e)))return e;const s=r?[]:Object.create(Object.getPrototypeOf(e));for(const a in e)Object.prototype.hasOwnProperty.call(e,a)&&(s[a]=q(e[a]));return s}var Ae=e=>/^\w*$/.test(e),W=e=>e===void 0,Je=e=>Array.isArray(e)?e.filter(Boolean):[],Ke=e=>Je(e.replace(/["|']|\]/g,"").split(/\.|\[/)),y=(e,t,r)=>{if(!t||!Y(e))return r;const s=(Ae(t)?[t]:Ke(t)).reduce((a,i)=>X(a)?a:a[i],e);return W(s)||s===e?W(e[t])?r:e[t]:s},ae=e=>typeof e=="boolean",re=e=>typeof e=="function",C=(e,t,r)=>{let s=-1;const a=Ae(t)?[t]:Ke(t),i=a.length,l=i-1;for(;++s<i;){const d=a[s];let v=r;if(s!==l){const D=e[d];v=Y(D)||Array.isArray(D)?D:isNaN(+a[s+1])?{}:[]}if(d==="__proto__"||d==="constructor"||d==="prototype")return;e[d]=v,e=e[d]}};const wt={BLUR:"blur",FOCUS_OUT:"focusout"},se={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},oe={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},qs=J.createContext(null);qs.displayName="HookFormContext";var Us=(e,t,r,s=!0)=>{const a={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(a,i,{get:()=>{const l=i;return t._proxyFormState[l]!==se.all&&(t._proxyFormState[l]=!s||se.all),e[l]}});return a};const Bs=typeof window<"u"?J.useLayoutEffect:J.useEffect;var K=e=>typeof e=="string",Hs=(e,t,r,s,a)=>K(e)?(s&&t.watch.add(e),y(r,e,a)):Array.isArray(e)?e.map(i=>(s&&t.watch.add(i),y(r,i))):(s&&(t.watchAll=!0),r),He=e=>X(e)||!Lt(e);function de(e,t,r=new WeakSet){if(He(e)||He(t))return Object.is(e,t);if(ye(e)&&ye(t))return e.getTime()===t.getTime();const s=Object.keys(e),a=Object.keys(t);if(s.length!==a.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const i of s){const l=e[i];if(!a.includes(i))return!1;if(i!=="ref"){const d=t[i];if(ye(l)&&ye(d)||Y(l)&&Y(d)||Array.isArray(l)&&Array.isArray(d)?!de(l,d,r):!Object.is(l,d))return!1}}return!0}var $s=(e,t,r,s,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[s]:a||!0}}:{},Me=e=>Array.isArray(e)?e:[e],pt=()=>{let e=[];return{get observers(){return e},next:a=>{for(const i of e)i.next&&i.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(i=>i!==a)}}),unsubscribe:()=>{e=[]}}};function Yt(e,t){const r={};for(const s in e)if(e.hasOwnProperty(s)){const a=e[s],i=t[s];if(a&&Y(a)&&i){const l=Yt(a,i);Y(l)&&(r[s]=l)}else e[s]&&(r[s]=i)}return r}var Q=e=>Y(e)&&!Object.keys(e).length,Ze=e=>e.type==="file",Ve=e=>{if(!Ge)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Rt=e=>e.type==="select-multiple",et=e=>e.type==="radio",Qs=e=>et(e)||Se(e),Ue=e=>Ve(e)&&e.isConnected;function zs(e,t){const r=t.slice(0,-1).length;let s=0;for(;s<r;)e=W(e)?s++:e[t[s++]];return e}function Xs(e){for(const t in e)if(e.hasOwnProperty(t)&&!W(e[t]))return!1;return!0}function L(e,t){const r=Array.isArray(t)?t:Ae(t)?[t]:Ke(t),s=r.length===1?e:zs(e,r),a=r.length-1,i=r[a];return s&&delete s[i],a!==0&&(Y(s)&&Q(s)||Array.isArray(s)&&Xs(s))&&L(e,r.slice(0,-1)),e}var Gs=e=>{for(const t in e)if(re(e[t]))return!0;return!1};function qt(e){return Array.isArray(e)||Y(e)&&!Gs(e)}function $e(e,t={}){for(const r in e){const s=e[r];qt(s)?(t[r]=Array.isArray(s)?[]:{},$e(s,t[r])):W(s)||(t[r]=!0)}return t}function be(e,t,r){r||(r=$e(t));for(const s in e){const a=e[s];if(qt(a))W(t)||He(r[s])?r[s]=$e(a,Array.isArray(a)?[]:{}):be(a,X(t)?{}:t[s],r[s]);else{const i=t[s];r[s]=!de(a,i)}}return r}const kt={value:!1,isValid:!1},jt={value:!0,isValid:!0};var Ut=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!W(e[0].attributes.value)?W(e[0].value)||e[0].value===""?jt:{value:e[0].value,isValid:!0}:jt:kt}return kt},Bt=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:s})=>W(e)?e:t?e===""?NaN:e&&+e:r&&K(e)?new Date(e):s?s(e):e;const Dt={isValid:!1,value:null};var Ht=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,Dt):Dt;function Nt(e){const t=e.ref;return Ze(t)?t.files:et(t)?Ht(e.refs).value:Rt(t)?[...t.selectedOptions].map(({value:r})=>r):Se(t)?Ut(e.refs).value:Bt(W(t.value)?e.ref.value:t.value,e)}var Js=(e,t,r,s)=>{const a={};for(const i of e){const l=y(t,i);l&&C(a,i,l._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:s}},Ee=e=>e instanceof RegExp,Ne=e=>W(e)?e:Ee(e)?e.source:Y(e)?Ee(e.value)?e.value.source:e.value:e,Mt=e=>({isOnSubmit:!e||e===se.onSubmit,isOnBlur:e===se.onBlur,isOnChange:e===se.onChange,isOnAll:e===se.all,isOnTouch:e===se.onTouched});const Ft="AsyncFunction";var Ks=e=>!!e&&!!e.validate&&!!(re(e.validate)&&e.validate.constructor.name===Ft||Y(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===Ft)),Zs=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),Tt=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(s=>e.startsWith(s)&&/^\.\w+/.test(e.slice(s.length))));const Fe=(e,t,r,s)=>{for(const a of r||Object.keys(e)){const i=y(e,a);if(i){const{_f:l,...d}=i;if(l){if(l.refs&&l.refs[0]&&t(l.refs[0],a)&&!s)return!0;if(l.ref&&t(l.ref,l.name)&&!s)return!0;if(Fe(d,t))break}else if(Y(d)&&Fe(d,t))break}}};function St(e,t,r){const s=y(e,r);if(s||Ae(r))return{error:s,name:r};const a=r.split(".");for(;a.length;){const i=a.join("."),l=y(t,i),d=y(e,i);if(l&&!Array.isArray(l)&&r!==i)return{name:r};if(d&&d.type)return{name:i,error:d};if(d&&d.root&&d.root.type)return{name:`${i}.root`,error:d.root};a.pop()}return{name:r}}var en=(e,t,r,s)=>{r(e);const{name:a,...i}=e;return Q(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(l=>t[l]===(!s||se.all))},tn=(e,t,r)=>!e||!t||e===t||Me(e).some(s=>s&&(r?s===t:s.startsWith(t)||t.startsWith(s))),rn=(e,t,r,s,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(t||e):(r?s.isOnBlur:a.isOnBlur)?!e:(r?s.isOnChange:a.isOnChange)?e:!0,sn=(e,t)=>!Je(y(e,t)).length&&L(e,t),nn=(e,t,r)=>{const s=Me(y(e,r));return C(s,"root",t[r]),C(e,r,s),e};function Ot(e,t,r="validate"){if(K(e)||Array.isArray(e)&&e.every(K)||ae(e)&&!e)return{type:r,message:K(e)?e:"",ref:t}}var xe=e=>Y(e)&&!Ee(e)?e:{value:e,message:""},_t=async(e,t,r,s,a,i)=>{const{ref:l,refs:d,required:v,maxLength:D,minLength:_,min:k,max:T,pattern:g,validate:w,name:N,valueAsNumber:R,mount:A}=e._f,M=y(r,N);if(!A||t.has(N))return{};const B=d?d[0]:l,$=j=>{a&&B.reportValidity&&(B.setCustomValidity(ae(j)?"":j||""),B.reportValidity())},E={},ne=et(l),ie=Se(l),Z=ne||ie,te=(R||Ze(l))&&W(l.value)&&W(M)||Ve(l)&&l.value===""||M===""||Array.isArray(M)&&!M.length,H=$s.bind(null,N,s,E),G=(j,x,P,I=oe.maxLength,p=oe.minLength)=>{const F=j?x:P;E[N]={type:j?I:p,message:F,ref:l,...H(j?I:p,F)}};if(i?!Array.isArray(M)||!M.length:v&&(!Z&&(te||X(M))||ae(M)&&!M||ie&&!Ut(d).isValid||ne&&!Ht(d).isValid)){const{value:j,message:x}=K(v)?{value:!!v,message:v}:xe(v);if(j&&(E[N]={type:oe.required,message:x,ref:B,...H(oe.required,x)},!s))return $(x),E}if(!te&&(!X(k)||!X(T))){let j,x;const P=xe(T),I=xe(k);if(!X(M)&&!isNaN(M)){const p=l.valueAsNumber||M&&+M;X(P.value)||(j=p>P.value),X(I.value)||(x=p<I.value)}else{const p=l.valueAsDate||new Date(M),F=ke=>new Date(new Date().toDateString()+" "+ke),z=l.type=="time",pe=l.type=="week";K(P.value)&&M&&(j=z?F(M)>F(P.value):pe?M>P.value:p>new Date(P.value)),K(I.value)&&M&&(x=z?F(M)<F(I.value):pe?M<I.value:p<new Date(I.value))}if((j||x)&&(G(!!j,P.message,I.message,oe.max,oe.min),!s))return $(E[N].message),E}if((D||_)&&!te&&(K(M)||i&&Array.isArray(M))){const j=xe(D),x=xe(_),P=!X(j.value)&&M.length>+j.value,I=!X(x.value)&&M.length<+x.value;if((P||I)&&(G(P,j.message,x.message),!s))return $(E[N].message),E}if(g&&!te&&K(M)){const{value:j,message:x}=xe(g);if(Ee(j)&&!M.match(j)&&(E[N]={type:oe.pattern,message:x,ref:l,...H(oe.pattern,x)},!s))return $(x),E}if(w){if(re(w)){const j=await w(M,r),x=Ot(j,B);if(x&&(E[N]={...x,...H(oe.validate,x.message)},!s))return $(x.message),E}else if(Y(w)){let j={};for(const x in w){if(!Q(j)&&!s)break;const P=Ot(await w[x](M,r),B,x);P&&(j={...P,...H(x,P.message)},$(P.message),s&&(E[N]=j))}if(!Q(j)&&(E[N]={ref:B,...j},!s))return E}}return $(!0),E};const an={mode:se.onSubmit,reValidateMode:se.onChange,shouldFocusError:!0};function on(e={}){let t={...an,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:re(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},s={},a=Y(t.defaultValues)||Y(t.values)?q(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:q(a),l={action:!1,mount:!1,watch:!1,keepIsValid:!1},d={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},v,D=0;const _={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},k={..._};let T={...k};const g={array:pt(),state:pt()},w=t.criteriaMode===se.all,N=n=>o=>{clearTimeout(D),D=setTimeout(n,o)},R=async n=>{if(!l.keepIsValid&&!t.disabled&&(k.isValid||T.isValid||n)){let o;t.resolver?(o=Q((await Z()).errors),A()):o=await H(s,!0),o!==r.isValid&&g.state.next({isValid:o})}},A=(n,o)=>{!t.disabled&&(k.isValidating||k.validatingFields||T.isValidating||T.validatingFields)&&((n||Array.from(d.mount)).forEach(u=>{u&&(o?C(r.validatingFields,u,o):L(r.validatingFields,u))}),g.state.next({validatingFields:r.validatingFields,isValidating:!Q(r.validatingFields)}))},M=(n,o=[],u,m,h=!0,f=!0)=>{if(m&&u&&!t.disabled){if(l.action=!0,f&&Array.isArray(y(s,n))){const b=u(y(s,n),m.argA,m.argB);h&&C(s,n,b)}if(f&&Array.isArray(y(r.errors,n))){const b=u(y(r.errors,n),m.argA,m.argB);h&&C(r.errors,n,b),sn(r.errors,n)}if((k.touchedFields||T.touchedFields)&&f&&Array.isArray(y(r.touchedFields,n))){const b=u(y(r.touchedFields,n),m.argA,m.argB);h&&C(r.touchedFields,n,b)}(k.dirtyFields||T.dirtyFields)&&(r.dirtyFields=be(a,i)),g.state.next({name:n,isDirty:j(n,o),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else C(i,n,o)},B=(n,o)=>{C(r.errors,n,o),g.state.next({errors:r.errors})},$=n=>{r.errors=n,g.state.next({errors:r.errors,isValid:!1})},E=(n,o,u,m)=>{const h=y(s,n);if(h){const f=y(i,n,W(u)?y(a,n):u);W(f)||m&&m.defaultChecked||o?C(i,n,o?f:Nt(h._f)):I(n,f),l.mount&&!l.action&&R()}},ne=(n,o,u,m,h)=>{let f=!1,b=!1;const S={name:n};if(!t.disabled){if(!u||m){(k.isDirty||T.isDirty)&&(b=r.isDirty,r.isDirty=S.isDirty=j(),f=b!==S.isDirty);const V=de(y(a,n),o);b=!!y(r.dirtyFields,n),V?L(r.dirtyFields,n):C(r.dirtyFields,n,!0),S.dirtyFields=r.dirtyFields,f=f||(k.dirtyFields||T.dirtyFields)&&b!==!V}if(u){const V=y(r.touchedFields,n);V||(C(r.touchedFields,n,u),S.touchedFields=r.touchedFields,f=f||(k.touchedFields||T.touchedFields)&&V!==u)}f&&h&&g.state.next(S)}return f?S:{}},ie=(n,o,u,m)=>{const h=y(r.errors,n),f=(k.isValid||T.isValid)&&ae(o)&&r.isValid!==o;if(t.delayError&&u?(v=N(()=>B(n,u)),v(t.delayError)):(clearTimeout(D),v=null,u?C(r.errors,n,u):L(r.errors,n)),(u?!de(h,u):h)||!Q(m)||f){const b={...m,...f&&ae(o)?{isValid:o}:{},errors:r.errors,name:n};r={...r,...b},g.state.next(b)}},Z=async n=>(A(n,!0),await t.resolver(i,t.context,Js(n||d.mount,s,t.criteriaMode,t.shouldUseNativeValidation))),te=async n=>{const{errors:o}=await Z(n);if(A(n),n)for(const u of n){const m=y(o,u);m?C(r.errors,u,m):L(r.errors,u)}else r.errors=o;return o},H=async(n,o,u={valid:!0})=>{for(const m in n){const h=n[m];if(h){const{_f:f,...b}=h;if(f){const S=d.array.has(f.name),V=h._f&&Ks(h._f);V&&k.validatingFields&&A([f.name],!0);const ee=await _t(h,d.disabled,i,w,t.shouldUseNativeValidation&&!o,S);if(V&&k.validatingFields&&A([f.name]),ee[f.name]&&(u.valid=!1,o))break;!o&&(y(ee,f.name)?S?nn(r.errors,ee,f.name):C(r.errors,f.name,ee[f.name]):L(r.errors,f.name))}!Q(b)&&await H(b,o,u)}}return u.valid},G=()=>{for(const n of d.unMount){const o=y(s,n);o&&(o._f.refs?o._f.refs.every(u=>!Ue(u)):!Ue(o._f.ref))&&We(n)}d.unMount=new Set},j=(n,o)=>!t.disabled&&(n&&o&&C(i,n,o),!de(tt(),a)),x=(n,o,u)=>Hs(n,d,{...l.mount?i:W(o)?a:K(n)?{[n]:o}:o},u,o),P=n=>Je(y(l.mount?i:a,n,t.shouldUnregister?y(a,n,[]):[])),I=(n,o,u={})=>{const m=y(s,n);let h=o;if(m){const f=m._f;f&&(!f.disabled&&C(i,n,Bt(o,f)),h=Ve(f.ref)&&X(o)?"":o,Rt(f.ref)?[...f.ref.options].forEach(b=>b.selected=h.includes(b.value)):f.refs?Se(f.ref)?f.refs.forEach(b=>{(!b.defaultChecked||!b.disabled)&&(Array.isArray(h)?b.checked=!!h.find(S=>S===b.value):b.checked=h===b.value||!!h)}):f.refs.forEach(b=>b.checked=b.value===h):Ze(f.ref)?f.ref.value="":(f.ref.value=h,f.ref.type||g.state.next({name:n,values:q(i)})))}(u.shouldDirty||u.shouldTouch)&&ne(n,h,u.shouldTouch,u.shouldDirty,!0),u.shouldValidate&&ke(n)},p=(n,o,u)=>{for(const m in o){if(!o.hasOwnProperty(m))return;const h=o[m],f=n+"."+m,b=y(s,f);(d.array.has(n)||Y(h)||b&&!b._f)&&!ye(h)?p(f,h,u):I(f,h,u)}},F=(n,o,u={})=>{const m=y(s,n),h=d.array.has(n),f=q(o);C(i,n,f),h?(g.array.next({name:n,values:q(i)}),(k.isDirty||k.dirtyFields||T.isDirty||T.dirtyFields)&&u.shouldDirty&&g.state.next({name:n,dirtyFields:be(a,i),isDirty:j(n,f)})):m&&!m._f&&!X(f)?p(n,f,u):I(n,f,u),Tt(n,d)&&g.state.next({...r,name:n}),g.state.next({name:l.mount?n:void 0,values:q(i)})},z=async n=>{l.mount=!0;const o=n.target;let u=o.name,m=!0;const h=y(s,u),f=V=>{m=Number.isNaN(V)||ye(V)&&isNaN(V.getTime())||de(V,y(i,u,V))},b=Mt(t.mode),S=Mt(t.reValidateMode);if(h){let V,ee;const Oe=o.type?Nt(h._f):Is(n),le=n.type===wt.BLUR||n.type===wt.FOCUS_OUT,er=!Zs(h._f)&&!t.resolver&&!y(r.errors,u)&&!h._f.deps||rn(le,y(r.touchedFields,u),r.isSubmitted,S,b),Ye=Tt(u,d,le);C(i,u,Oe),le?(!o||!o.readOnly)&&(h._f.onBlur&&h._f.onBlur(n),v&&v(0)):h._f.onChange&&h._f.onChange(n);const Re=ne(u,Oe,le),tr=!Q(Re)||Ye;if(!le&&g.state.next({name:u,type:n.type,values:q(i)}),er)return(k.isValid||T.isValid)&&(t.mode==="onBlur"?le&&R():le||R()),tr&&g.state.next({name:u,...Ye?{}:Re});if(!le&&Ye&&g.state.next({...r}),t.resolver){const{errors:ut}=await Z([u]);if(A([u]),f(Oe),m){const rr=St(r.errors,s,u),dt=St(ut,s,rr.name||u);V=dt.error,u=dt.name,ee=Q(ut)}}else A([u],!0),V=(await _t(h,d.disabled,i,w,t.shouldUseNativeValidation))[u],A([u]),f(Oe),m&&(V?ee=!1:(k.isValid||T.isValid)&&(ee=await H(s,!0)));m&&(h._f.deps&&(!Array.isArray(h._f.deps)||h._f.deps.length>0)&&ke(h._f.deps),ie(u,ee,V,Re))}},pe=(n,o)=>{if(y(r.errors,o)&&n.focus)return n.focus(),1},ke=async(n,o={})=>{let u,m;const h=Me(n);if(t.resolver){const f=await te(W(n)?n:h);u=Q(f),m=n?!h.some(b=>y(f,b)):u}else n?(m=(await Promise.all(h.map(async f=>{const b=y(s,f);return await H(b&&b._f?{[f]:b}:b)}))).every(Boolean),!(!m&&!r.isValid)&&R()):m=u=await H(s);return g.state.next({...!K(n)||(k.isValid||T.isValid)&&u!==r.isValid?{}:{name:n},...t.resolver||!n?{isValid:u}:{},errors:r.errors}),o.shouldFocus&&!m&&Fe(s,pe,n?h:d.mount),m},tt=(n,o)=>{let u={...l.mount?i:a};return o&&(u=Yt(o.dirtyFields?r.dirtyFields:r.touchedFields,u)),W(n)?u:K(n)?y(u,n):n.map(m=>y(u,m))},rt=(n,o)=>({invalid:!!y((o||r).errors,n),isDirty:!!y((o||r).dirtyFields,n),error:y((o||r).errors,n),isValidating:!!y(r.validatingFields,n),isTouched:!!y((o||r).touchedFields,n)}),Qt=n=>{n&&Me(n).forEach(o=>L(r.errors,o)),g.state.next({errors:n?r.errors:{}})},st=(n,o,u)=>{const m=(y(s,n,{_f:{}})._f||{}).ref,h=y(r.errors,n)||{},{ref:f,message:b,type:S,...V}=h;C(r.errors,n,{...V,...o,ref:m}),g.state.next({name:n,errors:r.errors,isValid:!1}),u&&u.shouldFocus&&m&&m.focus&&m.focus()},zt=(n,o)=>re(n)?g.state.subscribe({next:u=>"values"in u&&n(x(void 0,o),u)}):x(n,o,!0),nt=n=>g.state.subscribe({next:o=>{tn(n.name,o.name,n.exact)&&en(o,n.formState||k,Zt,n.reRenderRoot)&&n.callback({values:{...i},...r,...o,defaultValues:a})}}).unsubscribe,Xt=n=>(l.mount=!0,T={...T,...n.formState},nt({...n,formState:{..._,...n.formState}})),We=(n,o={})=>{for(const u of n?Me(n):d.mount)d.mount.delete(u),d.array.delete(u),o.keepValue||(L(s,u),L(i,u)),!o.keepError&&L(r.errors,u),!o.keepDirty&&L(r.dirtyFields,u),!o.keepTouched&&L(r.touchedFields,u),!o.keepIsValidating&&L(r.validatingFields,u),!t.shouldUnregister&&!o.keepDefaultValue&&L(a,u);g.state.next({values:q(i)}),g.state.next({...r,...o.keepDirty?{isDirty:j()}:{}}),!o.keepIsValid&&R()},at=({disabled:n,name:o})=>{(ae(n)&&l.mount||n||d.disabled.has(o))&&(n?d.disabled.add(o):d.disabled.delete(o))},Ie=(n,o={})=>{let u=y(s,n);const m=ae(o.disabled)||ae(t.disabled);return C(s,n,{...u||{},_f:{...u&&u._f?u._f:{ref:{name:n}},name:n,mount:!0,...o}}),d.mount.add(n),u?at({disabled:ae(o.disabled)?o.disabled:t.disabled,name:n}):E(n,!0,o.value),{...m?{disabled:o.disabled||t.disabled}:{},...t.progressive?{required:!!o.required,min:Ne(o.min),max:Ne(o.max),minLength:Ne(o.minLength),maxLength:Ne(o.maxLength),pattern:Ne(o.pattern)}:{},name:n,onChange:z,onBlur:z,ref:h=>{if(h){Ie(n,o),u=y(s,n);const f=W(h.value)&&h.querySelectorAll&&h.querySelectorAll("input,select,textarea")[0]||h,b=Qs(f),S=u._f.refs||[];if(b?S.find(V=>V===f):f===u._f.ref)return;C(s,n,{_f:{...u._f,...b?{refs:[...S.filter(Ue),f,...Array.isArray(y(a,n))?[{}]:[]],ref:{type:f.type,name:n}}:{ref:f}}}),E(n,!1,void 0,f)}else u=y(s,n,{}),u._f&&(u._f.mount=!1),(t.shouldUnregister||o.shouldUnregister)&&!(Ys(d.array,n)&&l.action)&&d.unMount.add(n)}}},Le=()=>t.shouldFocusError&&Fe(s,pe,d.mount),Gt=n=>{ae(n)&&(g.state.next({disabled:n}),Fe(s,(o,u)=>{const m=y(s,u);m&&(o.disabled=m._f.disabled||n,Array.isArray(m._f.refs)&&m._f.refs.forEach(h=>{h.disabled=m._f.disabled||n}))},0,!1))},it=(n,o)=>async u=>{let m;u&&(u.preventDefault&&u.preventDefault(),u.persist&&u.persist());let h=q(i);if(g.state.next({isSubmitting:!0}),t.resolver){const{errors:f,values:b}=await Z();A(),r.errors=f,h=q(b)}else await H(s);if(d.disabled.size)for(const f of d.disabled)L(h,f);if(L(r.errors,"root"),Q(r.errors)){g.state.next({errors:{}});try{await n(h,u)}catch(f){m=f}}else o&&await o({...r.errors},u),Le(),setTimeout(Le);if(g.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Q(r.errors)&&!m,submitCount:r.submitCount+1,errors:r.errors}),m)throw m},Jt=(n,o={})=>{y(s,n)&&(W(o.defaultValue)?F(n,q(y(a,n))):(F(n,o.defaultValue),C(a,n,q(o.defaultValue))),o.keepTouched||L(r.touchedFields,n),o.keepDirty||(L(r.dirtyFields,n),r.isDirty=o.defaultValue?j(n,q(y(a,n))):j()),o.keepError||(L(r.errors,n),k.isValid&&R()),g.state.next({...r}))},ot=(n,o={})=>{const u=n?q(n):a,m=q(u),h=Q(n),f=h?a:m;if(o.keepDefaultValues||(a=u),!o.keepValues){if(o.keepDirtyValues){const b=new Set([...d.mount,...Object.keys(be(a,i))]);for(const S of Array.from(b))y(r.dirtyFields,S)?C(f,S,y(i,S)):F(S,y(f,S))}else{if(Ge&&W(n))for(const b of d.mount){const S=y(s,b);if(S&&S._f){const V=Array.isArray(S._f.refs)?S._f.refs[0]:S._f.ref;if(Ve(V)){const ee=V.closest("form");if(ee){ee.reset();break}}}}if(o.keepFieldsRef)for(const b of d.mount)F(b,y(f,b));else s={}}i=t.shouldUnregister?o.keepDefaultValues?q(a):{}:q(f),g.array.next({values:{...f}}),g.state.next({values:{...f}})}d={mount:o.keepDirtyValues?d.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!k.isValid||!!o.keepIsValid||!!o.keepDirtyValues||!t.shouldUnregister&&!Q(f),l.watch=!!t.shouldUnregister,l.keepIsValid=!!o.keepIsValid,l.action=!1,o.keepErrors||(r.errors={}),g.state.next({submitCount:o.keepSubmitCount?r.submitCount:0,isDirty:h?!1:o.keepDirty?r.isDirty:!!(o.keepDefaultValues&&!de(n,a)),isSubmitted:o.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:h?{}:o.keepDirtyValues?o.keepDefaultValues&&i?be(a,i):r.dirtyFields:o.keepDefaultValues&&n?be(a,n):o.keepDirty?r.dirtyFields:{},touchedFields:o.keepTouched?r.touchedFields:{},errors:o.keepErrors?r.errors:{},isSubmitSuccessful:o.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:a})},ct=(n,o)=>ot(re(n)?n(i):n,{...t.resetOptions,...o}),Kt=(n,o={})=>{const u=y(s,n),m=u&&u._f;if(m){const h=m.refs?m.refs[0]:m.ref;h.focus&&setTimeout(()=>{h.focus(),o.shouldSelect&&re(h.select)&&h.select()})}},Zt=n=>{r={...r,...n}},lt={control:{register:Ie,unregister:We,getFieldState:rt,handleSubmit:it,setError:st,_subscribe:nt,_runSchema:Z,_updateIsValidating:A,_focusError:Le,_getWatch:x,_getDirty:j,_setValid:R,_setFieldArray:M,_setDisabledField:at,_setErrors:$,_getFieldArray:P,_reset:ot,_resetDefaultValues:()=>re(t.defaultValues)&&t.defaultValues().then(n=>{ct(n,t.resetOptions),g.state.next({isLoading:!1})}),_removeUnmounted:G,_disableForm:Gt,_subjects:g,_proxyFormState:k,get _fields(){return s},get _formValues(){return i},get _state(){return l},set _state(n){l=n},get _defaultValues(){return a},get _names(){return d},set _names(n){d=n},get _formState(){return r},get _options(){return t},set _options(n){t={...t,...n}}},subscribe:Xt,trigger:ke,register:Ie,handleSubmit:it,watch:zt,setValue:F,getValues:tt,reset:ct,resetField:Jt,clearErrors:Qt,unregister:We,setError:st,setFocus:Kt,getFieldState:rt};return{...lt,formControl:lt}}function cn(e={}){const t=J.useRef(void 0),r=J.useRef(void 0),[s,a]=J.useState({isDirty:!1,isValidating:!1,isLoading:re(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:re(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:s},e.defaultValues&&!re(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:l,...d}=on(e);t.current={...d,formState:s}}const i=t.current.control;return i._options=e,Bs(()=>{const l=i._subscribe({formState:i._proxyFormState,callback:()=>a({...i._formState}),reRenderRoot:!0});return a(d=>({...d,isReady:!0})),i._formState.isReady=!0,l},[i]),J.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),J.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),J.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),J.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),J.useEffect(()=>{if(i._proxyFormState.isDirty){const l=i._getDirty();l!==s.isDirty&&i._subjects.state.next({isDirty:l})}},[i,s.isDirty]),J.useEffect(()=>{var l;e.values&&!de(e.values,r.current)?(i._reset(e.values,{keepFieldsRef:!0,...i._options.resetOptions}),!((l=i._options.resetOptions)===null||l===void 0)&&l.keepIsValid||i._setValid(),r.current=e.values,a(d=>({...d}))):i._resetDefaultValues()},[i,e.values]),J.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=Us(s,i),t.current}const $t=({defaultDate:e=null,trade:t=null,tags:r=[],onClose:s})=>{const{showToast:a}=Pt(),i=cr(),l=lr(),d=Xe(p=>p.settings.currency),v=!!t,D=new Date,_=e||D.toISOString().split("T")[0],k=D.toTimeString().slice(0,5),T={tagId:"default",name:"Trade",color:"#3b82f6",emoji:"ðŸ“Š"},g=r.length>0?r:[T],{register:w,handleSubmit:N,watch:R,setValue:A,formState:{errors:M}}=cn({defaultValues:{date:(t==null?void 0:t.date)||_,time:(t==null?void 0:t.time)||k,amount:(t==null?void 0:t.amount)||"",tagId:(t==null?void 0:t.tagId)||g[0].tagId,notes:(t==null?void 0:t.notes)||""}}),[B,$]=fe.useState(null),[E,ne]=fe.useState(t!=null&&t.driveImageId?Be.getImageUrl(t.driveImageId):null),[ie,Z]=fe.useState(!1),te=R("amount"),H=R("tagId"),G=g.find(p=>p.tagId===H)||g[0],j=p=>{A("amount",p)},x=p=>{var z;const F=(z=p.target.files)==null?void 0:z[0];if(F){if(!F.type.startsWith("image/")){a("Please select an image file","error");return}if(F.size>10*1024*1024){a("Image too large (max 10MB)","error");return}$(F),ne(URL.createObjectURL(F))}},P=()=>{$(null),ne(null)},I=async p=>{if(!p.amount||p.amount===0){a("Please enter an amount","error");return}try{Z(!0);const F=g.find(z=>z.tagId===p.tagId)||g[0];if(v)await l.mutateAsync({tradeId:t.tradeId,updates:{date:p.date,time:p.time,amount:parseFloat(p.amount),tagId:F.tagId,tagName:F.name,tagColor:F.color,tagEmoji:F.emoji,screenshot:B,notes:p.notes}});else{const z={tradeId:xr(),date:p.date,time:p.time,amount:parseFloat(p.amount),tagId:F.tagId,tagName:F.name,tagColor:F.color,tagEmoji:F.emoji,screenshot:B,notes:p.notes};await i.mutateAsync(z)}a(v?"Trade updated":"Trade added","success"),s()}catch(F){console.error("Failed to save trade:",F),a("Failed to save trade","error")}finally{Z(!1)}};return c.jsx(Qe,{isOpen:!0,onClose:s,title:v?"Edit Trade":"Add Trade",size:"lg",children:c.jsxs("form",{onSubmit:N(I),className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Date"}),c.jsx("input",{type:"date",...w("date",{required:!0}),className:"input"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Time"}),c.jsx("input",{type:"time",...w("time",{required:!0}),className:"input"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Amount"}),c.jsxs("div",{className:"relative",children:[c.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-2xl font-bold text-text-tertiary",children:d}),c.jsx("input",{type:"number",step:"0.01",...w("amount",{required:!0,valueAsNumber:!0}),className:`
                input pl-12 text-3xl font-bold text-center
                ${te>0?"text-profit":te<0?"text-loss":""}
              `,placeholder:"0.00"})]}),c.jsx("div",{className:"flex gap-2 mt-2",children:sr.map(p=>c.jsxs("button",{type:"button",onClick:()=>j(p),className:`
                  flex-1 py-2 px-3 rounded-md text-sm font-medium
                  transition-colors
                  ${p>0?"bg-profit/10 text-profit hover:bg-profit/20":"bg-loss/10 text-loss hover:bg-loss/20"}
                `,children:[p>0?"+":"",p]},p))})]}),c.jsxs("div",{className:"relative z-20",children:[c.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Strategy Tag ",r.length===0&&c.jsx("span",{className:"text-text-tertiary text-xs",children:"(Create custom tags in Tags section)"})]}),c.jsx("select",{...w("tagId"),className:"input w-full relative z-20",children:g.map(p=>c.jsxs("option",{value:p.tagId,children:[p.emoji," ",p.name]},p.tagId))}),G&&c.jsxs("div",{className:"mt-2 p-3 rounded-md text-sm",style:{backgroundColor:`${G.color}20`,color:G.color},children:[c.jsx("span",{className:"text-xl mr-2",children:G.emoji}),c.jsx("span",{className:"font-medium",children:G.name})]})]}),c.jsxs("div",{className:"relative z-10",children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Notes (optional)"}),c.jsx("textarea",{...w("notes"),rows:3,className:"input resize-none w-full",placeholder:"What happened? What did you learn?"})]}),c.jsxs("div",{className:"relative z-0",children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Screenshot (optional)"}),E?c.jsxs("div",{className:"relative",children:[c.jsx("img",{src:E,alt:"Screenshot preview",className:"w-full h-48 object-cover rounded-lg"}),c.jsx("button",{type:"button",onClick:P,className:"absolute top-2 right-2 p-2 bg-black/50 rounded-full hover:bg-black/70 transition-colors",children:c.jsx(nr,{size:20,className:"text-white"})})]}):c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsxs("label",{className:"cursor-pointer",children:[c.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:x,className:"hidden"}),c.jsxs("div",{className:"card border-2 border-dashed border-border hover:border-accent transition-colors text-center py-8",children:[c.jsx(kr,{size:32,className:"mx-auto mb-2 text-text-secondary"}),c.jsx("div",{className:"text-sm text-text-secondary",children:"Take Photo"})]})]}),c.jsxs("label",{className:"cursor-pointer",children:[c.jsx("input",{type:"file",accept:"image/*",onChange:x,className:"hidden"}),c.jsxs("div",{className:"card border-2 border-dashed border-border hover:border-accent transition-colors text-center py-8",children:[c.jsx(Mr,{size:32,className:"mx-auto mb-2 text-text-secondary"}),c.jsx("div",{className:"text-sm text-text-secondary",children:"Upload"})]})]})]})]}),c.jsxs("div",{className:"flex gap-3 pt-4 border-t border-border",children:[c.jsx(ve,{type:"button",variant:"secondary",onClick:s,className:"flex-1",disabled:ie,children:"Cancel"}),c.jsx(ve,{type:"submit",className:"flex-1",loading:ie,children:v?"Update Trade":"Save Trade"})]})]})})},ln=({date:e,trades:t,onClose:r,onAddTrade:s,tags:a=[]})=>{const{showToast:i}=Pt(),l=ur(),d=Xe(w=>w.settings.currency),[v,D]=fe.useState(null),_=t.reduce((w,N)=>w+N.amount,0),k=async w=>{if(confirm("Delete this trade?"))try{await l.mutateAsync(w),i("Trade deleted","success"),t.length===1&&r()}catch{i("Failed to delete trade","error")}},T=w=>{D(w)},g=()=>{D(null)};return c.jsxs(c.Fragment,{children:[c.jsx(Qe,{isOpen:!0,onClose:r,title:c.jsxs("div",{children:[c.jsx("div",{className:"text-xl font-bold",children:me(new Date(e),"EEEE, MMMM d, yyyy")}),c.jsx("div",{className:`text-2xl font-bold mt-1 ${_>=0?"text-profit":"text-loss"}`,children:ze(_,d)}),c.jsxs("div",{className:"text-sm text-text-secondary mt-1",children:[t.length," trade",t.length!==1?"s":""]})]}),children:c.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:t.length===0?c.jsxs("div",{className:"text-center py-8",children:[c.jsx("p",{className:"text-text-secondary mb-4",children:"No trades on this day"}),c.jsx(ve,{onClick:s,children:"Add Trade"})]}):c.jsxs(c.Fragment,{children:[t.map(w=>c.jsx(un,{trade:w,currency:d,onDelete:k,onEdit:T},w.tradeId)),c.jsx(ve,{onClick:s,variant:"secondary",className:"w-full",children:"+ Add Another Trade"})]})})}),v&&c.jsx($t,{trade:v,defaultDate:e,tags:a,onClose:g})]})},un=({trade:e,currency:t,onDelete:r,onEdit:s})=>{const[a,i]=fe.useState(!1);return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"card border-l-4",style:{borderLeftColor:e.tagColor},children:[c.jsxs("div",{className:"flex items-start justify-between mb-2",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:`text-2xl font-bold mb-1 ${e.amount>=0?"text-profit":"text-loss"}`,children:ze(e.amount,t)}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xl",children:e.tagEmoji}),c.jsx("span",{className:"text-sm font-medium",style:{color:e.tagColor},children:e.tagName})]})]}),c.jsx("div",{className:"text-sm text-text-tertiary",children:e.time})]}),e.driveImageId&&c.jsxs("button",{onClick:()=>i(!0),className:"w-full h-32 rounded-lg overflow-hidden bg-surface-hover mb-2 relative group",children:[c.jsx("img",{src:Be.getImageUrl(e.driveImageId),alt:"Trade screenshot",className:"w-full h-full object-cover"}),c.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:c.jsx(Fr,{size:32,className:"text-white"})})]}),e.notes&&c.jsx("p",{className:"text-sm text-text-secondary mb-3 p-2 bg-surface rounded",children:e.notes}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs(ve,{variant:"ghost",size:"sm",onClick:()=>s(e),className:"flex-1 text-text-secondary hover:text-accent",children:[c.jsx(hr,{size:16,className:"mr-1"}),"Edit"]}),c.jsxs(ve,{variant:"ghost",size:"sm",onClick:()=>r(e.tradeId),className:"flex-1 text-text-secondary hover:text-loss",children:[c.jsx(mr,{size:16,className:"mr-1"}),"Delete"]})]})]}),a&&c.jsx(Qe,{isOpen:!0,onClose:()=>i(!1),size:"lg",children:c.jsx("img",{src:Be.getImageUrl(e.driveImageId),alt:"Trade screenshot",className:"w-full h-auto rounded-lg"})})]})},pn=()=>{const{year:e,month:t}=ar(),r=ir(),s=new Date,a=e?parseInt(e):s.getFullYear(),i=t?parseInt(t):s.getMonth(),l=new Date(a,i),[d,v]=fe.useState(null),[D,_]=fe.useState(!1),[k,T]=fe.useState("calendar"),g=Xe(x=>x.settings.currency),{data:w=[],isLoading:N}=dr(a,i),{data:R=[]}=yr(),A=br(w),M=vr(w),B=wr(w),$=Cr(l),E=Vr(l),ne=Er({start:$,end:E}),ie=Cs($),Z=Array(ie).fill(null),te=()=>{const x=As(l);r(`/month/${x.getFullYear()}/${x.getMonth()}`)},H=()=>{const x=Ct(l,1);r(`/month/${x.getFullYear()}/${x.getMonth()}`)},G=x=>{mt(x)||v(me(x,"yyyy-MM-dd"))},j=()=>{_(!0)};return N?c.jsxs(c.Fragment,{children:[c.jsx(ft,{title:"Loading..."}),c.jsx("div",{className:"p-4",children:c.jsx(or,{type:"spinner"})})]}):c.jsxs(c.Fragment,{children:[c.jsx(ft,{title:me(l,"MMMM yyyy"),showBack:!0,actions:c.jsx("button",{onClick:()=>T(k==="calendar"?"list":"calendar"),className:"p-2 hover:bg-surface rounded-lg transition-colors",title:k==="calendar"?"List view":"Calendar view",children:c.jsx(Nr,{size:20,className:"text-text-secondary"})})}),c.jsxs("div",{className:"p-4 max-w-7xl mx-auto space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("button",{onClick:te,className:"p-2 hover:bg-surface rounded-lg transition-colors",children:c.jsx(jr,{size:24,className:"text-text-secondary"})}),c.jsx("h2",{className:"text-xl font-semibold",children:me(l,"MMMM yyyy")}),c.jsx("button",{onClick:H,className:"p-2 hover:bg-surface rounded-lg transition-colors",children:c.jsx(Dr,{size:24,className:"text-text-secondary"})})]}),c.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[c.jsx(_e,{label:"P&L",value:Et(A.totalPL,g),color:A.totalPL>=0?"profit":"loss"}),c.jsx(_e,{label:"Trades",value:A.tradeCount}),c.jsx(_e,{label:"Win Rate",value:`${A.winRate}%`,color:A.winRate>=50?"profit":"loss"}),c.jsx(_e,{label:"W/L",value:`${A.winCount}/${A.lossCount}`})]}),k==="calendar"?c.jsxs("div",{className:"card",children:[c.jsx("div",{className:"grid grid-cols-7 gap-2 mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(x=>c.jsx("div",{className:"text-center text-sm font-medium text-text-secondary py-2",children:x},x))}),c.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[Z.map((x,P)=>c.jsx("div",{className:"aspect-square"},`empty-${P}`)),ne.map(x=>{const P=me(x,"yyyy-MM-dd"),I=M[P]||0,p=B[P]||[],F=mt(x),z=pr(x,new Date);return c.jsx(dn,{date:x,pl:I,tradeCount:p.length,isWeekend:F,isToday:z,currency:g,onClick:()=>G(x)},P)})]})]}):c.jsx(fn,{trades:w,groupedTrades:B,currency:g,onDayClick:G})]}),c.jsx(Ws,{onClick:j}),d&&c.jsx(ln,{date:d,trades:B[d]||[],tags:R,onClose:()=>v(null),onAddTrade:j}),D&&c.jsx($t,{defaultDate:d,tags:R,onClose:()=>_(!1)})]})},_e=({label:e,value:t,color:r="default"})=>{const s={profit:"text-profit",loss:"text-loss",default:"text-text-primary"};return c.jsxs("div",{className:"card text-center",children:[c.jsx("div",{className:"text-text-tertiary text-xs mb-1",children:e}),c.jsx("div",{className:`text-lg font-bold ${s[r]}`,children:t})]})},dn=({date:e,pl:t,tradeCount:r,isWeekend:s,isToday:a,currency:i,onClick:l})=>{const d=me(e,"d");if(s)return c.jsxs("div",{className:"aspect-square bg-surface/50 rounded-lg p-2 flex flex-col items-center justify-center opacity-50",children:[c.jsx("div",{className:"text-sm text-text-tertiary",children:d}),c.jsx("div",{className:"text-xs text-text-tertiary",children:"ðŸ”’"})]});const v=t>0?"bg-profit/10":t<0?"bg-loss/10":"bg-surface",D=a?"ring-2 ring-accent":"border border-border";return c.jsxs("button",{onClick:l,className:`
        aspect-square ${v} ${D} rounded-lg p-2
        hover:bg-surface-hover transition-all
        flex flex-col items-center justify-between
        relative
      `,children:[c.jsx("div",{className:"text-sm text-text-secondary",children:d}),r>0&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:`text-sm font-semibold ${t>=0?"text-profit":"text-loss"}`,children:Et(t,i)}),r>1&&c.jsx("div",{className:"absolute bottom-1 right-1 w-5 h-5 rounded-full bg-accent text-white text-xs flex items-center justify-center",children:r})]})]})},fn=({trades:e,groupedTrades:t,currency:r,onDayClick:s})=>{const a=Object.keys(t).sort().reverse();return a.length===0?c.jsx("div",{className:"card text-center py-12",children:c.jsx("p",{className:"text-text-secondary",children:"No trades this month"})}):c.jsx("div",{className:"space-y-2",children:a.map(i=>{const l=t[i],d=l.reduce((v,D)=>v+D.amount,0);return c.jsx("button",{onClick:()=>s(i),className:"card w-full text-left hover:bg-surface-hover transition-colors",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("div",{className:"font-medium",children:me(new Date(i),"EEEE, MMMM d")}),c.jsxs("div",{className:"text-sm text-text-tertiary",children:[l.length," trade",l.length!==1?"s":""]})]}),c.jsx("div",{className:`text-xl font-bold ${d>=0?"text-profit":"text-loss"}`,children:ze(d,r)})]})},i)})})};export{pn as default};
