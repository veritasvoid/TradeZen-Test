import{c as b,j as e,X as v,r as f}from"./index-D0YVPx2p.js";import{a as j}from"./useTags-C0CGZger.js";import{T as z}from"./trash-2-gdABn-7E.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=b("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=b("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]),M=({imageUrl:r,trade:t,currency:x,privacyMode:i,onClose:n})=>{const o=m=>i?"****":`${x}${Math.abs(m).toLocaleString()}`;return e.jsx("div",{className:"fixed inset-0 bg-black/95 z-[60] flex items-center justify-center p-2 sm:p-4",onClick:n,children:e.jsxs("div",{className:"relative w-full h-full max-w-6xl max-h-[90vh] flex flex-col",onClick:m=>m.stopPropagation(),children:[e.jsx("button",{onClick:n,className:"absolute top-2 right-2 sm:top-4 sm:right-4 z-10 p-2 sm:p-3 bg-black/70 hover:bg-black/90 rounded-full transition-all",children:e.jsx(v,{size:20,className:"sm:w-6 sm:h-6 text-white"})}),e.jsx("div",{className:"flex-1 flex items-center justify-center overflow-hidden rounded-lg sm:rounded-xl",children:e.jsx("img",{src:r,alt:"Trade Screenshot",className:"max-w-full max-h-full object-contain cursor-zoom-in",style:{touchAction:"pinch-zoom"}})}),e.jsxs("div",{className:"mt-3 sm:mt-4 bg-slate-900/90 backdrop-blur-sm rounded-lg sm:rounded-xl p-3 sm:p-4 border border-slate-700/50",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[t.tagEmoji&&t.tagName&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg sm:text-xl",children:t.tagEmoji}),e.jsx("span",{className:"text-xs sm:text-sm font-semibold",style:{color:t.tagColor},children:t.tagName})]}),e.jsxs("span",{className:"text-xs sm:text-sm text-slate-400",children:[new Date(t.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),t.time&&` • ${t.time}`]})]}),e.jsxs("div",{className:`text-xl sm:text-2xl font-black ${t.amount>=0?"text-emerald-400":"text-red-400"}`,children:[t.amount>=0?"+":"-",o(t.amount)]})]}),t.notes&&e.jsx("div",{className:"mt-3 pt-3 border-t border-slate-700/50",children:e.jsx("p",{className:"text-xs sm:text-sm text-slate-300 leading-relaxed",children:t.notes})})]})]})})},E=({tag:r,trades:t,scope:x,currency:i,privacyMode:n,onClose:o,onEditTrade:m,onDeleteTrade:N,onViewImage:w})=>{const[u,y]=f.useState("latest"),[d,k]=f.useState("all"),g=t.reduce((s,l)=>s+l.amount,0),c=t.filter(s=>s.amount>0),h=t.filter(s=>s.amount<0),L=t.length>0?Math.round(c.length/t.length*100):0,S=c.length>0?c.reduce((s,l)=>s+l.amount,0)/c.length:0,C=h.length>0?h.reduce((s,l)=>s+l.amount,0)/h.length:0;let a=[...t];d==="winners"&&(a=a.filter(s=>s.amount>0)),d==="losers"&&(a=a.filter(s=>s.amount<0)),a.sort((s,l)=>{switch(u){case"latest":return new Date(l.date)-new Date(s.date);case"oldest":return new Date(s.date)-new Date(l.date);case"highest":return l.amount-s.amount;case"lowest":return s.amount-l.amount;default:return 0}});const p=s=>n?"****":`${i}${Math.abs(s).toLocaleString()}`;return e.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-2 sm:p-4",children:e.jsxs("div",{className:"bg-slate-900 rounded-xl sm:rounded-2xl border border-slate-700 w-full max-w-xs sm:max-w-md lg:max-w-3xl max-h-[95vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"p-4 sm:p-6 border-b border-slate-700/50",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3 sm:mb-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-2",children:[e.jsx("span",{className:"text-2xl sm:text-3xl",children:r.tagEmoji}),e.jsx("h2",{className:"text-lg sm:text-xl lg:text-2xl font-black truncate",style:{color:r.tagColor},children:r.tagName})]}),e.jsxs("p",{className:"text-xs sm:text-sm text-slate-400",children:[x," • ",t.length," trade",t.length!==1?"s":""]})]}),e.jsx("button",{onClick:o,className:"p-2 hover:bg-slate-800 rounded-lg transition-all flex-shrink-0",children:e.jsx(v,{size:20})})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 sm:gap-3 mb-4",children:[e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-2 sm:p-3",children:[e.jsx("div",{className:"text-[10px] sm:text-xs text-slate-400 uppercase mb-1",children:"Total P&L"}),e.jsx("div",{className:`text-sm sm:text-base lg:text-lg font-black ${g>=0?"text-emerald-400":"text-red-400"}`,children:j(g,i,n)})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-2 sm:p-3",children:[e.jsx("div",{className:"text-[10px] sm:text-xs text-slate-400 uppercase mb-1",children:"Win Rate"}),e.jsxs("div",{className:"text-sm sm:text-base lg:text-lg font-black text-slate-200",children:[L,"%"]})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-2 sm:p-3",children:[e.jsx("div",{className:"text-[10px] sm:text-xs text-slate-400 uppercase mb-1",children:"Avg Win"}),e.jsx("div",{className:"text-sm sm:text-base lg:text-lg font-black text-emerald-400",children:p(S)})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-2 sm:p-3",children:[e.jsx("div",{className:"text-[10px] sm:text-xs text-slate-400 uppercase mb-1",children:"Avg Loss"}),e.jsx("div",{className:"text-sm sm:text-base lg:text-lg font-black text-red-400",children:p(Math.abs(C))})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:[e.jsxs("select",{value:u,onChange:s=>y(s.target.value),className:"flex-1 px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-xs sm:text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"latest",children:"Latest First"}),e.jsx("option",{value:"oldest",children:"Oldest First"}),e.jsx("option",{value:"highest",children:"Highest Amount"}),e.jsx("option",{value:"lowest",children:"Lowest Amount"})]}),e.jsxs("select",{value:d,onChange:s=>k(s.target.value),className:"flex-1 px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-xs sm:text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Trades"}),e.jsx("option",{value:"winners",children:"Winners Only"}),e.jsx("option",{value:"losers",children:"Losers Only"})]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:a.length===0?e.jsx("div",{className:"text-center py-8 sm:py-12 text-slate-500 text-sm",children:"No trades match the current filter"}):e.jsx("div",{className:"space-y-2 sm:space-y-3",children:a.map(s=>e.jsx("div",{className:"bg-slate-800/50 rounded-lg p-3 sm:p-4 border border-slate-700/30 hover:border-slate-600/50 transition-all",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[e.jsxs("div",{className:"flex-shrink-0 text-[10px] sm:text-xs text-slate-400",children:[new Date(s.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:x.length===4?void 0:"numeric"}),s.time&&e.jsxs("span",{className:"hidden sm:inline",children:[" • ",s.time]})]}),s.notes&&e.jsxs("div",{className:"flex-1 min-w-0 text-xs sm:text-sm text-slate-300 truncate",children:['"',s.notes,'"']}),e.jsx("div",{className:`flex-shrink-0 text-base sm:text-lg lg:text-xl font-black ${s.amount>=0?"text-emerald-400":"text-red-400"}`,children:j(s.amount,i,n)}),e.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[e.jsx("button",{onClick:()=>m(s),className:"p-2 sm:p-2.5 bg-blue-600 hover:bg-blue-700 rounded-lg transition-all min-w-[44px] min-h-[44px] sm:min-w-0 sm:min-h-0 flex items-center justify-center",title:"Edit trade",children:e.jsx(D,{size:16,className:"sm:w-4 sm:h-4"})}),e.jsx("button",{onClick:()=>N(s.tradeId),className:"p-2 sm:p-2.5 bg-red-600 hover:bg-red-700 rounded-lg transition-all min-w-[44px] min-h-[44px] sm:min-w-0 sm:min-h-0 flex items-center justify-center",title:"Delete trade",children:e.jsx(z,{size:16,className:"sm:w-4 sm:h-4"})}),s.driveImageId&&e.jsx("button",{onClick:()=>w(s),className:"p-2 sm:p-2.5 bg-purple-600 hover:bg-purple-700 rounded-lg transition-all min-w-[44px] min-h-[44px] sm:min-w-0 sm:min-h-0 flex items-center justify-center",title:"View screenshot",children:e.jsx(A,{size:16,className:"sm:w-4 sm:h-4"})})]})]})},s.tradeId))})})]})})};export{A as C,M as I,D as S,E as T};
