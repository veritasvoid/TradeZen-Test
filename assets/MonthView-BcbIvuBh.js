import{c as de,j as c,r as ie,X as _t,R as Z,d as Pt,e as ze,Q as rr,L as sr}from"./index-BNpmeL8v.js";import{B as ke}from"./Button-awqWOie8.js";import{m as nr,a as Vt,b as ar,d as ir,g as or,e as cr,h as Et,i as lr,f as Xe}from"./useTrades-DRCCKrsh.js";import{u as Ge}from"./settingsStore-BnAD99QK.js";import{T as ur}from"./trash-2-7zL2m8ht.js";import{u as dr}from"./useTags-GezYt-yk.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=de("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=de("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=de("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=de("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gr=de("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=de("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=de("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vr=de("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=de("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);function z(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function xe(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}let pr={};function We(){return pr}function Me(e,t){var d,b,N,T;const r=We(),s=(t==null?void 0:t.weekStartsOn)??((b=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:b.weekStartsOn)??r.weekStartsOn??((T=(N=r.locale)==null?void 0:N.options)==null?void 0:T.weekStartsOn)??0,a=z(e),i=a.getDay(),u=(i<s?7:0)+i-s;return a.setDate(a.getDate()-u),a.setHours(0,0,0,0),a}function Ve(e){return Me(e,{weekStartsOn:1})}function Ct(e){const t=z(e),r=t.getFullYear(),s=xe(e,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const a=Ve(s),i=xe(e,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const u=Ve(i);return t.getTime()>=a.getTime()?r+1:t.getTime()>=u.getTime()?r:r-1}function Ee(e){const t=z(e);return t.setHours(0,0,0,0),t}function ht(e){const t=z(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function kr(e,t){const r=Ee(e),s=Ee(t),a=+r-ht(r),i=+s-ht(s);return Math.round((a-i)/nr)}function jr(e){const t=Ct(e),r=xe(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Ve(r)}function Dr(e,t){const r=Ee(e),s=Ee(t);return+r==+s}function Nr(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Fr(e){if(!Nr(e)&&typeof e!="number")return!1;const t=z(e);return!isNaN(Number(t))}function Sr(e){const t=z(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function Mr(e,t){const r=z(e.start),s=z(e.end);let a=+r>+s;const i=a?+r:+s,u=a?s:r;u.setHours(0,0,0,0);let d=1;const b=[];for(;+u<=i;)b.push(z(u)),u.setDate(u.getDate()+d),u.setHours(0,0,0,0);return a?b.reverse():b}function Tr(e){const t=z(e);return t.setDate(1),t.setHours(0,0,0,0),t}function Or(e){const t=z(e),r=xe(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}const _r={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Pr=(e,t,r)=>{let s;const a=_r[e];return typeof a=="string"?s=a:t===1?s=a.one:s=a.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};function Be(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const Vr={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Er={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Cr={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Ar={date:Be({formats:Vr,defaultWidth:"full"}),time:Be({formats:Er,defaultWidth:"full"}),dateTime:Be({formats:Cr,defaultWidth:"full"})},Wr={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Ir=(e,t,r,s)=>Wr[e];function je(e){return(t,r)=>{const s=r!=null&&r.context?String(r.context):"standalone";let a;if(s==="formatting"&&e.formattingValues){const u=e.defaultFormattingWidth||e.defaultWidth,d=r!=null&&r.width?String(r.width):u;a=e.formattingValues[d]||e.formattingValues[u]}else{const u=e.defaultWidth,d=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[d]||e.values[u]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const Lr={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Yr={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Rr={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},qr={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Ur={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Br={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Hr=(e,t)=>{const r=Number(e),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},zr={ordinalNumber:Hr,era:je({values:Lr,defaultWidth:"wide"}),quarter:je({values:Yr,defaultWidth:"wide",argumentCallback:e=>e-1}),month:je({values:Rr,defaultWidth:"wide"}),day:je({values:qr,defaultWidth:"wide"}),dayPeriod:je({values:Ur,defaultWidth:"wide",formattingValues:Br,defaultFormattingWidth:"wide"})};function De(e){return(t,r={})=>{const s=r.width,a=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const u=i[0],d=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],b=Array.isArray(d)?Qr(d,w=>w.test(u)):$r(d,w=>w.test(u));let N;N=e.valueCallback?e.valueCallback(b):b,N=r.valueCallback?r.valueCallback(N):N;const T=t.slice(u.length);return{value:N,rest:T}}}function $r(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function Qr(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function Xr(e){return(t,r={})=>{const s=t.match(e.matchPattern);if(!s)return null;const a=s[0],i=t.match(e.parsePattern);if(!i)return null;let u=e.valueCallback?e.valueCallback(i[0]):i[0];u=r.valueCallback?r.valueCallback(u):u;const d=t.slice(a.length);return{value:u,rest:d}}}const Gr=/^(\d+)(th|st|nd|rd)?/i,Jr=/\d+/i,Kr={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Zr={any:[/^b/i,/^(a|c)/i]},es={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},ts={any:[/1/i,/2/i,/3/i,/4/i]},rs={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},ss={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},ns={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},as={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},is={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},os={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},cs={ordinalNumber:Xr({matchPattern:Gr,parsePattern:Jr,valueCallback:e=>parseInt(e,10)}),era:De({matchPatterns:Kr,defaultMatchWidth:"wide",parsePatterns:Zr,defaultParseWidth:"any"}),quarter:De({matchPatterns:es,defaultMatchWidth:"wide",parsePatterns:ts,defaultParseWidth:"any",valueCallback:e=>e+1}),month:De({matchPatterns:rs,defaultMatchWidth:"wide",parsePatterns:ss,defaultParseWidth:"any"}),day:De({matchPatterns:ns,defaultMatchWidth:"wide",parsePatterns:as,defaultParseWidth:"any"}),dayPeriod:De({matchPatterns:is,defaultMatchWidth:"any",parsePatterns:os,defaultParseWidth:"any"})},ls={code:"en-US",formatDistance:Pr,formatLong:Ar,formatRelative:Ir,localize:zr,match:cs,options:{weekStartsOn:0,firstWeekContainsDate:1}};function us(e){const t=z(e);return kr(t,Or(t))+1}function ds(e){const t=z(e),r=+Ve(t)-+jr(t);return Math.round(r/Vt)+1}function At(e,t){var T,w,O,v;const r=z(e),s=r.getFullYear(),a=We(),i=(t==null?void 0:t.firstWeekContainsDate)??((w=(T=t==null?void 0:t.locale)==null?void 0:T.options)==null?void 0:w.firstWeekContainsDate)??a.firstWeekContainsDate??((v=(O=a.locale)==null?void 0:O.options)==null?void 0:v.firstWeekContainsDate)??1,u=xe(e,0);u.setFullYear(s+1,0,i),u.setHours(0,0,0,0);const d=Me(u,t),b=xe(e,0);b.setFullYear(s,0,i),b.setHours(0,0,0,0);const N=Me(b,t);return r.getTime()>=d.getTime()?s+1:r.getTime()>=N.getTime()?s:s-1}function fs(e,t){var d,b,N,T;const r=We(),s=(t==null?void 0:t.firstWeekContainsDate)??((b=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:b.firstWeekContainsDate)??r.firstWeekContainsDate??((T=(N=r.locale)==null?void 0:N.options)==null?void 0:T.firstWeekContainsDate)??1,a=At(e,t),i=xe(e,0);return i.setFullYear(a,0,s),i.setHours(0,0,0,0),Me(i,t)}function hs(e,t){const r=z(e),s=+Me(r,t)-+fs(r,t);return Math.round(s/Vt)+1}function P(e,t){const r=e<0?"-":"",s=Math.abs(e).toString().padStart(t,"0");return r+s}const he={y(e,t){const r=e.getFullYear(),s=r>0?r:1-r;return P(t==="yy"?s%100:s,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):P(r+1,2)},d(e,t){return P(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return P(e.getHours()%12||12,t.length)},H(e,t){return P(e.getHours(),t.length)},m(e,t){return P(e.getMinutes(),t.length)},s(e,t){return P(e.getSeconds(),t.length)},S(e,t){const r=t.length,s=e.getMilliseconds(),a=Math.trunc(s*Math.pow(10,r-3));return P(a,t.length)}},be={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},mt={G:function(e,t,r){const s=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});case"GGGG":default:return r.era(s,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const s=e.getFullYear(),a=s>0?s:1-s;return r.ordinalNumber(a,{unit:"year"})}return he.y(e,t)},Y:function(e,t,r,s){const a=At(e,s),i=a>0?a:1-a;if(t==="YY"){const u=i%100;return P(u,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):P(i,t.length)},R:function(e,t){const r=Ct(e);return P(r,t.length)},u:function(e,t){const r=e.getFullYear();return P(r,t.length)},Q:function(e,t,r){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(s);case"QQ":return P(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,t,r){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(s);case"qq":return P(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,t,r){const s=e.getMonth();switch(t){case"M":case"MM":return he.M(e,t);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(e,t,r){const s=e.getMonth();switch(t){case"L":return String(s+1);case"LL":return P(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(e,t,r,s){const a=hs(e,s);return t==="wo"?r.ordinalNumber(a,{unit:"week"}):P(a,t.length)},I:function(e,t,r){const s=ds(e);return t==="Io"?r.ordinalNumber(s,{unit:"week"}):P(s,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):he.d(e,t)},D:function(e,t,r){const s=us(e);return t==="Do"?r.ordinalNumber(s,{unit:"dayOfYear"}):P(s,t.length)},E:function(e,t,r){const s=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});case"EEEE":default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(e,t,r,s){const a=e.getDay(),i=(a-s.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return P(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,s){const a=e.getDay(),i=(a-s.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return P(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const s=e.getDay(),a=s===0?7:s;switch(t){case"i":return String(a);case"ii":return P(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});case"iiii":default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(e,t,r){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){const s=e.getHours();let a;switch(s===12?a=be.noon:s===0?a=be.midnight:a=s/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const s=e.getHours();let a;switch(s>=17?a=be.evening:s>=12?a=be.afternoon:s>=4?a=be.morning:a=be.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let s=e.getHours()%12;return s===0&&(s=12),r.ordinalNumber(s,{unit:"hour"})}return he.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):he.H(e,t)},K:function(e,t,r){const s=e.getHours()%12;return t==="Ko"?r.ordinalNumber(s,{unit:"hour"}):P(s,t.length)},k:function(e,t,r){let s=e.getHours();return s===0&&(s=24),t==="ko"?r.ordinalNumber(s,{unit:"hour"}):P(s,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):he.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):he.s(e,t)},S:function(e,t){return he.S(e,t)},X:function(e,t,r){const s=e.getTimezoneOffset();if(s===0)return"Z";switch(t){case"X":return gt(s);case"XXXX":case"XX":return ye(s);case"XXXXX":case"XXX":default:return ye(s,":")}},x:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"x":return gt(s);case"xxxx":case"xx":return ye(s);case"xxxxx":case"xxx":default:return ye(s,":")}},O:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+yt(s,":");case"OOOO":default:return"GMT"+ye(s,":")}},z:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+yt(s,":");case"zzzz":default:return"GMT"+ye(s,":")}},t:function(e,t,r){const s=Math.trunc(e.getTime()/1e3);return P(s,t.length)},T:function(e,t,r){const s=e.getTime();return P(s,t.length)}};function yt(e,t=""){const r=e>0?"-":"+",s=Math.abs(e),a=Math.trunc(s/60),i=s%60;return i===0?r+String(a):r+String(a)+t+P(i,2)}function gt(e,t){return e%60===0?(e>0?"-":"+")+P(Math.abs(e)/60,2):ye(e,t)}function ye(e,t=""){const r=e>0?"-":"+",s=Math.abs(e),a=P(Math.trunc(s/60),2),i=P(s%60,2);return r+a+t+i}const xt=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Wt=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},ms=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],s=r[1],a=r[2];if(!a)return xt(e,t);let i;switch(s){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",xt(s,t)).replace("{{time}}",Wt(a,t))},ys={p:Wt,P:ms},gs=/^D+$/,xs=/^Y+$/,bs=["D","DD","YY","YYYY"];function vs(e){return gs.test(e)}function ws(e){return xs.test(e)}function ps(e,t,r){const s=ks(e,t,r);if(console.warn(s),bs.includes(e))throw new RangeError(s)}function ks(e,t,r){const s=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${s} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const js=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ds=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ns=/^'([^]*?)'?$/,Fs=/''/g,Ss=/[a-zA-Z]/;function pe(e,t,r){var T,w,O,v;const s=We(),a=s.locale??ls,i=s.firstWeekContainsDate??((w=(T=s.locale)==null?void 0:T.options)==null?void 0:w.firstWeekContainsDate)??1,u=s.weekStartsOn??((v=(O=s.locale)==null?void 0:O.options)==null?void 0:v.weekStartsOn)??0,d=z(e);if(!Fr(d))throw new RangeError("Invalid time value");let b=t.match(Ds).map(p=>{const S=p[0];if(S==="p"||S==="P"){const Y=ys[S];return Y(p,a.formatLong)}return p}).join("").match(js).map(p=>{if(p==="''")return{isToken:!1,value:"'"};const S=p[0];if(S==="'")return{isToken:!1,value:Ms(p)};if(mt[S])return{isToken:!0,value:p};if(S.match(Ss))throw new RangeError("Format string contains an unescaped latin alphabet character `"+S+"`");return{isToken:!1,value:p}});a.localize.preprocessor&&(b=a.localize.preprocessor(d,b));const N={firstWeekContainsDate:i,weekStartsOn:u,locale:a};return b.map(p=>{if(!p.isToken)return p.value;const S=p.value;(ws(S)||vs(S))&&ps(S,t,String(e));const Y=mt[S[0]];return Y(d,S,a.localize,N)}).join("")}function Ms(e){const t=e.match(Ns);return t?t[1].replace(Fs,"'"):e}function bt(e){return z(e).getDay()}const Ts=({onClick:e,icon:t=xr,label:r="Add"})=>c.jsx("button",{onClick:e,className:"fixed bottom-6 right-6 z-30 w-14 h-14 bg-accent hover:bg-accent-hover text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-200 flex items-center justify-center active:scale-95","aria-label":r,children:c.jsx(t,{size:24})}),Je=({isOpen:e,onClose:t,title:r,children:s,showCloseButton:a=!0,size:i="md"})=>{if(ie.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),!e)return null;const u=b=>{b.target===b.currentTarget&&t()},d={sm:"max-w-md",md:"max-w-2xl",lg:"max-w-4xl",full:"max-w-6xl"};return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"modal-backdrop animate-fade-in",onClick:u}),c.jsxs("div",{className:`modal-content ${d[i]} w-full`,children:[(r||a)&&c.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-border",children:[r&&c.jsx("h2",{className:"text-xl font-semibold text-text-primary",children:r}),a&&c.jsx("button",{onClick:t,className:"p-2 hover:bg-surface-hover rounded-lg transition-colors",children:c.jsx(_t,{size:20,className:"text-text-secondary"})})]}),c.jsx("div",{className:"p-6",children:s})]})]})};var Te=e=>e.type==="checkbox",ge=e=>e instanceof Date,K=e=>e==null;const It=e=>typeof e=="object";var L=e=>!K(e)&&!Array.isArray(e)&&It(e)&&!ge(e),Os=e=>L(e)&&e.target?Te(e.target)?e.target.checked:e.target.value:e,_s=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Ps=(e,t)=>e.has(_s(t)),Vs=e=>{const t=e.constructor&&e.constructor.prototype;return L(t)&&t.hasOwnProperty("isPrototypeOf")},Ke=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function U(e){if(e instanceof Date)return new Date(e);const t=typeof FileList<"u"&&e instanceof FileList;if(Ke&&(e instanceof Blob||t))return e;const r=Array.isArray(e);if(!r&&!(L(e)&&Vs(e)))return e;const s=r?[]:Object.create(Object.getPrototypeOf(e));for(const a in e)Object.prototype.hasOwnProperty.call(e,a)&&(s[a]=U(e[a]));return s}var Ie=e=>/^\w*$/.test(e),A=e=>e===void 0,Ze=e=>Array.isArray(e)?e.filter(Boolean):[],et=e=>Ze(e.replace(/["|']|\]/g,"").split(/\.|\[/)),y=(e,t,r)=>{if(!t||!L(e))return r;const s=(Ie(t)?[t]:et(t)).reduce((a,i)=>K(a)?a:a[i],e);return A(s)||s===e?A(e[t])?r:e[t]:s},ce=e=>typeof e=="boolean",ne=e=>typeof e=="function",C=(e,t,r)=>{let s=-1;const a=Ie(t)?[t]:et(t),i=a.length,u=i-1;for(;++s<i;){const d=a[s];let b=r;if(s!==u){const N=e[d];b=L(N)||Array.isArray(N)?N:isNaN(+a[s+1])?{}:[]}if(d==="__proto__"||d==="constructor"||d==="prototype")return;e[d]=b,e=e[d]}};const vt={BLUR:"blur",FOCUS_OUT:"focusout"},ae={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ue={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Es=Z.createContext(null);Es.displayName="HookFormContext";var Cs=(e,t,r,s=!0)=>{const a={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(a,i,{get:()=>{const u=i;return t._proxyFormState[u]!==ae.all&&(t._proxyFormState[u]=!s||ae.all),e[u]}});return a};const As=typeof window<"u"?Z.useLayoutEffect:Z.useEffect;var ee=e=>typeof e=="string",Ws=(e,t,r,s,a)=>ee(e)?(s&&t.watch.add(e),y(r,e,a)):Array.isArray(e)?e.map(i=>(s&&t.watch.add(i),y(r,i))):(s&&(t.watchAll=!0),r),$e=e=>K(e)||!It(e);function me(e,t,r=new WeakSet){if($e(e)||$e(t))return Object.is(e,t);if(ge(e)&&ge(t))return e.getTime()===t.getTime();const s=Object.keys(e),a=Object.keys(t);if(s.length!==a.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const i of s){const u=e[i];if(!a.includes(i))return!1;if(i!=="ref"){const d=t[i];if(ge(u)&&ge(d)||L(u)&&L(d)||Array.isArray(u)&&Array.isArray(d)?!me(u,d,r):!Object.is(u,d))return!1}}return!0}var Is=(e,t,r,s,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[s]:a||!0}}:{},Fe=e=>Array.isArray(e)?e:[e],wt=()=>{let e=[];return{get observers(){return e},next:a=>{for(const i of e)i.next&&i.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(i=>i!==a)}}),unsubscribe:()=>{e=[]}}};function Lt(e,t){const r={};for(const s in e)if(e.hasOwnProperty(s)){const a=e[s],i=t[s];if(a&&L(a)&&i){const u=Lt(a,i);L(u)&&(r[s]=u)}else e[s]&&(r[s]=i)}return r}var X=e=>L(e)&&!Object.keys(e).length,tt=e=>e.type==="file",Ce=e=>{if(!Ke)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Yt=e=>e.type==="select-multiple",rt=e=>e.type==="radio",Ls=e=>rt(e)||Te(e),He=e=>Ce(e)&&e.isConnected;function Ys(e,t){const r=t.slice(0,-1).length;let s=0;for(;s<r;)e=A(e)?s++:e[t[s++]];return e}function Rs(e){for(const t in e)if(e.hasOwnProperty(t)&&!A(e[t]))return!1;return!0}function I(e,t){const r=Array.isArray(t)?t:Ie(t)?[t]:et(t),s=r.length===1?e:Ys(e,r),a=r.length-1,i=r[a];return s&&delete s[i],a!==0&&(L(s)&&X(s)||Array.isArray(s)&&Rs(s))&&I(e,r.slice(0,-1)),e}var qs=e=>{for(const t in e)if(ne(e[t]))return!0;return!1};function Rt(e){return Array.isArray(e)||L(e)&&!qs(e)}function Qe(e,t={}){for(const r in e){const s=e[r];Rt(s)?(t[r]=Array.isArray(s)?[]:{},Qe(s,t[r])):A(s)||(t[r]=!0)}return t}function we(e,t,r){r||(r=Qe(t));for(const s in e){const a=e[s];if(Rt(a))A(t)||$e(r[s])?r[s]=Qe(a,Array.isArray(a)?[]:{}):we(a,K(t)?{}:t[s],r[s]);else{const i=t[s];r[s]=!me(a,i)}}return r}const pt={value:!1,isValid:!1},kt={value:!0,isValid:!0};var qt=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!A(e[0].attributes.value)?A(e[0].value)||e[0].value===""?kt:{value:e[0].value,isValid:!0}:kt:pt}return pt},Ut=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:s})=>A(e)?e:t?e===""?NaN:e&&+e:r&&ee(e)?new Date(e):s?s(e):e;const jt={isValid:!1,value:null};var Bt=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,jt):jt;function Dt(e){const t=e.ref;return tt(t)?t.files:rt(t)?Bt(e.refs).value:Yt(t)?[...t.selectedOptions].map(({value:r})=>r):Te(t)?qt(e.refs).value:Ut(A(t.value)?e.ref.value:t.value,e)}var Us=(e,t,r,s)=>{const a={};for(const i of e){const u=y(t,i);u&&C(a,i,u._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:s}},Ae=e=>e instanceof RegExp,Ne=e=>A(e)?e:Ae(e)?e.source:L(e)?Ae(e.value)?e.value.source:e.value:e,Nt=e=>({isOnSubmit:!e||e===ae.onSubmit,isOnBlur:e===ae.onBlur,isOnChange:e===ae.onChange,isOnAll:e===ae.all,isOnTouch:e===ae.onTouched});const Ft="AsyncFunction";var Bs=e=>!!e&&!!e.validate&&!!(ne(e.validate)&&e.validate.constructor.name===Ft||L(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===Ft)),Hs=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),St=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(s=>e.startsWith(s)&&/^\.\w+/.test(e.slice(s.length))));const Se=(e,t,r,s)=>{for(const a of r||Object.keys(e)){const i=y(e,a);if(i){const{_f:u,...d}=i;if(u){if(u.refs&&u.refs[0]&&t(u.refs[0],a)&&!s)return!0;if(u.ref&&t(u.ref,u.name)&&!s)return!0;if(Se(d,t))break}else if(L(d)&&Se(d,t))break}}};function Mt(e,t,r){const s=y(e,r);if(s||Ie(r))return{error:s,name:r};const a=r.split(".");for(;a.length;){const i=a.join("."),u=y(t,i),d=y(e,i);if(u&&!Array.isArray(u)&&r!==i)return{name:r};if(d&&d.type)return{name:i,error:d};if(d&&d.root&&d.root.type)return{name:`${i}.root`,error:d.root};a.pop()}return{name:r}}var zs=(e,t,r,s)=>{r(e);const{name:a,...i}=e;return X(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(u=>t[u]===(!s||ae.all))},$s=(e,t,r)=>!e||!t||e===t||Fe(e).some(s=>s&&(r?s===t:s.startsWith(t)||t.startsWith(s))),Qs=(e,t,r,s,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(t||e):(r?s.isOnBlur:a.isOnBlur)?!e:(r?s.isOnChange:a.isOnChange)?e:!0,Xs=(e,t)=>!Ze(y(e,t)).length&&I(e,t),Gs=(e,t,r)=>{const s=Fe(y(e,r));return C(s,"root",t[r]),C(e,r,s),e};function Tt(e,t,r="validate"){if(ee(e)||Array.isArray(e)&&e.every(ee)||ce(e)&&!e)return{type:r,message:ee(e)?e:"",ref:t}}var ve=e=>L(e)&&!Ae(e)?e:{value:e,message:""},Ot=async(e,t,r,s,a,i)=>{const{ref:u,refs:d,required:b,maxLength:N,minLength:T,min:w,max:O,pattern:v,validate:p,name:S,valueAsNumber:Y,mount:$}=e._f,M=y(r,S);if(!$||t.has(S))return{};const Q=d?d[0]:u,G=k=>{a&&Q.reportValidity&&(Q.setCustomValidity(ce(k)?"":k||""),Q.reportValidity())},V={},oe=rt(u),J=Te(u),te=oe||J,se=(Y||tt(u))&&A(u.value)&&A(M)||Ce(u)&&u.value===""||M===""||Array.isArray(M)&&!M.length,B=Is.bind(null,S,s,V),le=(k,F,g,j=ue.maxLength,H=ue.minLength)=>{const R=k?F:g;V[S]={type:k?j:H,message:R,ref:u,...B(k?j:H,R)}};if(i?!Array.isArray(M)||!M.length:b&&(!te&&(se||K(M))||ce(M)&&!M||J&&!qt(d).isValid||oe&&!Bt(d).isValid)){const{value:k,message:F}=ee(b)?{value:!!b,message:b}:ve(b);if(k&&(V[S]={type:ue.required,message:F,ref:Q,...B(ue.required,F)},!s))return G(F),V}if(!se&&(!K(w)||!K(O))){let k,F;const g=ve(O),j=ve(w);if(!K(M)&&!isNaN(M)){const H=u.valueAsNumber||M&&+M;K(g.value)||(k=H>g.value),K(j.value)||(F=H<j.value)}else{const H=u.valueAsDate||new Date(M),R=q=>new Date(new Date().toDateString()+" "+q),D=u.type=="time",W=u.type=="week";ee(g.value)&&M&&(k=D?R(M)>R(g.value):W?M>g.value:H>new Date(g.value)),ee(j.value)&&M&&(F=D?R(M)<R(j.value):W?M<j.value:H<new Date(j.value))}if((k||F)&&(le(!!k,g.message,j.message,ue.max,ue.min),!s))return G(V[S].message),V}if((N||T)&&!se&&(ee(M)||i&&Array.isArray(M))){const k=ve(N),F=ve(T),g=!K(k.value)&&M.length>+k.value,j=!K(F.value)&&M.length<+F.value;if((g||j)&&(le(g,k.message,F.message),!s))return G(V[S].message),V}if(v&&!se&&ee(M)){const{value:k,message:F}=ve(v);if(Ae(k)&&!M.match(k)&&(V[S]={type:ue.pattern,message:F,ref:u,...B(ue.pattern,F)},!s))return G(F),V}if(p){if(ne(p)){const k=await p(M,r),F=Tt(k,Q);if(F&&(V[S]={...F,...B(ue.validate,F.message)},!s))return G(F.message),V}else if(L(p)){let k={};for(const F in p){if(!X(k)&&!s)break;const g=Tt(await p[F](M,r),Q,F);g&&(k={...g,...B(F,g.message)},G(g.message),s&&(V[S]=k))}if(!X(k)&&(V[S]={ref:Q,...k},!s))return V}}return G(!0),V};const Js={mode:ae.onSubmit,reValidateMode:ae.onChange,shouldFocusError:!0};function Ks(e={}){let t={...Js,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:ne(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},s={},a=L(t.defaultValues)||L(t.values)?U(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:U(a),u={action:!1,mount:!1,watch:!1,keepIsValid:!1},d={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},b,N=0;const T={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},w={...T};let O={...w};const v={array:wt(),state:wt()},p=t.criteriaMode===ae.all,S=n=>o=>{clearTimeout(N),N=setTimeout(n,o)},Y=async n=>{if(!u.keepIsValid&&!t.disabled&&(w.isValid||O.isValid||n)){let o;t.resolver?(o=X((await te()).errors),$()):o=await B(s,!0),o!==r.isValid&&v.state.next({isValid:o})}},$=(n,o)=>{!t.disabled&&(w.isValidating||w.validatingFields||O.isValidating||O.validatingFields)&&((n||Array.from(d.mount)).forEach(l=>{l&&(o?C(r.validatingFields,l,o):I(r.validatingFields,l))}),v.state.next({validatingFields:r.validatingFields,isValidating:!X(r.validatingFields)}))},M=(n,o=[],l,m,h=!0,f=!0)=>{if(m&&l&&!t.disabled){if(u.action=!0,f&&Array.isArray(y(s,n))){const x=l(y(s,n),m.argA,m.argB);h&&C(s,n,x)}if(f&&Array.isArray(y(r.errors,n))){const x=l(y(r.errors,n),m.argA,m.argB);h&&C(r.errors,n,x),Xs(r.errors,n)}if((w.touchedFields||O.touchedFields)&&f&&Array.isArray(y(r.touchedFields,n))){const x=l(y(r.touchedFields,n),m.argA,m.argB);h&&C(r.touchedFields,n,x)}(w.dirtyFields||O.dirtyFields)&&(r.dirtyFields=we(a,i)),v.state.next({name:n,isDirty:k(n,o),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else C(i,n,o)},Q=(n,o)=>{C(r.errors,n,o),v.state.next({errors:r.errors})},G=n=>{r.errors=n,v.state.next({errors:r.errors,isValid:!1})},V=(n,o,l,m)=>{const h=y(s,n);if(h){const f=y(i,n,A(l)?y(a,n):l);A(f)||m&&m.defaultChecked||o?C(i,n,o?f:Dt(h._f)):j(n,f),u.mount&&!u.action&&Y()}},oe=(n,o,l,m,h)=>{let f=!1,x=!1;const _={name:n};if(!t.disabled){if(!l||m){(w.isDirty||O.isDirty)&&(x=r.isDirty,r.isDirty=_.isDirty=k(),f=x!==_.isDirty);const E=me(y(a,n),o);x=!!y(r.dirtyFields,n),E?I(r.dirtyFields,n):C(r.dirtyFields,n,!0),_.dirtyFields=r.dirtyFields,f=f||(w.dirtyFields||O.dirtyFields)&&x!==!E}if(l){const E=y(r.touchedFields,n);E||(C(r.touchedFields,n,l),_.touchedFields=r.touchedFields,f=f||(w.touchedFields||O.touchedFields)&&E!==l)}f&&h&&v.state.next(_)}return f?_:{}},J=(n,o,l,m)=>{const h=y(r.errors,n),f=(w.isValid||O.isValid)&&ce(o)&&r.isValid!==o;if(t.delayError&&l?(b=S(()=>Q(n,l)),b(t.delayError)):(clearTimeout(N),b=null,l?C(r.errors,n,l):I(r.errors,n)),(l?!me(h,l):h)||!X(m)||f){const x={...m,...f&&ce(o)?{isValid:o}:{},errors:r.errors,name:n};r={...r,...x},v.state.next(x)}},te=async n=>($(n,!0),await t.resolver(i,t.context,Us(n||d.mount,s,t.criteriaMode,t.shouldUseNativeValidation))),se=async n=>{const{errors:o}=await te(n);if($(n),n)for(const l of n){const m=y(o,l);m?C(r.errors,l,m):I(r.errors,l)}else r.errors=o;return o},B=async(n,o,l={valid:!0})=>{for(const m in n){const h=n[m];if(h){const{_f:f,...x}=h;if(f){const _=d.array.has(f.name),E=h._f&&Bs(h._f);E&&w.validatingFields&&$([f.name],!0);const re=await Ot(h,d.disabled,i,p,t.shouldUseNativeValidation&&!o,_);if(E&&w.validatingFields&&$([f.name]),re[f.name]&&(l.valid=!1,o))break;!o&&(y(re,f.name)?_?Gs(r.errors,re,f.name):C(r.errors,f.name,re[f.name]):I(r.errors,f.name))}!X(x)&&await B(x,o,l)}}return l.valid},le=()=>{for(const n of d.unMount){const o=y(s,n);o&&(o._f.refs?o._f.refs.every(l=>!He(l)):!He(o._f.ref))&&Le(n)}d.unMount=new Set},k=(n,o)=>!t.disabled&&(n&&o&&C(i,n,o),!me(Oe(),a)),F=(n,o,l)=>Ws(n,d,{...u.mount?i:A(o)?a:ee(n)?{[n]:o}:o},l,o),g=n=>Ze(y(u.mount?i:a,n,t.shouldUnregister?y(a,n,[]):[])),j=(n,o,l={})=>{const m=y(s,n);let h=o;if(m){const f=m._f;f&&(!f.disabled&&C(i,n,Ut(o,f)),h=Ce(f.ref)&&K(o)?"":o,Yt(f.ref)?[...f.ref.options].forEach(x=>x.selected=h.includes(x.value)):f.refs?Te(f.ref)?f.refs.forEach(x=>{(!x.defaultChecked||!x.disabled)&&(Array.isArray(h)?x.checked=!!h.find(_=>_===x.value):x.checked=h===x.value||!!h)}):f.refs.forEach(x=>x.checked=x.value===h):tt(f.ref)?f.ref.value="":(f.ref.value=h,f.ref.type||v.state.next({name:n,values:U(i)})))}(l.shouldDirty||l.shouldTouch)&&oe(n,h,l.shouldTouch,l.shouldDirty,!0),l.shouldValidate&&q(n)},H=(n,o,l)=>{for(const m in o){if(!o.hasOwnProperty(m))return;const h=o[m],f=n+"."+m,x=y(s,f);(d.array.has(n)||L(h)||x&&!x._f)&&!ge(h)?H(f,h,l):j(f,h,l)}},R=(n,o,l={})=>{const m=y(s,n),h=d.array.has(n),f=U(o);C(i,n,f),h?(v.array.next({name:n,values:U(i)}),(w.isDirty||w.dirtyFields||O.isDirty||O.dirtyFields)&&l.shouldDirty&&v.state.next({name:n,dirtyFields:we(a,i),isDirty:k(n,f)})):m&&!m._f&&!K(f)?H(n,f,l):j(n,f,l),St(n,d)&&v.state.next({...r,name:n}),v.state.next({name:u.mount?n:void 0,values:U(i)})},D=async n=>{u.mount=!0;const o=n.target;let l=o.name,m=!0;const h=y(s,l),f=E=>{m=Number.isNaN(E)||ge(E)&&isNaN(E.getTime())||me(E,y(i,l,E))},x=Nt(t.mode),_=Nt(t.reValidateMode);if(h){let E,re;const _e=o.type?Dt(h._f):Os(n),fe=n.type===vt.BLUR||n.type===vt.FOCUS_OUT,Zt=!Hs(h._f)&&!t.resolver&&!y(r.errors,l)&&!h._f.deps||Qs(fe,y(r.touchedFields,l),r.isSubmitted,_,x),qe=St(l,d,fe);C(i,l,_e),fe?(!o||!o.readOnly)&&(h._f.onBlur&&h._f.onBlur(n),b&&b(0)):h._f.onChange&&h._f.onChange(n);const Ue=oe(l,_e,fe),er=!X(Ue)||qe;if(!fe&&v.state.next({name:l,type:n.type,values:U(i)}),Zt)return(w.isValid||O.isValid)&&(t.mode==="onBlur"?fe&&Y():fe||Y()),er&&v.state.next({name:l,...qe?{}:Ue});if(!fe&&qe&&v.state.next({...r}),t.resolver){const{errors:dt}=await te([l]);if($([l]),f(_e),m){const tr=Mt(r.errors,s,l),ft=Mt(dt,s,tr.name||l);E=ft.error,l=ft.name,re=X(dt)}}else $([l],!0),E=(await Ot(h,d.disabled,i,p,t.shouldUseNativeValidation))[l],$([l]),f(_e),m&&(E?re=!1:(w.isValid||O.isValid)&&(re=await B(s,!0)));m&&(h._f.deps&&(!Array.isArray(h._f.deps)||h._f.deps.length>0)&&q(h._f.deps),J(l,re,E,Ue))}},W=(n,o)=>{if(y(r.errors,o)&&n.focus)return n.focus(),1},q=async(n,o={})=>{let l,m;const h=Fe(n);if(t.resolver){const f=await se(A(n)?n:h);l=X(f),m=n?!h.some(x=>y(f,x)):l}else n?(m=(await Promise.all(h.map(async f=>{const x=y(s,f);return await B(x&&x._f?{[f]:x}:x)}))).every(Boolean),!(!m&&!r.isValid)&&Y()):m=l=await B(s);return v.state.next({...!ee(n)||(w.isValid||O.isValid)&&l!==r.isValid?{}:{name:n},...t.resolver||!n?{isValid:l}:{},errors:r.errors}),o.shouldFocus&&!m&&Se(s,W,n?h:d.mount),m},Oe=(n,o)=>{let l={...u.mount?i:a};return o&&(l=Lt(o.dirtyFields?r.dirtyFields:r.touchedFields,l)),A(n)?l:ee(n)?y(l,n):n.map(m=>y(l,m))},st=(n,o)=>({invalid:!!y((o||r).errors,n),isDirty:!!y((o||r).dirtyFields,n),error:y((o||r).errors,n),isValidating:!!y(r.validatingFields,n),isTouched:!!y((o||r).touchedFields,n)}),zt=n=>{n&&Fe(n).forEach(o=>I(r.errors,o)),v.state.next({errors:n?r.errors:{}})},nt=(n,o,l)=>{const m=(y(s,n,{_f:{}})._f||{}).ref,h=y(r.errors,n)||{},{ref:f,message:x,type:_,...E}=h;C(r.errors,n,{...E,...o,ref:m}),v.state.next({name:n,errors:r.errors,isValid:!1}),l&&l.shouldFocus&&m&&m.focus&&m.focus()},$t=(n,o)=>ne(n)?v.state.subscribe({next:l=>"values"in l&&n(F(void 0,o),l)}):F(n,o,!0),at=n=>v.state.subscribe({next:o=>{$s(n.name,o.name,n.exact)&&zs(o,n.formState||w,Kt,n.reRenderRoot)&&n.callback({values:{...i},...r,...o,defaultValues:a})}}).unsubscribe,Qt=n=>(u.mount=!0,O={...O,...n.formState},at({...n,formState:{...T,...n.formState}})),Le=(n,o={})=>{for(const l of n?Fe(n):d.mount)d.mount.delete(l),d.array.delete(l),o.keepValue||(I(s,l),I(i,l)),!o.keepError&&I(r.errors,l),!o.keepDirty&&I(r.dirtyFields,l),!o.keepTouched&&I(r.touchedFields,l),!o.keepIsValidating&&I(r.validatingFields,l),!t.shouldUnregister&&!o.keepDefaultValue&&I(a,l);v.state.next({values:U(i)}),v.state.next({...r,...o.keepDirty?{isDirty:k()}:{}}),!o.keepIsValid&&Y()},it=({disabled:n,name:o})=>{(ce(n)&&u.mount||n||d.disabled.has(o))&&(n?d.disabled.add(o):d.disabled.delete(o))},Ye=(n,o={})=>{let l=y(s,n);const m=ce(o.disabled)||ce(t.disabled);return C(s,n,{...l||{},_f:{...l&&l._f?l._f:{ref:{name:n}},name:n,mount:!0,...o}}),d.mount.add(n),l?it({disabled:ce(o.disabled)?o.disabled:t.disabled,name:n}):V(n,!0,o.value),{...m?{disabled:o.disabled||t.disabled}:{},...t.progressive?{required:!!o.required,min:Ne(o.min),max:Ne(o.max),minLength:Ne(o.minLength),maxLength:Ne(o.maxLength),pattern:Ne(o.pattern)}:{},name:n,onChange:D,onBlur:D,ref:h=>{if(h){Ye(n,o),l=y(s,n);const f=A(h.value)&&h.querySelectorAll&&h.querySelectorAll("input,select,textarea")[0]||h,x=Ls(f),_=l._f.refs||[];if(x?_.find(E=>E===f):f===l._f.ref)return;C(s,n,{_f:{...l._f,...x?{refs:[..._.filter(He),f,...Array.isArray(y(a,n))?[{}]:[]],ref:{type:f.type,name:n}}:{ref:f}}}),V(n,!1,void 0,f)}else l=y(s,n,{}),l._f&&(l._f.mount=!1),(t.shouldUnregister||o.shouldUnregister)&&!(Ps(d.array,n)&&u.action)&&d.unMount.add(n)}}},Re=()=>t.shouldFocusError&&Se(s,W,d.mount),Xt=n=>{ce(n)&&(v.state.next({disabled:n}),Se(s,(o,l)=>{const m=y(s,l);m&&(o.disabled=m._f.disabled||n,Array.isArray(m._f.refs)&&m._f.refs.forEach(h=>{h.disabled=m._f.disabled||n}))},0,!1))},ot=(n,o)=>async l=>{let m;l&&(l.preventDefault&&l.preventDefault(),l.persist&&l.persist());let h=U(i);if(v.state.next({isSubmitting:!0}),t.resolver){const{errors:f,values:x}=await te();$(),r.errors=f,h=U(x)}else await B(s);if(d.disabled.size)for(const f of d.disabled)I(h,f);if(I(r.errors,"root"),X(r.errors)){v.state.next({errors:{}});try{await n(h,l)}catch(f){m=f}}else o&&await o({...r.errors},l),Re(),setTimeout(Re);if(v.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:X(r.errors)&&!m,submitCount:r.submitCount+1,errors:r.errors}),m)throw m},Gt=(n,o={})=>{y(s,n)&&(A(o.defaultValue)?R(n,U(y(a,n))):(R(n,o.defaultValue),C(a,n,U(o.defaultValue))),o.keepTouched||I(r.touchedFields,n),o.keepDirty||(I(r.dirtyFields,n),r.isDirty=o.defaultValue?k(n,U(y(a,n))):k()),o.keepError||(I(r.errors,n),w.isValid&&Y()),v.state.next({...r}))},ct=(n,o={})=>{const l=n?U(n):a,m=U(l),h=X(n),f=h?a:m;if(o.keepDefaultValues||(a=l),!o.keepValues){if(o.keepDirtyValues){const x=new Set([...d.mount,...Object.keys(we(a,i))]);for(const _ of Array.from(x))y(r.dirtyFields,_)?C(f,_,y(i,_)):R(_,y(f,_))}else{if(Ke&&A(n))for(const x of d.mount){const _=y(s,x);if(_&&_._f){const E=Array.isArray(_._f.refs)?_._f.refs[0]:_._f.ref;if(Ce(E)){const re=E.closest("form");if(re){re.reset();break}}}}if(o.keepFieldsRef)for(const x of d.mount)R(x,y(f,x));else s={}}i=t.shouldUnregister?o.keepDefaultValues?U(a):{}:U(f),v.array.next({values:{...f}}),v.state.next({values:{...f}})}d={mount:o.keepDirtyValues?d.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},u.mount=!w.isValid||!!o.keepIsValid||!!o.keepDirtyValues||!t.shouldUnregister&&!X(f),u.watch=!!t.shouldUnregister,u.keepIsValid=!!o.keepIsValid,u.action=!1,o.keepErrors||(r.errors={}),v.state.next({submitCount:o.keepSubmitCount?r.submitCount:0,isDirty:h?!1:o.keepDirty?r.isDirty:!!(o.keepDefaultValues&&!me(n,a)),isSubmitted:o.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:h?{}:o.keepDirtyValues?o.keepDefaultValues&&i?we(a,i):r.dirtyFields:o.keepDefaultValues&&n?we(a,n):o.keepDirty?r.dirtyFields:{},touchedFields:o.keepTouched?r.touchedFields:{},errors:o.keepErrors?r.errors:{},isSubmitSuccessful:o.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:a})},lt=(n,o)=>ct(ne(n)?n(i):n,{...t.resetOptions,...o}),Jt=(n,o={})=>{const l=y(s,n),m=l&&l._f;if(m){const h=m.refs?m.refs[0]:m.ref;h.focus&&setTimeout(()=>{h.focus(),o.shouldSelect&&ne(h.select)&&h.select()})}},Kt=n=>{r={...r,...n}},ut={control:{register:Ye,unregister:Le,getFieldState:st,handleSubmit:ot,setError:nt,_subscribe:at,_runSchema:te,_updateIsValidating:$,_focusError:Re,_getWatch:F,_getDirty:k,_setValid:Y,_setFieldArray:M,_setDisabledField:it,_setErrors:G,_getFieldArray:g,_reset:ct,_resetDefaultValues:()=>ne(t.defaultValues)&&t.defaultValues().then(n=>{lt(n,t.resetOptions),v.state.next({isLoading:!1})}),_removeUnmounted:le,_disableForm:Xt,_subjects:v,_proxyFormState:w,get _fields(){return s},get _formValues(){return i},get _state(){return u},set _state(n){u=n},get _defaultValues(){return a},get _names(){return d},set _names(n){d=n},get _formState(){return r},get _options(){return t},set _options(n){t={...t,...n}}},subscribe:Qt,trigger:q,register:Ye,handleSubmit:ot,watch:$t,setValue:R,getValues:Oe,reset:lt,resetField:Gt,clearErrors:zt,unregister:Le,setError:nt,setFocus:Jt,getFieldState:st};return{...ut,formControl:ut}}function Zs(e={}){const t=Z.useRef(void 0),r=Z.useRef(void 0),[s,a]=Z.useState({isDirty:!1,isValidating:!1,isLoading:ne(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:ne(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:s},e.defaultValues&&!ne(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:u,...d}=Ks(e);t.current={...d,formState:s}}const i=t.current.control;return i._options=e,As(()=>{const u=i._subscribe({formState:i._proxyFormState,callback:()=>a({...i._formState}),reRenderRoot:!0});return a(d=>({...d,isReady:!0})),i._formState.isReady=!0,u},[i]),Z.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),Z.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),Z.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),Z.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),Z.useEffect(()=>{if(i._proxyFormState.isDirty){const u=i._getDirty();u!==s.isDirty&&i._subjects.state.next({isDirty:u})}},[i,s.isDirty]),Z.useEffect(()=>{var u;e.values&&!me(e.values,r.current)?(i._reset(e.values,{keepFieldsRef:!0,...i._options.resetOptions}),!((u=i._options.resetOptions)===null||u===void 0)&&u.keepIsValid||i._setValid(),r.current=e.values,a(d=>({...d}))):i._resetDefaultValues()},[i,e.values]),Z.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=Cs(s,i),t.current}const Ht=({defaultDate:e=null,trade:t=null,tags:r=[],onClose:s})=>{const{showToast:a}=Pt(),i=ar(),u=ir(),d=Ge(D=>D.settings.currency),b=!!t,N=new Date,T=e||N.toISOString().split("T")[0],w=N.toTimeString().slice(0,5),v=[{tagId:"none",name:"No Tag",color:"#6b7280",emoji:"â€”"},...r],{register:p,handleSubmit:S,watch:Y,setValue:$,formState:{errors:M}}=Zs({defaultValues:{date:(t==null?void 0:t.date)||T,time:(t==null?void 0:t.time)||w,amount:(t==null?void 0:t.amount)||"",tagId:(t==null?void 0:t.tagId)||"none",notes:(t==null?void 0:t.notes)||""}}),[Q,G]=ie.useState(null),[V,oe]=ie.useState(t!=null&&t.driveImageId?ze.getImageUrl(t.driveImageId):null),[J,te]=ie.useState(!1),[se,B]=ie.useState(!1),le=Y("amount"),k=Y("tagId"),F=v.find(D=>D.tagId===k),g=D=>{$("amount",D)},j=D=>{var q;const W=(q=D.target.files)==null?void 0:q[0];if(W){if(!W.type.startsWith("image/")){a("Please select an image file","error");return}if(W.size>10*1024*1024){a("Image too large (max 10MB)","error");return}G(W),oe(URL.createObjectURL(W)),te(!1)}},H=()=>{G(null),oe(null),te(!0)},R=async D=>{if(!D.amount||D.amount===0){a("Please enter an amount","error");return}try{B(!0);let W={};if(D.tagId!=="none"){const q=v.find(Oe=>Oe.tagId===D.tagId);W={tagId:q.tagId,tagName:q.name,tagColor:q.color,tagEmoji:q.emoji}}else W={tagId:"none",tagName:"No Tag",tagColor:"#6b7280",tagEmoji:"â€”"};if(b){const q={date:D.date,time:D.time,amount:parseFloat(D.amount),...W,notes:D.notes};J?q.driveImageId="":Q&&(q.screenshot=Q),await u.mutateAsync({tradeId:t.tradeId,updates:q})}else{const q={tradeId:or(),date:D.date,time:D.time,amount:parseFloat(D.amount),...W,screenshot:Q,notes:D.notes};await i.mutateAsync(q)}a(b?"Trade updated":"Trade added","success"),s()}catch(W){console.error("Failed to save trade:",W),a("Failed to save trade","error")}finally{B(!1)}};return c.jsx(Je,{isOpen:!0,onClose:s,title:b?"Edit Trade":"Add Trade",size:"lg",children:c.jsxs("form",{onSubmit:S(R),className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium mb-1.5",children:"Date"}),c.jsx("input",{type:"date",...p("date",{required:!0}),className:"input text-sm py-2"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium mb-1.5",children:"Time"}),c.jsx("input",{type:"time",...p("time",{required:!0}),className:"input text-sm py-2"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium mb-1.5",children:"Amount"}),c.jsxs("div",{className:"relative",children:[c.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-xl font-bold text-text-tertiary",children:d}),c.jsx("input",{type:"number",step:"0.01",...p("amount",{required:!0,valueAsNumber:!0}),className:`
                input pl-10 text-2xl font-bold text-center py-2
                ${le>0?"text-profit":le<0?"text-loss":""}
              `,placeholder:"0.00"})]}),c.jsx("div",{className:"flex gap-1.5 mt-2",children:rr.map(D=>c.jsxs("button",{type:"button",onClick:()=>g(D),className:`
                  flex-1 py-1.5 px-2 rounded-md text-xs font-semibold
                  transition-colors
                  ${D>0?"bg-profit/10 text-profit hover:bg-profit/20":"bg-loss/10 text-loss hover:bg-loss/20"}
                `,children:[D>0?"+":"",D]},D))})]}),c.jsxs("div",{className:"relative z-20",children:[c.jsx("label",{className:"block text-xs font-medium mb-1.5",children:"Strategy Tag"}),c.jsx("select",{...p("tagId"),className:"input w-full relative z-20 text-sm py-2",children:v.map(D=>c.jsxs("option",{value:D.tagId,children:[D.emoji," ",D.name]},D.tagId))}),F&&F.tagId!=="none"&&c.jsxs("div",{className:"mt-2 p-2 rounded-md text-xs",style:{backgroundColor:`${F.color}20`,color:F.color},children:[c.jsx("span",{className:"text-base mr-1.5",children:F.emoji}),c.jsx("span",{className:"font-semibold",children:F.name})]})]}),c.jsxs("div",{className:"relative z-10",children:[c.jsx("label",{className:"block text-xs font-medium mb-1.5",children:"Notes (optional)"}),c.jsx("textarea",{...p("notes"),rows:2,className:"input resize-none w-full text-sm py-2",placeholder:"What happened? What did you learn?"})]}),!V&&c.jsxs("div",{className:"relative z-0",children:[c.jsx("label",{className:"block text-xs font-medium mb-1.5",children:"Screenshot (optional)"}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsxs("label",{className:"cursor-pointer",children:[c.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:j,className:"hidden"}),c.jsxs("div",{className:"card border-2 border-dashed border-border hover:border-accent transition-colors text-center py-6",children:[c.jsx(fr,{size:24,className:"mx-auto mb-1 text-text-secondary"}),c.jsx("div",{className:"text-xs text-text-secondary",children:"Take Photo"})]})]}),c.jsxs("label",{className:"cursor-pointer",children:[c.jsx("input",{type:"file",accept:"image/*",onChange:j,className:"hidden"}),c.jsxs("div",{className:"card border-2 border-dashed border-border hover:border-accent transition-colors text-center py-6",children:[c.jsx(vr,{size:24,className:"mx-auto mb-1 text-text-secondary"}),c.jsx("div",{className:"text-xs text-text-secondary",children:"Upload"})]})]})]})]}),V&&c.jsxs("div",{className:"relative z-0",children:[c.jsx("label",{className:"block text-xs font-medium mb-1.5",children:"Screenshot"}),c.jsxs("div",{className:"relative",children:[c.jsx("img",{src:V,alt:"Screenshot preview",className:"w-full h-32 object-cover rounded-lg"}),c.jsx("button",{type:"button",onClick:H,className:"absolute top-2 right-2 p-1.5 bg-black/70 rounded-full hover:bg-black/90 transition-colors",children:c.jsx(_t,{size:16,className:"text-white"})})]})]}),c.jsxs("div",{className:"flex gap-2 pt-2",children:[c.jsx(ke,{type:"button",variant:"secondary",onClick:s,className:"flex-1",disabled:se,children:"Cancel"}),c.jsx(ke,{type:"submit",className:"flex-1",loading:se,children:b?"Update":"Save"})]})]})})},en=({date:e,trades:t,onClose:r,onAddTrade:s,tags:a=[]})=>{const{showToast:i}=Pt(),u=cr(),d=Ge(p=>p.settings.currency),[b,N]=ie.useState(null),T=t.reduce((p,S)=>p+S.amount,0),w=async p=>{if(confirm("Delete this trade?"))try{await u.mutateAsync(p),i("Trade deleted","success"),t.length===1&&r()}catch{i("Failed to delete trade","error")}},O=p=>{N(p)},v=()=>{N(null)};return c.jsxs(c.Fragment,{children:[c.jsx(Je,{isOpen:!0,onClose:r,title:c.jsxs("div",{children:[c.jsx("div",{className:"text-xl font-bold",children:pe(new Date(e),"EEEE, MMMM d, yyyy")}),c.jsx("div",{className:`text-2xl font-bold mt-1 ${T>=0?"text-profit":"text-loss"}`,children:Et(T,d)}),c.jsxs("div",{className:"text-sm text-text-secondary mt-1",children:[t.length," trade",t.length!==1?"s":""]})]}),children:c.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:t.length===0?c.jsxs("div",{className:"text-center py-8",children:[c.jsx("p",{className:"text-text-secondary mb-4",children:"No trades on this day"}),c.jsx(ke,{onClick:s,children:"Add Trade"})]}):c.jsxs(c.Fragment,{children:[t.map(p=>c.jsx(tn,{trade:p,currency:d,onDelete:w,onEdit:O},p.tradeId)),c.jsx(ke,{onClick:s,variant:"secondary",className:"w-full",children:"+ Add Another Trade"})]})})}),b&&c.jsx(Ht,{trade:b,defaultDate:e,tags:a,onClose:v})]})},tn=({trade:e,currency:t,onDelete:r,onEdit:s})=>{const[a,i]=ie.useState(!1);return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"card border-l-4",style:{borderLeftColor:e.tagColor},children:[c.jsxs("div",{className:"flex items-start justify-between mb-2",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:`text-2xl font-bold mb-1 ${e.amount>=0?"text-profit":"text-loss"}`,children:Et(e.amount,t)}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xl",children:e.tagEmoji}),c.jsx("span",{className:"text-sm font-medium",style:{color:e.tagColor},children:e.tagName})]})]}),c.jsx("div",{className:"text-sm text-text-tertiary",children:e.time})]}),e.driveImageId&&c.jsxs("button",{onClick:()=>i(!0),className:"w-full h-32 rounded-lg overflow-hidden bg-surface-hover mb-2 relative group",children:[c.jsx("img",{src:ze.getImageUrl(e.driveImageId),alt:"Trade screenshot",className:"w-full h-full object-cover"}),c.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:c.jsx(wr,{size:32,className:"text-white"})})]}),e.notes&&c.jsx("p",{className:"text-sm text-text-secondary mb-3 p-2 bg-surface rounded",children:e.notes}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs(ke,{variant:"ghost",size:"sm",onClick:()=>s(e),className:"flex-1 text-text-secondary hover:text-accent",children:[c.jsx(br,{size:16,className:"mr-1"}),"Edit"]}),c.jsxs(ke,{variant:"ghost",size:"sm",onClick:()=>r(e.tradeId),className:"flex-1 text-text-secondary hover:text-loss",children:[c.jsx(ur,{size:16,className:"mr-1"}),"Delete"]})]})]}),a&&c.jsx(Je,{isOpen:!0,onClose:()=>i(!1),size:"lg",children:c.jsx("img",{src:ze.getImageUrl(e.driveImageId),alt:"Trade screenshot",className:"w-full h-auto rounded-lg"})})]})},fn=()=>{const e=new Date,[t,r]=ie.useState(e),[s,a]=ie.useState(null),[i,u]=ie.useState(!1),[d,b]=ie.useState("calendar"),N=t.getFullYear(),T=t.getMonth(),{data:w=[],isLoading:O}=lr(N,T),{data:v=[],isLoading:p}=dr(),S=Ge(g=>g.settings.currency),Y=Tr(t),$=Sr(t),M=Mr({start:Y,end:$}),Q=bt(Y),G=Array(Q).fill(null),V=w.reduce((g,j)=>(g[j.date]||(g[j.date]=[]),g[j.date].push(j),g),{}),oe=Object.entries(V).reduce((g,[j,H])=>(g[j]=H.reduce((R,D)=>R+D.amount,0),g),{}),J={totalPL:w.reduce((g,j)=>g+j.amount,0),tradeCount:w.length,winCount:w.filter(g=>g.amount>0).length,lossCount:w.filter(g=>g.amount<0).length,winRate:w.length>0?Math.round(w.filter(g=>g.amount>0).length/w.length*100):0},te=g=>{const j=bt(g);return j===0||j===6},se=(g,j)=>Dr(g,j),B=()=>{r(new Date(N,T-1))},le=()=>{r(new Date(N,T+1))},k=g=>{const j=pe(g,"yyyy-MM-dd");a(j)},F=()=>{u(!0)};return O||p?c.jsx("div",{className:"p-4",children:c.jsx(sr,{type:"skeleton-grid"})}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex flex-col h-[calc(100vh-80px)] p-6 pb-24 max-w-[1600px] mx-auto",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("button",{onClick:B,className:"p-3 hover:bg-surface-hover rounded-xl transition-colors",children:c.jsx(hr,{size:24})}),c.jsx("h2",{className:"text-3xl font-bold",children:pe(t,"MMMM yyyy")}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>b(d==="calendar"?"list":"calendar"),className:"p-3 hover:bg-surface-hover rounded-xl transition-colors",children:d==="calendar"?c.jsx(gr,{size:20}):c.jsx(yr,{size:20})}),c.jsx("button",{onClick:le,className:"p-3 hover:bg-surface-hover rounded-xl transition-colors",children:c.jsx(mr,{size:24})})]})]}),c.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[c.jsx(Pe,{label:"P&L",value:Xe(J.totalPL,S),color:J.totalPL>=0?"profit":"loss"}),c.jsx(Pe,{label:"Trades",value:J.tradeCount}),c.jsx(Pe,{label:"Win Rate",value:`${J.winRate}%`,color:J.winRate>=50?"profit":"loss"}),c.jsx(Pe,{label:"W/L",value:`${J.winCount}/${J.lossCount}`})]}),d==="calendar"?c.jsxs("div",{className:"card flex-1 flex flex-col",children:[c.jsx("div",{className:"grid grid-cols-7 gap-3 mb-3",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(g=>c.jsx("div",{className:"text-center text-sm font-bold text-text-secondary py-2 uppercase tracking-wide",children:g},g))}),c.jsxs("div",{className:"grid grid-cols-7 gap-3 flex-1",children:[G.map((g,j)=>c.jsx("div",{},`empty-${j}`)),M.map(g=>{const j=pe(g,"yyyy-MM-dd"),H=oe[j]||0,R=V[j]||[],D=te(g),W=se(g,new Date);return c.jsx(rn,{date:g,pl:H,tradeCount:R.length,isWeekend:D,isToday:W,currency:S,onClick:()=>k(g)},j)})]})]}):c.jsx(sn,{trades:w,groupedTrades:V,currency:S,onDayClick:k})]}),c.jsx(Ts,{onClick:F}),s&&c.jsx(en,{date:s,trades:V[s]||[],tags:v,onClose:()=>a(null),onAddTrade:F}),i&&c.jsx(Ht,{defaultDate:s,tags:v,onClose:()=>u(!1)})]})},Pe=({label:e,value:t,color:r="default"})=>{const s={profit:"text-profit",loss:"text-loss",default:"text-text-primary"};return c.jsxs("div",{className:"card text-center",children:[c.jsx("div",{className:"text-text-tertiary text-xs mb-1 uppercase tracking-wide font-semibold",children:e}),c.jsx("div",{className:`text-2xl font-black ${s[r]}`,children:t})]})},rn=({date:e,pl:t,tradeCount:r,isWeekend:s,isToday:a,currency:i,onClick:u})=>{const d=pe(e,"d");if(s)return c.jsxs("div",{className:"h-full bg-surface/30 rounded-xl p-3 flex flex-col items-center justify-center opacity-40 border border-border/30",children:[c.jsx("div",{className:"text-lg text-text-tertiary font-semibold",children:d}),c.jsx("div",{className:"text-2xl mt-2",children:"ðŸ”’"})]});const b=t>0?"bg-profit/5 border-profit/30":t<0?"bg-loss/5 border-loss/30":"bg-surface border-border",N=a?"ring-4 ring-accent shadow-lg shadow-accent/20":"";return c.jsxs("button",{onClick:u,className:`
        h-full ${b} ${N} rounded-xl p-4 border-2
        hover:bg-surface-hover hover:scale-105 transition-all duration-200
        flex flex-col items-center justify-center
        relative group
      `,children:[c.jsx("div",{className:"absolute top-2 left-3 text-sm text-text-secondary font-bold",children:d}),r>0&&c.jsx("div",{className:`text-3xl font-black ${t>=0?"text-profit":"text-loss"} mt-2`,children:Xe(t,i)}),r>0&&c.jsx("div",{className:"absolute bottom-2 right-2 min-w-[28px] h-7 px-2 rounded-full bg-gradient-to-br from-blue-600 to-purple-600 text-white text-sm font-bold flex items-center justify-center shadow-lg",children:r}),c.jsx("div",{className:"absolute inset-0 bg-accent/5 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity"})]})},sn=({trades:e,groupedTrades:t,currency:r,onDayClick:s})=>{const a=Object.keys(t).sort().reverse();return a.length===0?c.jsx("div",{className:"card text-center py-12 flex-1 flex items-center justify-center",children:c.jsx("p",{className:"text-text-secondary text-xl",children:"No trades this month"})}):c.jsx("div",{className:"space-y-3 flex-1 overflow-y-auto",children:a.map(i=>{const u=t[i],d=u.reduce((N,T)=>N+T.amount,0),b=new Date(i+"T12:00:00");return c.jsxs("button",{onClick:()=>s(b),className:"card w-full text-left hover:bg-surface-hover transition-all hover:scale-[1.02]",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("div",{className:"font-bold text-lg",children:pe(b,"EEEE, MMMM d")}),c.jsx("div",{className:`text-2xl font-black ${d>=0?"text-profit":"text-loss"}`,children:Xe(d,r)})]}),c.jsxs("div",{className:"text-sm text-text-secondary font-semibold",children:[u.length," trade",u.length!==1?"s":""]})]},i)})})};export{fn as default};
