import{d as I,e as K,a as Q,r as j,j as e,b as ee,X as y}from"./index-DbGHC7zI.js";import{b as te,a as se,c as F,d as ae,e as $}from"./settingsStore-B-fEnA-y.js";import{u as le,f as k,g as z}from"./useTags-BWWToRUt.js";import{T as re}from"./trash-2-DZ2xYSfJ.js";import{P as ne}from"./plus-D4J1DJrO.js";import"./useMutation-B6PxI4Gb.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=I("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=I("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=I("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Ne=()=>{const{year:i,month:d}=K(),a=Q(),s=new Date,m=parseInt(i)||s.getFullYear(),t=d!==void 0?parseInt(d):s.getMonth(),{data:l=[],isLoading:h}=te(m,t),{data:c=[]}=le(),n=se(o=>o.settings.currency),[g,x]=j.useState(null),[b,u]=j.useState(!1),[r,f]=j.useState(!1),[O,W]=j.useState(null),q=["January","February","March","April","May","June","July","August","September","October","November","December"],R=new Date(m,t+1,0).getDate(),J=new Date(m,t,1).getDay(),C=l.reduce((o,p)=>o+p.amount,0),D=l.filter(o=>o.amount>0),Y=l.filter(o=>o.amount<0),B=l.length>0?Math.round(D.length/l.length*100):0,T=be(l),v={};l.forEach(o=>{const p=parseInt(o.date.split("-")[2]);v[p]||(v[p]=[]),v[p].push(o)});const[H,M]=j.useState(!1),[S,P]=j.useState(null),V=o=>{P(o),M(!0)},A=o=>{x(o),u(!0)};return e.jsxs(e.Fragment,{children:[e.jsx(ee,{}),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950",children:[e.jsxs("div",{className:"max-w-[1800px] mx-auto p-6 pt-20",children:[e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-6",children:[e.jsx("button",{onClick:()=>{const o=t===0?11:t-1,p=t===0?m-1:m;a(`/month/${p}/${o}`)},className:"p-2 bg-slate-800 hover:bg-slate-700 rounded-lg transition-all",children:"← Prev"}),e.jsxs("h1",{className:"text-3xl font-black",children:[q[t]," ",m]}),e.jsx("button",{onClick:()=>{const o=t===11?0:t+1,p=t===11?m+1:m;a(`/month/${p}/${o}`)},className:"p-2 bg-slate-800 hover:bg-slate-700 rounded-lg transition-all",children:"Next →"})]}),e.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[e.jsx("div",{className:"col-span-9",children:e.jsxs("div",{className:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-sm rounded-2xl border border-slate-700/50 p-6",children:[e.jsx("div",{className:"grid grid-cols-7 gap-2 mb-4",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(o=>e.jsx("div",{className:"text-center text-slate-400 text-sm font-semibold py-2",children:o},o))}),e.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[Array.from({length:J}).map((o,p)=>e.jsx("div",{className:"aspect-square"},`empty-${p}`)),Array.from({length:R}).map((o,p)=>{const N=p+1,L=v[N]||[],_=L.reduce((Z,G)=>Z+G.amount,0),X=N===s.getDate()&&t===s.getMonth()&&m===s.getFullYear();return e.jsx(de,{day:N,trades:L,dayPL:_,isToday:X,currency:n,onClick:()=>V(N),onEditTrade:A},N)})]})]})}),e.jsxs("div",{className:"col-span-3 space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-sm rounded-2xl border border-slate-700/50 p-6",children:[e.jsx("h3",{className:"text-sm uppercase tracking-wider text-slate-400 mb-4 font-semibold text-center",children:"Month Stats"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(w,{label:"Total P&L",value:k(C,n),color:C>=0?"emerald":"red"}),e.jsx(w,{label:"Trades",value:l.length}),e.jsx(w,{label:"Winners",value:D.length,color:"emerald"}),e.jsx(w,{label:"Losers",value:Y.length,color:"red"}),e.jsxs("div",{className:"flex flex-col items-center justify-center py-4",children:[e.jsx("div",{className:"text-xs text-slate-400 uppercase tracking-wider mb-3",children:"Win Rate"}),e.jsx(xe,{winRate:B,size:"large"})]})]})]}),T.length>0&&e.jsxs("div",{className:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-sm rounded-2xl border border-slate-700/50 p-6",children:[e.jsx("h3",{className:"text-sm uppercase tracking-wider text-slate-400 mb-4 font-semibold text-center",children:"Strategies"}),e.jsx("div",{className:"space-y-3",children:T.map(o=>e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-xl",children:o.tagEmoji}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("div",{className:"text-xs font-bold truncate",style:{color:o.tagColor},children:o.tagName})})]}),e.jsx("div",{className:`text-lg font-black ${o.totalPL>=0?"text-emerald-400":"text-red-400"}`,children:k(o.totalPL,n)}),e.jsxs("div",{className:"text-[10px] text-slate-400 mt-1",children:[o.trades,"T • ",o.winRate,"% WR"]})]},o.tagId))})]})]})]})]}),H&&S&&e.jsx(ie,{day:S,year:m,month:t,trades:v[S]||[],tags:c,currency:n,onClose:()=>{M(!1),P(null)},onEditTrade:A}),b&&g&&e.jsx(me,{trade:g,tags:c,currency:n,onClose:()=>{u(!1),x(null)}}),r&&e.jsx(ue,{date:O,tags:c,currency:n,onClose:()=>{f(!1),W(null)}})]})]})},de=({day:i,trades:d,dayPL:a,isToday:s,currency:m,onClick:t,onEditTrade:l})=>{const h=d.length>0,c=h?a>0?"bg-emerald-900/20 border-emerald-500/30":"bg-red-900/20 border-red-500/30":"bg-slate-800/20 border-slate-700/30";return e.jsxs("div",{onClick:t,className:`aspect-square rounded-lg border ${c} ${s?"ring-2 ring-blue-500":""} p-2 relative hover:bg-slate-700/30 transition-all cursor-pointer`,children:[e.jsx("div",{className:"text-sm font-semibold text-slate-300",children:i}),h&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`absolute inset-0 flex items-center justify-center text-lg font-black ${a>=0?"text-emerald-400":"text-red-400"}`,children:k(a,m)}),e.jsx("div",{className:"absolute bottom-1 left-1 flex flex-wrap gap-1 max-w-[80%]",children:[...new Set(d.map(n=>n.tagName).filter(Boolean))].map(n=>e.jsx("span",{className:"text-[8px] text-slate-400 bg-slate-900/70 px-1 rounded truncate",children:n},n))}),d.length>1&&e.jsx("div",{className:"absolute bottom-1 right-1 text-[9px] text-slate-500 font-semibold",children:d.length}),e.jsx("div",{className:"absolute inset-0"})]})]})},ie=({day:i,year:d,month:a,trades:s,tags:m,currency:t,onClose:l,onEditTrade:h})=>{const c=F(),[n,g]=j.useState(s.length===0),x=["January","February","March","April","May","June","July","August","September","October","November","December"],b=`${d}-${String(a+1).padStart(2,"0")}-${String(i).padStart(2,"0")}`,u=async r=>{if(confirm("Delete this trade?"))try{await c.mutateAsync(r)}catch(f){alert("Failed to delete: "+f.message)}};return e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-slate-900 rounded-2xl border border-slate-700 max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6 sticky top-0 bg-slate-900 pb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-2xl font-black",children:[x[a]," ",i,", ",d]}),e.jsxs("p",{className:"text-sm text-slate-400",children:[s.length," trade",s.length!==1?"s":""]})]}),e.jsx("button",{onClick:l,className:"p-2 hover:bg-slate-800 rounded-lg",children:e.jsx(y,{size:20})})]}),s.length>0&&!n&&e.jsx("div",{className:"space-y-3 mb-6",children:s.map(r=>e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 flex items-center gap-4",children:[e.jsx("div",{className:"flex-shrink-0 text-xs text-slate-500",children:r.time}),e.jsxs("div",{className:"flex-1",children:[r.tagName&&e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-sm",children:r.tagEmoji}),e.jsx("span",{className:"text-xs font-semibold",style:{color:r.tagColor},children:r.tagName})]}),r.notes&&e.jsx("div",{className:"text-xs text-slate-400",children:r.notes})]}),e.jsx("div",{className:`text-xl font-black ${r.amount>=0?"text-emerald-400":"text-red-400"}`,children:k(r.amount,t)}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{h(r),l()},className:"p-2 bg-blue-600 hover:bg-blue-700 rounded-lg transition-all",children:e.jsx(oe,{size:16})}),e.jsx("button",{onClick:()=>u(r.tradeId),className:"p-2 bg-red-600 hover:bg-red-700 rounded-lg transition-all",children:e.jsx(re,{size:16})})]})]},r.tradeId))}),n?e.jsxs("div",{className:"border-t border-slate-700 pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"font-bold",children:"New Trade"}),s.length>0&&e.jsx("button",{onClick:()=>g(!1),className:"text-sm text-slate-400 hover:text-slate-300",children:"Cancel"})]}),e.jsx(ce,{date:b,tags:m,currency:t,onSuccess:()=>{g(!1)}})]}):e.jsxs("button",{onClick:()=>g(!0),className:"w-full py-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:shadow-lg rounded-lg transition-all font-semibold flex items-center justify-center gap-2",children:[e.jsx(ne,{size:20}),"Add Another Trade"]})]})})},ce=({date:i,tags:d,currency:a,onSuccess:s})=>{const m=$(),[t,l]=j.useState({amount:"",time:new Date().toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit"}),tagId:"",notes:"",screenshot:null}),[h,c]=j.useState(null),n=x=>{var u;const b=(u=x.target.files)==null?void 0:u[0];if(b){if(!b.type.startsWith("image/")){alert("Please select an image file");return}l({...t,screenshot:b}),c(URL.createObjectURL(b))}},g=async x=>{x.preventDefault();try{const b=d.find(u=>u.tagId===t.tagId);await m.mutateAsync({tradeId:z(),date:i,time:t.time,amount:parseFloat(t.amount),tagId:t.tagId||null,tagName:(b==null?void 0:b.name)||null,tagColor:(b==null?void 0:b.color)||null,tagEmoji:(b==null?void 0:b.emoji)||null,notes:t.notes,screenshot:t.screenshot}),s(),l({amount:"",time:new Date().toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit"}),tagId:"",notes:"",screenshot:null}),c(null)}catch(b){alert("Failed to save: "+b.message)}};return e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-400 mb-2",children:"Time"}),e.jsx("input",{type:"time",value:t.time,onChange:x=>l({...t,time:x.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm focus:border-blue-500 focus:outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-semibold text-slate-400 mb-2",children:["Amount (",a,")"]}),e.jsx("input",{type:"number",step:"0.01",value:t.amount,onChange:x=>l({...t,amount:x.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm focus:border-blue-500 focus:outline-none",placeholder:"100",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-400 mb-2",children:"Tag (Optional)"}),e.jsxs("select",{value:t.tagId,onChange:x=>l({...t,tagId:x.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm focus:border-blue-500 focus:outline-none",children:[e.jsx("option",{value:"",children:"No Tag"}),d.map(x=>e.jsxs("option",{value:x.tagId,children:[x.emoji," ",x.name]},x.tagId))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-400 mb-2",children:"Notes (Optional)"}),e.jsx("textarea",{value:t.notes,onChange:x=>l({...t,notes:x.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm focus:border-blue-500 focus:outline-none resize-none",rows:2,placeholder:"Trade notes..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-400 mb-2",children:"Screenshot (Optional)"}),h?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:h,alt:"Preview",className:"w-full h-32 object-cover rounded-lg"}),e.jsx("button",{type:"button",onClick:()=>{l({...t,screenshot:null}),c(null)},className:"absolute top-2 right-2 p-1 bg-black/50 rounded-full hover:bg-black/70",children:e.jsx(y,{size:16,className:"text-white"})})]}):e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:n,className:"hidden"}),e.jsxs("div",{className:"border-2 border-dashed border-slate-700 hover:border-slate-600 rounded-lg p-4 text-center transition-all",children:[e.jsx(E,{size:24,className:"mx-auto mb-1 text-slate-400"}),e.jsx("div",{className:"text-xs text-slate-400",children:"Take Photo"})]})]}),e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:n,className:"hidden"}),e.jsxs("div",{className:"border-2 border-dashed border-slate-700 hover:border-slate-600 rounded-lg p-4 text-center transition-all",children:[e.jsx(U,{size:24,className:"mx-auto mb-1 text-slate-400"}),e.jsx("div",{className:"text-xs text-slate-400",children:"Upload"})]})]})]})]}),e.jsx("button",{type:"submit",disabled:m.isLoading,className:"w-full py-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:shadow-lg rounded-lg transition-all font-semibold disabled:opacity-50",children:m.isLoading?"Saving...":"Save Trade"})]})},me=({trade:i,tags:d,currency:a,onClose:s})=>{const m=ae(),t=F(),[l,h]=j.useState({amount:i.amount,time:i.time,tagId:i.tagId||"",notes:i.notes||"",screenshot:null}),[c,n]=j.useState(i.driveImageId?`https://drive.google.com/thumbnail?id=${i.driveImageId}&sz=w800`:null),g=u=>{var f;const r=(f=u.target.files)==null?void 0:f[0];if(r){if(!r.type.startsWith("image/")){alert("Please select an image file");return}h({...l,screenshot:r}),n(URL.createObjectURL(r))}},x=async u=>{u.preventDefault();try{const r=d.find(f=>f.tagId===l.tagId);await m.mutateAsync({tradeId:i.tradeId,updates:{...l,tagName:(r==null?void 0:r.name)||null,tagColor:(r==null?void 0:r.color)||null,tagEmoji:(r==null?void 0:r.emoji)||null}}),s()}catch(r){alert("Failed to update: "+r.message)}},b=async()=>{if(confirm("Delete this trade? This cannot be undone."))try{await t.mutateAsync(i.tradeId),s()}catch(u){alert("Failed to delete: "+u.message)}};return e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-slate-900 rounded-2xl border border-slate-700 max-w-md w-full p-6 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-2xl font-black",children:"Edit Trade"}),e.jsx("button",{onClick:s,className:"p-2 hover:bg-slate-800 rounded-lg",children:e.jsx(y,{size:20})})]}),e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-400 mb-2",children:"Date"}),e.jsx("input",{type:"text",value:i.date,readOnly:!0,className:"w-full bg-slate-800/50 border border-slate-700 rounded-lg px-4 py-3 text-slate-400"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-400 mb-2",children:"Time"}),e.jsx("input",{type:"time",value:l.time,onChange:u=>h({...l,time:u.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-3 focus:border-blue-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-slate-400 mb-2",children:["Amount (",a,")"]}),e.jsx("input",{type:"number",step:"0.01",value:l.amount,onChange:u=>h({...l,amount:parseFloat(u.target.value)}),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-3 focus:border-blue-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-400 mb-2",children:"Tag"}),e.jsxs("select",{value:l.tagId,onChange:u=>h({...l,tagId:u.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-3 focus:border-blue-500 focus:outline-none",children:[e.jsx("option",{value:"",children:"No Tag"}),d.map(u=>e.jsxs("option",{value:u.tagId,children:[u.emoji," ",u.name]},u.tagId))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-400 mb-2",children:"Notes"}),e.jsx("textarea",{value:l.notes,onChange:u=>h({...l,notes:u.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-3 focus:border-blue-500 focus:outline-none resize-none",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-400 mb-2",children:"Screenshot"}),c?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:c,alt:"Trade screenshot",className:"w-full h-48 object-cover rounded-lg"}),e.jsx("button",{type:"button",onClick:()=>{h({...l,screenshot:null}),n(null)},className:"absolute top-2 right-2 p-2 bg-black/50 rounded-full hover:bg-black/70",children:e.jsx(y,{size:20,className:"text-white"})})]}):e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:g,className:"hidden"}),e.jsxs("div",{className:"border-2 border-dashed border-slate-700 hover:border-slate-600 rounded-lg p-6 text-center transition-all",children:[e.jsx(E,{size:28,className:"mx-auto mb-2 text-slate-400"}),e.jsx("div",{className:"text-xs text-slate-400",children:"Take Photo"})]})]}),e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:g,className:"hidden"}),e.jsxs("div",{className:"border-2 border-dashed border-slate-700 hover:border-slate-600 rounded-lg p-6 text-center transition-all",children:[e.jsx(U,{size:28,className:"mx-auto mb-2 text-slate-400"}),e.jsx("div",{className:"text-xs text-slate-400",children:"Upload"})]})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:b,className:"px-4 py-3 bg-red-600 hover:bg-red-700 rounded-lg transition-all font-semibold",children:"Delete"}),e.jsx("button",{type:"button",onClick:s,className:"flex-1 px-4 py-3 bg-slate-800 hover:bg-slate-700 rounded-lg transition-all font-semibold",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m.isLoading,className:"flex-1 px-4 py-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:shadow-lg rounded-lg transition-all font-semibold disabled:opacity-50",children:m.isLoading?"Saving...":"Save"})]})]})]})})},ue=({date:i,tags:d,currency:a,onClose:s})=>{const m=$(),[t,l]=j.useState({amount:"",time:new Date().toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit"}),tagId:"",notes:""}),h=async c=>{c.preventDefault();try{const n=d.find(g=>g.tagId===t.tagId);await m.mutateAsync({tradeId:z(),date:i,time:t.time,amount:parseFloat(t.amount),tagId:t.tagId||null,tagName:(n==null?void 0:n.name)||null,tagColor:(n==null?void 0:n.color)||null,tagEmoji:(n==null?void 0:n.emoji)||null,notes:t.notes,driveImageId:null}),s()}catch(n){alert("Failed to save: "+n.message)}};return e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-slate-900 rounded-2xl border border-slate-700 max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-2xl font-black",children:"New Trade"}),e.jsx("button",{onClick:s,className:"p-2 hover:bg-slate-800 rounded-lg",children:e.jsx(y,{size:20})})]}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-400 mb-2",children:"Date"}),e.jsx("input",{type:"text",value:i,readOnly:!0,className:"w-full bg-slate-800/50 border border-slate-700 rounded-lg px-4 py-3 text-slate-400"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-400 mb-2",children:"Time"}),e.jsx("input",{type:"time",value:t.time,onChange:c=>l({...t,time:c.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-3 focus:border-blue-500 focus:outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-slate-400 mb-2",children:["Amount (",a,")"]}),e.jsx("input",{type:"number",step:"0.01",value:t.amount,onChange:c=>l({...t,amount:c.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-3 focus:border-blue-500 focus:outline-none",placeholder:"e.g., 100 or -50",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-400 mb-2",children:"Tag"}),e.jsxs("select",{value:t.tagId,onChange:c=>l({...t,tagId:c.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-3 focus:border-blue-500 focus:outline-none",children:[e.jsx("option",{value:"",children:"No Tag"}),d.map(c=>e.jsxs("option",{value:c.tagId,children:[c.emoji," ",c.name]},c.tagId))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-400 mb-2",children:"Notes"}),e.jsx("textarea",{value:t.notes,onChange:c=>l({...t,notes:c.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-3 focus:border-blue-500 focus:outline-none resize-none",rows:3,placeholder:"Trade notes..."})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:s,className:"flex-1 px-4 py-3 bg-slate-800 hover:bg-slate-700 rounded-lg transition-all font-semibold",children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:shadow-lg rounded-lg transition-all font-semibold",children:"Save Trade"})]})]})]})})},xe=({winRate:i,size:d="normal"})=>{const a=d==="large"?{w:120,h:120,r:50,stroke:12}:{w:64,h:64,r:28,stroke:10},s=2*Math.PI*a.r,m=i/100,t=1-m;return e.jsxs("div",{className:"relative flex-shrink-0",style:{width:a.w,height:a.h},children:[e.jsxs("svg",{viewBox:"0 0 100 100",className:"transform -rotate-90 w-full h-full",children:[e.jsx("circle",{cx:"50",cy:"50",r:a.r,fill:"none",stroke:"#1e293b",strokeWidth:a.stroke}),i>0&&e.jsx("circle",{cx:"50",cy:"50",r:a.r,fill:"none",stroke:"#10b981",strokeWidth:a.stroke,strokeDasharray:`${m*s} ${s}`}),i<100&&e.jsx("circle",{cx:"50",cy:"50",r:a.r,fill:"none",stroke:"#ef4444",strokeWidth:a.stroke,strokeDasharray:`${t*s} ${s}`,strokeDashoffset:`${-m*s}`})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("span",{className:`font-black ${d==="large"?"text-4xl":"text-lg"}`,children:[i,"%"]})})]})},w=({label:i,value:d,color:a})=>{const s=a==="emerald"?"text-emerald-400":a==="red"?"text-red-400":"text-white";return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-slate-400 uppercase tracking-wider",children:i}),e.jsx("span",{className:`text-lg font-black ${s}`,children:d})]})},be=i=>{const d={};return i.forEach(a=>{const s=a.tagId||"none";s!=="none"&&(d[s]||(d[s]={tagId:s,tagName:a.tagName,tagColor:a.tagColor,tagEmoji:a.tagEmoji,totalPL:0,trades:0,wins:0}),d[s].totalPL+=a.amount,d[s].trades+=1,a.amount>0&&(d[s].wins+=1))}),Object.values(d).map(a=>({...a,winRate:a.trades>0?Math.round(a.wins/a.trades*100):0})).sort((a,s)=>s.totalPL-a.totalPL)};export{Ne as default};
