var ct=d=>{throw TypeError(d)};var et=(d,u,v)=>u.has(d)||ct("Cannot "+v);var G=(d,u,v)=>(et(d,u,"read from private field"),v?v.call(d):u.get(d)),Oe=(d,u,v)=>u.has(d)?ct("Cannot add the same private member more than once"):u instanceof WeakSet?u.add(d):u.set(d,v),Ne=(d,u,v,i)=>(et(d,u,"write to private field"),i?i.call(d,v):u.set(d,v),v),ke=(d,u,v)=>(et(d,u,"access private method"),v);import{a as pt}from"./useTags-BFJRURg9.js";import{S as Nt,s as kt,h as dt,f as Pt,n as mt,i as Ge,r as He,k as Lt,l as $t,e as rt,m as De,o as vt}from"./index-DIUpdbc8.js";var be,Te,fe,ye,Ae,Be,it,gt,Ht=(gt=class extends Nt{constructor(u,v){super();Oe(this,Ae);Oe(this,be);Oe(this,Te);Oe(this,fe);Oe(this,ye);Ne(this,be,u),this.setOptions(v),this.bindMethods(),ke(this,Ae,Be).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(u){var i;const v=this.options;this.options=G(this,be).defaultMutationOptions(u),kt(this.options,v)||G(this,be).getMutationCache().notify({type:"observerOptionsUpdated",mutation:G(this,fe),observer:this}),v!=null&&v.mutationKey&&this.options.mutationKey&&dt(v.mutationKey)!==dt(this.options.mutationKey)?this.reset():((i=G(this,fe))==null?void 0:i.state.status)==="pending"&&G(this,fe).setOptions(this.options)}onUnsubscribe(){var u;this.hasListeners()||(u=G(this,fe))==null||u.removeObserver(this)}onMutationUpdate(u){ke(this,Ae,Be).call(this),ke(this,Ae,it).call(this,u)}getCurrentResult(){return G(this,Te)}reset(){var u;(u=G(this,fe))==null||u.removeObserver(this),Ne(this,fe,void 0),ke(this,Ae,Be).call(this),ke(this,Ae,it).call(this)}mutate(u,v){var i;return Ne(this,ye,v),(i=G(this,fe))==null||i.removeObserver(this),Ne(this,fe,G(this,be).getMutationCache().build(G(this,be),this.options)),G(this,fe).addObserver(this),G(this,fe).execute(u)}},be=new WeakMap,Te=new WeakMap,fe=new WeakMap,ye=new WeakMap,Ae=new WeakSet,Be=function(){var v;const u=((v=G(this,fe))==null?void 0:v.state)??Pt();Ne(this,Te,{...u,isPending:u.status==="pending",isSuccess:u.status==="success",isError:u.status==="error",isIdle:u.status==="idle",mutate:this.mutate,reset:this.reset})},it=function(u){mt.batch(()=>{var v,i,e,t,a,o,m,w;if(G(this,ye)&&this.hasListeners()){const r=G(this,Te).variables,s=G(this,Te).context,n={client:G(this,be),meta:this.options.meta,mutationKey:this.options.mutationKey};if((u==null?void 0:u.type)==="success"){try{(i=(v=G(this,ye)).onSuccess)==null||i.call(v,u.data,r,s,n)}catch(f){Promise.reject(f)}try{(t=(e=G(this,ye)).onSettled)==null||t.call(e,u.data,null,r,s,n)}catch(f){Promise.reject(f)}}else if((u==null?void 0:u.type)==="error"){try{(o=(a=G(this,ye)).onError)==null||o.call(a,u.error,r,s,n)}catch(f){Promise.reject(f)}try{(w=(m=G(this,ye)).onSettled)==null||w.call(m,void 0,u.error,r,s,n)}catch(f){Promise.reject(f)}}}this.listeners.forEach(r=>{r(G(this,Te))})})},gt);function ot(d,u){const v=Ge(),[i]=He.useState(()=>new Ht(v,d));He.useEffect(()=>{i.setOptions(d)},[i,d]);const e=He.useSyncExternalStore(He.useCallback(a=>i.subscribe(mt.batchCalls(a)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),t=He.useCallback((a,o)=>{i.mutate(a,o).catch(Lt)},[i]);if(e.error&&$t(i.options.throwOnError,[e.error]))throw e.error;return{...e,mutate:t,mutateAsync:e.mutate}}const An=6048e5,In=864e5,wt=6e4,bt=36e5;function Qt(d,u){const i=qt(d);let e;if(i.date){const m=Kt(i.date,2);e=jt(m.restDateString,m.year)}if(!e||isNaN(e.getTime()))return new Date(NaN);const t=e.getTime();let a=0,o;if(i.time&&(a=Yt(i.time),isNaN(a)))return new Date(NaN);if(i.timezone){if(o=Zt(i.timezone),isNaN(o))return new Date(NaN)}else{const m=new Date(t+a),w=new Date(0);return w.setFullYear(m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate()),w.setHours(m.getUTCHours(),m.getUTCMinutes(),m.getUTCSeconds(),m.getUTCMilliseconds()),w}return new Date(t+a+o)}const We={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},zt=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Wt=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Bt=/^([+-])(\d{2})(?::?(\d{2}))?$/;function qt(d){const u={},v=d.split(We.dateTimeDelimiter);let i;if(v.length>2)return u;if(/:/.test(v[0])?i=v[0]:(u.date=v[0],i=v[1],We.timeZoneDelimiter.test(u.date)&&(u.date=d.split(We.timeZoneDelimiter)[0],i=d.substr(u.date.length,d.length))),i){const e=We.timezone.exec(i);e?(u.time=i.replace(e[1],""),u.timezone=e[1]):u.time=i}return u}function Kt(d,u){const v=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+u)+"})|(\\d{2}|[+-]\\d{"+(2+u)+"})$)"),i=d.match(v);if(!i)return{year:NaN,restDateString:""};const e=i[1]?parseInt(i[1]):null,t=i[2]?parseInt(i[2]):null;return{year:t===null?e:t*100,restDateString:d.slice((i[1]||i[2]).length)}}function jt(d,u){if(u===null)return new Date(NaN);const v=d.match(zt);if(!v)return new Date(NaN);const i=!!v[4],e=Qe(v[1]),t=Qe(v[2])-1,a=Qe(v[3]),o=Qe(v[4]),m=Qe(v[5])-1;if(i)return en(u,o,m)?Gt(u,o,m):new Date(NaN);{const w=new Date(0);return!Vt(u,t,a)||!Jt(u,e)?new Date(NaN):(w.setUTCFullYear(u,t,Math.max(e,a)),w)}}function Qe(d){return d?parseInt(d):1}function Yt(d){const u=d.match(Wt);if(!u)return NaN;const v=tt(u[1]),i=tt(u[2]),e=tt(u[3]);return tn(v,i,e)?v*bt+i*wt+e*1e3:NaN}function tt(d){return d&&parseFloat(d.replace(",","."))||0}function Zt(d){if(d==="Z")return 0;const u=d.match(Bt);if(!u)return 0;const v=u[1]==="+"?-1:1,i=parseInt(u[2]),e=u[3]&&parseInt(u[3])||0;return nn(i,e)?v*(i*bt+e*wt):NaN}function Gt(d,u,v){const i=new Date(0);i.setUTCFullYear(d,0,4);const e=i.getUTCDay()||7,t=(u-1)*7+v+1-e;return i.setUTCDate(i.getUTCDate()+t),i}const Xt=[31,null,31,30,31,30,31,31,30,31,30,31];function yt(d){return d%400===0||d%4===0&&d%100!==0}function Vt(d,u,v){return u>=0&&u<=11&&v>=1&&v<=(Xt[u]||(yt(d)?29:28))}function Jt(d,u){return u>=1&&u<=(yt(d)?366:365)}function en(d,u,v){return u>=1&&u<=53&&v>=0&&v<=6}function tn(d,u,v){return d===24?u===0&&v===0:v>=0&&v<60&&u>=0&&u<60&&d>=0&&d<25}function nn(d,u){return u>=0&&u<=59}const Un=(d,u="$")=>{const i=Math.abs(d).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2});return`${d>=0?"+":"-"}${u}${i}`},En=(d,u="$")=>{const v=Math.abs(d);let i;return v>=1e6?i=`${(v/1e6).toFixed(1)}M`:v>=1e3?i=`${(v/1e3).toFixed(1)}K`:i=v.toFixed(0),`${d>=0?"+":"-"}${u}${i}`},rn=(d,u)=>{const v=d+u;return v===0?0:Math.round(d/v*100)},sn=d=>{if(!d||d.length===0)return{totalPL:0,tradeCount:0,winCount:0,lossCount:0,winRate:0,avgWin:0,avgLoss:0};const u=d.reduce((a,o)=>a+o.amount,0),v=d.filter(a=>a.amount>0),i=d.filter(a=>a.amount<0),e=v.length>0?v.reduce((a,o)=>a+o.amount,0)/v.length:0,t=i.length>0?i.reduce((a,o)=>a+Math.abs(o.amount),0)/i.length:0;return{totalPL:u,tradeCount:d.length,winCount:v.length,lossCount:i.length,winRate:rn(v.length,i.length),avgWin:e,avgLoss:t}},Tn=(d,u)=>Array.from({length:12},(i,e)=>e).map(i=>{const e=d.filter(t=>{const a=Qt(t.date);return a.getFullYear()===u&&a.getMonth()===i});return{month:i,...sn(e)}}),Cn=()=>crypto.randomUUID();function on(d,u){return u.forEach(function(v){v&&typeof v!="string"&&!Array.isArray(v)&&Object.keys(v).forEach(function(i){if(i!=="default"&&!(i in d)){var e=Object.getOwnPropertyDescriptor(v,i);Object.defineProperty(d,i,e.get?e:{enumerable:!0,get:function(){return v[i]}})}})}),Object.freeze(d)}function At(d,u){return new Promise(function(v,i){let e;return an(d).then(function(t){try{return e=t,v(new Blob([u.slice(0,2),e,u.slice(2)],{type:"image/jpeg"}))}catch(a){return i(a)}},i)})}const an=d=>new Promise((u,v)=>{const i=new FileReader;i.addEventListener("load",({target:{result:e}})=>{const t=new DataView(e);let a=0;if(t.getUint16(a)!==65496)return v("not a valid JPEG");for(a+=2;;){const o=t.getUint16(a);if(o===65498)break;const m=t.getUint16(a+2);if(o===65505&&t.getUint32(a+4)===1165519206){const w=a+10;let r;switch(t.getUint16(w)){case 18761:r=!0;break;case 19789:r=!1;break;default:return v("TIFF header contains invalid endian")}if(t.getUint16(w+2,r)!==42)return v("TIFF header contains invalid version");const s=t.getUint32(w+4,r),n=w+s+2+12*t.getUint16(w+s,r);for(let f=w+s+2;f<n;f+=12)if(t.getUint16(f,r)==274){if(t.getUint16(f+2,r)!==3)return v("Orientation data type is invalid");if(t.getUint32(f+4,r)!==1)return v("Orientation data count is invalid");t.setUint16(f+8,1,r);break}return u(e.slice(a,a+2+m))}a+=2+m}return u(new Blob)}),i.readAsArrayBuffer(d)});var Ke={},fn={get exports(){return Ke},set exports(d){Ke=d}};(function(d){var u,v,i={};fn.exports=i,i.parse=function(e,t){for(var a=i.bin.readUshort,o=i.bin.readUint,m=0,w={},r=new Uint8Array(e),s=r.length-4;o(r,s)!=101010256;)s--;m=s,m+=4;var n=a(r,m+=4);a(r,m+=2);var f=o(r,m+=2),p=o(r,m+=4);m+=4,m=p;for(var T=0;T<n;T++){o(r,m),m+=4,m+=4,m+=4,o(r,m+=4),f=o(r,m+=4);var M=o(r,m+=4),I=a(r,m+=4),P=a(r,m+2),x=a(r,m+4);m+=6;var _=o(r,m+=8);m+=4,m+=I+P+x,i._readLocal(r,_,w,f,M,t)}return w},i._readLocal=function(e,t,a,o,m,w){var r=i.bin.readUshort,s=i.bin.readUint;s(e,t),r(e,t+=4),r(e,t+=2);var n=r(e,t+=2);s(e,t+=2),s(e,t+=4),t+=4;var f=r(e,t+=8),p=r(e,t+=2);t+=2;var T=i.bin.readUTF8(e,t,f);if(t+=f,t+=p,w)a[T]={size:m,csize:o};else{var M=new Uint8Array(e.buffer,t);if(n==0)a[T]=new Uint8Array(M.buffer.slice(t,t+o));else{if(n!=8)throw"unknown compression method: "+n;var I=new Uint8Array(m);i.inflateRaw(M,I),a[T]=I}}},i.inflateRaw=function(e,t){return i.F.inflate(e,t)},i.inflate=function(e,t){return e[0],e[1],i.inflateRaw(new Uint8Array(e.buffer,e.byteOffset+2,e.length-6),t)},i.deflate=function(e,t){t==null&&(t={level:6});var a=0,o=new Uint8Array(50+Math.floor(1.1*e.length));o[a]=120,o[a+1]=156,a+=2,a=i.F.deflateRaw(e,o,a,t.level);var m=i.adler(e,0,e.length);return o[a+0]=m>>>24&255,o[a+1]=m>>>16&255,o[a+2]=m>>>8&255,o[a+3]=m>>>0&255,new Uint8Array(o.buffer,0,a+4)},i.deflateRaw=function(e,t){t==null&&(t={level:6});var a=new Uint8Array(50+Math.floor(1.1*e.length)),o=i.F.deflateRaw(e,a,o,t.level);return new Uint8Array(a.buffer,0,o)},i.encode=function(e,t){t==null&&(t=!1);var a=0,o=i.bin.writeUint,m=i.bin.writeUshort,w={};for(var r in e){var s=!i._noNeed(r)&&!t,n=e[r],f=i.crc.crc(n,0,n.length);w[r]={cpr:s,usize:n.length,crc:f,file:s?i.deflateRaw(n):n}}for(var r in w)a+=w[r].file.length+30+46+2*i.bin.sizeUTF8(r);a+=22;var p=new Uint8Array(a),T=0,M=[];for(var r in w){var I=w[r];M.push(T),T=i._writeHeader(p,T,r,I,0)}var P=0,x=T;for(var r in w)I=w[r],M.push(T),T=i._writeHeader(p,T,r,I,1,M[P++]);var _=T-x;return o(p,T,101010256),T+=4,m(p,T+=4,P),m(p,T+=2,P),o(p,T+=2,_),o(p,T+=4,x),T+=4,T+=2,p.buffer},i._noNeed=function(e){var t=e.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(t)!=-1},i._writeHeader=function(e,t,a,o,m,w){var r=i.bin.writeUint,s=i.bin.writeUshort,n=o.file;return r(e,t,m==0?67324752:33639248),t+=4,m==1&&(t+=2),s(e,t,20),s(e,t+=2,0),s(e,t+=2,o.cpr?8:0),r(e,t+=2,0),r(e,t+=4,o.crc),r(e,t+=4,n.length),r(e,t+=4,o.usize),s(e,t+=4,i.bin.sizeUTF8(a)),s(e,t+=2,0),t+=2,m==1&&(t+=2,t+=2,r(e,t+=6,w),t+=4),t+=i.bin.writeUTF8(e,t,a),m==0&&(e.set(n,t),t+=n.length),t},i.crc={table:function(){for(var e=new Uint32Array(256),t=0;t<256;t++){for(var a=t,o=0;o<8;o++)1&a?a=3988292384^a>>>1:a>>>=1;e[t]=a}return e}(),update:function(e,t,a,o){for(var m=0;m<o;m++)e=i.crc.table[255&(e^t[a+m])]^e>>>8;return e},crc:function(e,t,a){return 4294967295^i.crc.update(4294967295,e,t,a)}},i.adler=function(e,t,a){for(var o=1,m=0,w=t,r=t+a;w<r;){for(var s=Math.min(w+5552,r);w<s;)m+=o+=e[w++];o%=65521,m%=65521}return m<<16|o},i.bin={readUshort:function(e,t){return e[t]|e[t+1]<<8},writeUshort:function(e,t,a){e[t]=255&a,e[t+1]=a>>8&255},readUint:function(e,t){return 16777216*e[t+3]+(e[t+2]<<16|e[t+1]<<8|e[t])},writeUint:function(e,t,a){e[t]=255&a,e[t+1]=a>>8&255,e[t+2]=a>>16&255,e[t+3]=a>>24&255},readASCII:function(e,t,a){for(var o="",m=0;m<a;m++)o+=String.fromCharCode(e[t+m]);return o},writeASCII:function(e,t,a){for(var o=0;o<a.length;o++)e[t+o]=a.charCodeAt(o)},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,t,a){for(var o,m="",w=0;w<a;w++)m+="%"+i.bin.pad(e[t+w].toString(16));try{o=decodeURIComponent(m)}catch{return i.bin.readASCII(e,t,a)}return o},writeUTF8:function(e,t,a){for(var o=a.length,m=0,w=0;w<o;w++){var r=a.charCodeAt(w);if(!(4294967168&r))e[t+m]=r,m++;else if(!(4294965248&r))e[t+m]=192|r>>6,e[t+m+1]=128|r>>0&63,m+=2;else if(!(4294901760&r))e[t+m]=224|r>>12,e[t+m+1]=128|r>>6&63,e[t+m+2]=128|r>>0&63,m+=3;else{if(4292870144&r)throw"e";e[t+m]=240|r>>18,e[t+m+1]=128|r>>12&63,e[t+m+2]=128|r>>6&63,e[t+m+3]=128|r>>0&63,m+=4}}return m},sizeUTF8:function(e){for(var t=e.length,a=0,o=0;o<t;o++){var m=e.charCodeAt(o);if(!(4294967168&m))a++;else if(!(4294965248&m))a+=2;else if(!(4294901760&m))a+=3;else{if(4292870144&m)throw"e";a+=4}}return a}},i.F={},i.F.deflateRaw=function(e,t,a,o){var m=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][o],w=i.F.U,r=i.F._goodIndex;i.F._hash;var s=i.F._putsE,n=0,f=a<<3,p=0,T=e.length;if(o==0){for(;n<T;)s(t,f,n+(E=Math.min(65535,T-n))==T?1:0),f=i.F._copyExact(e,n,E,t,f+8),n+=E;return f>>>3}var M=w.lits,I=w.strt,P=w.prev,x=0,_=0,k=0,b=0,D=0,h=0;for(T>2&&(I[h=i.F._hash(e,0)]=0),n=0;n<T;n++){if(D=h,n+1<T-2){h=i.F._hash(e,n+1);var c=n+1&32767;P[c]=I[h],I[h]=c}if(p<=n){(x>14e3||_>26697)&&T-n>100&&(p<n&&(M[x]=n-p,x+=2,p=n),f=i.F._writeBlock(n==T-1||p==T?1:0,M,x,b,e,k,n-k,t,f),x=_=b=0,k=n);var A=0;n<T-2&&(A=i.F._bestMatch(e,n,P,D,Math.min(m[2],T-n),m[3]));var E=A>>>16,U=65535&A;if(A!=0){U=65535&A;var C=r(E=A>>>16,w.of0);w.lhst[257+C]++;var y=r(U,w.df0);w.dhst[y]++,b+=w.exb[C]+w.dxb[y],M[x]=E<<23|n-p,M[x+1]=U<<16|C<<8|y,x+=2,p=n+E}else w.lhst[e[n]]++;_++}}for(k==n&&e.length!=0||(p<n&&(M[x]=n-p,x+=2,p=n),f=i.F._writeBlock(1,M,x,b,e,k,n-k,t,f),x=0,_=0,x=_=b=0,k=n);7&f;)f++;return f>>>3},i.F._bestMatch=function(e,t,a,o,m,w){var r=32767&t,s=a[r],n=r-s+32768&32767;if(s==r||o!=i.F._hash(e,t-n))return 0;for(var f=0,p=0,T=Math.min(32767,t);n<=T&&--w!=0&&s!=r;){if(f==0||e[t+f]==e[t+f-n]){var M=i.F._howLong(e,t,n);if(M>f){if(p=n,(f=M)>=m)break;n+2<M&&(M=n+2);for(var I=0,P=0;P<M-2;P++){var x=t-n+P+32768&32767,_=x-a[x]+32768&32767;_>I&&(I=_,s=x)}}}n+=(r=s)-(s=a[r])+32768&32767}return f<<16|p},i.F._howLong=function(e,t,a){if(e[t]!=e[t-a]||e[t+1]!=e[t+1-a]||e[t+2]!=e[t+2-a])return 0;var o=t,m=Math.min(e.length,t+258);for(t+=3;t<m&&e[t]==e[t-a];)t++;return t-o},i.F._hash=function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<4)&65535},i.saved=0,i.F._writeBlock=function(e,t,a,o,m,w,r,s,n){var f,p,T,M,I,P,x,_,k,b=i.F.U,D=i.F._putsF,h=i.F._putsE;b.lhst[256]++,p=(f=i.F.getTrees())[0],T=f[1],M=f[2],I=f[3],P=f[4],x=f[5],_=f[6],k=f[7];var c=32+(n+3&7?8-(n+3&7):0)+(r<<3),A=o+i.F.contSize(b.fltree,b.lhst)+i.F.contSize(b.fdtree,b.dhst),E=o+i.F.contSize(b.ltree,b.lhst)+i.F.contSize(b.dtree,b.dhst);E+=14+3*x+i.F.contSize(b.itree,b.ihst)+(2*b.ihst[16]+3*b.ihst[17]+7*b.ihst[18]);for(var U=0;U<286;U++)b.lhst[U]=0;for(U=0;U<30;U++)b.dhst[U]=0;for(U=0;U<19;U++)b.ihst[U]=0;var C=c<A&&c<E?0:A<E?1:2;if(D(s,n,e),D(s,n+1,C),n+=3,C==0){for(;7&n;)n++;n=i.F._copyExact(m,w,r,s,n)}else{var y,S;if(C==1&&(y=b.fltree,S=b.fdtree),C==2){i.F.makeCodes(b.ltree,p),i.F.revCodes(b.ltree,p),i.F.makeCodes(b.dtree,T),i.F.revCodes(b.dtree,T),i.F.makeCodes(b.itree,M),i.F.revCodes(b.itree,M),y=b.ltree,S=b.dtree,h(s,n,I-257),h(s,n+=5,P-1),h(s,n+=5,x-4),n+=4;for(var g=0;g<x;g++)h(s,n+3*g,b.itree[1+(b.ordr[g]<<1)]);n+=3*x,n=i.F._codeTiny(_,b.itree,s,n),n=i.F._codeTiny(k,b.itree,s,n)}for(var l=w,O=0;O<a;O+=2){for(var F=t[O],N=F>>>23,Q=l+(8388607&F);l<Q;)n=i.F._writeLit(m[l++],y,s,n);if(N!=0){var $=t[O+1],H=$>>16,L=$>>8&255,R=255&$;h(s,n=i.F._writeLit(257+L,y,s,n),N-b.of0[L]),n+=b.exb[L],D(s,n=i.F._writeLit(R,S,s,n),H-b.df0[R]),n+=b.dxb[R],l+=N}}n=i.F._writeLit(256,y,s,n)}return n},i.F._copyExact=function(e,t,a,o,m){var w=m>>>3;return o[w]=a,o[w+1]=a>>>8,o[w+2]=255-o[w],o[w+3]=255-o[w+1],w+=4,o.set(new Uint8Array(e.buffer,t,a),w),m+(a+4<<3)},i.F.getTrees=function(){for(var e=i.F.U,t=i.F._hufTree(e.lhst,e.ltree,15),a=i.F._hufTree(e.dhst,e.dtree,15),o=[],m=i.F._lenCodes(e.ltree,o),w=[],r=i.F._lenCodes(e.dtree,w),s=0;s<o.length;s+=2)e.ihst[o[s]]++;for(s=0;s<w.length;s+=2)e.ihst[w[s]]++;for(var n=i.F._hufTree(e.ihst,e.itree,7),f=19;f>4&&e.itree[1+(e.ordr[f-1]<<1)]==0;)f--;return[t,a,n,m,r,f,o,w]},i.F.getSecond=function(e){for(var t=[],a=0;a<e.length;a+=2)t.push(e[a+1]);return t},i.F.nonZero=function(e){for(var t="",a=0;a<e.length;a+=2)e[a+1]!=0&&(t+=(a>>1)+",");return t},i.F.contSize=function(e,t){for(var a=0,o=0;o<t.length;o++)a+=t[o]*e[1+(o<<1)];return a},i.F._codeTiny=function(e,t,a,o){for(var m=0;m<e.length;m+=2){var w=e[m],r=e[m+1];o=i.F._writeLit(w,t,a,o);var s=w==16?2:w==17?3:7;w>15&&(i.F._putsE(a,o,r,s),o+=s)}return o},i.F._lenCodes=function(e,t){for(var a=e.length;a!=2&&e[a-1]==0;)a-=2;for(var o=0;o<a;o+=2){var m=e[o+1],w=o+3<a?e[o+3]:-1,r=o+5<a?e[o+5]:-1,s=o==0?-1:e[o-1];if(m==0&&w==m&&r==m){for(var n=o+5;n+2<a&&e[n+2]==m;)n+=2;(f=Math.min(n+1-o>>>1,138))<11?t.push(17,f-3):t.push(18,f-11),o+=2*f-2}else if(m==s&&w==m&&r==m){for(n=o+5;n+2<a&&e[n+2]==m;)n+=2;var f=Math.min(n+1-o>>>1,6);t.push(16,f-3),o+=2*f-2}else t.push(m,0)}return a>>>1},i.F._hufTree=function(e,t,a){var o=[],m=e.length,w=t.length,r=0;for(r=0;r<w;r+=2)t[r]=0,t[r+1]=0;for(r=0;r<m;r++)e[r]!=0&&o.push({lit:r,f:e[r]});var s=o.length,n=o.slice(0);if(s==0)return 0;if(s==1){var f=o[0].lit;return n=f==0?1:0,t[1+(f<<1)]=1,t[1+(n<<1)]=1,1}o.sort(function(_,k){return _.f-k.f});var p=o[0],T=o[1],M=0,I=1,P=2;for(o[0]={lit:-1,f:p.f+T.f,l:p,r:T,d:0};I!=s-1;)p=M!=I&&(P==s||o[M].f<o[P].f)?o[M++]:o[P++],T=M!=I&&(P==s||o[M].f<o[P].f)?o[M++]:o[P++],o[I++]={lit:-1,f:p.f+T.f,l:p,r:T};var x=i.F.setDepth(o[I-1],0);for(x>a&&(i.F.restrictDepth(n,a,x),x=a),r=0;r<s;r++)t[1+(n[r].lit<<1)]=n[r].d;return x},i.F.setDepth=function(e,t){return e.lit!=-1?(e.d=t,t):Math.max(i.F.setDepth(e.l,t+1),i.F.setDepth(e.r,t+1))},i.F.restrictDepth=function(e,t,a){var o=0,m=1<<a-t,w=0;for(e.sort(function(s,n){return n.d==s.d?s.f-n.f:n.d-s.d}),o=0;o<e.length&&e[o].d>t;o++){var r=e[o].d;e[o].d=t,w+=m-(1<<a-r)}for(w>>>=a-t;w>0;)(r=e[o].d)<t?(e[o].d++,w-=1<<t-r-1):o++;for(;o>=0;o--)e[o].d==t&&w<0&&(e[o].d--,w++);w!=0&&console.log("debt left")},i.F._goodIndex=function(e,t){var a=0;return t[16|a]<=e&&(a|=16),t[8|a]<=e&&(a|=8),t[4|a]<=e&&(a|=4),t[2|a]<=e&&(a|=2),t[1|a]<=e&&(a|=1),a},i.F._writeLit=function(e,t,a,o){return i.F._putsF(a,o,t[e<<1]),o+t[1+(e<<1)]},i.F.inflate=function(e,t){var a=Uint8Array;if(e[0]==3&&e[1]==0)return t||new a(0);var o=i.F,m=o._bitsF,w=o._bitsE,r=o._decodeTiny,s=o.makeCodes,n=o.codes2map,f=o._get17,p=o.U,T=t==null;T&&(t=new a(e.length>>>2<<3));for(var M,I,P=0,x=0,_=0,k=0,b=0,D=0,h=0,c=0,A=0;P==0;)if(P=m(e,A,1),x=m(e,A+1,2),A+=3,x!=0){if(T&&(t=i.F._check(t,c+(1<<17))),x==1&&(M=p.flmap,I=p.fdmap,D=511,h=31),x==2){_=w(e,A,5)+257,k=w(e,A+5,5)+1,b=w(e,A+10,4)+4,A+=14;for(var E=0;E<38;E+=2)p.itree[E]=0,p.itree[E+1]=0;var U=1;for(E=0;E<b;E++){var C=w(e,A+3*E,3);p.itree[1+(p.ordr[E]<<1)]=C,C>U&&(U=C)}A+=3*b,s(p.itree,U),n(p.itree,U,p.imap),M=p.lmap,I=p.dmap,A=r(p.imap,(1<<U)-1,_+k,e,A,p.ttree);var y=o._copyOut(p.ttree,0,_,p.ltree);D=(1<<y)-1;var S=o._copyOut(p.ttree,_,k,p.dtree);h=(1<<S)-1,s(p.ltree,y),n(p.ltree,y,M),s(p.dtree,S),n(p.dtree,S,I)}for(;;){var g=M[f(e,A)&D];A+=15&g;var l=g>>>4;if(!(l>>>8))t[c++]=l;else{if(l==256)break;var O=c+l-254;if(l>264){var F=p.ldef[l-257];O=c+(F>>>3)+w(e,A,7&F),A+=7&F}var N=I[f(e,A)&h];A+=15&N;var Q=N>>>4,$=p.ddef[Q],H=($>>>4)+m(e,A,15&$);for(A+=15&$,T&&(t=i.F._check(t,c+(1<<17)));c<O;)t[c]=t[c++-H],t[c]=t[c++-H],t[c]=t[c++-H],t[c]=t[c++-H];c=O}}}else{7&A&&(A+=8-(7&A));var L=4+(A>>>3),R=e[L-4]|e[L-3]<<8;T&&(t=i.F._check(t,c+R)),t.set(new a(e.buffer,e.byteOffset+L,R),c),A=L+R<<3,c+=R}return t.length==c?t:t.slice(0,c)},i.F._check=function(e,t){var a=e.length;if(t<=a)return e;var o=new Uint8Array(Math.max(a<<1,t));return o.set(e,0),o},i.F._decodeTiny=function(e,t,a,o,m,w){for(var r=i.F._bitsE,s=i.F._get17,n=0;n<a;){var f=e[s(o,m)&t];m+=15&f;var p=f>>>4;if(p<=15)w[n]=p,n++;else{var T=0,M=0;p==16?(M=3+r(o,m,2),m+=2,T=w[n-1]):p==17?(M=3+r(o,m,3),m+=3):p==18&&(M=11+r(o,m,7),m+=7);for(var I=n+M;n<I;)w[n]=T,n++}}return m},i.F._copyOut=function(e,t,a,o){for(var m=0,w=0,r=o.length>>>1;w<a;){var s=e[w+t];o[w<<1]=0,o[1+(w<<1)]=s,s>m&&(m=s),w++}for(;w<r;)o[w<<1]=0,o[1+(w<<1)]=0,w++;return m},i.F.makeCodes=function(e,t){for(var a,o,m,w,r=i.F.U,s=e.length,n=r.bl_count,f=0;f<=t;f++)n[f]=0;for(f=1;f<s;f+=2)n[e[f]]++;var p=r.next_code;for(a=0,n[0]=0,o=1;o<=t;o++)a=a+n[o-1]<<1,p[o]=a;for(m=0;m<s;m+=2)(w=e[m+1])!=0&&(e[m]=p[w],p[w]++)},i.F.codes2map=function(e,t,a){for(var o=e.length,m=i.F.U.rev15,w=0;w<o;w+=2)if(e[w+1]!=0)for(var r=w>>1,s=e[w+1],n=r<<4|s,f=t-s,p=e[w]<<f,T=p+(1<<f);p!=T;)a[m[p]>>>15-t]=n,p++},i.F.revCodes=function(e,t){for(var a=i.F.U.rev15,o=15-t,m=0;m<e.length;m+=2){var w=e[m]<<t-e[m+1];e[m]=a[w]>>>o}},i.F._putsE=function(e,t,a){a<<=7&t;var o=t>>>3;e[o]|=a,e[o+1]|=a>>>8},i.F._putsF=function(e,t,a){a<<=7&t;var o=t>>>3;e[o]|=a,e[o+1]|=a>>>8,e[o+2]|=a>>>16},i.F._bitsE=function(e,t,a){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<a)-1},i.F._bitsF=function(e,t,a){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<a)-1},i.F._get17=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)},i.F._get25=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16|e[3+(t>>>3)]<<24)>>>(7&t)},i.F.U=(u=Uint16Array,v=Uint32Array,{next_code:new u(16),bl_count:new u(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new u(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new v(32),flmap:new u(512),fltree:[],fdmap:new u(32),fdtree:[],lmap:new u(32768),ltree:[],ttree:[],dmap:new u(32768),dtree:[],imap:new u(512),itree:[],rev15:new u(32768),lhst:new v(286),dhst:new v(30),ihst:new v(19),lits:new v(15e3),strt:new u(65536),prev:new u(32768)}),function(){for(var e=i.F.U,t=0;t<32768;t++){var a=t;a=(4278255360&(a=(4042322160&(a=(3435973836&(a=(2863311530&a)>>>1|(1431655765&a)<<1))>>>2|(858993459&a)<<2))>>>4|(252645135&a)<<4))>>>8|(16711935&a)<<8,e.rev15[t]=(a>>>16|a<<16)>>>17}function o(m,w,r){for(;w--!=0;)m.push(0,r)}for(t=0;t<32;t++)e.ldef[t]=e.of0[t]<<3|e.exb[t],e.ddef[t]=e.df0[t]<<4|e.dxb[t];o(e.fltree,144,8),o(e.fltree,112,9),o(e.fltree,24,7),o(e.fltree,8,8),i.F.makeCodes(e.fltree,9),i.F.codes2map(e.fltree,9,e.flmap),i.F.revCodes(e.fltree,9),o(e.fdtree,32,5),i.F.makeCodes(e.fdtree,5),i.F.codes2map(e.fdtree,5,e.fdmap),i.F.revCodes(e.fdtree,5),o(e.itree,19,0),o(e.ltree,286,0),o(e.dtree,30,0),o(e.ttree,320,0)}()})();var ln=on({__proto__:null,default:Ke},[Ke]);const ge=function(){var d={nextZero(r,s){for(;r[s]!=0;)s++;return s},readUshort:(r,s)=>r[s]<<8|r[s+1],writeUshort(r,s,n){r[s]=n>>8&255,r[s+1]=255&n},readUint:(r,s)=>16777216*r[s]+(r[s+1]<<16|r[s+2]<<8|r[s+3]),writeUint(r,s,n){r[s]=n>>24&255,r[s+1]=n>>16&255,r[s+2]=n>>8&255,r[s+3]=255&n},readASCII(r,s,n){let f="";for(let p=0;p<n;p++)f+=String.fromCharCode(r[s+p]);return f},writeASCII(r,s,n){for(let f=0;f<n.length;f++)r[s+f]=n.charCodeAt(f)},readBytes(r,s,n){const f=[];for(let p=0;p<n;p++)f.push(r[s+p]);return f},pad:r=>r.length<2?`0${r}`:r,readUTF8(r,s,n){let f,p="";for(let T=0;T<n;T++)p+=`%${d.pad(r[s+T].toString(16))}`;try{f=decodeURIComponent(p)}catch{return d.readASCII(r,s,n)}return f}};function u(r,s,n,f){const p=s*n,T=t(f),M=Math.ceil(s*T/8),I=new Uint8Array(4*p),P=new Uint32Array(I.buffer),{ctype:x}=f,{depth:_}=f,k=d.readUshort;if(x==6){const F=p<<2;if(_==8)for(var b=0;b<F;b+=4)I[b]=r[b],I[b+1]=r[b+1],I[b+2]=r[b+2],I[b+3]=r[b+3];if(_==16)for(b=0;b<F;b++)I[b]=r[b<<1]}else if(x==2){const F=f.tabs.tRNS;if(F==null){if(_==8)for(b=0;b<p;b++){var D=3*b;P[b]=255<<24|r[D+2]<<16|r[D+1]<<8|r[D]}if(_==16)for(b=0;b<p;b++)D=6*b,P[b]=255<<24|r[D+4]<<16|r[D+2]<<8|r[D]}else{var h=F[0];const N=F[1],Q=F[2];if(_==8)for(b=0;b<p;b++){var c=b<<2;D=3*b,P[b]=255<<24|r[D+2]<<16|r[D+1]<<8|r[D],r[D]==h&&r[D+1]==N&&r[D+2]==Q&&(I[c+3]=0)}if(_==16)for(b=0;b<p;b++)c=b<<2,D=6*b,P[b]=255<<24|r[D+4]<<16|r[D+2]<<8|r[D],k(r,D)==h&&k(r,D+2)==N&&k(r,D+4)==Q&&(I[c+3]=0)}}else if(x==3){const F=f.tabs.PLTE,N=f.tabs.tRNS,Q=N?N.length:0;if(_==1)for(var A=0;A<n;A++){var E=A*M,U=A*s;for(b=0;b<s;b++){c=U+b<<2;var C=3*(y=r[E+(b>>3)]>>7-((7&b)<<0)&1);I[c]=F[C],I[c+1]=F[C+1],I[c+2]=F[C+2],I[c+3]=y<Q?N[y]:255}}if(_==2)for(A=0;A<n;A++)for(E=A*M,U=A*s,b=0;b<s;b++)c=U+b<<2,C=3*(y=r[E+(b>>2)]>>6-((3&b)<<1)&3),I[c]=F[C],I[c+1]=F[C+1],I[c+2]=F[C+2],I[c+3]=y<Q?N[y]:255;if(_==4)for(A=0;A<n;A++)for(E=A*M,U=A*s,b=0;b<s;b++)c=U+b<<2,C=3*(y=r[E+(b>>1)]>>4-((1&b)<<2)&15),I[c]=F[C],I[c+1]=F[C+1],I[c+2]=F[C+2],I[c+3]=y<Q?N[y]:255;if(_==8)for(b=0;b<p;b++){var y;c=b<<2,C=3*(y=r[b]),I[c]=F[C],I[c+1]=F[C+1],I[c+2]=F[C+2],I[c+3]=y<Q?N[y]:255}}else if(x==4){if(_==8)for(b=0;b<p;b++){c=b<<2;var S=r[g=b<<1];I[c]=S,I[c+1]=S,I[c+2]=S,I[c+3]=r[g+1]}if(_==16)for(b=0;b<p;b++){var g;c=b<<2,S=r[g=b<<2],I[c]=S,I[c+1]=S,I[c+2]=S,I[c+3]=r[g+2]}}else if(x==0)for(h=f.tabs.tRNS?f.tabs.tRNS:-1,A=0;A<n;A++){const F=A*M,N=A*s;if(_==1)for(var l=0;l<s;l++){var O=(S=255*(r[F+(l>>>3)]>>>7-(7&l)&1))==255*h?0:255;P[N+l]=O<<24|S<<16|S<<8|S}else if(_==2)for(l=0;l<s;l++)O=(S=85*(r[F+(l>>>2)]>>>6-((3&l)<<1)&3))==85*h?0:255,P[N+l]=O<<24|S<<16|S<<8|S;else if(_==4)for(l=0;l<s;l++)O=(S=17*(r[F+(l>>>1)]>>>4-((1&l)<<2)&15))==17*h?0:255,P[N+l]=O<<24|S<<16|S<<8|S;else if(_==8)for(l=0;l<s;l++)O=(S=r[F+l])==h?0:255,P[N+l]=O<<24|S<<16|S<<8|S;else if(_==16)for(l=0;l<s;l++)S=r[F+(l<<1)],O=k(r,F+(l<<1))==h?0:255,P[N+l]=O<<24|S<<16|S<<8|S}return I}function v(r,s,n,f){const p=t(r),T=Math.ceil(n*p/8),M=new Uint8Array((T+1+r.interlace)*f);return s=r.tabs.CgBI?e(s,M):i(s,M),r.interlace==0?s=a(s,r,0,n,f):r.interlace==1&&(s=function(P,x){const _=x.width,k=x.height,b=t(x),D=b>>3,h=Math.ceil(_*b/8),c=new Uint8Array(k*h);let A=0;const E=[0,0,4,0,2,0,1],U=[0,4,0,2,0,1,0],C=[8,8,8,4,4,2,2],y=[8,8,4,4,2,2,1];let S=0;for(;S<7;){const l=C[S],O=y[S];let F=0,N=0,Q=E[S];for(;Q<k;)Q+=l,N++;let $=U[S];for(;$<_;)$+=O,F++;const H=Math.ceil(F*b/8);a(P,x,A,F,N);let L=0,R=E[S];for(;R<k;){let z=U[S],Y=A+L*H<<3;for(;z<_;){var g;if(b==1&&(g=(g=P[Y>>3])>>7-(7&Y)&1,c[R*h+(z>>3)]|=g<<7-((7&z)<<0)),b==2&&(g=(g=P[Y>>3])>>6-(7&Y)&3,c[R*h+(z>>2)]|=g<<6-((3&z)<<1)),b==4&&(g=(g=P[Y>>3])>>4-(7&Y)&15,c[R*h+(z>>1)]|=g<<4-((1&z)<<2)),b>=8){const B=R*h+z*D;for(let W=0;W<D;W++)c[B+W]=P[(Y>>3)+W]}Y+=b,z+=O}L++,R+=l}F*N!=0&&(A+=N*(1+H)),S+=1}return c}(s,r)),s}function i(r,s){return e(new Uint8Array(r.buffer,2,r.length-6),s)}var e=function(){const r={H:{}};return r.H.N=function(s,n){const f=Uint8Array;let p,T,M=0,I=0,P=0,x=0,_=0,k=0,b=0,D=0,h=0;if(s[0]==3&&s[1]==0)return n||new f(0);const c=r.H,A=c.b,E=c.e,U=c.R,C=c.n,y=c.A,S=c.Z,g=c.m,l=n==null;for(l&&(n=new f(s.length>>>2<<5));M==0;)if(M=A(s,h,1),I=A(s,h+1,2),h+=3,I!=0){if(l&&(n=r.H.W(n,D+(1<<17))),I==1&&(p=g.J,T=g.h,k=511,b=31),I==2){P=E(s,h,5)+257,x=E(s,h+5,5)+1,_=E(s,h+10,4)+4,h+=14;let F=1;for(var O=0;O<38;O+=2)g.Q[O]=0,g.Q[O+1]=0;for(O=0;O<_;O++){const $=E(s,h+3*O,3);g.Q[1+(g.X[O]<<1)]=$,$>F&&(F=$)}h+=3*_,C(g.Q,F),y(g.Q,F,g.u),p=g.w,T=g.d,h=U(g.u,(1<<F)-1,P+x,s,h,g.v);const N=c.V(g.v,0,P,g.C);k=(1<<N)-1;const Q=c.V(g.v,P,x,g.D);b=(1<<Q)-1,C(g.C,N),y(g.C,N,p),C(g.D,Q),y(g.D,Q,T)}for(;;){const F=p[S(s,h)&k];h+=15&F;const N=F>>>4;if(!(N>>>8))n[D++]=N;else{if(N==256)break;{let Q=D+N-254;if(N>264){const z=g.q[N-257];Q=D+(z>>>3)+E(s,h,7&z),h+=7&z}const $=T[S(s,h)&b];h+=15&$;const H=$>>>4,L=g.c[H],R=(L>>>4)+A(s,h,15&L);for(h+=15&L;D<Q;)n[D]=n[D++-R],n[D]=n[D++-R],n[D]=n[D++-R],n[D]=n[D++-R];D=Q}}}}else{7&h&&(h+=8-(7&h));const F=4+(h>>>3),N=s[F-4]|s[F-3]<<8;l&&(n=r.H.W(n,D+N)),n.set(new f(s.buffer,s.byteOffset+F,N),D),h=F+N<<3,D+=N}return n.length==D?n:n.slice(0,D)},r.H.W=function(s,n){const f=s.length;if(n<=f)return s;const p=new Uint8Array(f<<1);return p.set(s,0),p},r.H.R=function(s,n,f,p,T,M){const I=r.H.e,P=r.H.Z;let x=0;for(;x<f;){const _=s[P(p,T)&n];T+=15&_;const k=_>>>4;if(k<=15)M[x]=k,x++;else{let b=0,D=0;k==16?(D=3+I(p,T,2),T+=2,b=M[x-1]):k==17?(D=3+I(p,T,3),T+=3):k==18&&(D=11+I(p,T,7),T+=7);const h=x+D;for(;x<h;)M[x]=b,x++}}return T},r.H.V=function(s,n,f,p){let T=0,M=0;const I=p.length>>>1;for(;M<f;){const P=s[M+n];p[M<<1]=0,p[1+(M<<1)]=P,P>T&&(T=P),M++}for(;M<I;)p[M<<1]=0,p[1+(M<<1)]=0,M++;return T},r.H.n=function(s,n){const f=r.H.m,p=s.length;let T,M,I,P;const x=f.j;for(var _=0;_<=n;_++)x[_]=0;for(_=1;_<p;_+=2)x[s[_]]++;const k=f.K;for(T=0,x[0]=0,M=1;M<=n;M++)T=T+x[M-1]<<1,k[M]=T;for(I=0;I<p;I+=2)P=s[I+1],P!=0&&(s[I]=k[P],k[P]++)},r.H.A=function(s,n,f){const p=s.length,T=r.H.m.r;for(let M=0;M<p;M+=2)if(s[M+1]!=0){const I=M>>1,P=s[M+1],x=I<<4|P,_=n-P;let k=s[M]<<_;const b=k+(1<<_);for(;k!=b;)f[T[k]>>>15-n]=x,k++}},r.H.l=function(s,n){const f=r.H.m.r,p=15-n;for(let T=0;T<s.length;T+=2){const M=s[T]<<n-s[T+1];s[T]=f[M]>>>p}},r.H.M=function(s,n,f){f<<=7&n;const p=n>>>3;s[p]|=f,s[p+1]|=f>>>8},r.H.I=function(s,n,f){f<<=7&n;const p=n>>>3;s[p]|=f,s[p+1]|=f>>>8,s[p+2]|=f>>>16},r.H.e=function(s,n,f){return(s[n>>>3]|s[1+(n>>>3)]<<8)>>>(7&n)&(1<<f)-1},r.H.b=function(s,n,f){return(s[n>>>3]|s[1+(n>>>3)]<<8|s[2+(n>>>3)]<<16)>>>(7&n)&(1<<f)-1},r.H.Z=function(s,n){return(s[n>>>3]|s[1+(n>>>3)]<<8|s[2+(n>>>3)]<<16)>>>(7&n)},r.H.i=function(s,n){return(s[n>>>3]|s[1+(n>>>3)]<<8|s[2+(n>>>3)]<<16|s[3+(n>>>3)]<<24)>>>(7&n)},r.H.m=function(){const s=Uint16Array,n=Uint32Array;return{K:new s(16),j:new s(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new s(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new n(32),J:new s(512),_:[],h:new s(32),$:[],w:new s(32768),C:[],v:[],d:new s(32768),D:[],u:new s(512),Q:[],r:new s(32768),s:new n(286),Y:new n(30),a:new n(19),t:new n(15e3),k:new s(65536),g:new s(32768)}}(),function(){const s=r.H.m;for(var n=0;n<32768;n++){let p=n;p=(2863311530&p)>>>1|(1431655765&p)<<1,p=(3435973836&p)>>>2|(858993459&p)<<2,p=(4042322160&p)>>>4|(252645135&p)<<4,p=(4278255360&p)>>>8|(16711935&p)<<8,s.r[n]=(p>>>16|p<<16)>>>17}function f(p,T,M){for(;T--!=0;)p.push(0,M)}for(n=0;n<32;n++)s.q[n]=s.S[n]<<3|s.T[n],s.c[n]=s.p[n]<<4|s.z[n];f(s._,144,8),f(s._,112,9),f(s._,24,7),f(s._,8,8),r.H.n(s._,9),r.H.A(s._,9,s.J),r.H.l(s._,9),f(s.$,32,5),r.H.n(s.$,5),r.H.A(s.$,5,s.h),r.H.l(s.$,5),f(s.Q,19,0),f(s.C,286,0),f(s.D,30,0),f(s.v,320,0)}(),r.H.N}();function t(r){return[1,null,3,1,2,null,4][r.ctype]*r.depth}function a(r,s,n,f,p){let T=t(s);const M=Math.ceil(f*T/8);let I,P;T=Math.ceil(T/8);let x=r[n],_=0;if(x>1&&(r[n]=[0,0,1][x-2]),x==3)for(_=T;_<M;_++)r[_+1]=r[_+1]+(r[_+1-T]>>>1)&255;for(let k=0;k<p;k++)if(I=n+k*M,P=I+k+1,x=r[P-1],_=0,x==0)for(;_<M;_++)r[I+_]=r[P+_];else if(x==1){for(;_<T;_++)r[I+_]=r[P+_];for(;_<M;_++)r[I+_]=r[P+_]+r[I+_-T]}else if(x==2)for(;_<M;_++)r[I+_]=r[P+_]+r[I+_-M];else if(x==3){for(;_<T;_++)r[I+_]=r[P+_]+(r[I+_-M]>>>1);for(;_<M;_++)r[I+_]=r[P+_]+(r[I+_-M]+r[I+_-T]>>>1)}else{for(;_<T;_++)r[I+_]=r[P+_]+o(0,r[I+_-M],0);for(;_<M;_++)r[I+_]=r[P+_]+o(r[I+_-T],r[I+_-M],r[I+_-T-M])}return r}function o(r,s,n){const f=r+s-n,p=f-r,T=f-s,M=f-n;return p*p<=T*T&&p*p<=M*M?r:T*T<=M*M?s:n}function m(r,s,n){n.width=d.readUint(r,s),s+=4,n.height=d.readUint(r,s),s+=4,n.depth=r[s],s++,n.ctype=r[s],s++,n.compress=r[s],s++,n.filter=r[s],s++,n.interlace=r[s],s++}function w(r,s,n,f,p,T,M,I,P){const x=Math.min(s,p),_=Math.min(n,T);let k=0,b=0;for(let S=0;S<_;S++)for(let g=0;g<x;g++)if(M>=0&&I>=0?(k=S*s+g<<2,b=(I+S)*p+M+g<<2):(k=(-I+S)*s-M+g<<2,b=S*p+g<<2),P==0)f[b]=r[k],f[b+1]=r[k+1],f[b+2]=r[k+2],f[b+3]=r[k+3];else if(P==1){var D=r[k+3]*.00392156862745098,h=r[k]*D,c=r[k+1]*D,A=r[k+2]*D,E=f[b+3]*(1/255),U=f[b]*E,C=f[b+1]*E,y=f[b+2]*E;const l=1-D,O=D+E*l,F=O==0?0:1/O;f[b+3]=255*O,f[b+0]=(h+U*l)*F,f[b+1]=(c+C*l)*F,f[b+2]=(A+y*l)*F}else if(P==2)D=r[k+3],h=r[k],c=r[k+1],A=r[k+2],E=f[b+3],U=f[b],C=f[b+1],y=f[b+2],D==E&&h==U&&c==C&&A==y?(f[b]=0,f[b+1]=0,f[b+2]=0,f[b+3]=0):(f[b]=h,f[b+1]=c,f[b+2]=A,f[b+3]=D);else if(P==3){if(D=r[k+3],h=r[k],c=r[k+1],A=r[k+2],E=f[b+3],U=f[b],C=f[b+1],y=f[b+2],D==E&&h==U&&c==C&&A==y)continue;if(D<220&&E>20)return!1}return!0}return{decode:function(s){const n=new Uint8Array(s);let f=8;const p=d,T=p.readUshort,M=p.readUint,I={tabs:{},frames:[]},P=new Uint8Array(n.length);let x,_=0,k=0;const b=[137,80,78,71,13,10,26,10];for(var D=0;D<8;D++)if(n[D]!=b[D])throw"The input is not a PNG file!";for(;f<n.length;){const S=p.readUint(n,f);f+=4;const g=p.readASCII(n,f,4);if(f+=4,g=="IHDR")m(n,f,I);else if(g=="iCCP"){for(var h=f;n[h]!=0;)h++;p.readASCII(n,f,h-f),n[h+1];const l=n.slice(h+2,f+S);let O=null;try{O=i(l)}catch{O=e(l)}I.tabs[g]=O}else if(g=="CgBI")I.tabs[g]=n.slice(f,f+4);else if(g=="IDAT"){for(D=0;D<S;D++)P[_+D]=n[f+D];_+=S}else if(g=="acTL")I.tabs[g]={num_frames:M(n,f),num_plays:M(n,f+4)},x=new Uint8Array(n.length);else if(g=="fcTL"){k!=0&&((y=I.frames[I.frames.length-1]).data=v(I,x.slice(0,k),y.rect.width,y.rect.height),k=0);const l={x:M(n,f+12),y:M(n,f+16),width:M(n,f+4),height:M(n,f+8)};let O=T(n,f+22);O=T(n,f+20)/(O==0?100:O);const F={rect:l,delay:Math.round(1e3*O),dispose:n[f+24],blend:n[f+25]};I.frames.push(F)}else if(g=="fdAT"){for(D=0;D<S-4;D++)x[k+D]=n[f+D+4];k+=S-4}else if(g=="pHYs")I.tabs[g]=[p.readUint(n,f),p.readUint(n,f+4),n[f+8]];else if(g=="cHRM")for(I.tabs[g]=[],D=0;D<8;D++)I.tabs[g].push(p.readUint(n,f+4*D));else if(g=="tEXt"||g=="zTXt"){I.tabs[g]==null&&(I.tabs[g]={});var c=p.nextZero(n,f),A=p.readASCII(n,f,c-f),E=f+S-c-1;if(g=="tEXt")C=p.readASCII(n,c+1,E);else{var U=i(n.slice(c+2,c+2+E));C=p.readUTF8(U,0,U.length)}I.tabs[g][A]=C}else if(g=="iTXt"){I.tabs[g]==null&&(I.tabs[g]={}),c=0,h=f,c=p.nextZero(n,h),A=p.readASCII(n,h,c-h);const l=n[h=c+1];var C;n[h+1],h+=2,c=p.nextZero(n,h),p.readASCII(n,h,c-h),h=c+1,c=p.nextZero(n,h),p.readUTF8(n,h,c-h),E=S-((h=c+1)-f),l==0?C=p.readUTF8(n,h,E):(U=i(n.slice(h,h+E)),C=p.readUTF8(U,0,U.length)),I.tabs[g][A]=C}else if(g=="PLTE")I.tabs[g]=p.readBytes(n,f,S);else if(g=="hIST"){const l=I.tabs.PLTE.length/3;for(I.tabs[g]=[],D=0;D<l;D++)I.tabs[g].push(T(n,f+2*D))}else if(g=="tRNS")I.ctype==3?I.tabs[g]=p.readBytes(n,f,S):I.ctype==0?I.tabs[g]=T(n,f):I.ctype==2&&(I.tabs[g]=[T(n,f),T(n,f+2),T(n,f+4)]);else if(g=="gAMA")I.tabs[g]=p.readUint(n,f)/1e5;else if(g=="sRGB")I.tabs[g]=n[f];else if(g=="bKGD")I.ctype==0||I.ctype==4?I.tabs[g]=[T(n,f)]:I.ctype==2||I.ctype==6?I.tabs[g]=[T(n,f),T(n,f+2),T(n,f+4)]:I.ctype==3&&(I.tabs[g]=n[f]);else if(g=="IEND")break;f+=S,p.readUint(n,f),f+=4}var y;return k!=0&&((y=I.frames[I.frames.length-1]).data=v(I,x.slice(0,k),y.rect.width,y.rect.height)),I.data=v(I,P,I.width,I.height),delete I.compress,delete I.interlace,delete I.filter,I},toRGBA8:function(s){const n=s.width,f=s.height;if(s.tabs.acTL==null)return[u(s.data,n,f,s).buffer];const p=[];s.frames[0].data==null&&(s.frames[0].data=s.data);const T=n*f*4,M=new Uint8Array(T),I=new Uint8Array(T),P=new Uint8Array(T);for(let _=0;_<s.frames.length;_++){const k=s.frames[_],b=k.rect.x,D=k.rect.y,h=k.rect.width,c=k.rect.height,A=u(k.data,h,c,s);if(_!=0)for(var x=0;x<T;x++)P[x]=M[x];if(k.blend==0?w(A,h,c,M,n,f,b,D,0):k.blend==1&&w(A,h,c,M,n,f,b,D,1),p.push(M.buffer.slice(0)),k.dispose!=0){if(k.dispose==1)w(I,h,c,M,n,f,b,D,0);else if(k.dispose==2)for(x=0;x<T;x++)M[x]=P[x]}}return p},_paeth:o,_copyTile:w,_bin:d}}();(function(){const{_copyTile:d}=ge,{_bin:u}=ge,v=ge._paeth;var i={table:function(){const h=new Uint32Array(256);for(let c=0;c<256;c++){let A=c;for(let E=0;E<8;E++)1&A?A=3988292384^A>>>1:A>>>=1;h[c]=A}return h}(),update(h,c,A,E){for(let U=0;U<E;U++)h=i.table[255&(h^c[A+U])]^h>>>8;return h},crc:(h,c,A)=>4294967295^i.update(4294967295,h,c,A)};function e(h,c,A,E){c[A]+=h[0]*E>>4,c[A+1]+=h[1]*E>>4,c[A+2]+=h[2]*E>>4,c[A+3]+=h[3]*E>>4}function t(h){return Math.max(0,Math.min(255,h))}function a(h,c){const A=h[0]-c[0],E=h[1]-c[1],U=h[2]-c[2],C=h[3]-c[3];return A*A+E*E+U*U+C*C}function o(h,c,A,E,U,C,y){y==null&&(y=1);const S=E.length,g=[];for(var l=0;l<S;l++){const R=E[l];g.push([R>>>0&255,R>>>8&255,R>>>16&255,R>>>24&255])}for(l=0;l<S;l++){let R=4294967295;for(var O=0,F=0;F<S;F++){var N=a(g[l],g[F]);F!=l&&N<R&&(R=N,O=F)}}const Q=new Uint32Array(U.buffer),$=new Int16Array(c*A*4),H=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(l=0;l<H.length;l++)H[l]=255*((H[l]+.5)/16-.5);for(let R=0;R<A;R++)for(let z=0;z<c;z++){var L;l=4*(R*c+z),y!=2?L=[t(h[l]+$[l]),t(h[l+1]+$[l+1]),t(h[l+2]+$[l+2]),t(h[l+3]+$[l+3])]:(N=H[4*(3&R)+(3&z)],L=[t(h[l]+N),t(h[l+1]+N),t(h[l+2]+N),t(h[l+3]+N)]),O=0;let Y=16777215;for(F=0;F<S;F++){const q=a(L,g[F]);q<Y&&(Y=q,O=F)}const B=g[O],W=[L[0]-B[0],L[1]-B[1],L[2]-B[2],L[3]-B[3]];y==1&&(z!=c-1&&e(W,$,l+4,7),R!=A-1&&(z!=0&&e(W,$,l+4*c-4,3),e(W,$,l+4*c,5),z!=c-1&&e(W,$,l+4*c+4,1))),C[l>>2]=O,Q[l>>2]=E[O]}}function m(h,c,A,E,U){U==null&&(U={});const{crc:C}=i,y=u.writeUint,S=u.writeUshort,g=u.writeASCII;let l=8;const O=h.frames.length>1;let F,N=!1,Q=33+(O?20:0);if(U.sRGB!=null&&(Q+=13),U.pHYs!=null&&(Q+=21),U.iCCP!=null&&(F=pako.deflate(U.iCCP),Q+=21+F.length+4),h.ctype==3){for(var $=h.plte.length,H=0;H<$;H++)h.plte[H]>>>24!=255&&(N=!0);Q+=8+3*$+4+(N?8+1*$+4:0)}for(var L=0;L<h.frames.length;L++)O&&(Q+=38),Q+=(B=h.frames[L]).cimg.length+12,L!=0&&(Q+=4);Q+=12;const R=new Uint8Array(Q),z=[137,80,78,71,13,10,26,10];for(H=0;H<8;H++)R[H]=z[H];if(y(R,l,13),l+=4,g(R,l,"IHDR"),l+=4,y(R,l,c),l+=4,y(R,l,A),l+=4,R[l]=h.depth,l++,R[l]=h.ctype,l++,R[l]=0,l++,R[l]=0,l++,R[l]=0,l++,y(R,l,C(R,l-17,17)),l+=4,U.sRGB!=null&&(y(R,l,1),l+=4,g(R,l,"sRGB"),l+=4,R[l]=U.sRGB,l++,y(R,l,C(R,l-5,5)),l+=4),U.iCCP!=null){const W=13+F.length;y(R,l,W),l+=4,g(R,l,"iCCP"),l+=4,g(R,l,"ICC profile"),l+=11,l+=2,R.set(F,l),l+=F.length,y(R,l,C(R,l-(W+4),W+4)),l+=4}if(U.pHYs!=null&&(y(R,l,9),l+=4,g(R,l,"pHYs"),l+=4,y(R,l,U.pHYs[0]),l+=4,y(R,l,U.pHYs[1]),l+=4,R[l]=U.pHYs[2],l++,y(R,l,C(R,l-13,13)),l+=4),O&&(y(R,l,8),l+=4,g(R,l,"acTL"),l+=4,y(R,l,h.frames.length),l+=4,y(R,l,U.loop!=null?U.loop:0),l+=4,y(R,l,C(R,l-12,12)),l+=4),h.ctype==3){for(y(R,l,3*($=h.plte.length)),l+=4,g(R,l,"PLTE"),l+=4,H=0;H<$;H++){const W=3*H,q=h.plte[H],V=255&q,te=q>>>8&255,Ce=q>>>16&255;R[l+W+0]=V,R[l+W+1]=te,R[l+W+2]=Ce}if(l+=3*$,y(R,l,C(R,l-3*$-4,3*$+4)),l+=4,N){for(y(R,l,$),l+=4,g(R,l,"tRNS"),l+=4,H=0;H<$;H++)R[l+H]=h.plte[H]>>>24&255;l+=$,y(R,l,C(R,l-$-4,$+4)),l+=4}}let Y=0;for(L=0;L<h.frames.length;L++){var B=h.frames[L];O&&(y(R,l,26),l+=4,g(R,l,"fcTL"),l+=4,y(R,l,Y++),l+=4,y(R,l,B.rect.width),l+=4,y(R,l,B.rect.height),l+=4,y(R,l,B.rect.x),l+=4,y(R,l,B.rect.y),l+=4,S(R,l,E[L]),l+=2,S(R,l,1e3),l+=2,R[l]=B.dispose,l++,R[l]=B.blend,l++,y(R,l,C(R,l-30,30)),l+=4);const W=B.cimg;y(R,l,($=W.length)+(L==0?0:4)),l+=4;const q=l;g(R,l,L==0?"IDAT":"fdAT"),l+=4,L!=0&&(y(R,l,Y++),l+=4),R.set(W,l),l+=$,y(R,l,C(R,q,l-q)),l+=4}return y(R,l,0),l+=4,g(R,l,"IEND"),l+=4,y(R,l,C(R,l-4,4)),l+=4,R.buffer}function w(h,c,A){for(let E=0;E<h.frames.length;E++){const U=h.frames[E];U.rect.width;const C=U.rect.height,y=new Uint8Array(C*U.bpl+C);U.cimg=f(U.img,C,U.bpp,U.bpl,y,c,A)}}function r(h,c,A,E,U){const C=U[0],y=U[1],S=U[2],g=U[3],l=U[4],O=U[5];let F=6,N=8,Q=255;for(var $=0;$<h.length;$++){const ie=new Uint8Array(h[$]);for(var H=ie.length,L=0;L<H;L+=4)Q&=ie[L+3]}const R=Q!=255,z=function(Z,K,ne,oe,J,ue){const ee=[];for(var j=0;j<Z.length;j++){const ae=new Uint8Array(Z[j]),he=new Uint32Array(ae.buffer);var ce;let de=0,we=0,me=K,Se=ne,Ve=oe?1:0;if(j!=0){const xt=ue||oe||j==1||ee[j-2].dispose!=0?1:2;let Je=0,lt=1e9;for(let Le=0;Le<xt;Le++){var Ie=new Uint8Array(Z[j-1-Le]);const Ot=new Uint32Array(Z[j-1-Le]);let Ue=K,Ee=ne,xe=-1,$e=-1;for(let Me=0;Me<ne;Me++)for(let _e=0;_e<K;_e++)he[se=Me*K+_e]!=Ot[se]&&(_e<Ue&&(Ue=_e),_e>xe&&(xe=_e),Me<Ee&&(Ee=Me),Me>$e&&($e=Me));xe==-1&&(Ue=Ee=xe=$e=0),J&&((1&Ue)==1&&Ue--,(1&Ee)==1&&Ee--);const ut=(xe-Ue+1)*($e-Ee+1);ut<lt&&(lt=ut,Je=Le,de=Ue,we=Ee,me=xe-Ue+1,Se=$e-Ee+1)}Ie=new Uint8Array(Z[j-1-Je]),Je==1&&(ee[j-1].dispose=2),ce=new Uint8Array(me*Se*4),d(Ie,K,ne,ce,me,Se,-de,-we,0),Ve=d(ae,K,ne,ce,me,Se,-de,-we,3)?1:0,Ve==1?n(ae,K,ne,ce,{x:de,y:we,width:me,height:Se}):d(ae,K,ne,ce,me,Se,-de,-we,0)}else ce=ae.slice(0);ee.push({rect:{x:de,y:we,width:me,height:Se},img:ce,blend:Ve,dispose:0})}if(oe)for(j=0;j<ee.length;j++){if((Fe=ee[j]).blend==1)continue;const ae=Fe.rect,he=ee[j-1].rect,de=Math.min(ae.x,he.x),we=Math.min(ae.y,he.y),me={x:de,y:we,width:Math.max(ae.x+ae.width,he.x+he.width)-de,height:Math.max(ae.y+ae.height,he.y+he.height)-we};ee[j-1].dispose=1,j-1!=0&&s(Z,K,ne,ee,j-1,me,J),s(Z,K,ne,ee,j,me,J)}let ze=0;if(Z.length!=1)for(var se=0;se<ee.length;se++){var Fe;ze+=(Fe=ee[se]).rect.width*Fe.rect.height}return ee}(h,c,A,C,y,S),Y={},B=[],W=[];if(E!=0){const ie=[];for(L=0;L<z.length;L++)ie.push(z[L].img.buffer);const Z=function(J){let ue=0;for(var ee=0;ee<J.length;ee++)ue+=J[ee].byteLength;const j=new Uint8Array(ue);let ce=0;for(ee=0;ee<J.length;ee++){const Ie=new Uint8Array(J[ee]),ze=Ie.length;for(let se=0;se<ze;se+=4){let Fe=Ie[se],ae=Ie[se+1],he=Ie[se+2];const de=Ie[se+3];de==0&&(Fe=ae=he=0),j[ce+se]=Fe,j[ce+se+1]=ae,j[ce+se+2]=he,j[ce+se+3]=de}ce+=ze}return j.buffer}(ie),K=T(Z,E);for(L=0;L<K.plte.length;L++)B.push(K.plte[L].est.rgba);let ne=0;for(L=0;L<z.length;L++){const oe=(V=z[L]).img.length;var q=new Uint8Array(K.inds.buffer,ne>>2,oe>>2);W.push(q);const J=new Uint8Array(K.abuf,ne,oe);O&&o(V.img,V.rect.width,V.rect.height,B,J,q),V.img.set(J),ne+=oe}}else for($=0;$<z.length;$++){var V=z[$];const ie=new Uint32Array(V.img.buffer);var te=V.rect.width;for(H=ie.length,q=new Uint8Array(H),W.push(q),L=0;L<H;L++){const Z=ie[L];if(L!=0&&Z==ie[L-1])q[L]=q[L-1];else if(L>te&&Z==ie[L-te])q[L]=q[L-te];else{let K=Y[Z];if(K==null&&(Y[Z]=K=B.length,B.push(Z),B.length>=300))break;q[L]=K}}}const Ce=B.length;for(Ce<=256&&l==0&&(N=Ce<=2?1:Ce<=4?2:Ce<=16?4:8,N=Math.max(N,g)),$=0;$<z.length;$++){(V=z[$]).rect.x,V.rect.y,te=V.rect.width;const ie=V.rect.height;let Z=V.img;new Uint32Array(Z.buffer);let K=4*te,ne=4;if(Ce<=256&&l==0){K=Math.ceil(N*te/8);var pe=new Uint8Array(K*ie);const oe=W[$];for(let J=0;J<ie;J++){L=J*K;const ue=J*te;if(N==8)for(var X=0;X<te;X++)pe[L+X]=oe[ue+X];else if(N==4)for(X=0;X<te;X++)pe[L+(X>>1)]|=oe[ue+X]<<4-4*(1&X);else if(N==2)for(X=0;X<te;X++)pe[L+(X>>2)]|=oe[ue+X]<<6-2*(3&X);else if(N==1)for(X=0;X<te;X++)pe[L+(X>>3)]|=oe[ue+X]<<7-1*(7&X)}Z=pe,F=3,ne=1}else if(R==0&&z.length==1){pe=new Uint8Array(te*ie*3);const oe=te*ie;for(L=0;L<oe;L++){const J=3*L,ue=4*L;pe[J]=Z[ue],pe[J+1]=Z[ue+1],pe[J+2]=Z[ue+2]}Z=pe,F=2,ne=3,K=3*te}V.img=Z,V.bpl=K,V.bpp=ne}return{ctype:F,depth:N,plte:B,frames:z}}function s(h,c,A,E,U,C,y){const S=Uint8Array,g=Uint32Array,l=new S(h[U-1]),O=new g(h[U-1]),F=U+1<h.length?new S(h[U+1]):null,N=new S(h[U]),Q=new g(N.buffer);let $=c,H=A,L=-1,R=-1;for(let Y=0;Y<C.height;Y++)for(let B=0;B<C.width;B++){const W=C.x+B,q=C.y+Y,V=q*c+W,te=Q[V];te==0||E[U-1].dispose==0&&O[V]==te&&(F==null||F[4*V+3]!=0)||(W<$&&($=W),W>L&&(L=W),q<H&&(H=q),q>R&&(R=q))}L==-1&&($=H=L=R=0),y&&((1&$)==1&&$--,(1&H)==1&&H--),C={x:$,y:H,width:L-$+1,height:R-H+1};const z=E[U];z.rect=C,z.blend=1,z.img=new Uint8Array(C.width*C.height*4),E[U-1].dispose==0?(d(l,c,A,z.img,C.width,C.height,-C.x,-C.y,0),n(N,c,A,z.img,C)):d(N,c,A,z.img,C.width,C.height,-C.x,-C.y,0)}function n(h,c,A,E,U){d(h,c,A,E,U.width,U.height,-U.x,-U.y,2)}function f(h,c,A,E,U,C,y){const S=[];let g,l=[0,1,2,3,4];C!=-1?l=[C]:(c*E>5e5||A==1)&&(l=[0]),y&&(g={level:0});const O=ln;for(var F=0;F<l.length;F++){for(let $=0;$<c;$++)p(U,h,$,E,A,l[F]);S.push(O.deflate(U,g))}let N,Q=1e9;for(F=0;F<S.length;F++)S[F].length<Q&&(N=F,Q=S[F].length);return S[N]}function p(h,c,A,E,U,C){const y=A*E;let S=y+A;if(h[S]=C,S++,C==0)if(E<500)for(var g=0;g<E;g++)h[S+g]=c[y+g];else h.set(new Uint8Array(c.buffer,y,E),S);else if(C==1){for(g=0;g<U;g++)h[S+g]=c[y+g];for(g=U;g<E;g++)h[S+g]=c[y+g]-c[y+g-U]+256&255}else if(A==0){for(g=0;g<U;g++)h[S+g]=c[y+g];if(C==2)for(g=U;g<E;g++)h[S+g]=c[y+g];if(C==3)for(g=U;g<E;g++)h[S+g]=c[y+g]-(c[y+g-U]>>1)+256&255;if(C==4)for(g=U;g<E;g++)h[S+g]=c[y+g]-v(c[y+g-U],0,0)+256&255}else{if(C==2)for(g=0;g<E;g++)h[S+g]=c[y+g]+256-c[y+g-E]&255;if(C==3){for(g=0;g<U;g++)h[S+g]=c[y+g]+256-(c[y+g-E]>>1)&255;for(g=U;g<E;g++)h[S+g]=c[y+g]+256-(c[y+g-E]+c[y+g-U]>>1)&255}if(C==4){for(g=0;g<U;g++)h[S+g]=c[y+g]+256-v(0,c[y+g-E],0)&255;for(g=U;g<E;g++)h[S+g]=c[y+g]+256-v(c[y+g-U],c[y+g-E],c[y+g-U-E])&255}}}function T(h,c){const A=new Uint8Array(h),E=A.slice(0),U=new Uint32Array(E.buffer),C=M(E,c),y=C[0],S=C[1],g=A.length,l=new Uint8Array(g>>2);let O;if(A.length<2e7)for(var F=0;F<g;F+=4)O=I(y,N=A[F]*(1/255),Q=A[F+1]*(1/255),$=A[F+2]*(1/255),H=A[F+3]*(1/255)),l[F>>2]=O.ind,U[F>>2]=O.est.rgba;else for(F=0;F<g;F+=4){var N=A[F]*.00392156862745098,Q=A[F+1]*(1/255),$=A[F+2]*(1/255),H=A[F+3]*(1/255);for(O=y;O.left;)O=P(O.est,N,Q,$,H)<=0?O.left:O.right;l[F>>2]=O.ind,U[F>>2]=O.est.rgba}return{abuf:E.buffer,inds:l,plte:S}}function M(h,c,A){A==null&&(A=1e-4);const E=new Uint32Array(h.buffer),U={i0:0,i1:h.length,bst:null,est:null,tdst:0,left:null,right:null};U.bst=k(h,U.i0,U.i1),U.est=b(U.bst);const C=[U];for(;C.length<c;){let S=0,g=0;for(var y=0;y<C.length;y++)C[y].est.L>S&&(S=C[y].est.L,g=y);if(S<A)break;const l=C[g],O=x(h,E,l.i0,l.i1,l.est.e,l.est.eMq255);if(l.i0>=O||l.i1<=O){l.est.L=0;continue}const F={i0:l.i0,i1:O,bst:null,est:null,tdst:0,left:null,right:null};F.bst=k(h,F.i0,F.i1),F.est=b(F.bst);const N={i0:O,i1:l.i1,bst:null,est:null,tdst:0,left:null,right:null};for(N.bst={R:[],m:[],N:l.bst.N-F.bst.N},y=0;y<16;y++)N.bst.R[y]=l.bst.R[y]-F.bst.R[y];for(y=0;y<4;y++)N.bst.m[y]=l.bst.m[y]-F.bst.m[y];N.est=b(N.bst),l.left=F,l.right=N,C[g]=F,C.push(N)}for(C.sort((S,g)=>g.bst.N-S.bst.N),y=0;y<C.length;y++)C[y].ind=y;return[U,C]}function I(h,c,A,E,U){if(h.left==null)return h.tdst=function(F,N,Q,$,H){const L=N-F[0],R=Q-F[1],z=$-F[2],Y=H-F[3];return L*L+R*R+z*z+Y*Y}(h.est.q,c,A,E,U),h;const C=P(h.est,c,A,E,U);let y=h.left,S=h.right;C>0&&(y=h.right,S=h.left);const g=I(y,c,A,E,U);if(g.tdst<=C*C)return g;const l=I(S,c,A,E,U);return l.tdst<g.tdst?l:g}function P(h,c,A,E,U){const{e:C}=h;return C[0]*c+C[1]*A+C[2]*E+C[3]*U-h.eMq}function x(h,c,A,E,U,C){for(E-=4;A<E;){for(;_(h,A,U)<=C;)A+=4;for(;_(h,E,U)>C;)E-=4;if(A>=E)break;const y=c[A>>2];c[A>>2]=c[E>>2],c[E>>2]=y,A+=4,E-=4}for(;_(h,A,U)>C;)A-=4;return A+4}function _(h,c,A){return h[c]*A[0]+h[c+1]*A[1]+h[c+2]*A[2]+h[c+3]*A[3]}function k(h,c,A){const E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],U=[0,0,0,0],C=A-c>>2;for(let y=c;y<A;y+=4){const S=h[y]*.00392156862745098,g=h[y+1]*(1/255),l=h[y+2]*(1/255),O=h[y+3]*(1/255);U[0]+=S,U[1]+=g,U[2]+=l,U[3]+=O,E[0]+=S*S,E[1]+=S*g,E[2]+=S*l,E[3]+=S*O,E[5]+=g*g,E[6]+=g*l,E[7]+=g*O,E[10]+=l*l,E[11]+=l*O,E[15]+=O*O}return E[4]=E[1],E[8]=E[2],E[9]=E[6],E[12]=E[3],E[13]=E[7],E[14]=E[11],{R:E,m:U,N:C}}function b(h){const{R:c}=h,{m:A}=h,{N:E}=h,U=A[0],C=A[1],y=A[2],S=A[3],g=E==0?0:1/E,l=[c[0]-U*U*g,c[1]-U*C*g,c[2]-U*y*g,c[3]-U*S*g,c[4]-C*U*g,c[5]-C*C*g,c[6]-C*y*g,c[7]-C*S*g,c[8]-y*U*g,c[9]-y*C*g,c[10]-y*y*g,c[11]-y*S*g,c[12]-S*U*g,c[13]-S*C*g,c[14]-S*y*g,c[15]-S*S*g],O=l,F=D;let N=[Math.random(),Math.random(),Math.random(),Math.random()],Q=0,$=0;if(E!=0)for(let L=0;L<16&&(N=F.multVec(O,N),$=Math.sqrt(F.dot(N,N)),N=F.sml(1/$,N),!(L!=0&&Math.abs($-Q)<1e-9));L++)Q=$;const H=[U*g,C*g,y*g,S*g];return{Cov:l,q:H,e:N,L:Q,eMq255:F.dot(F.sml(255,H),N),eMq:F.dot(N,H),rgba:(Math.round(255*H[3])<<24|Math.round(255*H[2])<<16|Math.round(255*H[1])<<8|Math.round(255*H[0])<<0)>>>0}}var D={multVec:(h,c)=>[h[0]*c[0]+h[1]*c[1]+h[2]*c[2]+h[3]*c[3],h[4]*c[0]+h[5]*c[1]+h[6]*c[2]+h[7]*c[3],h[8]*c[0]+h[9]*c[1]+h[10]*c[2]+h[11]*c[3],h[12]*c[0]+h[13]*c[1]+h[14]*c[2]+h[15]*c[3]],dot:(h,c)=>h[0]*c[0]+h[1]*c[1]+h[2]*c[2]+h[3]*c[3],sml:(h,c)=>[h*c[0],h*c[1],h*c[2],h*c[3]]};ge.encode=function(c,A,E,U,C,y,S){U==null&&(U=0),S==null&&(S=!1);const g=r(c,A,E,U,[!1,!1,!1,0,S,!1]);return w(g,-1),m(g,A,E,C,y)},ge.encodeLL=function(c,A,E,U,C,y,S,g){const l={ctype:0+(U==1?0:2)+(C==0?0:4),depth:y,frames:[]},O=(U+C)*y,F=O*A;for(let N=0;N<c.length;N++)l.frames.push({rect:{x:0,y:0,width:A,height:E},img:new Uint8Array(c[N]),blend:0,dispose:1,bpp:Math.ceil(O/8),bpl:Math.ceil(F/8)});return w(l,0,!0),m(l,A,E,S,g)},ge.encode.compress=r,ge.encode.dither=o,ge.quantize=T,ge.quantize.getKDtree=M,ge.quantize.getNearest=I})();const It={toArrayBuffer(d,u){const v=d.width,i=d.height,e=v<<2,t=d.getContext("2d").getImageData(0,0,v,i),a=new Uint32Array(t.data.buffer),o=(32*v+31)/32<<2,m=o*i,w=122+m,r=new ArrayBuffer(w),s=new DataView(r),n=1<<20;let f,p,T,M,I=n,P=0,x=0,_=0;function k(h){s.setUint16(x,h,!0),x+=2}function b(h){s.setUint32(x,h,!0),x+=4}function D(h){x+=h}k(19778),b(w),D(4),b(122),b(108),b(v),b(-i>>>0),k(1),k(32),b(3),b(m),b(2835),b(2835),D(8),b(16711680),b(65280),b(255),b(4278190080),b(1466527264),function h(){for(;P<i&&I>0;){for(M=122+P*o,f=0;f<e;)I--,p=a[_++],T=p>>>24,s.setUint32(M+f,p<<8|T),f+=4;P++}_<a.length?(I=n,setTimeout(h,It._dly)):u(r)}()},toBlob(d,u){this.toArrayBuffer(d,v=>{u(new Blob([v],{type:"image/bmp"}))})},_dly:9};var le={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},un={[le.CHROME]:16384,[le.FIREFOX]:11180,[le.DESKTOP_SAFARI]:16384,[le.IE]:8192,[le.IOS]:4096,[le.ETC]:8192};const at=typeof window<"u",Ut=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,je=at&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),cn=(at||Ut)&&(je&&je.getOriginalSymbol(window,"File")||typeof File<"u"&&File),Et=(at||Ut)&&(je&&je.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function ft(d,u,v=Date.now()){return new Promise(i=>{const e=d.split(","),t=e[0].match(/:(.*?);/)[1],a=globalThis.atob(e[1]);let o=a.length;const m=new Uint8Array(o);for(;o--;)m[o]=a.charCodeAt(o);const w=new Blob([m],{type:t});w.name=u,w.lastModified=v,i(w)})}function Tt(d){return new Promise((u,v)=>{const i=new Et;i.onload=()=>u(i.result),i.onerror=e=>v(e),i.readAsDataURL(d)})}function Ct(d){return new Promise((u,v)=>{const i=new Image;i.onload=()=>u(i),i.onerror=e=>v(e),i.src=d})}function Re(){if(Re.cachedResult!==void 0)return Re.cachedResult;let d=le.ETC;const{userAgent:u}=navigator;return/Chrom(e|ium)/i.test(u)?d=le.CHROME:/iP(ad|od|hone)/i.test(u)&&/WebKit/i.test(u)?d=le.IOS:/Safari/i.test(u)?d=le.DESKTOP_SAFARI:/Firefox/i.test(u)?d=le.FIREFOX:(/MSIE/i.test(u)||document.documentMode)&&(d=le.IE),Re.cachedResult=d,Re.cachedResult}function Ft(d,u){const v=Re(),i=un[v];let e=d,t=u,a=e*t;const o=e>t?t/e:e/t;for(;a>i*i;){const m=(i+e)/2,w=(i+t)/2;m<w?(t=w,e=w*o):(t=m*o,e=m),a=e*t}return{width:e,height:t}}function Xe(d,u){let v,i;try{if(v=new OffscreenCanvas(d,u),i=v.getContext("2d"),i===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{v=document.createElement("canvas"),i=v.getContext("2d")}return v.width=d,v.height=u,[v,i]}function St(d,u){const{width:v,height:i}=Ft(d.width,d.height),[e,t]=Xe(v,i);return u&&/jpe?g/.test(u)&&(t.fillStyle="white",t.fillRect(0,0,e.width,e.height)),t.drawImage(d,0,0,e.width,e.height),e}function qe(){return qe.cachedResult!==void 0||(qe.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),qe.cachedResult}function Ye(d,u={}){return new Promise(function(v,i){let e,t;var a=function(){try{return t=St(e,u.fileType||d.type),v([e,t])}catch(m){return i(m)}},o=function(m){try{var w=function(r){try{throw r}catch(s){return i(s)}};try{let r;return Tt(d).then(function(s){try{return r=s,Ct(r).then(function(n){try{return e=n,function(){try{return a()}catch(f){return i(f)}}()}catch(f){return w(f)}},w)}catch(n){return w(n)}},w)}catch(r){w(r)}}catch(r){return i(r)}};try{if(qe()||[le.DESKTOP_SAFARI,le.MOBILE_SAFARI].includes(Re()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(d).then(function(m){try{return e=m,a()}catch{return o()}},o)}catch{o()}})}function Ze(d,u,v,i,e=1){return new Promise(function(t,a){let o;if(u==="image/png"){let w,r,s;return w=d.getContext("2d"),{data:r}=w.getImageData(0,0,d.width,d.height),s=ge.encode([r.buffer],d.width,d.height,4096*e),o=new Blob([s],{type:u}),o.name=v,o.lastModified=i,m.call(this)}{let w=function(){return m.call(this)};if(u==="image/bmp")return new Promise(r=>It.toBlob(d,r)).then((function(r){try{return o=r,o.name=v,o.lastModified=i,w.call(this)}catch(s){return a(s)}}).bind(this),a);{let r=function(){return w.call(this)};if(typeof OffscreenCanvas=="function"&&d instanceof OffscreenCanvas)return d.convertToBlob({type:u,quality:e}).then((function(s){try{return o=s,o.name=v,o.lastModified=i,r.call(this)}catch(n){return a(n)}}).bind(this),a);{let s;return s=d.toDataURL(u,e),ft(s,v,i).then((function(n){try{return o=n,r.call(this)}catch(f){return a(f)}}).bind(this),a)}}}function m(){return t(o)}})}function ve(d){d.width=0,d.height=0}function Pe(){return new Promise(function(d,u){let v,i,e,t;return Pe.cachedResult!==void 0?d(Pe.cachedResult):ft("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(a){try{return v=a,Ye(v).then(function(o){try{return i=o[1],Ze(i,v.type,v.name,v.lastModified).then(function(m){try{return e=m,ve(i),Ye(e).then(function(w){try{return t=w[0],Pe.cachedResult=t.width===1&&t.height===2,d(Pe.cachedResult)}catch(r){return u(r)}},u)}catch(w){return u(w)}},u)}catch(m){return u(m)}},u)}catch(o){return u(o)}},u)})}function Mt(d){return new Promise((u,v)=>{const i=new Et;i.onload=e=>{const t=new DataView(e.target.result);if(t.getUint16(0,!1)!=65496)return u(-2);const a=t.byteLength;let o=2;for(;o<a;){if(t.getUint16(o+2,!1)<=8)return u(-1);const m=t.getUint16(o,!1);if(o+=2,m==65505){if(t.getUint32(o+=2,!1)!=1165519206)return u(-1);const w=t.getUint16(o+=6,!1)==18761;o+=t.getUint32(o+4,w);const r=t.getUint16(o,w);o+=2;for(let s=0;s<r;s++)if(t.getUint16(o+12*s,w)==274)return u(t.getUint16(o+12*s+8,w))}else{if((65280&m)!=65280)break;o+=t.getUint16(o,!1)}}return u(-1)},i.onerror=e=>v(e),i.readAsArrayBuffer(d)})}function _t(d,u){const{width:v}=d,{height:i}=d,{maxWidthOrHeight:e}=u;let t,a=d;return isFinite(e)&&(v>e||i>e)&&([a,t]=Xe(v,i),v>i?(a.width=e,a.height=i/v*e):(a.width=v/i*e,a.height=e),t.drawImage(d,0,0,a.width,a.height),ve(d)),a}function Rt(d,u){const{width:v}=d,{height:i}=d,[e,t]=Xe(v,i);switch(u>4&&u<9?(e.width=i,e.height=v):(e.width=v,e.height=i),u){case 2:t.transform(-1,0,0,1,v,0);break;case 3:t.transform(-1,0,0,-1,v,i);break;case 4:t.transform(1,0,0,-1,0,i);break;case 5:t.transform(0,1,1,0,0,0);break;case 6:t.transform(0,1,-1,0,i,0);break;case 7:t.transform(0,-1,-1,0,i,v);break;case 8:t.transform(0,-1,1,0,0,v)}return t.drawImage(d,0,0,v,i),ve(d),e}function ht(d,u,v=0){return new Promise(function(i,e){let t,a,o,m,w,r,s,n,f,p,T,M,I,P,x,_,k,b,D,h;function c(E=5){if(u.signal&&u.signal.aborted)throw u.signal.reason;t+=E,u.onProgress(Math.min(t,100))}function A(E){if(u.signal&&u.signal.aborted)throw u.signal.reason;t=Math.min(Math.max(E,t),100),u.onProgress(t)}return t=v,a=u.maxIteration||10,o=1024*u.maxSizeMB*1024,c(),Ye(d,u).then((function(E){try{return[,m]=E,c(),w=_t(m,u),c(),new Promise(function(U,C){var y;if(!(y=u.exifOrientation))return Mt(d).then((function(g){try{return y=g,S.call(this)}catch(l){return C(l)}}).bind(this),C);function S(){return U(y)}return S.call(this)}).then((function(U){try{return r=U,c(),Pe().then((function(C){try{return s=C?w:Rt(w,r),c(),n=u.initialQuality||1,f=u.fileType||d.type,Ze(s,f,d.name,d.lastModified,n).then((function(y){try{{let g=function(){if(a--&&(x>o||x>I)){let O,F;return O=h?.95*D.width:D.width,F=h?.95*D.height:D.height,[k,b]=Xe(O,F),b.drawImage(D,0,0,O,F),n*=f==="image/png"?.85:.95,Ze(k,f,d.name,d.lastModified,n).then(function(N){try{return _=N,ve(D),D=k,x=_.size,A(Math.min(99,Math.floor((P-x)/(P-o)*100))),g}catch(Q){return e(Q)}},e)}return[1]},l=function(){return ve(D),ve(k),ve(w),ve(s),ve(m),A(100),i(_)};if(p=y,c(),T=p.size>o,M=p.size>d.size,!T&&!M)return A(100),i(p);var S;return I=d.size,P=p.size,x=P,D=s,h=!u.alwaysKeepResolution&&T,(S=(function(O){for(;O;){if(O.then)return void O.then(S,e);try{if(O.pop){if(O.length)return O.pop()?l.call(this):O;O=g}else O=O.call(this)}catch(F){return e(F)}}}).bind(this))(g)}}catch(g){return e(g)}}).bind(this),e)}catch(y){return e(y)}}).bind(this),e)}catch(C){return e(C)}}).bind(this),e)}catch(U){return e(U)}}).bind(this),e)})}const dn=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let nt;function hn(d,u){return new Promise((v,i)=>{nt||(nt=function(a){const o=[];return o.push(a),URL.createObjectURL(new Blob(o))}(dn));const e=new Worker(nt);e.addEventListener("message",function(a){if(u.signal&&u.signal.aborted)e.terminate();else if(a.data.progress===void 0){if(a.data.error)return i(new Error(a.data.error)),void e.terminate();v(a.data.file),e.terminate()}else u.onProgress(a.data.progress)}),e.addEventListener("error",i),u.signal&&u.signal.addEventListener("abort",()=>{i(u.signal.reason),e.terminate()}),e.postMessage({file:d,imageCompressionLibUrl:u.libURL,options:{...u,onProgress:void 0,signal:void 0}})})}function re(d,u){return new Promise(function(v,i){let e,t,a,o,m,w;if(e={...u},a=0,{onProgress:o}=e,e.maxSizeMB=e.maxSizeMB||Number.POSITIVE_INFINITY,m=typeof e.useWebWorker!="boolean"||e.useWebWorker,delete e.useWebWorker,e.onProgress=f=>{a=f,typeof o=="function"&&o(a)},!(d instanceof Blob||d instanceof cn))return i(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(d.type))return i(new Error("The file given is not an image"));if(w=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!m||typeof Worker!="function"||w)return ht(d,e).then((function(f){try{return t=f,n.call(this)}catch(p){return i(p)}}).bind(this),i);var r=(function(){try{return n.call(this)}catch(f){return i(f)}}).bind(this),s=function(f){try{return ht(d,e).then(function(p){try{return t=p,r()}catch(T){return i(T)}},i)}catch(p){return i(p)}};try{return e.libURL=e.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",hn(d,e).then(function(f){try{return t=f,r()}catch{return s()}},s)}catch{s()}function n(){try{t.name=d.name,t.lastModified=d.lastModified}catch{}try{e.preserveExif&&d.type==="image/jpeg"&&(!e.fileType||e.fileType&&e.fileType===d.type)&&(t=At(d,t))}catch{}return v(t)}})}re.getDataUrlFromFile=Tt,re.getFilefromDataUrl=ft,re.loadImage=Ct,re.drawImageInCanvas=St,re.drawFileInCanvas=Ye,re.canvasToFile=Ze,re.getExifOrientation=Mt,re.handleMaxWidthOrHeight=_t,re.followExifOrientation=Rt,re.cleanupCanvasMemory=ve,re.isAutoOrientationInBrowser=Pe,re.approximateBelowMaximumCanvasSizeOfBrowser=Ft,re.copyExifWithoutOrientation=At,re.getBrowserName=Re,re.version="2.0.2";const st=d=>!d||d.length<12?null:{tradeId:d[0],date:d[1],time:d[2],amount:parseFloat(d[3])||0,tagId:d[4],tagName:d[5],tagColor:d[6],tagEmoji:d[7],driveImageId:d[8]||null,notes:d[9]||"",createdAt:d[10],updatedAt:d[11]},Dt=async()=>{const d="1ruzm5D-ofifAU7d5oRChBT7DAYFTlVLgULSsXvYEtXU";console.log(" Fetching all trades from sheet:",d);try{const v=(await window.gapi.client.sheets.spreadsheets.values.get({spreadsheetId:d,range:`${De.TRADES}!A2:L`})).result.values||[];console.log(" Received rows from sheet:",v.length);const i=v.map(st).filter(Boolean);return console.log(" Parsed trades:",i.length),i}catch(u){return console.error(" Failed to fetch trades:",u),[]}},gn=async(d,u)=>{console.log(` Fetching trades for: ${d}-${u} (month is 0-indexed, so ${u} = ${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][u]})`);const v=await Dt();console.log(` Total trades in sheet: ${v.length}`),v.length>0&&console.log(" All trade dates:",v.map(e=>e.date));const i=v.filter(e=>{const[t,a]=e.date.split("-").map(Number),o=t===d&&a===u+1;return console.log(o?`   Trade ${e.date} MATCHES!`:`   Trade ${e.date} doesn't match: tradeYear=${t} vs ${d}, tradeMonth=${a} vs ${u+1}`),o});return console.log(` Filtered to ${i.length} trades for ${d}-${u+1}`),i},pn=async d=>{const u=await rt.getOrCreateSpreadsheet();let v=null;if(d.screenshot){const t=await re(d.screenshot,{maxSizeMB:1,maxWidthOrHeight:1200,useWebWorker:!0}),a=d.time.replace(":","-"),o=`${d.tradeId}_${d.date}_${a}.jpg`;v=await rt.uploadImage(t,o)}const i=new Date().toISOString(),e=[d.tradeId,d.date,d.time,d.amount,d.tagId,d.tagName,d.tagColor,d.tagEmoji,v||"",d.notes||"",i,i];return await window.gapi.client.sheets.spreadsheets.values.append({spreadsheetId:u,range:`${De.TRADES}!A:L`,valueInputOption:"USER_ENTERED",resource:{values:[e]}}),{...d,driveImageId:v,createdAt:i,updatedAt:i}},mn=async({tradeId:d,updates:u})=>{const v=localStorage.getItem(vt.SHEET_ID),t=((await window.gapi.client.sheets.spreadsheets.values.get({spreadsheetId:v,range:`${De.TRADES}!A2:A`})).result.values||[]).findIndex(f=>f[0]===d);if(t===-1)throw new Error("Trade not found");const a=t+2,m=(await window.gapi.client.sheets.spreadsheets.values.get({spreadsheetId:v,range:`${De.TRADES}!A${a}:L${a}`})).result.values[0],w=st(m);let r=w.driveImageId;if(u.driveImageId==="")r="";else if(u.screenshot){const f=await re(u.screenshot,{maxSizeMB:1,maxWidthOrHeight:1200,useWebWorker:!0}),p=u.date||w.date,T=(u.time||w.time).replace(":","-"),M=`${d}_${p}_${T}.jpg`;r=await rt.uploadImage(f,M)}const s=new Date().toISOString(),n=[d,u.date||w.date,u.time||w.time,u.amount!==void 0?u.amount:w.amount,u.tagId||w.tagId,u.tagName||w.tagName,u.tagColor||w.tagColor,u.tagEmoji||w.tagEmoji,r||"",u.notes!==void 0?u.notes:w.notes,w.createdAt,s];return await window.gapi.client.sheets.spreadsheets.values.update({spreadsheetId:v,range:`${De.TRADES}!A${a}:L${a}`,valueInputOption:"USER_ENTERED",resource:{values:[n]}}),st(n)},vn=async d=>{const u=localStorage.getItem(vt.SHEET_ID),i=(await window.gapi.client.sheets.spreadsheets.get({spreadsheetId:u,fields:"sheets(properties(sheetId,title))"})).result.sheets.find(w=>w.properties.title===De.TRADES);if(!i)throw new Error("Trades sheet not found");const e=i.properties.sheetId,o=((await window.gapi.client.sheets.spreadsheets.values.get({spreadsheetId:u,range:`${De.TRADES}!A2:A`})).result.values||[]).findIndex(w=>w[0]===d);if(o===-1)throw new Error("Trade not found");const m=o+1;await window.gapi.client.sheets.spreadsheets.batchUpdate({spreadsheetId:u,resource:{requests:[{deleteDimension:{range:{sheetId:e,dimension:"ROWS",startIndex:m,endIndex:m+1}}}]}})},Fn=()=>pt({queryKey:["trades"],queryFn:Dt,staleTime:5*60*1e3,cacheTime:30*60*1e3}),Sn=(d,u)=>pt({queryKey:["trades",d,u],queryFn:()=>gn(d,u),staleTime:5*60*1e3}),Mn=()=>{const d=Ge();return ot({mutationFn:pn,onMutate:async u=>{await d.cancelQueries({queryKey:["trades"]});const v=d.getQueryData(["trades"]);return v&&d.setQueryData(["trades"],i=>[...i||[],u]),{previousTrades:v}},onError:(u,v,i)=>{i!=null&&i.previousTrades&&d.setQueryData(["trades"],i.previousTrades)},onSettled:()=>{d.invalidateQueries({queryKey:["trades"]})}})},_n=()=>{const d=Ge();return ot({mutationFn:mn,onSuccess:()=>{d.invalidateQueries({queryKey:["trades"]})}})},Rn=()=>{const d=Ge();return ot({mutationFn:vn,onMutate:async u=>{await d.cancelQueries({queryKey:["trades"]});const v=d.getQueryData(["trades"]);return v&&d.setQueryData(["trades"],i=>(i||[]).filter(e=>e.tradeId!==u)),{previousTrades:v}},onError:(u,v,i)=>{i!=null&&i.previousTrades&&d.setQueryData(["trades"],i.previousTrades)},onSettled:()=>{d.invalidateQueries({queryKey:["trades"]})}})};export{An as a,Mn as b,Tn as c,_n as d,Rn as e,En as f,Cn as g,Un as h,Sn as i,In as m,Fn as u};
