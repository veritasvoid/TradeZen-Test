var lt=u=>{throw TypeError(u)};var Je=(u,c,v)=>c.has(u)||lt("Cannot "+v);var G=(u,c,v)=>(Je(u,c,"read from private field"),v?v.call(u):c.get(u)),xe=(u,c,v)=>c.has(u)?lt("Cannot add the same private member more than once"):c instanceof WeakSet?c.add(u):c.set(u,v),Oe=(u,c,v,i)=>(Je(u,c,"write to private field"),i?i.call(u,v):c.set(u,v),v),Ne=(u,c,v)=>(Je(u,c,"access private method"),v);import{u as pt}from"./useQuery-BesbtNAO.js";import{S as Pt,s as Lt,h as ut,i as Ht,n as mt,k as rt,r as He,l as Qt,m as zt,e as ct,o as it,p as vt}from"./index-BNSpLmE2.js";var be,Ce,fe,we,Ae,Be,nt,gt,Wt=(gt=class extends Pt{constructor(c,v){super();xe(this,Ae);xe(this,be);xe(this,Ce);xe(this,fe);xe(this,we);Oe(this,be,c),this.setOptions(v),this.bindMethods(),Ne(this,Ae,Be).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(c){var i;const v=this.options;this.options=G(this,be).defaultMutationOptions(c),Lt(this.options,v)||G(this,be).getMutationCache().notify({type:"observerOptionsUpdated",mutation:G(this,fe),observer:this}),v!=null&&v.mutationKey&&this.options.mutationKey&&ut(v.mutationKey)!==ut(this.options.mutationKey)?this.reset():((i=G(this,fe))==null?void 0:i.state.status)==="pending"&&G(this,fe).setOptions(this.options)}onUnsubscribe(){var c;this.hasListeners()||(c=G(this,fe))==null||c.removeObserver(this)}onMutationUpdate(c){Ne(this,Ae,Be).call(this),Ne(this,Ae,nt).call(this,c)}getCurrentResult(){return G(this,Ce)}reset(){var c;(c=G(this,fe))==null||c.removeObserver(this),Oe(this,fe,void 0),Ne(this,Ae,Be).call(this),Ne(this,Ae,nt).call(this)}mutate(c,v){var i;return Oe(this,we,v),(i=G(this,fe))==null||i.removeObserver(this),Oe(this,fe,G(this,be).getMutationCache().build(G(this,be),this.options)),G(this,fe).addObserver(this),G(this,fe).execute(c)}},be=new WeakMap,Ce=new WeakMap,fe=new WeakMap,we=new WeakMap,Ae=new WeakSet,Be=function(){var v;const c=((v=G(this,fe))==null?void 0:v.state)??Ht();Oe(this,Ce,{...c,isPending:c.status==="pending",isSuccess:c.status==="success",isError:c.status==="error",isIdle:c.status==="idle",mutate:this.mutate,reset:this.reset})},nt=function(c){mt.batch(()=>{var v,i,e,t,a,o,m,w;if(G(this,we)&&this.hasListeners()){const r=G(this,Ce).variables,s=G(this,Ce).context,n={client:G(this,be),meta:this.options.meta,mutationKey:this.options.mutationKey};if((c==null?void 0:c.type)==="success"){try{(i=(v=G(this,we)).onSuccess)==null||i.call(v,c.data,r,s,n)}catch(l){Promise.reject(l)}try{(t=(e=G(this,we)).onSettled)==null||t.call(e,c.data,null,r,s,n)}catch(l){Promise.reject(l)}}else if((c==null?void 0:c.type)==="error"){try{(o=(a=G(this,we)).onError)==null||o.call(a,c.error,r,s,n)}catch(l){Promise.reject(l)}try{(w=(m=G(this,we)).onSettled)==null||w.call(m,void 0,c.error,r,s,n)}catch(l){Promise.reject(l)}}}this.listeners.forEach(r=>{r(G(this,Ce))})})},gt);function yt(u,c){const v=rt(),[i]=He.useState(()=>new Wt(v,u));He.useEffect(()=>{i.setOptions(u)},[i,u]);const e=He.useSyncExternalStore(He.useCallback(a=>i.subscribe(mt.batchCalls(a)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),t=He.useCallback((a,o)=>{i.mutate(a,o).catch(Qt)},[i]);if(e.error&&zt(i.options.throwOnError,[e.error]))throw e.error;return{...e,mutate:t,mutateAsync:e.mutate}}function bt(u){const c=Object.prototype.toString.call(u);return u instanceof Date||typeof u=="object"&&c==="[object Date]"?new u.constructor(+u):typeof u=="number"||c==="[object Number]"||typeof u=="string"||c==="[object String]"?new Date(u):new Date(NaN)}function Bt(u){const c=bt(u).getDay();return c===0||c===6}const Cn=6048e5,Tn=864e5,wt=6e4,At=36e5;function ht(u){const c=bt(u);return c.setHours(0,0,0,0),c}function $t(u,c){const v=ht(u),i=ht(c);return+v==+i}function je(u,c){const i=Yt(u);let e;if(i.date){const m=Zt(i.date,2);e=Gt(m.restDateString,m.year)}if(!e||isNaN(e.getTime()))return new Date(NaN);const t=e.getTime();let a=0,o;if(i.time&&(a=Xt(i.time),isNaN(a)))return new Date(NaN);if(i.timezone){if(o=Vt(i.timezone),isNaN(o))return new Date(NaN)}else{const m=new Date(t+a),w=new Date(0);return w.setFullYear(m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate()),w.setHours(m.getUTCHours(),m.getUTCMinutes(),m.getUTCSeconds(),m.getUTCMilliseconds()),w}return new Date(t+a+o)}const We={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},jt=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,qt=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Kt=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Yt(u){const c={},v=u.split(We.dateTimeDelimiter);let i;if(v.length>2)return c;if(/:/.test(v[0])?i=v[0]:(c.date=v[0],i=v[1],We.timeZoneDelimiter.test(c.date)&&(c.date=u.split(We.timeZoneDelimiter)[0],i=u.substr(c.date.length,u.length))),i){const e=We.timezone.exec(i);e?(c.time=i.replace(e[1],""),c.timezone=e[1]):c.time=i}return c}function Zt(u,c){const v=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+c)+"})|(\\d{2}|[+-]\\d{"+(2+c)+"})$)"),i=u.match(v);if(!i)return{year:NaN,restDateString:""};const e=i[1]?parseInt(i[1]):null,t=i[2]?parseInt(i[2]):null;return{year:t===null?e:t*100,restDateString:u.slice((i[1]||i[2]).length)}}function Gt(u,c){if(c===null)return new Date(NaN);const v=u.match(jt);if(!v)return new Date(NaN);const i=!!v[4],e=Qe(v[1]),t=Qe(v[2])-1,a=Qe(v[3]),o=Qe(v[4]),m=Qe(v[5])-1;if(i)return rn(c,o,m)?Jt(c,o,m):new Date(NaN);{const w=new Date(0);return!tn(c,t,a)||!nn(c,e)?new Date(NaN):(w.setUTCFullYear(c,t,Math.max(e,a)),w)}}function Qe(u){return u?parseInt(u):1}function Xt(u){const c=u.match(qt);if(!c)return NaN;const v=et(c[1]),i=et(c[2]),e=et(c[3]);return sn(v,i,e)?v*At+i*wt+e*1e3:NaN}function et(u){return u&&parseFloat(u.replace(",","."))||0}function Vt(u){if(u==="Z")return 0;const c=u.match(Kt);if(!c)return 0;const v=c[1]==="+"?-1:1,i=parseInt(c[2]),e=c[3]&&parseInt(c[3])||0;return on(i,e)?v*(i*At+e*wt):NaN}function Jt(u,c,v){const i=new Date(0);i.setUTCFullYear(u,0,4);const e=i.getUTCDay()||7,t=(c-1)*7+v+1-e;return i.setUTCDate(i.getUTCDate()+t),i}const en=[31,null,31,30,31,30,31,31,30,31,30,31];function Ut(u){return u%400===0||u%4===0&&u%100!==0}function tn(u,c,v){return c>=0&&c<=11&&v>=1&&v<=(en[c]||(Ut(u)?29:28))}function nn(u,c){return c>=1&&c<=(Ut(u)?366:365)}function rn(u,c,v){return c>=1&&c<=53&&v>=0&&v<=6}function sn(u,c,v){return u===24?c===0&&v===0:v>=0&&v<60&&c>=0&&c<60&&u>=0&&u<25}function on(u,c){return c>=0&&c<=59}const Fn=(u,c="$")=>{const i=Math.abs(u).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2});return`${u>=0?"+":"-"}${c}${i}`},Sn=(u,c="$")=>{const v=Math.abs(u);let i;return v>=1e6?i=`${(v/1e6).toFixed(1)}M`:v>=1e3?i=`${(v/1e3).toFixed(1)}K`:i=v.toFixed(0),`${u>=0?"+":"-"}${c}${i}`},Mn=u=>(typeof u=="string"&&(u=je(u)),Bt(u)),_n=(u,c)=>(typeof u=="string"&&(u=je(u)),typeof c=="string"&&(c=je(c)),$t(u,c)),an=(u,c)=>{const v=u+c;return v===0?0:Math.round(u/v*100)},fn=u=>u.reduce((c,v)=>{const i=v.date;return c[i]||(c[i]=[]),c[i].push(v),c},{}),Dn=u=>{const c=fn(u);return Object.entries(c).reduce((v,[i,e])=>(v[i]=e.reduce((t,a)=>t+a.amount,0),v),{})},ln=u=>{if(!u||u.length===0)return{totalPL:0,tradeCount:0,winCount:0,lossCount:0,winRate:0,avgWin:0,avgLoss:0};const c=u.reduce((a,o)=>a+o.amount,0),v=u.filter(a=>a.amount>0),i=u.filter(a=>a.amount<0),e=v.length>0?v.reduce((a,o)=>a+o.amount,0)/v.length:0,t=i.length>0?i.reduce((a,o)=>a+Math.abs(o.amount),0)/i.length:0;return{totalPL:c,tradeCount:u.length,winCount:v.length,lossCount:i.length,winRate:an(v.length,i.length),avgWin:e,avgLoss:t}},Rn=(u,c)=>Array.from({length:12},(i,e)=>e).map(i=>{const e=u.filter(t=>{const a=je(t.date);return a.getFullYear()===c&&a.getMonth()===i});return{month:i,...ln(e)}}),xn=()=>crypto.randomUUID();function un(u,c){return c.forEach(function(v){v&&typeof v!="string"&&!Array.isArray(v)&&Object.keys(v).forEach(function(i){if(i!=="default"&&!(i in u)){var e=Object.getOwnPropertyDescriptor(v,i);Object.defineProperty(u,i,e.get?e:{enumerable:!0,get:function(){return v[i]}})}})}),Object.freeze(u)}function It(u,c){return new Promise(function(v,i){let e;return cn(u).then(function(t){try{return e=t,v(new Blob([c.slice(0,2),e,c.slice(2)],{type:"image/jpeg"}))}catch(a){return i(a)}},i)})}const cn=u=>new Promise((c,v)=>{const i=new FileReader;i.addEventListener("load",({target:{result:e}})=>{const t=new DataView(e);let a=0;if(t.getUint16(a)!==65496)return v("not a valid JPEG");for(a+=2;;){const o=t.getUint16(a);if(o===65498)break;const m=t.getUint16(a+2);if(o===65505&&t.getUint32(a+4)===1165519206){const w=a+10;let r;switch(t.getUint16(w)){case 18761:r=!0;break;case 19789:r=!1;break;default:return v("TIFF header contains invalid endian")}if(t.getUint16(w+2,r)!==42)return v("TIFF header contains invalid version");const s=t.getUint32(w+4,r),n=w+s+2+12*t.getUint16(w+s,r);for(let l=w+s+2;l<n;l+=12)if(t.getUint16(l,r)==274){if(t.getUint16(l+2,r)!==3)return v("Orientation data type is invalid");if(t.getUint32(l+4,r)!==1)return v("Orientation data count is invalid");t.setUint16(l+8,1,r);break}return c(e.slice(a,a+2+m))}a+=2+m}return c(new Blob)}),i.readAsArrayBuffer(u)});var qe={},hn={get exports(){return qe},set exports(u){qe=u}};(function(u){var c,v,i={};hn.exports=i,i.parse=function(e,t){for(var a=i.bin.readUshort,o=i.bin.readUint,m=0,w={},r=new Uint8Array(e),s=r.length-4;o(r,s)!=101010256;)s--;m=s,m+=4;var n=a(r,m+=4);a(r,m+=2);var l=o(r,m+=2),p=o(r,m+=4);m+=4,m=p;for(var T=0;T<n;T++){o(r,m),m+=4,m+=4,m+=4,o(r,m+=4),l=o(r,m+=4);var _=o(r,m+=4),U=a(r,m+=4),P=a(r,m+2),x=a(r,m+4);m+=6;var M=o(r,m+=8);m+=4,m+=U+P+x,i._readLocal(r,M,w,l,_,t)}return w},i._readLocal=function(e,t,a,o,m,w){var r=i.bin.readUshort,s=i.bin.readUint;s(e,t),r(e,t+=4),r(e,t+=2);var n=r(e,t+=2);s(e,t+=2),s(e,t+=4),t+=4;var l=r(e,t+=8),p=r(e,t+=2);t+=2;var T=i.bin.readUTF8(e,t,l);if(t+=l,t+=p,w)a[T]={size:m,csize:o};else{var _=new Uint8Array(e.buffer,t);if(n==0)a[T]=new Uint8Array(_.buffer.slice(t,t+o));else{if(n!=8)throw"unknown compression method: "+n;var U=new Uint8Array(m);i.inflateRaw(_,U),a[T]=U}}},i.inflateRaw=function(e,t){return i.F.inflate(e,t)},i.inflate=function(e,t){return e[0],e[1],i.inflateRaw(new Uint8Array(e.buffer,e.byteOffset+2,e.length-6),t)},i.deflate=function(e,t){t==null&&(t={level:6});var a=0,o=new Uint8Array(50+Math.floor(1.1*e.length));o[a]=120,o[a+1]=156,a+=2,a=i.F.deflateRaw(e,o,a,t.level);var m=i.adler(e,0,e.length);return o[a+0]=m>>>24&255,o[a+1]=m>>>16&255,o[a+2]=m>>>8&255,o[a+3]=m>>>0&255,new Uint8Array(o.buffer,0,a+4)},i.deflateRaw=function(e,t){t==null&&(t={level:6});var a=new Uint8Array(50+Math.floor(1.1*e.length)),o=i.F.deflateRaw(e,a,o,t.level);return new Uint8Array(a.buffer,0,o)},i.encode=function(e,t){t==null&&(t=!1);var a=0,o=i.bin.writeUint,m=i.bin.writeUshort,w={};for(var r in e){var s=!i._noNeed(r)&&!t,n=e[r],l=i.crc.crc(n,0,n.length);w[r]={cpr:s,usize:n.length,crc:l,file:s?i.deflateRaw(n):n}}for(var r in w)a+=w[r].file.length+30+46+2*i.bin.sizeUTF8(r);a+=22;var p=new Uint8Array(a),T=0,_=[];for(var r in w){var U=w[r];_.push(T),T=i._writeHeader(p,T,r,U,0)}var P=0,x=T;for(var r in w)U=w[r],_.push(T),T=i._writeHeader(p,T,r,U,1,_[P++]);var M=T-x;return o(p,T,101010256),T+=4,m(p,T+=4,P),m(p,T+=2,P),o(p,T+=2,M),o(p,T+=4,x),T+=4,T+=2,p.buffer},i._noNeed=function(e){var t=e.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(t)!=-1},i._writeHeader=function(e,t,a,o,m,w){var r=i.bin.writeUint,s=i.bin.writeUshort,n=o.file;return r(e,t,m==0?67324752:33639248),t+=4,m==1&&(t+=2),s(e,t,20),s(e,t+=2,0),s(e,t+=2,o.cpr?8:0),r(e,t+=2,0),r(e,t+=4,o.crc),r(e,t+=4,n.length),r(e,t+=4,o.usize),s(e,t+=4,i.bin.sizeUTF8(a)),s(e,t+=2,0),t+=2,m==1&&(t+=2,t+=2,r(e,t+=6,w),t+=4),t+=i.bin.writeUTF8(e,t,a),m==0&&(e.set(n,t),t+=n.length),t},i.crc={table:function(){for(var e=new Uint32Array(256),t=0;t<256;t++){for(var a=t,o=0;o<8;o++)1&a?a=3988292384^a>>>1:a>>>=1;e[t]=a}return e}(),update:function(e,t,a,o){for(var m=0;m<o;m++)e=i.crc.table[255&(e^t[a+m])]^e>>>8;return e},crc:function(e,t,a){return 4294967295^i.crc.update(4294967295,e,t,a)}},i.adler=function(e,t,a){for(var o=1,m=0,w=t,r=t+a;w<r;){for(var s=Math.min(w+5552,r);w<s;)m+=o+=e[w++];o%=65521,m%=65521}return m<<16|o},i.bin={readUshort:function(e,t){return e[t]|e[t+1]<<8},writeUshort:function(e,t,a){e[t]=255&a,e[t+1]=a>>8&255},readUint:function(e,t){return 16777216*e[t+3]+(e[t+2]<<16|e[t+1]<<8|e[t])},writeUint:function(e,t,a){e[t]=255&a,e[t+1]=a>>8&255,e[t+2]=a>>16&255,e[t+3]=a>>24&255},readASCII:function(e,t,a){for(var o="",m=0;m<a;m++)o+=String.fromCharCode(e[t+m]);return o},writeASCII:function(e,t,a){for(var o=0;o<a.length;o++)e[t+o]=a.charCodeAt(o)},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,t,a){for(var o,m="",w=0;w<a;w++)m+="%"+i.bin.pad(e[t+w].toString(16));try{o=decodeURIComponent(m)}catch{return i.bin.readASCII(e,t,a)}return o},writeUTF8:function(e,t,a){for(var o=a.length,m=0,w=0;w<o;w++){var r=a.charCodeAt(w);if(!(4294967168&r))e[t+m]=r,m++;else if(!(4294965248&r))e[t+m]=192|r>>6,e[t+m+1]=128|r>>0&63,m+=2;else if(!(4294901760&r))e[t+m]=224|r>>12,e[t+m+1]=128|r>>6&63,e[t+m+2]=128|r>>0&63,m+=3;else{if(4292870144&r)throw"e";e[t+m]=240|r>>18,e[t+m+1]=128|r>>12&63,e[t+m+2]=128|r>>6&63,e[t+m+3]=128|r>>0&63,m+=4}}return m},sizeUTF8:function(e){for(var t=e.length,a=0,o=0;o<t;o++){var m=e.charCodeAt(o);if(!(4294967168&m))a++;else if(!(4294965248&m))a+=2;else if(!(4294901760&m))a+=3;else{if(4292870144&m)throw"e";a+=4}}return a}},i.F={},i.F.deflateRaw=function(e,t,a,o){var m=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][o],w=i.F.U,r=i.F._goodIndex;i.F._hash;var s=i.F._putsE,n=0,l=a<<3,p=0,T=e.length;if(o==0){for(;n<T;)s(t,l,n+(E=Math.min(65535,T-n))==T?1:0),l=i.F._copyExact(e,n,E,t,l+8),n+=E;return l>>>3}var _=w.lits,U=w.strt,P=w.prev,x=0,M=0,k=0,y=0,R=0,d=0;for(T>2&&(U[d=i.F._hash(e,0)]=0),n=0;n<T;n++){if(R=d,n+1<T-2){d=i.F._hash(e,n+1);var h=n+1&32767;P[h]=U[d],U[d]=h}if(p<=n){(x>14e3||M>26697)&&T-n>100&&(p<n&&(_[x]=n-p,x+=2,p=n),l=i.F._writeBlock(n==T-1||p==T?1:0,_,x,y,e,k,n-k,t,l),x=M=y=0,k=n);var A=0;n<T-2&&(A=i.F._bestMatch(e,n,P,R,Math.min(m[2],T-n),m[3]));var E=A>>>16,I=65535&A;if(A!=0){I=65535&A;var C=r(E=A>>>16,w.of0);w.lhst[257+C]++;var b=r(I,w.df0);w.dhst[b]++,y+=w.exb[C]+w.dxb[b],_[x]=E<<23|n-p,_[x+1]=I<<16|C<<8|b,x+=2,p=n+E}else w.lhst[e[n]]++;M++}}for(k==n&&e.length!=0||(p<n&&(_[x]=n-p,x+=2,p=n),l=i.F._writeBlock(1,_,x,y,e,k,n-k,t,l),x=0,M=0,x=M=y=0,k=n);7&l;)l++;return l>>>3},i.F._bestMatch=function(e,t,a,o,m,w){var r=32767&t,s=a[r],n=r-s+32768&32767;if(s==r||o!=i.F._hash(e,t-n))return 0;for(var l=0,p=0,T=Math.min(32767,t);n<=T&&--w!=0&&s!=r;){if(l==0||e[t+l]==e[t+l-n]){var _=i.F._howLong(e,t,n);if(_>l){if(p=n,(l=_)>=m)break;n+2<_&&(_=n+2);for(var U=0,P=0;P<_-2;P++){var x=t-n+P+32768&32767,M=x-a[x]+32768&32767;M>U&&(U=M,s=x)}}}n+=(r=s)-(s=a[r])+32768&32767}return l<<16|p},i.F._howLong=function(e,t,a){if(e[t]!=e[t-a]||e[t+1]!=e[t+1-a]||e[t+2]!=e[t+2-a])return 0;var o=t,m=Math.min(e.length,t+258);for(t+=3;t<m&&e[t]==e[t-a];)t++;return t-o},i.F._hash=function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<4)&65535},i.saved=0,i.F._writeBlock=function(e,t,a,o,m,w,r,s,n){var l,p,T,_,U,P,x,M,k,y=i.F.U,R=i.F._putsF,d=i.F._putsE;y.lhst[256]++,p=(l=i.F.getTrees())[0],T=l[1],_=l[2],U=l[3],P=l[4],x=l[5],M=l[6],k=l[7];var h=32+(n+3&7?8-(n+3&7):0)+(r<<3),A=o+i.F.contSize(y.fltree,y.lhst)+i.F.contSize(y.fdtree,y.dhst),E=o+i.F.contSize(y.ltree,y.lhst)+i.F.contSize(y.dtree,y.dhst);E+=14+3*x+i.F.contSize(y.itree,y.ihst)+(2*y.ihst[16]+3*y.ihst[17]+7*y.ihst[18]);for(var I=0;I<286;I++)y.lhst[I]=0;for(I=0;I<30;I++)y.dhst[I]=0;for(I=0;I<19;I++)y.ihst[I]=0;var C=h<A&&h<E?0:A<E?1:2;if(R(s,n,e),R(s,n+1,C),n+=3,C==0){for(;7&n;)n++;n=i.F._copyExact(m,w,r,s,n)}else{var b,S;if(C==1&&(b=y.fltree,S=y.fdtree),C==2){i.F.makeCodes(y.ltree,p),i.F.revCodes(y.ltree,p),i.F.makeCodes(y.dtree,T),i.F.revCodes(y.dtree,T),i.F.makeCodes(y.itree,_),i.F.revCodes(y.itree,_),b=y.ltree,S=y.dtree,d(s,n,U-257),d(s,n+=5,P-1),d(s,n+=5,x-4),n+=4;for(var g=0;g<x;g++)d(s,n+3*g,y.itree[1+(y.ordr[g]<<1)]);n+=3*x,n=i.F._codeTiny(M,y.itree,s,n),n=i.F._codeTiny(k,y.itree,s,n)}for(var f=w,O=0;O<a;O+=2){for(var F=t[O],N=F>>>23,z=f+(8388607&F);f<z;)n=i.F._writeLit(m[f++],b,s,n);if(N!=0){var H=t[O+1],Q=H>>16,L=H>>8&255,D=255&H;d(s,n=i.F._writeLit(257+L,b,s,n),N-y.of0[L]),n+=y.exb[L],R(s,n=i.F._writeLit(D,S,s,n),Q-y.df0[D]),n+=y.dxb[D],f+=N}}n=i.F._writeLit(256,b,s,n)}return n},i.F._copyExact=function(e,t,a,o,m){var w=m>>>3;return o[w]=a,o[w+1]=a>>>8,o[w+2]=255-o[w],o[w+3]=255-o[w+1],w+=4,o.set(new Uint8Array(e.buffer,t,a),w),m+(a+4<<3)},i.F.getTrees=function(){for(var e=i.F.U,t=i.F._hufTree(e.lhst,e.ltree,15),a=i.F._hufTree(e.dhst,e.dtree,15),o=[],m=i.F._lenCodes(e.ltree,o),w=[],r=i.F._lenCodes(e.dtree,w),s=0;s<o.length;s+=2)e.ihst[o[s]]++;for(s=0;s<w.length;s+=2)e.ihst[w[s]]++;for(var n=i.F._hufTree(e.ihst,e.itree,7),l=19;l>4&&e.itree[1+(e.ordr[l-1]<<1)]==0;)l--;return[t,a,n,m,r,l,o,w]},i.F.getSecond=function(e){for(var t=[],a=0;a<e.length;a+=2)t.push(e[a+1]);return t},i.F.nonZero=function(e){for(var t="",a=0;a<e.length;a+=2)e[a+1]!=0&&(t+=(a>>1)+",");return t},i.F.contSize=function(e,t){for(var a=0,o=0;o<t.length;o++)a+=t[o]*e[1+(o<<1)];return a},i.F._codeTiny=function(e,t,a,o){for(var m=0;m<e.length;m+=2){var w=e[m],r=e[m+1];o=i.F._writeLit(w,t,a,o);var s=w==16?2:w==17?3:7;w>15&&(i.F._putsE(a,o,r,s),o+=s)}return o},i.F._lenCodes=function(e,t){for(var a=e.length;a!=2&&e[a-1]==0;)a-=2;for(var o=0;o<a;o+=2){var m=e[o+1],w=o+3<a?e[o+3]:-1,r=o+5<a?e[o+5]:-1,s=o==0?-1:e[o-1];if(m==0&&w==m&&r==m){for(var n=o+5;n+2<a&&e[n+2]==m;)n+=2;(l=Math.min(n+1-o>>>1,138))<11?t.push(17,l-3):t.push(18,l-11),o+=2*l-2}else if(m==s&&w==m&&r==m){for(n=o+5;n+2<a&&e[n+2]==m;)n+=2;var l=Math.min(n+1-o>>>1,6);t.push(16,l-3),o+=2*l-2}else t.push(m,0)}return a>>>1},i.F._hufTree=function(e,t,a){var o=[],m=e.length,w=t.length,r=0;for(r=0;r<w;r+=2)t[r]=0,t[r+1]=0;for(r=0;r<m;r++)e[r]!=0&&o.push({lit:r,f:e[r]});var s=o.length,n=o.slice(0);if(s==0)return 0;if(s==1){var l=o[0].lit;return n=l==0?1:0,t[1+(l<<1)]=1,t[1+(n<<1)]=1,1}o.sort(function(M,k){return M.f-k.f});var p=o[0],T=o[1],_=0,U=1,P=2;for(o[0]={lit:-1,f:p.f+T.f,l:p,r:T,d:0};U!=s-1;)p=_!=U&&(P==s||o[_].f<o[P].f)?o[_++]:o[P++],T=_!=U&&(P==s||o[_].f<o[P].f)?o[_++]:o[P++],o[U++]={lit:-1,f:p.f+T.f,l:p,r:T};var x=i.F.setDepth(o[U-1],0);for(x>a&&(i.F.restrictDepth(n,a,x),x=a),r=0;r<s;r++)t[1+(n[r].lit<<1)]=n[r].d;return x},i.F.setDepth=function(e,t){return e.lit!=-1?(e.d=t,t):Math.max(i.F.setDepth(e.l,t+1),i.F.setDepth(e.r,t+1))},i.F.restrictDepth=function(e,t,a){var o=0,m=1<<a-t,w=0;for(e.sort(function(s,n){return n.d==s.d?s.f-n.f:n.d-s.d}),o=0;o<e.length&&e[o].d>t;o++){var r=e[o].d;e[o].d=t,w+=m-(1<<a-r)}for(w>>>=a-t;w>0;)(r=e[o].d)<t?(e[o].d++,w-=1<<t-r-1):o++;for(;o>=0;o--)e[o].d==t&&w<0&&(e[o].d--,w++);w!=0&&console.log("debt left")},i.F._goodIndex=function(e,t){var a=0;return t[16|a]<=e&&(a|=16),t[8|a]<=e&&(a|=8),t[4|a]<=e&&(a|=4),t[2|a]<=e&&(a|=2),t[1|a]<=e&&(a|=1),a},i.F._writeLit=function(e,t,a,o){return i.F._putsF(a,o,t[e<<1]),o+t[1+(e<<1)]},i.F.inflate=function(e,t){var a=Uint8Array;if(e[0]==3&&e[1]==0)return t||new a(0);var o=i.F,m=o._bitsF,w=o._bitsE,r=o._decodeTiny,s=o.makeCodes,n=o.codes2map,l=o._get17,p=o.U,T=t==null;T&&(t=new a(e.length>>>2<<3));for(var _,U,P=0,x=0,M=0,k=0,y=0,R=0,d=0,h=0,A=0;P==0;)if(P=m(e,A,1),x=m(e,A+1,2),A+=3,x!=0){if(T&&(t=i.F._check(t,h+(1<<17))),x==1&&(_=p.flmap,U=p.fdmap,R=511,d=31),x==2){M=w(e,A,5)+257,k=w(e,A+5,5)+1,y=w(e,A+10,4)+4,A+=14;for(var E=0;E<38;E+=2)p.itree[E]=0,p.itree[E+1]=0;var I=1;for(E=0;E<y;E++){var C=w(e,A+3*E,3);p.itree[1+(p.ordr[E]<<1)]=C,C>I&&(I=C)}A+=3*y,s(p.itree,I),n(p.itree,I,p.imap),_=p.lmap,U=p.dmap,A=r(p.imap,(1<<I)-1,M+k,e,A,p.ttree);var b=o._copyOut(p.ttree,0,M,p.ltree);R=(1<<b)-1;var S=o._copyOut(p.ttree,M,k,p.dtree);d=(1<<S)-1,s(p.ltree,b),n(p.ltree,b,_),s(p.dtree,S),n(p.dtree,S,U)}for(;;){var g=_[l(e,A)&R];A+=15&g;var f=g>>>4;if(!(f>>>8))t[h++]=f;else{if(f==256)break;var O=h+f-254;if(f>264){var F=p.ldef[f-257];O=h+(F>>>3)+w(e,A,7&F),A+=7&F}var N=U[l(e,A)&d];A+=15&N;var z=N>>>4,H=p.ddef[z],Q=(H>>>4)+m(e,A,15&H);for(A+=15&H,T&&(t=i.F._check(t,h+(1<<17)));h<O;)t[h]=t[h++-Q],t[h]=t[h++-Q],t[h]=t[h++-Q],t[h]=t[h++-Q];h=O}}}else{7&A&&(A+=8-(7&A));var L=4+(A>>>3),D=e[L-4]|e[L-3]<<8;T&&(t=i.F._check(t,h+D)),t.set(new a(e.buffer,e.byteOffset+L,D),h),A=L+D<<3,h+=D}return t.length==h?t:t.slice(0,h)},i.F._check=function(e,t){var a=e.length;if(t<=a)return e;var o=new Uint8Array(Math.max(a<<1,t));return o.set(e,0),o},i.F._decodeTiny=function(e,t,a,o,m,w){for(var r=i.F._bitsE,s=i.F._get17,n=0;n<a;){var l=e[s(o,m)&t];m+=15&l;var p=l>>>4;if(p<=15)w[n]=p,n++;else{var T=0,_=0;p==16?(_=3+r(o,m,2),m+=2,T=w[n-1]):p==17?(_=3+r(o,m,3),m+=3):p==18&&(_=11+r(o,m,7),m+=7);for(var U=n+_;n<U;)w[n]=T,n++}}return m},i.F._copyOut=function(e,t,a,o){for(var m=0,w=0,r=o.length>>>1;w<a;){var s=e[w+t];o[w<<1]=0,o[1+(w<<1)]=s,s>m&&(m=s),w++}for(;w<r;)o[w<<1]=0,o[1+(w<<1)]=0,w++;return m},i.F.makeCodes=function(e,t){for(var a,o,m,w,r=i.F.U,s=e.length,n=r.bl_count,l=0;l<=t;l++)n[l]=0;for(l=1;l<s;l+=2)n[e[l]]++;var p=r.next_code;for(a=0,n[0]=0,o=1;o<=t;o++)a=a+n[o-1]<<1,p[o]=a;for(m=0;m<s;m+=2)(w=e[m+1])!=0&&(e[m]=p[w],p[w]++)},i.F.codes2map=function(e,t,a){for(var o=e.length,m=i.F.U.rev15,w=0;w<o;w+=2)if(e[w+1]!=0)for(var r=w>>1,s=e[w+1],n=r<<4|s,l=t-s,p=e[w]<<l,T=p+(1<<l);p!=T;)a[m[p]>>>15-t]=n,p++},i.F.revCodes=function(e,t){for(var a=i.F.U.rev15,o=15-t,m=0;m<e.length;m+=2){var w=e[m]<<t-e[m+1];e[m]=a[w]>>>o}},i.F._putsE=function(e,t,a){a<<=7&t;var o=t>>>3;e[o]|=a,e[o+1]|=a>>>8},i.F._putsF=function(e,t,a){a<<=7&t;var o=t>>>3;e[o]|=a,e[o+1]|=a>>>8,e[o+2]|=a>>>16},i.F._bitsE=function(e,t,a){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<a)-1},i.F._bitsF=function(e,t,a){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<a)-1},i.F._get17=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)},i.F._get25=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16|e[3+(t>>>3)]<<24)>>>(7&t)},i.F.U=(c=Uint16Array,v=Uint32Array,{next_code:new c(16),bl_count:new c(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new c(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new v(32),flmap:new c(512),fltree:[],fdmap:new c(32),fdtree:[],lmap:new c(32768),ltree:[],ttree:[],dmap:new c(32768),dtree:[],imap:new c(512),itree:[],rev15:new c(32768),lhst:new v(286),dhst:new v(30),ihst:new v(19),lits:new v(15e3),strt:new c(65536),prev:new c(32768)}),function(){for(var e=i.F.U,t=0;t<32768;t++){var a=t;a=(4278255360&(a=(4042322160&(a=(3435973836&(a=(2863311530&a)>>>1|(1431655765&a)<<1))>>>2|(858993459&a)<<2))>>>4|(252645135&a)<<4))>>>8|(16711935&a)<<8,e.rev15[t]=(a>>>16|a<<16)>>>17}function o(m,w,r){for(;w--!=0;)m.push(0,r)}for(t=0;t<32;t++)e.ldef[t]=e.of0[t]<<3|e.exb[t],e.ddef[t]=e.df0[t]<<4|e.dxb[t];o(e.fltree,144,8),o(e.fltree,112,9),o(e.fltree,24,7),o(e.fltree,8,8),i.F.makeCodes(e.fltree,9),i.F.codes2map(e.fltree,9,e.flmap),i.F.revCodes(e.fltree,9),o(e.fdtree,32,5),i.F.makeCodes(e.fdtree,5),i.F.codes2map(e.fdtree,5,e.fdmap),i.F.revCodes(e.fdtree,5),o(e.itree,19,0),o(e.ltree,286,0),o(e.dtree,30,0),o(e.ttree,320,0)}()})();var dn=un({__proto__:null,default:qe},[qe]);const ge=function(){var u={nextZero(r,s){for(;r[s]!=0;)s++;return s},readUshort:(r,s)=>r[s]<<8|r[s+1],writeUshort(r,s,n){r[s]=n>>8&255,r[s+1]=255&n},readUint:(r,s)=>16777216*r[s]+(r[s+1]<<16|r[s+2]<<8|r[s+3]),writeUint(r,s,n){r[s]=n>>24&255,r[s+1]=n>>16&255,r[s+2]=n>>8&255,r[s+3]=255&n},readASCII(r,s,n){let l="";for(let p=0;p<n;p++)l+=String.fromCharCode(r[s+p]);return l},writeASCII(r,s,n){for(let l=0;l<n.length;l++)r[s+l]=n.charCodeAt(l)},readBytes(r,s,n){const l=[];for(let p=0;p<n;p++)l.push(r[s+p]);return l},pad:r=>r.length<2?`0${r}`:r,readUTF8(r,s,n){let l,p="";for(let T=0;T<n;T++)p+=`%${u.pad(r[s+T].toString(16))}`;try{l=decodeURIComponent(p)}catch{return u.readASCII(r,s,n)}return l}};function c(r,s,n,l){const p=s*n,T=t(l),_=Math.ceil(s*T/8),U=new Uint8Array(4*p),P=new Uint32Array(U.buffer),{ctype:x}=l,{depth:M}=l,k=u.readUshort;if(x==6){const F=p<<2;if(M==8)for(var y=0;y<F;y+=4)U[y]=r[y],U[y+1]=r[y+1],U[y+2]=r[y+2],U[y+3]=r[y+3];if(M==16)for(y=0;y<F;y++)U[y]=r[y<<1]}else if(x==2){const F=l.tabs.tRNS;if(F==null){if(M==8)for(y=0;y<p;y++){var R=3*y;P[y]=255<<24|r[R+2]<<16|r[R+1]<<8|r[R]}if(M==16)for(y=0;y<p;y++)R=6*y,P[y]=255<<24|r[R+4]<<16|r[R+2]<<8|r[R]}else{var d=F[0];const N=F[1],z=F[2];if(M==8)for(y=0;y<p;y++){var h=y<<2;R=3*y,P[y]=255<<24|r[R+2]<<16|r[R+1]<<8|r[R],r[R]==d&&r[R+1]==N&&r[R+2]==z&&(U[h+3]=0)}if(M==16)for(y=0;y<p;y++)h=y<<2,R=6*y,P[y]=255<<24|r[R+4]<<16|r[R+2]<<8|r[R],k(r,R)==d&&k(r,R+2)==N&&k(r,R+4)==z&&(U[h+3]=0)}}else if(x==3){const F=l.tabs.PLTE,N=l.tabs.tRNS,z=N?N.length:0;if(M==1)for(var A=0;A<n;A++){var E=A*_,I=A*s;for(y=0;y<s;y++){h=I+y<<2;var C=3*(b=r[E+(y>>3)]>>7-((7&y)<<0)&1);U[h]=F[C],U[h+1]=F[C+1],U[h+2]=F[C+2],U[h+3]=b<z?N[b]:255}}if(M==2)for(A=0;A<n;A++)for(E=A*_,I=A*s,y=0;y<s;y++)h=I+y<<2,C=3*(b=r[E+(y>>2)]>>6-((3&y)<<1)&3),U[h]=F[C],U[h+1]=F[C+1],U[h+2]=F[C+2],U[h+3]=b<z?N[b]:255;if(M==4)for(A=0;A<n;A++)for(E=A*_,I=A*s,y=0;y<s;y++)h=I+y<<2,C=3*(b=r[E+(y>>1)]>>4-((1&y)<<2)&15),U[h]=F[C],U[h+1]=F[C+1],U[h+2]=F[C+2],U[h+3]=b<z?N[b]:255;if(M==8)for(y=0;y<p;y++){var b;h=y<<2,C=3*(b=r[y]),U[h]=F[C],U[h+1]=F[C+1],U[h+2]=F[C+2],U[h+3]=b<z?N[b]:255}}else if(x==4){if(M==8)for(y=0;y<p;y++){h=y<<2;var S=r[g=y<<1];U[h]=S,U[h+1]=S,U[h+2]=S,U[h+3]=r[g+1]}if(M==16)for(y=0;y<p;y++){var g;h=y<<2,S=r[g=y<<2],U[h]=S,U[h+1]=S,U[h+2]=S,U[h+3]=r[g+2]}}else if(x==0)for(d=l.tabs.tRNS?l.tabs.tRNS:-1,A=0;A<n;A++){const F=A*_,N=A*s;if(M==1)for(var f=0;f<s;f++){var O=(S=255*(r[F+(f>>>3)]>>>7-(7&f)&1))==255*d?0:255;P[N+f]=O<<24|S<<16|S<<8|S}else if(M==2)for(f=0;f<s;f++)O=(S=85*(r[F+(f>>>2)]>>>6-((3&f)<<1)&3))==85*d?0:255,P[N+f]=O<<24|S<<16|S<<8|S;else if(M==4)for(f=0;f<s;f++)O=(S=17*(r[F+(f>>>1)]>>>4-((1&f)<<2)&15))==17*d?0:255,P[N+f]=O<<24|S<<16|S<<8|S;else if(M==8)for(f=0;f<s;f++)O=(S=r[F+f])==d?0:255,P[N+f]=O<<24|S<<16|S<<8|S;else if(M==16)for(f=0;f<s;f++)S=r[F+(f<<1)],O=k(r,F+(f<<1))==d?0:255,P[N+f]=O<<24|S<<16|S<<8|S}return U}function v(r,s,n,l){const p=t(r),T=Math.ceil(n*p/8),_=new Uint8Array((T+1+r.interlace)*l);return s=r.tabs.CgBI?e(s,_):i(s,_),r.interlace==0?s=a(s,r,0,n,l):r.interlace==1&&(s=function(P,x){const M=x.width,k=x.height,y=t(x),R=y>>3,d=Math.ceil(M*y/8),h=new Uint8Array(k*d);let A=0;const E=[0,0,4,0,2,0,1],I=[0,4,0,2,0,1,0],C=[8,8,8,4,4,2,2],b=[8,8,4,4,2,2,1];let S=0;for(;S<7;){const f=C[S],O=b[S];let F=0,N=0,z=E[S];for(;z<k;)z+=f,N++;let H=I[S];for(;H<M;)H+=O,F++;const Q=Math.ceil(F*y/8);a(P,x,A,F,N);let L=0,D=E[S];for(;D<k;){let W=I[S],Y=A+L*Q<<3;for(;W<M;){var g;if(y==1&&(g=(g=P[Y>>3])>>7-(7&Y)&1,h[D*d+(W>>3)]|=g<<7-((7&W)<<0)),y==2&&(g=(g=P[Y>>3])>>6-(7&Y)&3,h[D*d+(W>>2)]|=g<<6-((3&W)<<1)),y==4&&(g=(g=P[Y>>3])>>4-(7&Y)&15,h[D*d+(W>>1)]|=g<<4-((1&W)<<2)),y>=8){const $=D*d+W*R;for(let B=0;B<R;B++)h[$+B]=P[(Y>>3)+B]}Y+=y,W+=O}L++,D+=f}F*N!=0&&(A+=N*(1+Q)),S+=1}return h}(s,r)),s}function i(r,s){return e(new Uint8Array(r.buffer,2,r.length-6),s)}var e=function(){const r={H:{}};return r.H.N=function(s,n){const l=Uint8Array;let p,T,_=0,U=0,P=0,x=0,M=0,k=0,y=0,R=0,d=0;if(s[0]==3&&s[1]==0)return n||new l(0);const h=r.H,A=h.b,E=h.e,I=h.R,C=h.n,b=h.A,S=h.Z,g=h.m,f=n==null;for(f&&(n=new l(s.length>>>2<<5));_==0;)if(_=A(s,d,1),U=A(s,d+1,2),d+=3,U!=0){if(f&&(n=r.H.W(n,R+(1<<17))),U==1&&(p=g.J,T=g.h,k=511,y=31),U==2){P=E(s,d,5)+257,x=E(s,d+5,5)+1,M=E(s,d+10,4)+4,d+=14;let F=1;for(var O=0;O<38;O+=2)g.Q[O]=0,g.Q[O+1]=0;for(O=0;O<M;O++){const H=E(s,d+3*O,3);g.Q[1+(g.X[O]<<1)]=H,H>F&&(F=H)}d+=3*M,C(g.Q,F),b(g.Q,F,g.u),p=g.w,T=g.d,d=I(g.u,(1<<F)-1,P+x,s,d,g.v);const N=h.V(g.v,0,P,g.C);k=(1<<N)-1;const z=h.V(g.v,P,x,g.D);y=(1<<z)-1,C(g.C,N),b(g.C,N,p),C(g.D,z),b(g.D,z,T)}for(;;){const F=p[S(s,d)&k];d+=15&F;const N=F>>>4;if(!(N>>>8))n[R++]=N;else{if(N==256)break;{let z=R+N-254;if(N>264){const W=g.q[N-257];z=R+(W>>>3)+E(s,d,7&W),d+=7&W}const H=T[S(s,d)&y];d+=15&H;const Q=H>>>4,L=g.c[Q],D=(L>>>4)+A(s,d,15&L);for(d+=15&L;R<z;)n[R]=n[R++-D],n[R]=n[R++-D],n[R]=n[R++-D],n[R]=n[R++-D];R=z}}}}else{7&d&&(d+=8-(7&d));const F=4+(d>>>3),N=s[F-4]|s[F-3]<<8;f&&(n=r.H.W(n,R+N)),n.set(new l(s.buffer,s.byteOffset+F,N),R),d=F+N<<3,R+=N}return n.length==R?n:n.slice(0,R)},r.H.W=function(s,n){const l=s.length;if(n<=l)return s;const p=new Uint8Array(l<<1);return p.set(s,0),p},r.H.R=function(s,n,l,p,T,_){const U=r.H.e,P=r.H.Z;let x=0;for(;x<l;){const M=s[P(p,T)&n];T+=15&M;const k=M>>>4;if(k<=15)_[x]=k,x++;else{let y=0,R=0;k==16?(R=3+U(p,T,2),T+=2,y=_[x-1]):k==17?(R=3+U(p,T,3),T+=3):k==18&&(R=11+U(p,T,7),T+=7);const d=x+R;for(;x<d;)_[x]=y,x++}}return T},r.H.V=function(s,n,l,p){let T=0,_=0;const U=p.length>>>1;for(;_<l;){const P=s[_+n];p[_<<1]=0,p[1+(_<<1)]=P,P>T&&(T=P),_++}for(;_<U;)p[_<<1]=0,p[1+(_<<1)]=0,_++;return T},r.H.n=function(s,n){const l=r.H.m,p=s.length;let T,_,U,P;const x=l.j;for(var M=0;M<=n;M++)x[M]=0;for(M=1;M<p;M+=2)x[s[M]]++;const k=l.K;for(T=0,x[0]=0,_=1;_<=n;_++)T=T+x[_-1]<<1,k[_]=T;for(U=0;U<p;U+=2)P=s[U+1],P!=0&&(s[U]=k[P],k[P]++)},r.H.A=function(s,n,l){const p=s.length,T=r.H.m.r;for(let _=0;_<p;_+=2)if(s[_+1]!=0){const U=_>>1,P=s[_+1],x=U<<4|P,M=n-P;let k=s[_]<<M;const y=k+(1<<M);for(;k!=y;)l[T[k]>>>15-n]=x,k++}},r.H.l=function(s,n){const l=r.H.m.r,p=15-n;for(let T=0;T<s.length;T+=2){const _=s[T]<<n-s[T+1];s[T]=l[_]>>>p}},r.H.M=function(s,n,l){l<<=7&n;const p=n>>>3;s[p]|=l,s[p+1]|=l>>>8},r.H.I=function(s,n,l){l<<=7&n;const p=n>>>3;s[p]|=l,s[p+1]|=l>>>8,s[p+2]|=l>>>16},r.H.e=function(s,n,l){return(s[n>>>3]|s[1+(n>>>3)]<<8)>>>(7&n)&(1<<l)-1},r.H.b=function(s,n,l){return(s[n>>>3]|s[1+(n>>>3)]<<8|s[2+(n>>>3)]<<16)>>>(7&n)&(1<<l)-1},r.H.Z=function(s,n){return(s[n>>>3]|s[1+(n>>>3)]<<8|s[2+(n>>>3)]<<16)>>>(7&n)},r.H.i=function(s,n){return(s[n>>>3]|s[1+(n>>>3)]<<8|s[2+(n>>>3)]<<16|s[3+(n>>>3)]<<24)>>>(7&n)},r.H.m=function(){const s=Uint16Array,n=Uint32Array;return{K:new s(16),j:new s(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new s(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new n(32),J:new s(512),_:[],h:new s(32),$:[],w:new s(32768),C:[],v:[],d:new s(32768),D:[],u:new s(512),Q:[],r:new s(32768),s:new n(286),Y:new n(30),a:new n(19),t:new n(15e3),k:new s(65536),g:new s(32768)}}(),function(){const s=r.H.m;for(var n=0;n<32768;n++){let p=n;p=(2863311530&p)>>>1|(1431655765&p)<<1,p=(3435973836&p)>>>2|(858993459&p)<<2,p=(4042322160&p)>>>4|(252645135&p)<<4,p=(4278255360&p)>>>8|(16711935&p)<<8,s.r[n]=(p>>>16|p<<16)>>>17}function l(p,T,_){for(;T--!=0;)p.push(0,_)}for(n=0;n<32;n++)s.q[n]=s.S[n]<<3|s.T[n],s.c[n]=s.p[n]<<4|s.z[n];l(s._,144,8),l(s._,112,9),l(s._,24,7),l(s._,8,8),r.H.n(s._,9),r.H.A(s._,9,s.J),r.H.l(s._,9),l(s.$,32,5),r.H.n(s.$,5),r.H.A(s.$,5,s.h),r.H.l(s.$,5),l(s.Q,19,0),l(s.C,286,0),l(s.D,30,0),l(s.v,320,0)}(),r.H.N}();function t(r){return[1,null,3,1,2,null,4][r.ctype]*r.depth}function a(r,s,n,l,p){let T=t(s);const _=Math.ceil(l*T/8);let U,P;T=Math.ceil(T/8);let x=r[n],M=0;if(x>1&&(r[n]=[0,0,1][x-2]),x==3)for(M=T;M<_;M++)r[M+1]=r[M+1]+(r[M+1-T]>>>1)&255;for(let k=0;k<p;k++)if(U=n+k*_,P=U+k+1,x=r[P-1],M=0,x==0)for(;M<_;M++)r[U+M]=r[P+M];else if(x==1){for(;M<T;M++)r[U+M]=r[P+M];for(;M<_;M++)r[U+M]=r[P+M]+r[U+M-T]}else if(x==2)for(;M<_;M++)r[U+M]=r[P+M]+r[U+M-_];else if(x==3){for(;M<T;M++)r[U+M]=r[P+M]+(r[U+M-_]>>>1);for(;M<_;M++)r[U+M]=r[P+M]+(r[U+M-_]+r[U+M-T]>>>1)}else{for(;M<T;M++)r[U+M]=r[P+M]+o(0,r[U+M-_],0);for(;M<_;M++)r[U+M]=r[P+M]+o(r[U+M-T],r[U+M-_],r[U+M-T-_])}return r}function o(r,s,n){const l=r+s-n,p=l-r,T=l-s,_=l-n;return p*p<=T*T&&p*p<=_*_?r:T*T<=_*_?s:n}function m(r,s,n){n.width=u.readUint(r,s),s+=4,n.height=u.readUint(r,s),s+=4,n.depth=r[s],s++,n.ctype=r[s],s++,n.compress=r[s],s++,n.filter=r[s],s++,n.interlace=r[s],s++}function w(r,s,n,l,p,T,_,U,P){const x=Math.min(s,p),M=Math.min(n,T);let k=0,y=0;for(let S=0;S<M;S++)for(let g=0;g<x;g++)if(_>=0&&U>=0?(k=S*s+g<<2,y=(U+S)*p+_+g<<2):(k=(-U+S)*s-_+g<<2,y=S*p+g<<2),P==0)l[y]=r[k],l[y+1]=r[k+1],l[y+2]=r[k+2],l[y+3]=r[k+3];else if(P==1){var R=r[k+3]*.00392156862745098,d=r[k]*R,h=r[k+1]*R,A=r[k+2]*R,E=l[y+3]*(1/255),I=l[y]*E,C=l[y+1]*E,b=l[y+2]*E;const f=1-R,O=R+E*f,F=O==0?0:1/O;l[y+3]=255*O,l[y+0]=(d+I*f)*F,l[y+1]=(h+C*f)*F,l[y+2]=(A+b*f)*F}else if(P==2)R=r[k+3],d=r[k],h=r[k+1],A=r[k+2],E=l[y+3],I=l[y],C=l[y+1],b=l[y+2],R==E&&d==I&&h==C&&A==b?(l[y]=0,l[y+1]=0,l[y+2]=0,l[y+3]=0):(l[y]=d,l[y+1]=h,l[y+2]=A,l[y+3]=R);else if(P==3){if(R=r[k+3],d=r[k],h=r[k+1],A=r[k+2],E=l[y+3],I=l[y],C=l[y+1],b=l[y+2],R==E&&d==I&&h==C&&A==b)continue;if(R<220&&E>20)return!1}return!0}return{decode:function(s){const n=new Uint8Array(s);let l=8;const p=u,T=p.readUshort,_=p.readUint,U={tabs:{},frames:[]},P=new Uint8Array(n.length);let x,M=0,k=0;const y=[137,80,78,71,13,10,26,10];for(var R=0;R<8;R++)if(n[R]!=y[R])throw"The input is not a PNG file!";for(;l<n.length;){const S=p.readUint(n,l);l+=4;const g=p.readASCII(n,l,4);if(l+=4,g=="IHDR")m(n,l,U);else if(g=="iCCP"){for(var d=l;n[d]!=0;)d++;p.readASCII(n,l,d-l),n[d+1];const f=n.slice(d+2,l+S);let O=null;try{O=i(f)}catch{O=e(f)}U.tabs[g]=O}else if(g=="CgBI")U.tabs[g]=n.slice(l,l+4);else if(g=="IDAT"){for(R=0;R<S;R++)P[M+R]=n[l+R];M+=S}else if(g=="acTL")U.tabs[g]={num_frames:_(n,l),num_plays:_(n,l+4)},x=new Uint8Array(n.length);else if(g=="fcTL"){k!=0&&((b=U.frames[U.frames.length-1]).data=v(U,x.slice(0,k),b.rect.width,b.rect.height),k=0);const f={x:_(n,l+12),y:_(n,l+16),width:_(n,l+4),height:_(n,l+8)};let O=T(n,l+22);O=T(n,l+20)/(O==0?100:O);const F={rect:f,delay:Math.round(1e3*O),dispose:n[l+24],blend:n[l+25]};U.frames.push(F)}else if(g=="fdAT"){for(R=0;R<S-4;R++)x[k+R]=n[l+R+4];k+=S-4}else if(g=="pHYs")U.tabs[g]=[p.readUint(n,l),p.readUint(n,l+4),n[l+8]];else if(g=="cHRM")for(U.tabs[g]=[],R=0;R<8;R++)U.tabs[g].push(p.readUint(n,l+4*R));else if(g=="tEXt"||g=="zTXt"){U.tabs[g]==null&&(U.tabs[g]={});var h=p.nextZero(n,l),A=p.readASCII(n,l,h-l),E=l+S-h-1;if(g=="tEXt")C=p.readASCII(n,h+1,E);else{var I=i(n.slice(h+2,h+2+E));C=p.readUTF8(I,0,I.length)}U.tabs[g][A]=C}else if(g=="iTXt"){U.tabs[g]==null&&(U.tabs[g]={}),h=0,d=l,h=p.nextZero(n,d),A=p.readASCII(n,d,h-d);const f=n[d=h+1];var C;n[d+1],d+=2,h=p.nextZero(n,d),p.readASCII(n,d,h-d),d=h+1,h=p.nextZero(n,d),p.readUTF8(n,d,h-d),E=S-((d=h+1)-l),f==0?C=p.readUTF8(n,d,E):(I=i(n.slice(d,d+E)),C=p.readUTF8(I,0,I.length)),U.tabs[g][A]=C}else if(g=="PLTE")U.tabs[g]=p.readBytes(n,l,S);else if(g=="hIST"){const f=U.tabs.PLTE.length/3;for(U.tabs[g]=[],R=0;R<f;R++)U.tabs[g].push(T(n,l+2*R))}else if(g=="tRNS")U.ctype==3?U.tabs[g]=p.readBytes(n,l,S):U.ctype==0?U.tabs[g]=T(n,l):U.ctype==2&&(U.tabs[g]=[T(n,l),T(n,l+2),T(n,l+4)]);else if(g=="gAMA")U.tabs[g]=p.readUint(n,l)/1e5;else if(g=="sRGB")U.tabs[g]=n[l];else if(g=="bKGD")U.ctype==0||U.ctype==4?U.tabs[g]=[T(n,l)]:U.ctype==2||U.ctype==6?U.tabs[g]=[T(n,l),T(n,l+2),T(n,l+4)]:U.ctype==3&&(U.tabs[g]=n[l]);else if(g=="IEND")break;l+=S,p.readUint(n,l),l+=4}var b;return k!=0&&((b=U.frames[U.frames.length-1]).data=v(U,x.slice(0,k),b.rect.width,b.rect.height)),U.data=v(U,P,U.width,U.height),delete U.compress,delete U.interlace,delete U.filter,U},toRGBA8:function(s){const n=s.width,l=s.height;if(s.tabs.acTL==null)return[c(s.data,n,l,s).buffer];const p=[];s.frames[0].data==null&&(s.frames[0].data=s.data);const T=n*l*4,_=new Uint8Array(T),U=new Uint8Array(T),P=new Uint8Array(T);for(let M=0;M<s.frames.length;M++){const k=s.frames[M],y=k.rect.x,R=k.rect.y,d=k.rect.width,h=k.rect.height,A=c(k.data,d,h,s);if(M!=0)for(var x=0;x<T;x++)P[x]=_[x];if(k.blend==0?w(A,d,h,_,n,l,y,R,0):k.blend==1&&w(A,d,h,_,n,l,y,R,1),p.push(_.buffer.slice(0)),k.dispose!=0){if(k.dispose==1)w(U,d,h,_,n,l,y,R,0);else if(k.dispose==2)for(x=0;x<T;x++)_[x]=P[x]}}return p},_paeth:o,_copyTile:w,_bin:u}}();(function(){const{_copyTile:u}=ge,{_bin:c}=ge,v=ge._paeth;var i={table:function(){const d=new Uint32Array(256);for(let h=0;h<256;h++){let A=h;for(let E=0;E<8;E++)1&A?A=3988292384^A>>>1:A>>>=1;d[h]=A}return d}(),update(d,h,A,E){for(let I=0;I<E;I++)d=i.table[255&(d^h[A+I])]^d>>>8;return d},crc:(d,h,A)=>4294967295^i.update(4294967295,d,h,A)};function e(d,h,A,E){h[A]+=d[0]*E>>4,h[A+1]+=d[1]*E>>4,h[A+2]+=d[2]*E>>4,h[A+3]+=d[3]*E>>4}function t(d){return Math.max(0,Math.min(255,d))}function a(d,h){const A=d[0]-h[0],E=d[1]-h[1],I=d[2]-h[2],C=d[3]-h[3];return A*A+E*E+I*I+C*C}function o(d,h,A,E,I,C,b){b==null&&(b=1);const S=E.length,g=[];for(var f=0;f<S;f++){const D=E[f];g.push([D>>>0&255,D>>>8&255,D>>>16&255,D>>>24&255])}for(f=0;f<S;f++){let D=4294967295;for(var O=0,F=0;F<S;F++){var N=a(g[f],g[F]);F!=f&&N<D&&(D=N,O=F)}}const z=new Uint32Array(I.buffer),H=new Int16Array(h*A*4),Q=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(f=0;f<Q.length;f++)Q[f]=255*((Q[f]+.5)/16-.5);for(let D=0;D<A;D++)for(let W=0;W<h;W++){var L;f=4*(D*h+W),b!=2?L=[t(d[f]+H[f]),t(d[f+1]+H[f+1]),t(d[f+2]+H[f+2]),t(d[f+3]+H[f+3])]:(N=Q[4*(3&D)+(3&W)],L=[t(d[f]+N),t(d[f+1]+N),t(d[f+2]+N),t(d[f+3]+N)]),O=0;let Y=16777215;for(F=0;F<S;F++){const j=a(L,g[F]);j<Y&&(Y=j,O=F)}const $=g[O],B=[L[0]-$[0],L[1]-$[1],L[2]-$[2],L[3]-$[3]];b==1&&(W!=h-1&&e(B,H,f+4,7),D!=A-1&&(W!=0&&e(B,H,f+4*h-4,3),e(B,H,f+4*h,5),W!=h-1&&e(B,H,f+4*h+4,1))),C[f>>2]=O,z[f>>2]=E[O]}}function m(d,h,A,E,I){I==null&&(I={});const{crc:C}=i,b=c.writeUint,S=c.writeUshort,g=c.writeASCII;let f=8;const O=d.frames.length>1;let F,N=!1,z=33+(O?20:0);if(I.sRGB!=null&&(z+=13),I.pHYs!=null&&(z+=21),I.iCCP!=null&&(F=pako.deflate(I.iCCP),z+=21+F.length+4),d.ctype==3){for(var H=d.plte.length,Q=0;Q<H;Q++)d.plte[Q]>>>24!=255&&(N=!0);z+=8+3*H+4+(N?8+1*H+4:0)}for(var L=0;L<d.frames.length;L++)O&&(z+=38),z+=($=d.frames[L]).cimg.length+12,L!=0&&(z+=4);z+=12;const D=new Uint8Array(z),W=[137,80,78,71,13,10,26,10];for(Q=0;Q<8;Q++)D[Q]=W[Q];if(b(D,f,13),f+=4,g(D,f,"IHDR"),f+=4,b(D,f,h),f+=4,b(D,f,A),f+=4,D[f]=d.depth,f++,D[f]=d.ctype,f++,D[f]=0,f++,D[f]=0,f++,D[f]=0,f++,b(D,f,C(D,f-17,17)),f+=4,I.sRGB!=null&&(b(D,f,1),f+=4,g(D,f,"sRGB"),f+=4,D[f]=I.sRGB,f++,b(D,f,C(D,f-5,5)),f+=4),I.iCCP!=null){const B=13+F.length;b(D,f,B),f+=4,g(D,f,"iCCP"),f+=4,g(D,f,"ICC profile"),f+=11,f+=2,D.set(F,f),f+=F.length,b(D,f,C(D,f-(B+4),B+4)),f+=4}if(I.pHYs!=null&&(b(D,f,9),f+=4,g(D,f,"pHYs"),f+=4,b(D,f,I.pHYs[0]),f+=4,b(D,f,I.pHYs[1]),f+=4,D[f]=I.pHYs[2],f++,b(D,f,C(D,f-13,13)),f+=4),O&&(b(D,f,8),f+=4,g(D,f,"acTL"),f+=4,b(D,f,d.frames.length),f+=4,b(D,f,I.loop!=null?I.loop:0),f+=4,b(D,f,C(D,f-12,12)),f+=4),d.ctype==3){for(b(D,f,3*(H=d.plte.length)),f+=4,g(D,f,"PLTE"),f+=4,Q=0;Q<H;Q++){const B=3*Q,j=d.plte[Q],V=255&j,te=j>>>8&255,Te=j>>>16&255;D[f+B+0]=V,D[f+B+1]=te,D[f+B+2]=Te}if(f+=3*H,b(D,f,C(D,f-3*H-4,3*H+4)),f+=4,N){for(b(D,f,H),f+=4,g(D,f,"tRNS"),f+=4,Q=0;Q<H;Q++)D[f+Q]=d.plte[Q]>>>24&255;f+=H,b(D,f,C(D,f-H-4,H+4)),f+=4}}let Y=0;for(L=0;L<d.frames.length;L++){var $=d.frames[L];O&&(b(D,f,26),f+=4,g(D,f,"fcTL"),f+=4,b(D,f,Y++),f+=4,b(D,f,$.rect.width),f+=4,b(D,f,$.rect.height),f+=4,b(D,f,$.rect.x),f+=4,b(D,f,$.rect.y),f+=4,S(D,f,E[L]),f+=2,S(D,f,1e3),f+=2,D[f]=$.dispose,f++,D[f]=$.blend,f++,b(D,f,C(D,f-30,30)),f+=4);const B=$.cimg;b(D,f,(H=B.length)+(L==0?0:4)),f+=4;const j=f;g(D,f,L==0?"IDAT":"fdAT"),f+=4,L!=0&&(b(D,f,Y++),f+=4),D.set(B,f),f+=H,b(D,f,C(D,j,f-j)),f+=4}return b(D,f,0),f+=4,g(D,f,"IEND"),f+=4,b(D,f,C(D,f-4,4)),f+=4,D.buffer}function w(d,h,A){for(let E=0;E<d.frames.length;E++){const I=d.frames[E];I.rect.width;const C=I.rect.height,b=new Uint8Array(C*I.bpl+C);I.cimg=l(I.img,C,I.bpp,I.bpl,b,h,A)}}function r(d,h,A,E,I){const C=I[0],b=I[1],S=I[2],g=I[3],f=I[4],O=I[5];let F=6,N=8,z=255;for(var H=0;H<d.length;H++){const re=new Uint8Array(d[H]);for(var Q=re.length,L=0;L<Q;L+=4)z&=re[L+3]}const D=z!=255,W=function(Z,q,ne,oe,J,ue){const ee=[];for(var K=0;K<Z.length;K++){const ae=new Uint8Array(Z[K]),de=new Uint32Array(ae.buffer);var ce;let he=0,ye=0,me=q,Se=ne,Xe=oe?1:0;if(K!=0){const Nt=ue||oe||K==1||ee[K-2].dispose!=0?1:2;let Ve=0,at=1e9;for(let Pe=0;Pe<Nt;Pe++){var Ue=new Uint8Array(Z[K-1-Pe]);const kt=new Uint32Array(Z[K-1-Pe]);let Ie=q,Ee=ne,Re=-1,Le=-1;for(let Me=0;Me<ne;Me++)for(let _e=0;_e<q;_e++)de[ie=Me*q+_e]!=kt[ie]&&(_e<Ie&&(Ie=_e),_e>Re&&(Re=_e),Me<Ee&&(Ee=Me),Me>Le&&(Le=Me));Re==-1&&(Ie=Ee=Re=Le=0),J&&((1&Ie)==1&&Ie--,(1&Ee)==1&&Ee--);const ft=(Re-Ie+1)*(Le-Ee+1);ft<at&&(at=ft,Ve=Pe,he=Ie,ye=Ee,me=Re-Ie+1,Se=Le-Ee+1)}Ue=new Uint8Array(Z[K-1-Ve]),Ve==1&&(ee[K-1].dispose=2),ce=new Uint8Array(me*Se*4),u(Ue,q,ne,ce,me,Se,-he,-ye,0),Xe=u(ae,q,ne,ce,me,Se,-he,-ye,3)?1:0,Xe==1?n(ae,q,ne,ce,{x:he,y:ye,width:me,height:Se}):u(ae,q,ne,ce,me,Se,-he,-ye,0)}else ce=ae.slice(0);ee.push({rect:{x:he,y:ye,width:me,height:Se},img:ce,blend:Xe,dispose:0})}if(oe)for(K=0;K<ee.length;K++){if((Fe=ee[K]).blend==1)continue;const ae=Fe.rect,de=ee[K-1].rect,he=Math.min(ae.x,de.x),ye=Math.min(ae.y,de.y),me={x:he,y:ye,width:Math.max(ae.x+ae.width,de.x+de.width)-he,height:Math.max(ae.y+ae.height,de.y+de.height)-ye};ee[K-1].dispose=1,K-1!=0&&s(Z,q,ne,ee,K-1,me,J),s(Z,q,ne,ee,K,me,J)}let ze=0;if(Z.length!=1)for(var ie=0;ie<ee.length;ie++){var Fe;ze+=(Fe=ee[ie]).rect.width*Fe.rect.height}return ee}(d,h,A,C,b,S),Y={},$=[],B=[];if(E!=0){const re=[];for(L=0;L<W.length;L++)re.push(W[L].img.buffer);const Z=function(J){let ue=0;for(var ee=0;ee<J.length;ee++)ue+=J[ee].byteLength;const K=new Uint8Array(ue);let ce=0;for(ee=0;ee<J.length;ee++){const Ue=new Uint8Array(J[ee]),ze=Ue.length;for(let ie=0;ie<ze;ie+=4){let Fe=Ue[ie],ae=Ue[ie+1],de=Ue[ie+2];const he=Ue[ie+3];he==0&&(Fe=ae=de=0),K[ce+ie]=Fe,K[ce+ie+1]=ae,K[ce+ie+2]=de,K[ce+ie+3]=he}ce+=ze}return K.buffer}(re),q=T(Z,E);for(L=0;L<q.plte.length;L++)$.push(q.plte[L].est.rgba);let ne=0;for(L=0;L<W.length;L++){const oe=(V=W[L]).img.length;var j=new Uint8Array(q.inds.buffer,ne>>2,oe>>2);B.push(j);const J=new Uint8Array(q.abuf,ne,oe);O&&o(V.img,V.rect.width,V.rect.height,$,J,j),V.img.set(J),ne+=oe}}else for(H=0;H<W.length;H++){var V=W[H];const re=new Uint32Array(V.img.buffer);var te=V.rect.width;for(Q=re.length,j=new Uint8Array(Q),B.push(j),L=0;L<Q;L++){const Z=re[L];if(L!=0&&Z==re[L-1])j[L]=j[L-1];else if(L>te&&Z==re[L-te])j[L]=j[L-te];else{let q=Y[Z];if(q==null&&(Y[Z]=q=$.length,$.push(Z),$.length>=300))break;j[L]=q}}}const Te=$.length;for(Te<=256&&f==0&&(N=Te<=2?1:Te<=4?2:Te<=16?4:8,N=Math.max(N,g)),H=0;H<W.length;H++){(V=W[H]).rect.x,V.rect.y,te=V.rect.width;const re=V.rect.height;let Z=V.img;new Uint32Array(Z.buffer);let q=4*te,ne=4;if(Te<=256&&f==0){q=Math.ceil(N*te/8);var pe=new Uint8Array(q*re);const oe=B[H];for(let J=0;J<re;J++){L=J*q;const ue=J*te;if(N==8)for(var X=0;X<te;X++)pe[L+X]=oe[ue+X];else if(N==4)for(X=0;X<te;X++)pe[L+(X>>1)]|=oe[ue+X]<<4-4*(1&X);else if(N==2)for(X=0;X<te;X++)pe[L+(X>>2)]|=oe[ue+X]<<6-2*(3&X);else if(N==1)for(X=0;X<te;X++)pe[L+(X>>3)]|=oe[ue+X]<<7-1*(7&X)}Z=pe,F=3,ne=1}else if(D==0&&W.length==1){pe=new Uint8Array(te*re*3);const oe=te*re;for(L=0;L<oe;L++){const J=3*L,ue=4*L;pe[J]=Z[ue],pe[J+1]=Z[ue+1],pe[J+2]=Z[ue+2]}Z=pe,F=2,ne=3,q=3*te}V.img=Z,V.bpl=q,V.bpp=ne}return{ctype:F,depth:N,plte:$,frames:W}}function s(d,h,A,E,I,C,b){const S=Uint8Array,g=Uint32Array,f=new S(d[I-1]),O=new g(d[I-1]),F=I+1<d.length?new S(d[I+1]):null,N=new S(d[I]),z=new g(N.buffer);let H=h,Q=A,L=-1,D=-1;for(let Y=0;Y<C.height;Y++)for(let $=0;$<C.width;$++){const B=C.x+$,j=C.y+Y,V=j*h+B,te=z[V];te==0||E[I-1].dispose==0&&O[V]==te&&(F==null||F[4*V+3]!=0)||(B<H&&(H=B),B>L&&(L=B),j<Q&&(Q=j),j>D&&(D=j))}L==-1&&(H=Q=L=D=0),b&&((1&H)==1&&H--,(1&Q)==1&&Q--),C={x:H,y:Q,width:L-H+1,height:D-Q+1};const W=E[I];W.rect=C,W.blend=1,W.img=new Uint8Array(C.width*C.height*4),E[I-1].dispose==0?(u(f,h,A,W.img,C.width,C.height,-C.x,-C.y,0),n(N,h,A,W.img,C)):u(N,h,A,W.img,C.width,C.height,-C.x,-C.y,0)}function n(d,h,A,E,I){u(d,h,A,E,I.width,I.height,-I.x,-I.y,2)}function l(d,h,A,E,I,C,b){const S=[];let g,f=[0,1,2,3,4];C!=-1?f=[C]:(h*E>5e5||A==1)&&(f=[0]),b&&(g={level:0});const O=dn;for(var F=0;F<f.length;F++){for(let H=0;H<h;H++)p(I,d,H,E,A,f[F]);S.push(O.deflate(I,g))}let N,z=1e9;for(F=0;F<S.length;F++)S[F].length<z&&(N=F,z=S[F].length);return S[N]}function p(d,h,A,E,I,C){const b=A*E;let S=b+A;if(d[S]=C,S++,C==0)if(E<500)for(var g=0;g<E;g++)d[S+g]=h[b+g];else d.set(new Uint8Array(h.buffer,b,E),S);else if(C==1){for(g=0;g<I;g++)d[S+g]=h[b+g];for(g=I;g<E;g++)d[S+g]=h[b+g]-h[b+g-I]+256&255}else if(A==0){for(g=0;g<I;g++)d[S+g]=h[b+g];if(C==2)for(g=I;g<E;g++)d[S+g]=h[b+g];if(C==3)for(g=I;g<E;g++)d[S+g]=h[b+g]-(h[b+g-I]>>1)+256&255;if(C==4)for(g=I;g<E;g++)d[S+g]=h[b+g]-v(h[b+g-I],0,0)+256&255}else{if(C==2)for(g=0;g<E;g++)d[S+g]=h[b+g]+256-h[b+g-E]&255;if(C==3){for(g=0;g<I;g++)d[S+g]=h[b+g]+256-(h[b+g-E]>>1)&255;for(g=I;g<E;g++)d[S+g]=h[b+g]+256-(h[b+g-E]+h[b+g-I]>>1)&255}if(C==4){for(g=0;g<I;g++)d[S+g]=h[b+g]+256-v(0,h[b+g-E],0)&255;for(g=I;g<E;g++)d[S+g]=h[b+g]+256-v(h[b+g-I],h[b+g-E],h[b+g-I-E])&255}}}function T(d,h){const A=new Uint8Array(d),E=A.slice(0),I=new Uint32Array(E.buffer),C=_(E,h),b=C[0],S=C[1],g=A.length,f=new Uint8Array(g>>2);let O;if(A.length<2e7)for(var F=0;F<g;F+=4)O=U(b,N=A[F]*(1/255),z=A[F+1]*(1/255),H=A[F+2]*(1/255),Q=A[F+3]*(1/255)),f[F>>2]=O.ind,I[F>>2]=O.est.rgba;else for(F=0;F<g;F+=4){var N=A[F]*.00392156862745098,z=A[F+1]*(1/255),H=A[F+2]*(1/255),Q=A[F+3]*(1/255);for(O=b;O.left;)O=P(O.est,N,z,H,Q)<=0?O.left:O.right;f[F>>2]=O.ind,I[F>>2]=O.est.rgba}return{abuf:E.buffer,inds:f,plte:S}}function _(d,h,A){A==null&&(A=1e-4);const E=new Uint32Array(d.buffer),I={i0:0,i1:d.length,bst:null,est:null,tdst:0,left:null,right:null};I.bst=k(d,I.i0,I.i1),I.est=y(I.bst);const C=[I];for(;C.length<h;){let S=0,g=0;for(var b=0;b<C.length;b++)C[b].est.L>S&&(S=C[b].est.L,g=b);if(S<A)break;const f=C[g],O=x(d,E,f.i0,f.i1,f.est.e,f.est.eMq255);if(f.i0>=O||f.i1<=O){f.est.L=0;continue}const F={i0:f.i0,i1:O,bst:null,est:null,tdst:0,left:null,right:null};F.bst=k(d,F.i0,F.i1),F.est=y(F.bst);const N={i0:O,i1:f.i1,bst:null,est:null,tdst:0,left:null,right:null};for(N.bst={R:[],m:[],N:f.bst.N-F.bst.N},b=0;b<16;b++)N.bst.R[b]=f.bst.R[b]-F.bst.R[b];for(b=0;b<4;b++)N.bst.m[b]=f.bst.m[b]-F.bst.m[b];N.est=y(N.bst),f.left=F,f.right=N,C[g]=F,C.push(N)}for(C.sort((S,g)=>g.bst.N-S.bst.N),b=0;b<C.length;b++)C[b].ind=b;return[I,C]}function U(d,h,A,E,I){if(d.left==null)return d.tdst=function(F,N,z,H,Q){const L=N-F[0],D=z-F[1],W=H-F[2],Y=Q-F[3];return L*L+D*D+W*W+Y*Y}(d.est.q,h,A,E,I),d;const C=P(d.est,h,A,E,I);let b=d.left,S=d.right;C>0&&(b=d.right,S=d.left);const g=U(b,h,A,E,I);if(g.tdst<=C*C)return g;const f=U(S,h,A,E,I);return f.tdst<g.tdst?f:g}function P(d,h,A,E,I){const{e:C}=d;return C[0]*h+C[1]*A+C[2]*E+C[3]*I-d.eMq}function x(d,h,A,E,I,C){for(E-=4;A<E;){for(;M(d,A,I)<=C;)A+=4;for(;M(d,E,I)>C;)E-=4;if(A>=E)break;const b=h[A>>2];h[A>>2]=h[E>>2],h[E>>2]=b,A+=4,E-=4}for(;M(d,A,I)>C;)A-=4;return A+4}function M(d,h,A){return d[h]*A[0]+d[h+1]*A[1]+d[h+2]*A[2]+d[h+3]*A[3]}function k(d,h,A){const E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],I=[0,0,0,0],C=A-h>>2;for(let b=h;b<A;b+=4){const S=d[b]*.00392156862745098,g=d[b+1]*(1/255),f=d[b+2]*(1/255),O=d[b+3]*(1/255);I[0]+=S,I[1]+=g,I[2]+=f,I[3]+=O,E[0]+=S*S,E[1]+=S*g,E[2]+=S*f,E[3]+=S*O,E[5]+=g*g,E[6]+=g*f,E[7]+=g*O,E[10]+=f*f,E[11]+=f*O,E[15]+=O*O}return E[4]=E[1],E[8]=E[2],E[9]=E[6],E[12]=E[3],E[13]=E[7],E[14]=E[11],{R:E,m:I,N:C}}function y(d){const{R:h}=d,{m:A}=d,{N:E}=d,I=A[0],C=A[1],b=A[2],S=A[3],g=E==0?0:1/E,f=[h[0]-I*I*g,h[1]-I*C*g,h[2]-I*b*g,h[3]-I*S*g,h[4]-C*I*g,h[5]-C*C*g,h[6]-C*b*g,h[7]-C*S*g,h[8]-b*I*g,h[9]-b*C*g,h[10]-b*b*g,h[11]-b*S*g,h[12]-S*I*g,h[13]-S*C*g,h[14]-S*b*g,h[15]-S*S*g],O=f,F=R;let N=[Math.random(),Math.random(),Math.random(),Math.random()],z=0,H=0;if(E!=0)for(let L=0;L<16&&(N=F.multVec(O,N),H=Math.sqrt(F.dot(N,N)),N=F.sml(1/H,N),!(L!=0&&Math.abs(H-z)<1e-9));L++)z=H;const Q=[I*g,C*g,b*g,S*g];return{Cov:f,q:Q,e:N,L:z,eMq255:F.dot(F.sml(255,Q),N),eMq:F.dot(N,Q),rgba:(Math.round(255*Q[3])<<24|Math.round(255*Q[2])<<16|Math.round(255*Q[1])<<8|Math.round(255*Q[0])<<0)>>>0}}var R={multVec:(d,h)=>[d[0]*h[0]+d[1]*h[1]+d[2]*h[2]+d[3]*h[3],d[4]*h[0]+d[5]*h[1]+d[6]*h[2]+d[7]*h[3],d[8]*h[0]+d[9]*h[1]+d[10]*h[2]+d[11]*h[3],d[12]*h[0]+d[13]*h[1]+d[14]*h[2]+d[15]*h[3]],dot:(d,h)=>d[0]*h[0]+d[1]*h[1]+d[2]*h[2]+d[3]*h[3],sml:(d,h)=>[d*h[0],d*h[1],d*h[2],d*h[3]]};ge.encode=function(h,A,E,I,C,b,S){I==null&&(I=0),S==null&&(S=!1);const g=r(h,A,E,I,[!1,!1,!1,0,S,!1]);return w(g,-1),m(g,A,E,C,b)},ge.encodeLL=function(h,A,E,I,C,b,S,g){const f={ctype:0+(I==1?0:2)+(C==0?0:4),depth:b,frames:[]},O=(I+C)*b,F=O*A;for(let N=0;N<h.length;N++)f.frames.push({rect:{x:0,y:0,width:A,height:E},img:new Uint8Array(h[N]),blend:0,dispose:1,bpp:Math.ceil(O/8),bpl:Math.ceil(F/8)});return w(f,0,!0),m(f,A,E,S,g)},ge.encode.compress=r,ge.encode.dither=o,ge.quantize=T,ge.quantize.getKDtree=_,ge.quantize.getNearest=U})();const Et={toArrayBuffer(u,c){const v=u.width,i=u.height,e=v<<2,t=u.getContext("2d").getImageData(0,0,v,i),a=new Uint32Array(t.data.buffer),o=(32*v+31)/32<<2,m=o*i,w=122+m,r=new ArrayBuffer(w),s=new DataView(r),n=1<<20;let l,p,T,_,U=n,P=0,x=0,M=0;function k(d){s.setUint16(x,d,!0),x+=2}function y(d){s.setUint32(x,d,!0),x+=4}function R(d){x+=d}k(19778),y(w),R(4),y(122),y(108),y(v),y(-i>>>0),k(1),k(32),y(3),y(m),y(2835),y(2835),R(8),y(16711680),y(65280),y(255),y(4278190080),y(1466527264),function d(){for(;P<i&&U>0;){for(_=122+P*o,l=0;l<e;)U--,p=a[M++],T=p>>>24,s.setUint32(_+l,p<<8|T),l+=4;P++}M<a.length?(U=n,setTimeout(d,Et._dly)):c(r)}()},toBlob(u,c){this.toArrayBuffer(u,v=>{c(new Blob([v],{type:"image/bmp"}))})},_dly:9};var le={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},gn={[le.CHROME]:16384,[le.FIREFOX]:11180,[le.DESKTOP_SAFARI]:16384,[le.IE]:8192,[le.IOS]:4096,[le.ETC]:8192};const st=typeof window<"u",Ct=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Ke=st&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),pn=(st||Ct)&&(Ke&&Ke.getOriginalSymbol(window,"File")||typeof File<"u"&&File),Tt=(st||Ct)&&(Ke&&Ke.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function ot(u,c,v=Date.now()){return new Promise(i=>{const e=u.split(","),t=e[0].match(/:(.*?);/)[1],a=globalThis.atob(e[1]);let o=a.length;const m=new Uint8Array(o);for(;o--;)m[o]=a.charCodeAt(o);const w=new Blob([m],{type:t});w.name=c,w.lastModified=v,i(w)})}function Ft(u){return new Promise((c,v)=>{const i=new Tt;i.onload=()=>c(i.result),i.onerror=e=>v(e),i.readAsDataURL(u)})}function St(u){return new Promise((c,v)=>{const i=new Image;i.onload=()=>c(i),i.onerror=e=>v(e),i.src=u})}function De(){if(De.cachedResult!==void 0)return De.cachedResult;let u=le.ETC;const{userAgent:c}=navigator;return/Chrom(e|ium)/i.test(c)?u=le.CHROME:/iP(ad|od|hone)/i.test(c)&&/WebKit/i.test(c)?u=le.IOS:/Safari/i.test(c)?u=le.DESKTOP_SAFARI:/Firefox/i.test(c)?u=le.FIREFOX:(/MSIE/i.test(c)||document.documentMode)&&(u=le.IE),De.cachedResult=u,De.cachedResult}function Mt(u,c){const v=De(),i=gn[v];let e=u,t=c,a=e*t;const o=e>t?t/e:e/t;for(;a>i*i;){const m=(i+e)/2,w=(i+t)/2;m<w?(t=w,e=w*o):(t=m*o,e=m),a=e*t}return{width:e,height:t}}function Ge(u,c){let v,i;try{if(v=new OffscreenCanvas(u,c),i=v.getContext("2d"),i===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{v=document.createElement("canvas"),i=v.getContext("2d")}return v.width=u,v.height=c,[v,i]}function _t(u,c){const{width:v,height:i}=Mt(u.width,u.height),[e,t]=Ge(v,i);return c&&/jpe?g/.test(c)&&(t.fillStyle="white",t.fillRect(0,0,e.width,e.height)),t.drawImage(u,0,0,e.width,e.height),e}function $e(){return $e.cachedResult!==void 0||($e.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),$e.cachedResult}function Ye(u,c={}){return new Promise(function(v,i){let e,t;var a=function(){try{return t=_t(e,c.fileType||u.type),v([e,t])}catch(m){return i(m)}},o=function(m){try{var w=function(r){try{throw r}catch(s){return i(s)}};try{let r;return Ft(u).then(function(s){try{return r=s,St(r).then(function(n){try{return e=n,function(){try{return a()}catch(l){return i(l)}}()}catch(l){return w(l)}},w)}catch(n){return w(n)}},w)}catch(r){w(r)}}catch(r){return i(r)}};try{if($e()||[le.DESKTOP_SAFARI,le.MOBILE_SAFARI].includes(De()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(u).then(function(m){try{return e=m,a()}catch{return o()}},o)}catch{o()}})}function Ze(u,c,v,i,e=1){return new Promise(function(t,a){let o;if(c==="image/png"){let w,r,s;return w=u.getContext("2d"),{data:r}=w.getImageData(0,0,u.width,u.height),s=ge.encode([r.buffer],u.width,u.height,4096*e),o=new Blob([s],{type:c}),o.name=v,o.lastModified=i,m.call(this)}{let w=function(){return m.call(this)};if(c==="image/bmp")return new Promise(r=>Et.toBlob(u,r)).then((function(r){try{return o=r,o.name=v,o.lastModified=i,w.call(this)}catch(s){return a(s)}}).bind(this),a);{let r=function(){return w.call(this)};if(typeof OffscreenCanvas=="function"&&u instanceof OffscreenCanvas)return u.convertToBlob({type:c,quality:e}).then((function(s){try{return o=s,o.name=v,o.lastModified=i,r.call(this)}catch(n){return a(n)}}).bind(this),a);{let s;return s=u.toDataURL(c,e),ot(s,v,i).then((function(n){try{return o=n,r.call(this)}catch(l){return a(l)}}).bind(this),a)}}}function m(){return t(o)}})}function ve(u){u.width=0,u.height=0}function ke(){return new Promise(function(u,c){let v,i,e,t;return ke.cachedResult!==void 0?u(ke.cachedResult):ot("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(a){try{return v=a,Ye(v).then(function(o){try{return i=o[1],Ze(i,v.type,v.name,v.lastModified).then(function(m){try{return e=m,ve(i),Ye(e).then(function(w){try{return t=w[0],ke.cachedResult=t.width===1&&t.height===2,u(ke.cachedResult)}catch(r){return c(r)}},c)}catch(w){return c(w)}},c)}catch(m){return c(m)}},c)}catch(o){return c(o)}},c)})}function Dt(u){return new Promise((c,v)=>{const i=new Tt;i.onload=e=>{const t=new DataView(e.target.result);if(t.getUint16(0,!1)!=65496)return c(-2);const a=t.byteLength;let o=2;for(;o<a;){if(t.getUint16(o+2,!1)<=8)return c(-1);const m=t.getUint16(o,!1);if(o+=2,m==65505){if(t.getUint32(o+=2,!1)!=1165519206)return c(-1);const w=t.getUint16(o+=6,!1)==18761;o+=t.getUint32(o+4,w);const r=t.getUint16(o,w);o+=2;for(let s=0;s<r;s++)if(t.getUint16(o+12*s,w)==274)return c(t.getUint16(o+12*s+8,w))}else{if((65280&m)!=65280)break;o+=t.getUint16(o,!1)}}return c(-1)},i.onerror=e=>v(e),i.readAsArrayBuffer(u)})}function Rt(u,c){const{width:v}=u,{height:i}=u,{maxWidthOrHeight:e}=c;let t,a=u;return isFinite(e)&&(v>e||i>e)&&([a,t]=Ge(v,i),v>i?(a.width=e,a.height=i/v*e):(a.width=v/i*e,a.height=e),t.drawImage(u,0,0,a.width,a.height),ve(u)),a}function xt(u,c){const{width:v}=u,{height:i}=u,[e,t]=Ge(v,i);switch(c>4&&c<9?(e.width=i,e.height=v):(e.width=v,e.height=i),c){case 2:t.transform(-1,0,0,1,v,0);break;case 3:t.transform(-1,0,0,-1,v,i);break;case 4:t.transform(1,0,0,-1,0,i);break;case 5:t.transform(0,1,1,0,0,0);break;case 6:t.transform(0,1,-1,0,i,0);break;case 7:t.transform(0,-1,-1,0,i,v);break;case 8:t.transform(0,-1,1,0,0,v)}return t.drawImage(u,0,0,v,i),ve(u),e}function dt(u,c,v=0){return new Promise(function(i,e){let t,a,o,m,w,r,s,n,l,p,T,_,U,P,x,M,k,y,R,d;function h(E=5){if(c.signal&&c.signal.aborted)throw c.signal.reason;t+=E,c.onProgress(Math.min(t,100))}function A(E){if(c.signal&&c.signal.aborted)throw c.signal.reason;t=Math.min(Math.max(E,t),100),c.onProgress(t)}return t=v,a=c.maxIteration||10,o=1024*c.maxSizeMB*1024,h(),Ye(u,c).then((function(E){try{return[,m]=E,h(),w=Rt(m,c),h(),new Promise(function(I,C){var b;if(!(b=c.exifOrientation))return Dt(u).then((function(g){try{return b=g,S.call(this)}catch(f){return C(f)}}).bind(this),C);function S(){return I(b)}return S.call(this)}).then((function(I){try{return r=I,h(),ke().then((function(C){try{return s=C?w:xt(w,r),h(),n=c.initialQuality||1,l=c.fileType||u.type,Ze(s,l,u.name,u.lastModified,n).then((function(b){try{{let g=function(){if(a--&&(x>o||x>U)){let O,F;return O=d?.95*R.width:R.width,F=d?.95*R.height:R.height,[k,y]=Ge(O,F),y.drawImage(R,0,0,O,F),n*=l==="image/png"?.85:.95,Ze(k,l,u.name,u.lastModified,n).then(function(N){try{return M=N,ve(R),R=k,x=M.size,A(Math.min(99,Math.floor((P-x)/(P-o)*100))),g}catch(z){return e(z)}},e)}return[1]},f=function(){return ve(R),ve(k),ve(w),ve(s),ve(m),A(100),i(M)};if(p=b,h(),T=p.size>o,_=p.size>u.size,!T&&!_)return A(100),i(p);var S;return U=u.size,P=p.size,x=P,R=s,d=!c.alwaysKeepResolution&&T,(S=(function(O){for(;O;){if(O.then)return void O.then(S,e);try{if(O.pop){if(O.length)return O.pop()?f.call(this):O;O=g}else O=O.call(this)}catch(F){return e(F)}}}).bind(this))(g)}}catch(g){return e(g)}}).bind(this),e)}catch(b){return e(b)}}).bind(this),e)}catch(C){return e(C)}}).bind(this),e)}catch(I){return e(I)}}).bind(this),e)})}const mn=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let tt;function vn(u,c){return new Promise((v,i)=>{tt||(tt=function(a){const o=[];return o.push(a),URL.createObjectURL(new Blob(o))}(mn));const e=new Worker(tt);e.addEventListener("message",function(a){if(c.signal&&c.signal.aborted)e.terminate();else if(a.data.progress===void 0){if(a.data.error)return i(new Error(a.data.error)),void e.terminate();v(a.data.file),e.terminate()}else c.onProgress(a.data.progress)}),e.addEventListener("error",i),c.signal&&c.signal.addEventListener("abort",()=>{i(c.signal.reason),e.terminate()}),e.postMessage({file:u,imageCompressionLibUrl:c.libURL,options:{...c,onProgress:void 0,signal:void 0}})})}function se(u,c){return new Promise(function(v,i){let e,t,a,o,m,w;if(e={...c},a=0,{onProgress:o}=e,e.maxSizeMB=e.maxSizeMB||Number.POSITIVE_INFINITY,m=typeof e.useWebWorker!="boolean"||e.useWebWorker,delete e.useWebWorker,e.onProgress=l=>{a=l,typeof o=="function"&&o(a)},!(u instanceof Blob||u instanceof pn))return i(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(u.type))return i(new Error("The file given is not an image"));if(w=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!m||typeof Worker!="function"||w)return dt(u,e).then((function(l){try{return t=l,n.call(this)}catch(p){return i(p)}}).bind(this),i);var r=(function(){try{return n.call(this)}catch(l){return i(l)}}).bind(this),s=function(l){try{return dt(u,e).then(function(p){try{return t=p,r()}catch(T){return i(T)}},i)}catch(p){return i(p)}};try{return e.libURL=e.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",vn(u,e).then(function(l){try{return t=l,r()}catch{return s()}},s)}catch{s()}function n(){try{t.name=u.name,t.lastModified=u.lastModified}catch{}try{e.preserveExif&&u.type==="image/jpeg"&&(!e.fileType||e.fileType&&e.fileType===u.type)&&(t=It(u,t))}catch{}return v(t)}})}se.getDataUrlFromFile=Ft,se.getFilefromDataUrl=ot,se.loadImage=St,se.drawImageInCanvas=_t,se.drawFileInCanvas=Ye,se.canvasToFile=Ze,se.getExifOrientation=Dt,se.handleMaxWidthOrHeight=Rt,se.followExifOrientation=xt,se.cleanupCanvasMemory=ve,se.isAutoOrientationInBrowser=ke,se.approximateBelowMaximumCanvasSizeOfBrowser=Mt,se.copyExifWithoutOrientation=It,se.getBrowserName=De,se.version="2.0.2";const yn=u=>!u||u.length<12?null:{tradeId:u[0],date:u[1],time:u[2],amount:parseFloat(u[3])||0,tagId:u[4],tagName:u[5],tagColor:u[6],tagEmoji:u[7],driveImageId:u[8]||null,notes:u[9]||"",createdAt:u[10],updatedAt:u[11]},Ot=async()=>{const u=localStorage.getItem(vt.SHEET_ID);if(!u)return[];try{return((await window.gapi.client.sheets.spreadsheets.values.get({spreadsheetId:u,range:`${it.TRADES}!A2:L`})).result.values||[]).map(yn).filter(Boolean)}catch(c){return console.error("Failed to fetch trades:",c),[]}},bn=async(u,c)=>(await Ot()).filter(i=>{const[e,t]=i.date.split("-").map(Number);return e===u&&t===c+1}),wn=async u=>{const c=await ct.getOrCreateSpreadsheet();let v=null;if(u.screenshot){const t=await se(u.screenshot,{maxSizeMB:1,maxWidthOrHeight:1200,useWebWorker:!0}),a=`${u.tradeId}_${u.date}.jpg`;v=await ct.uploadImage(t,a)}const i=new Date().toISOString(),e=[u.tradeId,u.date,u.time,u.amount,u.tagId,u.tagName,u.tagColor,u.tagEmoji,v||"",u.notes||"",i,i];return await window.gapi.client.sheets.spreadsheets.values.append({spreadsheetId:c,range:`${it.TRADES}!A:L`,valueInputOption:"USER_ENTERED",resource:{values:[e]}}),{...u,driveImageId:v,createdAt:i,updatedAt:i}},An=async u=>{const c=localStorage.getItem(vt.SHEET_ID),e=((await window.gapi.client.sheets.spreadsheets.values.get({spreadsheetId:c,range:`${it.TRADES}!A:A`})).result.values||[]).findIndex(t=>t[0]===u);if(e===-1)throw new Error("Trade not found");await window.gapi.client.sheets.spreadsheets.batchUpdate({spreadsheetId:c,resource:{requests:[{deleteDimension:{range:{sheetId:0,dimension:"ROWS",startIndex:e,endIndex:e+1}}}]}})},On=()=>pt({queryKey:["trades"],queryFn:Ot,staleTime:5*60*1e3,cacheTime:30*60*1e3}),Nn=(u,c)=>pt({queryKey:["trades",u,c],queryFn:()=>bn(u,c),staleTime:5*60*1e3}),kn=()=>{const u=rt();return yt({mutationFn:wn,onMutate:async c=>{await u.cancelQueries({queryKey:["trades"]});const v=u.getQueryData(["trades"]);return v&&u.setQueryData(["trades"],i=>[...i||[],c]),{previousTrades:v}},onError:(c,v,i)=>{i!=null&&i.previousTrades&&u.setQueryData(["trades"],i.previousTrades)},onSettled:()=>{u.invalidateQueries({queryKey:["trades"]})}})},Pn=()=>{const u=rt();return yt({mutationFn:An,onMutate:async c=>{await u.cancelQueries({queryKey:["trades"]});const v=u.getQueryData(["trades"]);return v&&u.setQueryData(["trades"],i=>(i||[]).filter(e=>e.tradeId!==c)),{previousTrades:v}},onError:(c,v,i)=>{i!=null&&i.previousTrades&&u.setQueryData(["trades"],i.previousTrades)},onSettled:()=>{u.invalidateQueries({queryKey:["trades"]})}})};export{Cn as a,Pn as b,Rn as c,Fn as d,kn as e,Sn as f,xn as g,Nn as h,ln as i,Dn as j,fn as k,Mn as l,Tn as m,_n as n,ht as s,bt as t,On as u};
