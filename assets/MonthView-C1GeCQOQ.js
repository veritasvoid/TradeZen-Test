import{d as S,b as C,j as e,T as L}from"./index-C41HpDc0.js";import{a as I,f as b}from"./useTrades-BXYNcOKp.js";import{u as R}from"./useTags-DWgKfkvW.js";import{u as $}from"./settingsStore-Ps84-LPe.js";const q=()=>{const{year:c,month:r}=S(),s=C(),a=new Date,d=parseInt(c)||a.getFullYear(),n=r!==void 0?parseInt(r):a.getMonth(),{data:l=[],isLoading:i}=I(d,n),{data:F=[]}=R(),u=$(t=>t.settings.currency),v=["January","February","March","April","May","June","July","August","September","October","November","December"],y=new Date(d,n+1,0).getDate(),w=new Date(d,n,1).getDay(),h=l.reduce((t,o)=>t+o.amount,0),g=l.filter(t=>t.amount>0),M=l.filter(t=>t.amount<0),j=l.length>0?Math.round(g.length/l.length*100):0,f=A(l),x={};return l.forEach(t=>{const o=parseInt(t.date.split("-")[2]);x[o]||(x[o]=[]),x[o].push(t)}),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950",style:{paddingTop:"80px"},children:[e.jsx("div",{className:"border-b border-slate-700/50 bg-slate-900/50 backdrop-blur-sm px-6 py-4",children:e.jsxs("div",{className:"max-w-[1800px] mx-auto flex items-center justify-between",children:[e.jsxs("button",{onClick:()=>s("/"),className:"flex items-center gap-3 hover:opacity-80 transition-opacity",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-purple-600 p-2 rounded-xl",children:e.jsx(L,{size:24,className:"text-white"})}),e.jsx("span",{className:"text-2xl font-black bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent",children:"TradeZen"})]}),e.jsxs("h1",{className:"text-2xl font-black",children:[v[n]," ",d]}),e.jsx("button",{className:"w-10 h-10"})," "]})}),e.jsx("div",{className:"max-w-[1800px] mx-auto p-6",children:e.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[e.jsx("div",{className:"col-span-9",children:e.jsxs("div",{className:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-sm rounded-2xl border border-slate-700/50 p-6",children:[e.jsx("div",{className:"grid grid-cols-7 gap-2 mb-4",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(t=>e.jsx("div",{className:"text-center text-slate-400 text-sm font-semibold py-2",children:t},t))}),e.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[Array.from({length:w}).map((t,o)=>e.jsx("div",{className:"aspect-square"},`empty-${o}`)),Array.from({length:y}).map((t,o)=>{const p=o+1,N=x[p]||[],T=N.reduce((D,P)=>D+P.amount,0),k=p===a.getDate()&&n===a.getMonth()&&d===a.getFullYear();return e.jsx(E,{day:p,trades:N,dayPL:T,isToday:k,currency:u},p)})]})]})}),e.jsxs("div",{className:"col-span-3 space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-sm rounded-2xl border border-slate-700/50 p-6",children:[e.jsx("h3",{className:"text-sm uppercase tracking-wider text-slate-400 mb-4 font-semibold text-center",children:"Month Stats"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(m,{label:"Total P&L",value:b(h,u),color:h>=0?"emerald":"red"}),e.jsx(m,{label:"Trades",value:l.length}),e.jsx(m,{label:"Winners",value:g.length,color:"emerald"}),e.jsx(m,{label:"Losers",value:M.length,color:"red"}),e.jsx(m,{label:"Win Rate",value:`${j}%`,color:j>=50?"emerald":"red"})]})]}),f.length>0&&e.jsxs("div",{className:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-sm rounded-2xl border border-slate-700/50 p-6",children:[e.jsx("h3",{className:"text-sm uppercase tracking-wider text-slate-400 mb-4 font-semibold text-center",children:"Strategies"}),e.jsx("div",{className:"space-y-3",children:f.map(t=>e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-xl",children:t.tagEmoji}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("div",{className:"text-xs font-bold truncate",style:{color:t.tagColor},children:t.tagName})})]}),e.jsx("div",{className:`text-lg font-black ${t.totalPL>=0?"text-emerald-400":"text-red-400"}`,children:b(t.totalPL,u)}),e.jsxs("div",{className:"text-[10px] text-slate-400 mt-1",children:[t.trades,"T â€¢ ",t.winRate,"% WR"]})]},t.tagId))})]})]})]})})]})},E=({day:c,trades:r,dayPL:s,isToday:a,currency:d})=>{const n=r.length>0,l=n?s>0?"bg-emerald-900/20 border-emerald-500/30":"bg-red-900/20 border-red-500/30":"bg-slate-800/20 border-slate-700/30";return e.jsxs("div",{className:`aspect-square rounded-lg border ${l} ${a?"ring-2 ring-blue-500":""} p-2 relative hover:bg-slate-700/30 transition-all cursor-pointer`,children:[e.jsx("div",{className:"text-sm font-semibold text-slate-300",children:c}),n&&e.jsx("div",{className:`text-xs font-bold mt-1 ${s>=0?"text-emerald-400":"text-red-400"}`,children:b(s,d)}),n&&e.jsx("div",{className:"absolute bottom-1 left-1 flex flex-wrap gap-1",children:[...new Set(r.map(i=>i.tagName).filter(Boolean))].map(i=>e.jsx("span",{className:"text-[8px] text-slate-400 bg-slate-900/50 px-1 rounded",children:i},i))}),r.length>1&&e.jsx("div",{className:"absolute bottom-1 right-1 text-[9px] text-slate-500 font-semibold",children:r.length})]})},m=({label:c,value:r,color:s})=>{const a=s==="emerald"?"text-emerald-400":s==="red"?"text-red-400":"text-white";return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-slate-400 uppercase tracking-wider",children:c}),e.jsx("span",{className:`text-lg font-black ${a}`,children:r})]})},A=c=>{const r={};return c.forEach(s=>{const a=s.tagId||"none";a!=="none"&&(r[a]||(r[a]={tagId:a,tagName:s.tagName,tagColor:s.tagColor,tagEmoji:s.tagEmoji,totalPL:0,trades:0,wins:0}),r[a].totalPL+=s.amount,r[a].trades+=1,s.amount>0&&(r[a].wins+=1))}),Object.values(r).map(s=>({...s,winRate:s.trades>0?Math.round(s.wins/s.trades*100):0})).sort((s,a)=>a.totalPL-s.totalPL)};export{q as default};
