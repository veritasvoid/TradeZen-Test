var Et=s=>{throw TypeError(s)};var ht=(s,t,e)=>t.has(s)||Et("Cannot "+e);var r=(s,t,e)=>(ht(s,t,"read from private field"),e?e.call(s):t.get(s)),b=(s,t,e)=>t.has(s)?Et("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,e),l=(s,t,e,i)=>(ht(s,t,"write to private field"),i?i.call(s,e):t.set(s,e),e),p=(s,t,e)=>(ht(s,t,"access private method"),e);import{l as Pt,p as Tt,m as T,s as st,n as H,o as it,q as ut,t as It,v as zt,w as q,x as Yt,y as jt,z as wt,A as rt,B as Mt,C as Kt,r as S,D as Rt,f as Qt}from"./index-B_Zvil2d.js";var R,h,Z,y,Q,A,w,N,V,W,z,L,k,F,Y,c,B,lt,dt,ft,pt,mt,gt,bt,Lt,Ft,Bt=(Ft=class extends Pt{constructor(t,e){super();b(this,c);b(this,R);b(this,h);b(this,Z);b(this,y);b(this,Q);b(this,A);b(this,w);b(this,N);b(this,V);b(this,W);b(this,z);b(this,L);b(this,k);b(this,F);b(this,Y,new Set);this.options=e,l(this,R,t),l(this,N,null),l(this,w,Tt()),this.bindMethods(),this.setOptions(e)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(r(this,h).addObserver(this),xt(r(this,h),this.options)?p(this,c,B).call(this):this.updateResult(),p(this,c,pt).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return vt(r(this,h),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return vt(r(this,h),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,p(this,c,mt).call(this),p(this,c,gt).call(this),r(this,h).removeObserver(this)}setOptions(t){const e=this.options,i=r(this,h);if(this.options=r(this,R).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof T(this.options.enabled,r(this,h))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");p(this,c,bt).call(this),r(this,h).setOptions(this.options),e._defaulted&&!st(this.options,e)&&r(this,R).getQueryCache().notify({type:"observerOptionsUpdated",query:r(this,h),observer:this});const n=this.hasListeners();n&&Ut(r(this,h),i,this.options,e)&&p(this,c,B).call(this),this.updateResult(),n&&(r(this,h)!==i||T(this.options.enabled,r(this,h))!==T(e.enabled,r(this,h))||H(this.options.staleTime,r(this,h))!==H(e.staleTime,r(this,h)))&&p(this,c,lt).call(this);const o=p(this,c,dt).call(this);n&&(r(this,h)!==i||T(this.options.enabled,r(this,h))!==T(e.enabled,r(this,h))||o!==r(this,F))&&p(this,c,ft).call(this,o)}getOptimisticResult(t){const e=r(this,R).getQueryCache().build(r(this,R),t),i=this.createResult(e,t);return Zt(this,i)&&(l(this,y,i),l(this,A,this.options),l(this,Q,r(this,h).state)),i}getCurrentResult(){return r(this,y)}trackResult(t,e){return new Proxy(t,{get:(i,n)=>(this.trackProp(n),e==null||e(n),n==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&r(this,w).status==="pending"&&r(this,w).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(i,n))})}trackProp(t){r(this,Y).add(t)}getCurrentQuery(){return r(this,h)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=r(this,R).defaultQueryOptions(t),i=r(this,R).getQueryCache().build(r(this,R),e);return i.fetch().then(()=>this.createResult(i,e))}fetch(t){return p(this,c,B).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),r(this,y)))}createResult(t,e){var Ot;const i=r(this,h),n=this.options,o=r(this,y),a=r(this,Q),u=r(this,A),d=t!==i?t.state:r(this,Z),{state:v}=t;let m={...v},O=!1,f;if(e._optimisticResults){const E=this.hasListeners(),G=!E&&xt(t,e),$=E&&Ut(t,i,e,n);(G||$)&&(m={...m,...jt(v.data,t.options)}),e._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:P,errorUpdatedAt:j,status:D}=m;f=m.data;let J=!1;if(e.placeholderData!==void 0&&f===void 0&&D==="pending"){let E;o!=null&&o.isPlaceholderData&&e.placeholderData===(u==null?void 0:u.placeholderData)?(E=o.data,J=!0):E=typeof e.placeholderData=="function"?e.placeholderData((Ot=r(this,z))==null?void 0:Ot.state.data,r(this,z)):e.placeholderData,E!==void 0&&(D="success",f=wt(o==null?void 0:o.data,E,e),O=!0)}if(e.select&&f!==void 0&&!J)if(o&&f===(a==null?void 0:a.data)&&e.select===r(this,V))f=r(this,W);else try{l(this,V,e.select),f=e.select(f),f=wt(o==null?void 0:o.data,f,e),l(this,W,f),l(this,N,null)}catch(E){l(this,N,E)}r(this,N)&&(P=r(this,N),f=r(this,W),j=Date.now(),D="error");const nt=m.fetchStatus==="fetching",at=D==="pending",ot=D==="error",St=at&&nt,Dt=f!==void 0,I={status:D,fetchStatus:m.fetchStatus,isPending:at,isSuccess:D==="success",isError:ot,isInitialLoading:St,isLoading:St,data:f,dataUpdatedAt:m.dataUpdatedAt,error:P,errorUpdatedAt:j,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>d.dataUpdateCount||m.errorUpdateCount>d.errorUpdateCount,isFetching:nt,isRefetching:nt&&!at,isLoadingError:ot&&!Dt,isPaused:m.fetchStatus==="paused",isPlaceholderData:O,isRefetchError:ot&&Dt,isStale:Ct(t,e),refetch:this.refetch,promise:r(this,w),isEnabled:T(e.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const E=X=>{I.status==="error"?X.reject(I.error):I.data!==void 0&&X.resolve(I.data)},G=()=>{const X=l(this,w,I.promise=Tt());E(X)},$=r(this,w);switch($.status){case"pending":t.queryHash===i.queryHash&&E($);break;case"fulfilled":(I.status==="error"||I.data!==$.value)&&G();break;case"rejected":(I.status!=="error"||I.error!==$.reason)&&G();break}}return I}updateResult(){const t=r(this,y),e=this.createResult(r(this,h),this.options);if(l(this,Q,r(this,h).state),l(this,A,this.options),r(this,Q).data!==void 0&&l(this,z,r(this,h)),st(e,t))return;l(this,y,e);const i=()=>{if(!t)return!0;const{notifyOnChangeProps:n}=this.options,o=typeof n=="function"?n():n;if(o==="all"||!o&&!r(this,Y).size)return!0;const a=new Set(o??r(this,Y));return this.options.throwOnError&&a.add("error"),Object.keys(r(this,y)).some(u=>{const g=u;return r(this,y)[g]!==t[g]&&a.has(g)})};p(this,c,Lt).call(this,{listeners:i()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&p(this,c,pt).call(this)}},R=new WeakMap,h=new WeakMap,Z=new WeakMap,y=new WeakMap,Q=new WeakMap,A=new WeakMap,w=new WeakMap,N=new WeakMap,V=new WeakMap,W=new WeakMap,z=new WeakMap,L=new WeakMap,k=new WeakMap,F=new WeakMap,Y=new WeakMap,c=new WeakSet,B=function(t){p(this,c,bt).call(this);let e=r(this,h).fetch(this.options,t);return t!=null&&t.throwOnError||(e=e.catch(it)),e},lt=function(){p(this,c,mt).call(this);const t=H(this.options.staleTime,r(this,h));if(ut||r(this,y).isStale||!It(t))return;const i=zt(r(this,y).dataUpdatedAt,t)+1;l(this,L,q.setTimeout(()=>{r(this,y).isStale||this.updateResult()},i))},dt=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(r(this,h)):this.options.refetchInterval)??!1},ft=function(t){p(this,c,gt).call(this),l(this,F,t),!(ut||T(this.options.enabled,r(this,h))===!1||!It(r(this,F))||r(this,F)===0)&&l(this,k,q.setInterval(()=>{(this.options.refetchIntervalInBackground||Yt.isFocused())&&p(this,c,B).call(this)},r(this,F)))},pt=function(){p(this,c,lt).call(this),p(this,c,ft).call(this,p(this,c,dt).call(this))},mt=function(){r(this,L)&&(q.clearTimeout(r(this,L)),l(this,L,void 0))},gt=function(){r(this,k)&&(q.clearInterval(r(this,k)),l(this,k,void 0))},bt=function(){const t=r(this,R).getQueryCache().build(r(this,R),this.options);if(t===r(this,h))return;const e=r(this,h);l(this,h,t),l(this,Z,t.state),this.hasListeners()&&(e==null||e.removeObserver(this),t.addObserver(this))},Lt=function(t){rt.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(r(this,y))}),r(this,R).getQueryCache().notify({query:r(this,h),type:"observerResultsUpdated"})})},Ft);function Ht(s,t){return T(t.enabled,s)!==!1&&s.state.data===void 0&&!(s.state.status==="error"&&t.retryOnMount===!1)}function xt(s,t){return Ht(s,t)||s.state.data!==void 0&&vt(s,t,t.refetchOnMount)}function vt(s,t,e){if(T(t.enabled,s)!==!1&&H(t.staleTime,s)!=="static"){const i=typeof e=="function"?e(s):e;return i==="always"||i!==!1&&Ct(s,t)}return!1}function Ut(s,t,e,i){return(s!==t||T(i.enabled,s)===!1)&&(!e.suspense||s.state.status!=="error")&&Ct(s,e)}function Ct(s,t){return T(t.enabled,s)!==!1&&s.isStaleByTime(H(t.staleTime,s))}function Zt(s,t){return!st(s.getCurrentResult(),t)}var M,_,C,x,U,et,yt,_t,Vt=(_t=class extends Pt{constructor(t,e){super();b(this,U);b(this,M);b(this,_);b(this,C);b(this,x);l(this,M,t),this.setOptions(e),this.bindMethods(),p(this,U,et).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var i;const e=this.options;this.options=r(this,M).defaultMutationOptions(t),st(this.options,e)||r(this,M).getMutationCache().notify({type:"observerOptionsUpdated",mutation:r(this,C),observer:this}),e!=null&&e.mutationKey&&this.options.mutationKey&&Mt(e.mutationKey)!==Mt(this.options.mutationKey)?this.reset():((i=r(this,C))==null?void 0:i.state.status)==="pending"&&r(this,C).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=r(this,C))==null||t.removeObserver(this)}onMutationUpdate(t){p(this,U,et).call(this),p(this,U,yt).call(this,t)}getCurrentResult(){return r(this,_)}reset(){var t;(t=r(this,C))==null||t.removeObserver(this),l(this,C,void 0),p(this,U,et).call(this),p(this,U,yt).call(this)}mutate(t,e){var i;return l(this,x,e),(i=r(this,C))==null||i.removeObserver(this),l(this,C,r(this,M).getMutationCache().build(r(this,M),this.options)),r(this,C).addObserver(this),r(this,C).execute(t)}},M=new WeakMap,_=new WeakMap,C=new WeakMap,x=new WeakMap,U=new WeakSet,et=function(){var e;const t=((e=r(this,C))==null?void 0:e.state)??Kt();l(this,_,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},yt=function(t){rt.batch(()=>{var e,i,n,o,a,u,g,d;if(r(this,x)&&this.hasListeners()){const v=r(this,_).variables,m=r(this,_).context,O={client:r(this,M),meta:this.options.meta,mutationKey:this.options.mutationKey};if((t==null?void 0:t.type)==="success"){try{(i=(e=r(this,x)).onSuccess)==null||i.call(e,t.data,v,m,O)}catch(f){Promise.reject(f)}try{(o=(n=r(this,x)).onSettled)==null||o.call(n,t.data,null,v,m,O)}catch(f){Promise.reject(f)}}else if((t==null?void 0:t.type)==="error"){try{(u=(a=r(this,x)).onError)==null||u.call(a,t.error,v,m,O)}catch(f){Promise.reject(f)}try{(d=(g=r(this,x)).onSettled)==null||d.call(g,void 0,t.error,v,m,O)}catch(f){Promise.reject(f)}}}this.listeners.forEach(v=>{v(r(this,_))})})},_t),kt=S.createContext(!1),Jt=()=>S.useContext(kt);kt.Provider;function Gt(){let s=!1;return{clearReset:()=>{s=!1},reset:()=>{s=!0},isReset:()=>s}}var Xt=S.createContext(Gt()),qt=()=>S.useContext(Xt),te=(s,t,e)=>{const i=e!=null&&e.state.error&&typeof s.throwOnError=="function"?Rt(s.throwOnError,[e.state.error,e]):s.throwOnError;(s.suspense||s.experimental_prefetchInRender||i)&&(t.isReset()||(s.retryOnMount=!1))},ee=s=>{S.useEffect(()=>{s.clearReset()},[s])},se=({result:s,errorResetBoundary:t,throwOnError:e,query:i,suspense:n})=>s.isError&&!t.isReset()&&!s.isFetching&&i&&(n&&s.data===void 0||Rt(e,[s.error,i])),ie=s=>{if(s.suspense){const e=n=>n==="static"?n:Math.max(n??1e3,1e3),i=s.staleTime;s.staleTime=typeof i=="function"?(...n)=>e(i(...n)):e(i),typeof s.gcTime=="number"&&(s.gcTime=Math.max(s.gcTime,1e3))}},re=(s,t)=>s.isLoading&&s.isFetching&&!t,ne=(s,t)=>(s==null?void 0:s.suspense)&&t.isPending,Nt=(s,t,e)=>t.fetchOptimistic(s).catch(()=>{e.clearReset()});function ae(s,t,e){var O,f,P,j;const i=Jt(),n=qt(),o=Qt(),a=o.defaultQueryOptions(s);(f=(O=o.getDefaultOptions().queries)==null?void 0:O._experimental_beforeQuery)==null||f.call(O,a);const u=o.getQueryCache().get(a.queryHash);a._optimisticResults=i?"isRestoring":"optimistic",ie(a),te(a,n,u),ee(n);const g=!o.getQueryCache().get(a.queryHash),[d]=S.useState(()=>new t(o,a)),v=d.getOptimisticResult(a),m=!i&&s.subscribed!==!1;if(S.useSyncExternalStore(S.useCallback(D=>{const J=m?d.subscribe(rt.batchCalls(D)):it;return d.updateResult(),J},[d,m]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),S.useEffect(()=>{d.setOptions(a)},[a,d]),ne(a,v))throw Nt(a,d,n);if(se({result:v,errorResetBoundary:n,throwOnError:a.throwOnError,query:u,suspense:a.suspense}))throw v.error;if((j=(P=o.getDefaultOptions().queries)==null?void 0:P._experimental_afterQuery)==null||j.call(P,a,v),a.experimental_prefetchInRender&&!ut&&re(v,i)){const D=g?Nt(a,d,n):u==null?void 0:u.promise;D==null||D.catch(it).finally(()=>{d.updateResult()})}return a.notifyOnChangeProps?v:d.trackResult(v)}function we(s,t){return ae(s,Bt)}function Me(s,t){const e=Qt(),[i]=S.useState(()=>new Vt(e,s));S.useEffect(()=>{i.setOptions(s)},[i,s]);const n=S.useSyncExternalStore(S.useCallback(a=>i.subscribe(rt.batchCalls(a)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),o=S.useCallback((a,u)=>{i.mutate(a,u).catch(it)},[i]);if(n.error&&Rt(i.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:o,mutateAsync:n.mutate}}const xe=6048e5,Ue=864e5,$t=6e4,At=36e5;function oe(s,t){const i=le(s);let n;if(i.date){const g=de(i.date,2);n=fe(g.restDateString,g.year)}if(!n||isNaN(n.getTime()))return new Date(NaN);const o=n.getTime();let a=0,u;if(i.time&&(a=pe(i.time),isNaN(a)))return new Date(NaN);if(i.timezone){if(u=me(i.timezone),isNaN(u))return new Date(NaN)}else{const g=new Date(o+a),d=new Date(0);return d.setFullYear(g.getUTCFullYear(),g.getUTCMonth(),g.getUTCDate()),d.setHours(g.getUTCHours(),g.getUTCMinutes(),g.getUTCSeconds(),g.getUTCMilliseconds()),d}return new Date(o+a+u)}const tt={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},he=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,ce=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,ue=/^([+-])(\d{2})(?::?(\d{2}))?$/;function le(s){const t={},e=s.split(tt.dateTimeDelimiter);let i;if(e.length>2)return t;if(/:/.test(e[0])?i=e[0]:(t.date=e[0],i=e[1],tt.timeZoneDelimiter.test(t.date)&&(t.date=s.split(tt.timeZoneDelimiter)[0],i=s.substr(t.date.length,s.length))),i){const n=tt.timezone.exec(i);n?(t.time=i.replace(n[1],""),t.timezone=n[1]):t.time=i}return t}function de(s,t){const e=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),i=s.match(e);if(!i)return{year:NaN,restDateString:""};const n=i[1]?parseInt(i[1]):null,o=i[2]?parseInt(i[2]):null;return{year:o===null?n:o*100,restDateString:s.slice((i[1]||i[2]).length)}}function fe(s,t){if(t===null)return new Date(NaN);const e=s.match(he);if(!e)return new Date(NaN);const i=!!e[4],n=K(e[1]),o=K(e[2])-1,a=K(e[3]),u=K(e[4]),g=K(e[5])-1;if(i)return Re(t,u,g)?ge(t,u,g):new Date(NaN);{const d=new Date(0);return!ve(t,o,a)||!ye(t,n)?new Date(NaN):(d.setUTCFullYear(t,o,Math.max(n,a)),d)}}function K(s){return s?parseInt(s):1}function pe(s){const t=s.match(ce);if(!t)return NaN;const e=ct(t[1]),i=ct(t[2]),n=ct(t[3]);return Ce(e,i,n)?e*At+i*$t+n*1e3:NaN}function ct(s){return s&&parseFloat(s.replace(",","."))||0}function me(s){if(s==="Z")return 0;const t=s.match(ue);if(!t)return 0;const e=t[1]==="+"?-1:1,i=parseInt(t[2]),n=t[3]&&parseInt(t[3])||0;return Se(i,n)?e*(i*At+n*$t):NaN}function ge(s,t,e){const i=new Date(0);i.setUTCFullYear(s,0,4);const n=i.getUTCDay()||7,o=(t-1)*7+e+1-n;return i.setUTCDate(i.getUTCDate()+o),i}const be=[31,null,31,30,31,30,31,31,30,31,30,31];function Wt(s){return s%400===0||s%4===0&&s%100!==0}function ve(s,t,e){return t>=0&&t<=11&&e>=1&&e<=(be[t]||(Wt(s)?29:28))}function ye(s,t){return t>=1&&t<=(Wt(s)?366:365)}function Re(s,t,e){return t>=1&&t<=53&&e>=0&&e<=6}function Ce(s,t,e){return s===24?t===0&&e===0:e>=0&&e<60&&t>=0&&t<60&&s>=0&&s<25}function Se(s,t){return t>=0&&t<=59}const Ne=(s,t="$")=>{const i=Math.abs(s).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2});return`${s>=0?"+":"-"}${t}${i}`},Fe=(s,t="$")=>{const e=Math.abs(s);let i;return e>=1e6?i=`${(e/1e6).toFixed(1)}M`:e>=1e3?i=`${(e/1e3).toFixed(1)}K`:i=e.toFixed(0),`${s>=0?"+":"-"}${t}${i}`},De=(s,t)=>{const e=s+t;return e===0?0:Math.round(s/e*100)},Oe=s=>{if(!s||s.length===0)return{totalPL:0,tradeCount:0,winCount:0,lossCount:0,winRate:0,avgWin:0,avgLoss:0};const t=s.reduce((a,u)=>a+u.amount,0),e=s.filter(a=>a.amount>0),i=s.filter(a=>a.amount<0),n=e.length>0?e.reduce((a,u)=>a+u.amount,0)/e.length:0,o=i.length>0?i.reduce((a,u)=>a+Math.abs(u.amount),0)/i.length:0;return{totalPL:t,tradeCount:s.length,winCount:e.length,lossCount:i.length,winRate:De(e.length,i.length),avgWin:n,avgLoss:o}},_e=(s,t)=>Array.from({length:12},(i,n)=>n).map(i=>{const n=s.filter(o=>{const a=oe(o.date);return a.getFullYear()===t&&a.getMonth()===i});return{month:i,...Oe(n)}}),Pe=()=>crypto.randomUUID();export{xe as a,Ne as b,_e as c,Me as d,Fe as f,Pe as g,Ue as m,we as u};
