import{c as ke,j as c,R as K,d as Pt,r as le,e as Be,Q as sr,X as nr,f as ar,b as ir,L as or}from"./index-Bd9gDzVl.js";import{a as cr,b as lr,c as ur,d as dr}from"./useTrades-BYFB0XUL.js";import{P as fr,M as Qe,S as hr,T as mr,u as yr}from"./Modal-D24zuX9v.js";import{H as ft}from"./Header-CmSeAgzm.js";import{B as pe}from"./Button-iy6i2CS-.js";import{t as $,s as ht,m as gr,a as Vt,g as xr,b as ze,d as br,e as vr,h as wr,f as Et,i as mt,j as pr}from"./utils-DTu9Sqye.js";import{u as Xe}from"./settingsStore-T4_Va-Vb.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=ke("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=ke("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=ke("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=ke("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=ke("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=ke("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);function ue(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function Ct(e,t){const r=$(e);if(isNaN(t))return ue(e,NaN);if(!t)return r;const s=r.getDate(),a=ue(e,r.getTime());a.setMonth(r.getMonth()+t+1,0);const i=a.getDate();return s>=i?a:(r.setFullYear(a.getFullYear(),a.getMonth(),s),r)}let Sr={};function Ce(){return Sr}function Se(e,t){var d,v,D,O;const r=Ce(),s=(t==null?void 0:t.weekStartsOn)??((v=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:v.weekStartsOn)??r.weekStartsOn??((O=(D=r.locale)==null?void 0:D.options)==null?void 0:O.weekStartsOn)??0,a=$(e),i=a.getDay(),l=(i<s?7:0)+i-s;return a.setDate(a.getDate()-l),a.setHours(0,0,0,0),a}function Pe(e){return Se(e,{weekStartsOn:1})}function At(e){const t=$(e),r=t.getFullYear(),s=ue(e,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const a=Pe(s),i=ue(e,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const l=Pe(i);return t.getTime()>=a.getTime()?r+1:t.getTime()>=l.getTime()?r:r-1}function yt(e){const t=$(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function Tr(e,t){const r=ht(e),s=ht(t),a=+r-yt(r),i=+s-yt(s);return Math.round((a-i)/gr)}function Or(e){const t=At(e),r=ue(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Pe(r)}function _r(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Pr(e){if(!_r(e)&&typeof e!="number")return!1;const t=$(e);return!isNaN(Number(t))}function Vr(e){const t=$(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function Er(e,t){const r=$(e.start),s=$(e.end);let a=+r>+s;const i=a?+r:+s,l=a?s:r;l.setHours(0,0,0,0);let d=1;const v=[];for(;+l<=i;)v.push($(l)),l.setDate(l.getDate()+d),l.setHours(0,0,0,0);return a?v.reverse():v}function Cr(e){const t=$(e);return t.setDate(1),t.setHours(0,0,0,0),t}function Ar(e){const t=$(e),r=ue(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}const Ir={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Wr=(e,t,r)=>{let s;const a=Ir[e];return typeof a=="string"?s=a:t===1?s=a.one:s=a.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};function qe(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const Lr={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Yr={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Rr={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},qr={date:qe({formats:Lr,defaultWidth:"full"}),time:qe({formats:Yr,defaultWidth:"full"}),dateTime:qe({formats:Rr,defaultWidth:"full"})},Ur={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Br=(e,t,r,s)=>Ur[e];function De(e){return(t,r)=>{const s=r!=null&&r.context?String(r.context):"standalone";let a;if(s==="formatting"&&e.formattingValues){const l=e.defaultFormattingWidth||e.defaultWidth,d=r!=null&&r.width?String(r.width):l;a=e.formattingValues[d]||e.formattingValues[l]}else{const l=e.defaultWidth,d=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[d]||e.values[l]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const Hr={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},$r={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Qr={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},zr={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Xr={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Gr={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Jr=(e,t)=>{const r=Number(e),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Kr={ordinalNumber:Jr,era:De({values:Hr,defaultWidth:"wide"}),quarter:De({values:$r,defaultWidth:"wide",argumentCallback:e=>e-1}),month:De({values:Qr,defaultWidth:"wide"}),day:De({values:zr,defaultWidth:"wide"}),dayPeriod:De({values:Xr,defaultWidth:"wide",formattingValues:Gr,defaultFormattingWidth:"wide"})};function je(e){return(t,r={})=>{const s=r.width,a=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const l=i[0],d=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],v=Array.isArray(d)?es(d,p=>p.test(l)):Zr(d,p=>p.test(l));let D;D=e.valueCallback?e.valueCallback(v):v,D=r.valueCallback?r.valueCallback(D):D;const O=t.slice(l.length);return{value:D,rest:O}}}function Zr(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function es(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function ts(e){return(t,r={})=>{const s=t.match(e.matchPattern);if(!s)return null;const a=s[0],i=t.match(e.parsePattern);if(!i)return null;let l=e.valueCallback?e.valueCallback(i[0]):i[0];l=r.valueCallback?r.valueCallback(l):l;const d=t.slice(a.length);return{value:l,rest:d}}}const rs=/^(\d+)(th|st|nd|rd)?/i,ss=/\d+/i,ns={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},as={any:[/^b/i,/^(a|c)/i]},is={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},os={any:[/1/i,/2/i,/3/i,/4/i]},cs={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},ls={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},us={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},ds={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},fs={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},hs={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ms={ordinalNumber:ts({matchPattern:rs,parsePattern:ss,valueCallback:e=>parseInt(e,10)}),era:je({matchPatterns:ns,defaultMatchWidth:"wide",parsePatterns:as,defaultParseWidth:"any"}),quarter:je({matchPatterns:is,defaultMatchWidth:"wide",parsePatterns:os,defaultParseWidth:"any",valueCallback:e=>e+1}),month:je({matchPatterns:cs,defaultMatchWidth:"wide",parsePatterns:ls,defaultParseWidth:"any"}),day:je({matchPatterns:us,defaultMatchWidth:"wide",parsePatterns:ds,defaultParseWidth:"any"}),dayPeriod:je({matchPatterns:fs,defaultMatchWidth:"any",parsePatterns:hs,defaultParseWidth:"any"})},ys={code:"en-US",formatDistance:Wr,formatLong:qr,formatRelative:Br,localize:Kr,match:ms,options:{weekStartsOn:0,firstWeekContainsDate:1}};function gs(e){const t=$(e);return Tr(t,Ar(t))+1}function xs(e){const t=$(e),r=+Pe(t)-+Or(t);return Math.round(r/Vt)+1}function It(e,t){var O,p,F,x;const r=$(e),s=r.getFullYear(),a=Ce(),i=(t==null?void 0:t.firstWeekContainsDate)??((p=(O=t==null?void 0:t.locale)==null?void 0:O.options)==null?void 0:p.firstWeekContainsDate)??a.firstWeekContainsDate??((x=(F=a.locale)==null?void 0:F.options)==null?void 0:x.firstWeekContainsDate)??1,l=ue(e,0);l.setFullYear(s+1,0,i),l.setHours(0,0,0,0);const d=Se(l,t),v=ue(e,0);v.setFullYear(s,0,i),v.setHours(0,0,0,0);const D=Se(v,t);return r.getTime()>=d.getTime()?s+1:r.getTime()>=D.getTime()?s:s-1}function bs(e,t){var d,v,D,O;const r=Ce(),s=(t==null?void 0:t.firstWeekContainsDate)??((v=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:v.firstWeekContainsDate)??r.firstWeekContainsDate??((O=(D=r.locale)==null?void 0:D.options)==null?void 0:O.firstWeekContainsDate)??1,a=It(e,t),i=ue(e,0);return i.setFullYear(a,0,s),i.setHours(0,0,0,0),Se(i,t)}function vs(e,t){const r=$(e),s=+Se(r,t)-+bs(r,t);return Math.round(s/Vt)+1}function T(e,t){const r=e<0?"-":"",s=Math.abs(e).toString().padStart(t,"0");return r+s}const he={y(e,t){const r=e.getFullYear(),s=r>0?r:1-r;return T(t==="yy"?s%100:s,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):T(r+1,2)},d(e,t){return T(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return T(e.getHours()%12||12,t.length)},H(e,t){return T(e.getHours(),t.length)},m(e,t){return T(e.getMinutes(),t.length)},s(e,t){return T(e.getSeconds(),t.length)},S(e,t){const r=t.length,s=e.getMilliseconds(),a=Math.trunc(s*Math.pow(10,r-3));return T(a,t.length)}},be={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},gt={G:function(e,t,r){const s=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});case"GGGG":default:return r.era(s,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const s=e.getFullYear(),a=s>0?s:1-s;return r.ordinalNumber(a,{unit:"year"})}return he.y(e,t)},Y:function(e,t,r,s){const a=It(e,s),i=a>0?a:1-a;if(t==="YY"){const l=i%100;return T(l,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):T(i,t.length)},R:function(e,t){const r=At(e);return T(r,t.length)},u:function(e,t){const r=e.getFullYear();return T(r,t.length)},Q:function(e,t,r){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(s);case"QQ":return T(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,t,r){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(s);case"qq":return T(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,t,r){const s=e.getMonth();switch(t){case"M":case"MM":return he.M(e,t);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(e,t,r){const s=e.getMonth();switch(t){case"L":return String(s+1);case"LL":return T(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(e,t,r,s){const a=vs(e,s);return t==="wo"?r.ordinalNumber(a,{unit:"week"}):T(a,t.length)},I:function(e,t,r){const s=xs(e);return t==="Io"?r.ordinalNumber(s,{unit:"week"}):T(s,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):he.d(e,t)},D:function(e,t,r){const s=gs(e);return t==="Do"?r.ordinalNumber(s,{unit:"dayOfYear"}):T(s,t.length)},E:function(e,t,r){const s=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});case"EEEE":default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(e,t,r,s){const a=e.getDay(),i=(a-s.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return T(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,s){const a=e.getDay(),i=(a-s.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return T(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const s=e.getDay(),a=s===0?7:s;switch(t){case"i":return String(a);case"ii":return T(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});case"iiii":default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(e,t,r){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){const s=e.getHours();let a;switch(s===12?a=be.noon:s===0?a=be.midnight:a=s/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const s=e.getHours();let a;switch(s>=17?a=be.evening:s>=12?a=be.afternoon:s>=4?a=be.morning:a=be.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let s=e.getHours()%12;return s===0&&(s=12),r.ordinalNumber(s,{unit:"hour"})}return he.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):he.H(e,t)},K:function(e,t,r){const s=e.getHours()%12;return t==="Ko"?r.ordinalNumber(s,{unit:"hour"}):T(s,t.length)},k:function(e,t,r){let s=e.getHours();return s===0&&(s=24),t==="ko"?r.ordinalNumber(s,{unit:"hour"}):T(s,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):he.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):he.s(e,t)},S:function(e,t){return he.S(e,t)},X:function(e,t,r){const s=e.getTimezoneOffset();if(s===0)return"Z";switch(t){case"X":return bt(s);case"XXXX":case"XX":return ye(s);case"XXXXX":case"XXX":default:return ye(s,":")}},x:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"x":return bt(s);case"xxxx":case"xx":return ye(s);case"xxxxx":case"xxx":default:return ye(s,":")}},O:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+xt(s,":");case"OOOO":default:return"GMT"+ye(s,":")}},z:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+xt(s,":");case"zzzz":default:return"GMT"+ye(s,":")}},t:function(e,t,r){const s=Math.trunc(e.getTime()/1e3);return T(s,t.length)},T:function(e,t,r){const s=e.getTime();return T(s,t.length)}};function xt(e,t=""){const r=e>0?"-":"+",s=Math.abs(e),a=Math.trunc(s/60),i=s%60;return i===0?r+String(a):r+String(a)+t+T(i,2)}function bt(e,t){return e%60===0?(e>0?"-":"+")+T(Math.abs(e)/60,2):ye(e,t)}function ye(e,t=""){const r=e>0?"-":"+",s=Math.abs(e),a=T(Math.trunc(s/60),2),i=T(s%60,2);return r+a+t+i}const vt=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Wt=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},ws=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],s=r[1],a=r[2];if(!a)return vt(e,t);let i;switch(s){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",vt(s,t)).replace("{{time}}",Wt(a,t))},ps={p:Wt,P:ws},ks=/^D+$/,Ds=/^Y+$/,js=["D","DD","YY","YYYY"];function Ns(e){return ks.test(e)}function Ms(e){return Ds.test(e)}function Fs(e,t,r){const s=Ss(e,t,r);if(console.warn(s),js.includes(e))throw new RangeError(s)}function Ss(e,t,r){const s=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${s} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Ts=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Os=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,_s=/^'([^]*?)'?$/,Ps=/''/g,Vs=/[a-zA-Z]/;function ge(e,t,r){var O,p,F,x;const s=Ce(),a=s.locale??ys,i=s.firstWeekContainsDate??((p=(O=s.locale)==null?void 0:O.options)==null?void 0:p.firstWeekContainsDate)??1,l=s.weekStartsOn??((x=(F=s.locale)==null?void 0:F.options)==null?void 0:x.weekStartsOn)??0,d=$(e);if(!Pr(d))throw new RangeError("Invalid time value");let v=t.match(Os).map(w=>{const N=w[0];if(N==="p"||N==="P"){const R=ps[N];return R(w,a.formatLong)}return w}).join("").match(Ts).map(w=>{if(w==="''")return{isToken:!1,value:"'"};const N=w[0];if(N==="'")return{isToken:!1,value:Es(w)};if(gt[N])return{isToken:!0,value:w};if(N.match(Vs))throw new RangeError("Format string contains an unescaped latin alphabet character `"+N+"`");return{isToken:!1,value:w}});a.localize.preprocessor&&(v=a.localize.preprocessor(d,v));const D={firstWeekContainsDate:i,weekStartsOn:l,locale:a};return v.map(w=>{if(!w.isToken)return w.value;const N=w.value;(Ms(N)||Ns(N))&&Fs(N,t,String(e));const R=gt[N[0]];return R(d,N,a.localize,D)}).join("")}function Es(e){const t=e.match(_s);return t?t[1].replace(Ps,"'"):e}function Cs(e){return $(e).getDay()}function As(e,t){return Ct(e,-1)}const Is=({onClick:e,icon:t=fr,label:r="Add"})=>c.jsx("button",{onClick:e,className:"fixed bottom-6 right-6 z-30 w-14 h-14 bg-accent hover:bg-accent-hover text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-200 flex items-center justify-center active:scale-95","aria-label":r,children:c.jsx(t,{size:24})});var Te=e=>e.type==="checkbox",xe=e=>e instanceof Date,J=e=>e==null;const Lt=e=>typeof e=="object";var Y=e=>!J(e)&&!Array.isArray(e)&&Lt(e)&&!xe(e),Ws=e=>Y(e)&&e.target?Te(e.target)?e.target.checked:e.target.value:e,Ls=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Ys=(e,t)=>e.has(Ls(t)),Rs=e=>{const t=e.constructor&&e.constructor.prototype;return Y(t)&&t.hasOwnProperty("isPrototypeOf")},Ge=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function q(e){if(e instanceof Date)return new Date(e);const t=typeof FileList<"u"&&e instanceof FileList;if(Ge&&(e instanceof Blob||t))return e;const r=Array.isArray(e);if(!r&&!(Y(e)&&Rs(e)))return e;const s=r?[]:Object.create(Object.getPrototypeOf(e));for(const a in e)Object.prototype.hasOwnProperty.call(e,a)&&(s[a]=q(e[a]));return s}var Ae=e=>/^\w*$/.test(e),W=e=>e===void 0,Je=e=>Array.isArray(e)?e.filter(Boolean):[],Ke=e=>Je(e.replace(/["|']|\]/g,"").split(/\.|\[/)),y=(e,t,r)=>{if(!t||!Y(e))return r;const s=(Ae(t)?[t]:Ke(t)).reduce((a,i)=>J(a)?a:a[i],e);return W(s)||s===e?W(e[t])?r:e[t]:s},oe=e=>typeof e=="boolean",se=e=>typeof e=="function",E=(e,t,r)=>{let s=-1;const a=Ae(t)?[t]:Ke(t),i=a.length,l=i-1;for(;++s<i;){const d=a[s];let v=r;if(s!==l){const D=e[d];v=Y(D)||Array.isArray(D)?D:isNaN(+a[s+1])?{}:[]}if(d==="__proto__"||d==="constructor"||d==="prototype")return;e[d]=v,e=e[d]}};const wt={BLUR:"blur",FOCUS_OUT:"focusout"},ne={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ce={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},qs=K.createContext(null);qs.displayName="HookFormContext";var Us=(e,t,r,s=!0)=>{const a={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(a,i,{get:()=>{const l=i;return t._proxyFormState[l]!==ne.all&&(t._proxyFormState[l]=!s||ne.all),e[l]}});return a};const Bs=typeof window<"u"?K.useLayoutEffect:K.useEffect;var Z=e=>typeof e=="string",Hs=(e,t,r,s,a)=>Z(e)?(s&&t.watch.add(e),y(r,e,a)):Array.isArray(e)?e.map(i=>(s&&t.watch.add(i),y(r,i))):(s&&(t.watchAll=!0),r),He=e=>J(e)||!Lt(e);function me(e,t,r=new WeakSet){if(He(e)||He(t))return Object.is(e,t);if(xe(e)&&xe(t))return e.getTime()===t.getTime();const s=Object.keys(e),a=Object.keys(t);if(s.length!==a.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const i of s){const l=e[i];if(!a.includes(i))return!1;if(i!=="ref"){const d=t[i];if(xe(l)&&xe(d)||Y(l)&&Y(d)||Array.isArray(l)&&Array.isArray(d)?!me(l,d,r):!Object.is(l,d))return!1}}return!0}var $s=(e,t,r,s,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[s]:a||!0}}:{},Me=e=>Array.isArray(e)?e:[e],pt=()=>{let e=[];return{get observers(){return e},next:a=>{for(const i of e)i.next&&i.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(i=>i!==a)}}),unsubscribe:()=>{e=[]}}};function Yt(e,t){const r={};for(const s in e)if(e.hasOwnProperty(s)){const a=e[s],i=t[s];if(a&&Y(a)&&i){const l=Yt(a,i);Y(l)&&(r[s]=l)}else e[s]&&(r[s]=i)}return r}var G=e=>Y(e)&&!Object.keys(e).length,Ze=e=>e.type==="file",Ve=e=>{if(!Ge)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Rt=e=>e.type==="select-multiple",et=e=>e.type==="radio",Qs=e=>et(e)||Te(e),Ue=e=>Ve(e)&&e.isConnected;function zs(e,t){const r=t.slice(0,-1).length;let s=0;for(;s<r;)e=W(e)?s++:e[t[s++]];return e}function Xs(e){for(const t in e)if(e.hasOwnProperty(t)&&!W(e[t]))return!1;return!0}function L(e,t){const r=Array.isArray(t)?t:Ae(t)?[t]:Ke(t),s=r.length===1?e:zs(e,r),a=r.length-1,i=r[a];return s&&delete s[i],a!==0&&(Y(s)&&G(s)||Array.isArray(s)&&Xs(s))&&L(e,r.slice(0,-1)),e}var Gs=e=>{for(const t in e)if(se(e[t]))return!0;return!1};function qt(e){return Array.isArray(e)||Y(e)&&!Gs(e)}function $e(e,t={}){for(const r in e){const s=e[r];qt(s)?(t[r]=Array.isArray(s)?[]:{},$e(s,t[r])):W(s)||(t[r]=!0)}return t}function we(e,t,r){r||(r=$e(t));for(const s in e){const a=e[s];if(qt(a))W(t)||He(r[s])?r[s]=$e(a,Array.isArray(a)?[]:{}):we(a,J(t)?{}:t[s],r[s]);else{const i=t[s];r[s]=!me(a,i)}}return r}const kt={value:!1,isValid:!1},Dt={value:!0,isValid:!0};var Ut=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!W(e[0].attributes.value)?W(e[0].value)||e[0].value===""?Dt:{value:e[0].value,isValid:!0}:Dt:kt}return kt},Bt=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:s})=>W(e)?e:t?e===""?NaN:e&&+e:r&&Z(e)?new Date(e):s?s(e):e;const jt={isValid:!1,value:null};var Ht=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,jt):jt;function Nt(e){const t=e.ref;return Ze(t)?t.files:et(t)?Ht(e.refs).value:Rt(t)?[...t.selectedOptions].map(({value:r})=>r):Te(t)?Ut(e.refs).value:Bt(W(t.value)?e.ref.value:t.value,e)}var Js=(e,t,r,s)=>{const a={};for(const i of e){const l=y(t,i);l&&E(a,i,l._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:s}},Ee=e=>e instanceof RegExp,Ne=e=>W(e)?e:Ee(e)?e.source:Y(e)?Ee(e.value)?e.value.source:e.value:e,Mt=e=>({isOnSubmit:!e||e===ne.onSubmit,isOnBlur:e===ne.onBlur,isOnChange:e===ne.onChange,isOnAll:e===ne.all,isOnTouch:e===ne.onTouched});const Ft="AsyncFunction";var Ks=e=>!!e&&!!e.validate&&!!(se(e.validate)&&e.validate.constructor.name===Ft||Y(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===Ft)),Zs=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),St=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(s=>e.startsWith(s)&&/^\.\w+/.test(e.slice(s.length))));const Fe=(e,t,r,s)=>{for(const a of r||Object.keys(e)){const i=y(e,a);if(i){const{_f:l,...d}=i;if(l){if(l.refs&&l.refs[0]&&t(l.refs[0],a)&&!s)return!0;if(l.ref&&t(l.ref,l.name)&&!s)return!0;if(Fe(d,t))break}else if(Y(d)&&Fe(d,t))break}}};function Tt(e,t,r){const s=y(e,r);if(s||Ae(r))return{error:s,name:r};const a=r.split(".");for(;a.length;){const i=a.join("."),l=y(t,i),d=y(e,i);if(l&&!Array.isArray(l)&&r!==i)return{name:r};if(d&&d.type)return{name:i,error:d};if(d&&d.root&&d.root.type)return{name:`${i}.root`,error:d.root};a.pop()}return{name:r}}var en=(e,t,r,s)=>{r(e);const{name:a,...i}=e;return G(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(l=>t[l]===(!s||ne.all))},tn=(e,t,r)=>!e||!t||e===t||Me(e).some(s=>s&&(r?s===t:s.startsWith(t)||t.startsWith(s))),rn=(e,t,r,s,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(t||e):(r?s.isOnBlur:a.isOnBlur)?!e:(r?s.isOnChange:a.isOnChange)?e:!0,sn=(e,t)=>!Je(y(e,t)).length&&L(e,t),nn=(e,t,r)=>{const s=Me(y(e,r));return E(s,"root",t[r]),E(e,r,s),e};function Ot(e,t,r="validate"){if(Z(e)||Array.isArray(e)&&e.every(Z)||oe(e)&&!e)return{type:r,message:Z(e)?e:"",ref:t}}var ve=e=>Y(e)&&!Ee(e)?e:{value:e,message:""},_t=async(e,t,r,s,a,i)=>{const{ref:l,refs:d,required:v,maxLength:D,minLength:O,min:p,max:F,pattern:x,validate:w,name:N,valueAsNumber:R,mount:C}=e._f,M=y(r,N);if(!C||t.has(N))return{};const U=d?d[0]:l,z=k=>{a&&U.reportValidity&&(U.setCustomValidity(oe(k)?"":k||""),U.reportValidity())},V={},ae=et(l),de=Te(l),ee=ae||de,re=(R||Ze(l))&&W(l.value)&&W(M)||Ve(l)&&l.value===""||M===""||Array.isArray(M)&&!M.length,B=$s.bind(null,N,s,V),ie=(k,g,_,I=ce.maxLength,X=ce.minLength)=>{const H=k?g:_;V[N]={type:k?I:X,message:H,ref:l,...B(k?I:X,H)}};if(i?!Array.isArray(M)||!M.length:v&&(!ee&&(re||J(M))||oe(M)&&!M||de&&!Ut(d).isValid||ae&&!Ht(d).isValid)){const{value:k,message:g}=Z(v)?{value:!!v,message:v}:ve(v);if(k&&(V[N]={type:ce.required,message:g,ref:U,...B(ce.required,g)},!s))return z(g),V}if(!re&&(!J(p)||!J(F))){let k,g;const _=ve(F),I=ve(p);if(!J(M)&&!isNaN(M)){const X=l.valueAsNumber||M&&+M;J(_.value)||(k=X>_.value),J(I.value)||(g=X<I.value)}else{const X=l.valueAsDate||new Date(M),H=Q=>new Date(new Date().toDateString()+" "+Q),j=l.type=="time",A=l.type=="week";Z(_.value)&&M&&(k=j?H(M)>H(_.value):A?M>_.value:X>new Date(_.value)),Z(I.value)&&M&&(g=j?H(M)<H(I.value):A?M<I.value:X<new Date(I.value))}if((k||g)&&(ie(!!k,_.message,I.message,ce.max,ce.min),!s))return z(V[N].message),V}if((D||O)&&!re&&(Z(M)||i&&Array.isArray(M))){const k=ve(D),g=ve(O),_=!J(k.value)&&M.length>+k.value,I=!J(g.value)&&M.length<+g.value;if((_||I)&&(ie(_,k.message,g.message),!s))return z(V[N].message),V}if(x&&!re&&Z(M)){const{value:k,message:g}=ve(x);if(Ee(k)&&!M.match(k)&&(V[N]={type:ce.pattern,message:g,ref:l,...B(ce.pattern,g)},!s))return z(g),V}if(w){if(se(w)){const k=await w(M,r),g=Ot(k,U);if(g&&(V[N]={...g,...B(ce.validate,g.message)},!s))return z(g.message),V}else if(Y(w)){let k={};for(const g in w){if(!G(k)&&!s)break;const _=Ot(await w[g](M,r),U,g);_&&(k={..._,...B(g,_.message)},z(_.message),s&&(V[N]=k))}if(!G(k)&&(V[N]={ref:U,...k},!s))return V}}return z(!0),V};const an={mode:ne.onSubmit,reValidateMode:ne.onChange,shouldFocusError:!0};function on(e={}){let t={...an,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:se(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},s={},a=Y(t.defaultValues)||Y(t.values)?q(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:q(a),l={action:!1,mount:!1,watch:!1,keepIsValid:!1},d={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},v,D=0;const O={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},p={...O};let F={...p};const x={array:pt(),state:pt()},w=t.criteriaMode===ne.all,N=n=>o=>{clearTimeout(D),D=setTimeout(n,o)},R=async n=>{if(!l.keepIsValid&&!t.disabled&&(p.isValid||F.isValid||n)){let o;t.resolver?(o=G((await ee()).errors),C()):o=await B(s,!0),o!==r.isValid&&x.state.next({isValid:o})}},C=(n,o)=>{!t.disabled&&(p.isValidating||p.validatingFields||F.isValidating||F.validatingFields)&&((n||Array.from(d.mount)).forEach(u=>{u&&(o?E(r.validatingFields,u,o):L(r.validatingFields,u))}),x.state.next({validatingFields:r.validatingFields,isValidating:!G(r.validatingFields)}))},M=(n,o=[],u,m,h=!0,f=!0)=>{if(m&&u&&!t.disabled){if(l.action=!0,f&&Array.isArray(y(s,n))){const b=u(y(s,n),m.argA,m.argB);h&&E(s,n,b)}if(f&&Array.isArray(y(r.errors,n))){const b=u(y(r.errors,n),m.argA,m.argB);h&&E(r.errors,n,b),sn(r.errors,n)}if((p.touchedFields||F.touchedFields)&&f&&Array.isArray(y(r.touchedFields,n))){const b=u(y(r.touchedFields,n),m.argA,m.argB);h&&E(r.touchedFields,n,b)}(p.dirtyFields||F.dirtyFields)&&(r.dirtyFields=we(a,i)),x.state.next({name:n,isDirty:k(n,o),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else E(i,n,o)},U=(n,o)=>{E(r.errors,n,o),x.state.next({errors:r.errors})},z=n=>{r.errors=n,x.state.next({errors:r.errors,isValid:!1})},V=(n,o,u,m)=>{const h=y(s,n);if(h){const f=y(i,n,W(u)?y(a,n):u);W(f)||m&&m.defaultChecked||o?E(i,n,o?f:Nt(h._f)):I(n,f),l.mount&&!l.action&&R()}},ae=(n,o,u,m,h)=>{let f=!1,b=!1;const S={name:n};if(!t.disabled){if(!u||m){(p.isDirty||F.isDirty)&&(b=r.isDirty,r.isDirty=S.isDirty=k(),f=b!==S.isDirty);const P=me(y(a,n),o);b=!!y(r.dirtyFields,n),P?L(r.dirtyFields,n):E(r.dirtyFields,n,!0),S.dirtyFields=r.dirtyFields,f=f||(p.dirtyFields||F.dirtyFields)&&b!==!P}if(u){const P=y(r.touchedFields,n);P||(E(r.touchedFields,n,u),S.touchedFields=r.touchedFields,f=f||(p.touchedFields||F.touchedFields)&&P!==u)}f&&h&&x.state.next(S)}return f?S:{}},de=(n,o,u,m)=>{const h=y(r.errors,n),f=(p.isValid||F.isValid)&&oe(o)&&r.isValid!==o;if(t.delayError&&u?(v=N(()=>U(n,u)),v(t.delayError)):(clearTimeout(D),v=null,u?E(r.errors,n,u):L(r.errors,n)),(u?!me(h,u):h)||!G(m)||f){const b={...m,...f&&oe(o)?{isValid:o}:{},errors:r.errors,name:n};r={...r,...b},x.state.next(b)}},ee=async n=>(C(n,!0),await t.resolver(i,t.context,Js(n||d.mount,s,t.criteriaMode,t.shouldUseNativeValidation))),re=async n=>{const{errors:o}=await ee(n);if(C(n),n)for(const u of n){const m=y(o,u);m?E(r.errors,u,m):L(r.errors,u)}else r.errors=o;return o},B=async(n,o,u={valid:!0})=>{for(const m in n){const h=n[m];if(h){const{_f:f,...b}=h;if(f){const S=d.array.has(f.name),P=h._f&&Ks(h._f);P&&p.validatingFields&&C([f.name],!0);const te=await _t(h,d.disabled,i,w,t.shouldUseNativeValidation&&!o,S);if(P&&p.validatingFields&&C([f.name]),te[f.name]&&(u.valid=!1,o))break;!o&&(y(te,f.name)?S?nn(r.errors,te,f.name):E(r.errors,f.name,te[f.name]):L(r.errors,f.name))}!G(b)&&await B(b,o,u)}}return u.valid},ie=()=>{for(const n of d.unMount){const o=y(s,n);o&&(o._f.refs?o._f.refs.every(u=>!Ue(u)):!Ue(o._f.ref))&&Ie(n)}d.unMount=new Set},k=(n,o)=>!t.disabled&&(n&&o&&E(i,n,o),!me(tt(),a)),g=(n,o,u)=>Hs(n,d,{...l.mount?i:W(o)?a:Z(n)?{[n]:o}:o},u,o),_=n=>Je(y(l.mount?i:a,n,t.shouldUnregister?y(a,n,[]):[])),I=(n,o,u={})=>{const m=y(s,n);let h=o;if(m){const f=m._f;f&&(!f.disabled&&E(i,n,Bt(o,f)),h=Ve(f.ref)&&J(o)?"":o,Rt(f.ref)?[...f.ref.options].forEach(b=>b.selected=h.includes(b.value)):f.refs?Te(f.ref)?f.refs.forEach(b=>{(!b.defaultChecked||!b.disabled)&&(Array.isArray(h)?b.checked=!!h.find(S=>S===b.value):b.checked=h===b.value||!!h)}):f.refs.forEach(b=>b.checked=b.value===h):Ze(f.ref)?f.ref.value="":(f.ref.value=h,f.ref.type||x.state.next({name:n,values:q(i)})))}(u.shouldDirty||u.shouldTouch)&&ae(n,h,u.shouldTouch,u.shouldDirty,!0),u.shouldValidate&&Q(n)},X=(n,o,u)=>{for(const m in o){if(!o.hasOwnProperty(m))return;const h=o[m],f=n+"."+m,b=y(s,f);(d.array.has(n)||Y(h)||b&&!b._f)&&!xe(h)?X(f,h,u):I(f,h,u)}},H=(n,o,u={})=>{const m=y(s,n),h=d.array.has(n),f=q(o);E(i,n,f),h?(x.array.next({name:n,values:q(i)}),(p.isDirty||p.dirtyFields||F.isDirty||F.dirtyFields)&&u.shouldDirty&&x.state.next({name:n,dirtyFields:we(a,i),isDirty:k(n,f)})):m&&!m._f&&!J(f)?X(n,f,u):I(n,f,u),St(n,d)&&x.state.next({...r,name:n}),x.state.next({name:l.mount?n:void 0,values:q(i)})},j=async n=>{l.mount=!0;const o=n.target;let u=o.name,m=!0;const h=y(s,u),f=P=>{m=Number.isNaN(P)||xe(P)&&isNaN(P.getTime())||me(P,y(i,u,P))},b=Mt(t.mode),S=Mt(t.reValidateMode);if(h){let P,te;const Oe=o.type?Nt(h._f):Ws(n),fe=n.type===wt.BLUR||n.type===wt.FOCUS_OUT,er=!Zs(h._f)&&!t.resolver&&!y(r.errors,u)&&!h._f.deps||rn(fe,y(r.touchedFields,u),r.isSubmitted,S,b),Ye=St(u,d,fe);E(i,u,Oe),fe?(!o||!o.readOnly)&&(h._f.onBlur&&h._f.onBlur(n),v&&v(0)):h._f.onChange&&h._f.onChange(n);const Re=ae(u,Oe,fe),tr=!G(Re)||Ye;if(!fe&&x.state.next({name:u,type:n.type,values:q(i)}),er)return(p.isValid||F.isValid)&&(t.mode==="onBlur"?fe&&R():fe||R()),tr&&x.state.next({name:u,...Ye?{}:Re});if(!fe&&Ye&&x.state.next({...r}),t.resolver){const{errors:ut}=await ee([u]);if(C([u]),f(Oe),m){const rr=Tt(r.errors,s,u),dt=Tt(ut,s,rr.name||u);P=dt.error,u=dt.name,te=G(ut)}}else C([u],!0),P=(await _t(h,d.disabled,i,w,t.shouldUseNativeValidation))[u],C([u]),f(Oe),m&&(P?te=!1:(p.isValid||F.isValid)&&(te=await B(s,!0)));m&&(h._f.deps&&(!Array.isArray(h._f.deps)||h._f.deps.length>0)&&Q(h._f.deps),de(u,te,P,Re))}},A=(n,o)=>{if(y(r.errors,o)&&n.focus)return n.focus(),1},Q=async(n,o={})=>{let u,m;const h=Me(n);if(t.resolver){const f=await re(W(n)?n:h);u=G(f),m=n?!h.some(b=>y(f,b)):u}else n?(m=(await Promise.all(h.map(async f=>{const b=y(s,f);return await B(b&&b._f?{[f]:b}:b)}))).every(Boolean),!(!m&&!r.isValid)&&R()):m=u=await B(s);return x.state.next({...!Z(n)||(p.isValid||F.isValid)&&u!==r.isValid?{}:{name:n},...t.resolver||!n?{isValid:u}:{},errors:r.errors}),o.shouldFocus&&!m&&Fe(s,A,n?h:d.mount),m},tt=(n,o)=>{let u={...l.mount?i:a};return o&&(u=Yt(o.dirtyFields?r.dirtyFields:r.touchedFields,u)),W(n)?u:Z(n)?y(u,n):n.map(m=>y(u,m))},rt=(n,o)=>({invalid:!!y((o||r).errors,n),isDirty:!!y((o||r).dirtyFields,n),error:y((o||r).errors,n),isValidating:!!y(r.validatingFields,n),isTouched:!!y((o||r).touchedFields,n)}),Qt=n=>{n&&Me(n).forEach(o=>L(r.errors,o)),x.state.next({errors:n?r.errors:{}})},st=(n,o,u)=>{const m=(y(s,n,{_f:{}})._f||{}).ref,h=y(r.errors,n)||{},{ref:f,message:b,type:S,...P}=h;E(r.errors,n,{...P,...o,ref:m}),x.state.next({name:n,errors:r.errors,isValid:!1}),u&&u.shouldFocus&&m&&m.focus&&m.focus()},zt=(n,o)=>se(n)?x.state.subscribe({next:u=>"values"in u&&n(g(void 0,o),u)}):g(n,o,!0),nt=n=>x.state.subscribe({next:o=>{tn(n.name,o.name,n.exact)&&en(o,n.formState||p,Zt,n.reRenderRoot)&&n.callback({values:{...i},...r,...o,defaultValues:a})}}).unsubscribe,Xt=n=>(l.mount=!0,F={...F,...n.formState},nt({...n,formState:{...O,...n.formState}})),Ie=(n,o={})=>{for(const u of n?Me(n):d.mount)d.mount.delete(u),d.array.delete(u),o.keepValue||(L(s,u),L(i,u)),!o.keepError&&L(r.errors,u),!o.keepDirty&&L(r.dirtyFields,u),!o.keepTouched&&L(r.touchedFields,u),!o.keepIsValidating&&L(r.validatingFields,u),!t.shouldUnregister&&!o.keepDefaultValue&&L(a,u);x.state.next({values:q(i)}),x.state.next({...r,...o.keepDirty?{isDirty:k()}:{}}),!o.keepIsValid&&R()},at=({disabled:n,name:o})=>{(oe(n)&&l.mount||n||d.disabled.has(o))&&(n?d.disabled.add(o):d.disabled.delete(o))},We=(n,o={})=>{let u=y(s,n);const m=oe(o.disabled)||oe(t.disabled);return E(s,n,{...u||{},_f:{...u&&u._f?u._f:{ref:{name:n}},name:n,mount:!0,...o}}),d.mount.add(n),u?at({disabled:oe(o.disabled)?o.disabled:t.disabled,name:n}):V(n,!0,o.value),{...m?{disabled:o.disabled||t.disabled}:{},...t.progressive?{required:!!o.required,min:Ne(o.min),max:Ne(o.max),minLength:Ne(o.minLength),maxLength:Ne(o.maxLength),pattern:Ne(o.pattern)}:{},name:n,onChange:j,onBlur:j,ref:h=>{if(h){We(n,o),u=y(s,n);const f=W(h.value)&&h.querySelectorAll&&h.querySelectorAll("input,select,textarea")[0]||h,b=Qs(f),S=u._f.refs||[];if(b?S.find(P=>P===f):f===u._f.ref)return;E(s,n,{_f:{...u._f,...b?{refs:[...S.filter(Ue),f,...Array.isArray(y(a,n))?[{}]:[]],ref:{type:f.type,name:n}}:{ref:f}}}),V(n,!1,void 0,f)}else u=y(s,n,{}),u._f&&(u._f.mount=!1),(t.shouldUnregister||o.shouldUnregister)&&!(Ys(d.array,n)&&l.action)&&d.unMount.add(n)}}},Le=()=>t.shouldFocusError&&Fe(s,A,d.mount),Gt=n=>{oe(n)&&(x.state.next({disabled:n}),Fe(s,(o,u)=>{const m=y(s,u);m&&(o.disabled=m._f.disabled||n,Array.isArray(m._f.refs)&&m._f.refs.forEach(h=>{h.disabled=m._f.disabled||n}))},0,!1))},it=(n,o)=>async u=>{let m;u&&(u.preventDefault&&u.preventDefault(),u.persist&&u.persist());let h=q(i);if(x.state.next({isSubmitting:!0}),t.resolver){const{errors:f,values:b}=await ee();C(),r.errors=f,h=q(b)}else await B(s);if(d.disabled.size)for(const f of d.disabled)L(h,f);if(L(r.errors,"root"),G(r.errors)){x.state.next({errors:{}});try{await n(h,u)}catch(f){m=f}}else o&&await o({...r.errors},u),Le(),setTimeout(Le);if(x.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:G(r.errors)&&!m,submitCount:r.submitCount+1,errors:r.errors}),m)throw m},Jt=(n,o={})=>{y(s,n)&&(W(o.defaultValue)?H(n,q(y(a,n))):(H(n,o.defaultValue),E(a,n,q(o.defaultValue))),o.keepTouched||L(r.touchedFields,n),o.keepDirty||(L(r.dirtyFields,n),r.isDirty=o.defaultValue?k(n,q(y(a,n))):k()),o.keepError||(L(r.errors,n),p.isValid&&R()),x.state.next({...r}))},ot=(n,o={})=>{const u=n?q(n):a,m=q(u),h=G(n),f=h?a:m;if(o.keepDefaultValues||(a=u),!o.keepValues){if(o.keepDirtyValues){const b=new Set([...d.mount,...Object.keys(we(a,i))]);for(const S of Array.from(b))y(r.dirtyFields,S)?E(f,S,y(i,S)):H(S,y(f,S))}else{if(Ge&&W(n))for(const b of d.mount){const S=y(s,b);if(S&&S._f){const P=Array.isArray(S._f.refs)?S._f.refs[0]:S._f.ref;if(Ve(P)){const te=P.closest("form");if(te){te.reset();break}}}}if(o.keepFieldsRef)for(const b of d.mount)H(b,y(f,b));else s={}}i=t.shouldUnregister?o.keepDefaultValues?q(a):{}:q(f),x.array.next({values:{...f}}),x.state.next({values:{...f}})}d={mount:o.keepDirtyValues?d.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!p.isValid||!!o.keepIsValid||!!o.keepDirtyValues||!t.shouldUnregister&&!G(f),l.watch=!!t.shouldUnregister,l.keepIsValid=!!o.keepIsValid,l.action=!1,o.keepErrors||(r.errors={}),x.state.next({submitCount:o.keepSubmitCount?r.submitCount:0,isDirty:h?!1:o.keepDirty?r.isDirty:!!(o.keepDefaultValues&&!me(n,a)),isSubmitted:o.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:h?{}:o.keepDirtyValues?o.keepDefaultValues&&i?we(a,i):r.dirtyFields:o.keepDefaultValues&&n?we(a,n):o.keepDirty?r.dirtyFields:{},touchedFields:o.keepTouched?r.touchedFields:{},errors:o.keepErrors?r.errors:{},isSubmitSuccessful:o.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:a})},ct=(n,o)=>ot(se(n)?n(i):n,{...t.resetOptions,...o}),Kt=(n,o={})=>{const u=y(s,n),m=u&&u._f;if(m){const h=m.refs?m.refs[0]:m.ref;h.focus&&setTimeout(()=>{h.focus(),o.shouldSelect&&se(h.select)&&h.select()})}},Zt=n=>{r={...r,...n}},lt={control:{register:We,unregister:Ie,getFieldState:rt,handleSubmit:it,setError:st,_subscribe:nt,_runSchema:ee,_updateIsValidating:C,_focusError:Le,_getWatch:g,_getDirty:k,_setValid:R,_setFieldArray:M,_setDisabledField:at,_setErrors:z,_getFieldArray:_,_reset:ot,_resetDefaultValues:()=>se(t.defaultValues)&&t.defaultValues().then(n=>{ct(n,t.resetOptions),x.state.next({isLoading:!1})}),_removeUnmounted:ie,_disableForm:Gt,_subjects:x,_proxyFormState:p,get _fields(){return s},get _formValues(){return i},get _state(){return l},set _state(n){l=n},get _defaultValues(){return a},get _names(){return d},set _names(n){d=n},get _formState(){return r},get _options(){return t},set _options(n){t={...t,...n}}},subscribe:Xt,trigger:Q,register:We,handleSubmit:it,watch:zt,setValue:H,getValues:tt,reset:ct,resetField:Jt,clearErrors:Qt,unregister:Ie,setError:st,setFocus:Kt,getFieldState:rt};return{...lt,formControl:lt}}function cn(e={}){const t=K.useRef(void 0),r=K.useRef(void 0),[s,a]=K.useState({isDirty:!1,isValidating:!1,isLoading:se(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:se(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:s},e.defaultValues&&!se(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:l,...d}=on(e);t.current={...d,formState:s}}const i=t.current.control;return i._options=e,Bs(()=>{const l=i._subscribe({formState:i._proxyFormState,callback:()=>a({...i._formState}),reRenderRoot:!0});return a(d=>({...d,isReady:!0})),i._formState.isReady=!0,l},[i]),K.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),K.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),K.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),K.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),K.useEffect(()=>{if(i._proxyFormState.isDirty){const l=i._getDirty();l!==s.isDirty&&i._subjects.state.next({isDirty:l})}},[i,s.isDirty]),K.useEffect(()=>{var l;e.values&&!me(e.values,r.current)?(i._reset(e.values,{keepFieldsRef:!0,...i._options.resetOptions}),!((l=i._options.resetOptions)===null||l===void 0)&&l.keepIsValid||i._setValid(),r.current=e.values,a(d=>({...d}))):i._resetDefaultValues()},[i,e.values]),K.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=Us(s,i),t.current}const $t=({defaultDate:e=null,trade:t=null,tags:r=[],onClose:s})=>{const{showToast:a}=Pt(),i=cr(),l=lr(),d=Xe(j=>j.settings.currency),v=!!t,D=new Date,O=e||D.toISOString().split("T")[0],p=D.toTimeString().slice(0,5),F={tagId:"default",name:"Trade",color:"#3b82f6",emoji:"ðŸ“Š"},x=r.length>0?r:[F],{register:w,handleSubmit:N,watch:R,setValue:C,formState:{errors:M}}=cn({defaultValues:{date:(t==null?void 0:t.date)||O,time:(t==null?void 0:t.time)||p,amount:(t==null?void 0:t.amount)||"",tagId:(t==null?void 0:t.tagId)||x[0].tagId,notes:(t==null?void 0:t.notes)||""}}),[U,z]=le.useState(null),[V,ae]=le.useState(t!=null&&t.driveImageId?Be.getImageUrl(t.driveImageId):null),[de,ee]=le.useState(!1),[re,B]=le.useState(!1),ie=R("amount"),k=R("tagId"),g=x.find(j=>j.tagId===k)||x[0],_=j=>{C("amount",j)},I=j=>{var Q;const A=(Q=j.target.files)==null?void 0:Q[0];if(A){if(!A.type.startsWith("image/")){a("Please select an image file","error");return}if(A.size>10*1024*1024){a("Image too large (max 10MB)","error");return}z(A),ae(URL.createObjectURL(A)),ee(!1)}},X=()=>{z(null),ae(null),ee(!0)},H=async j=>{if(!j.amount||j.amount===0){a("Please enter an amount","error");return}try{B(!0);const A=x.find(Q=>Q.tagId===j.tagId)||x[0];if(v){const Q={date:j.date,time:j.time,amount:parseFloat(j.amount),tagId:A.tagId,tagName:A.name,tagColor:A.color,tagEmoji:A.emoji,notes:j.notes};de?Q.driveImageId="":U&&(Q.screenshot=U),await l.mutateAsync({tradeId:t.tradeId,updates:Q})}else{const Q={tradeId:xr(),date:j.date,time:j.time,amount:parseFloat(j.amount),tagId:A.tagId,tagName:A.name,tagColor:A.color,tagEmoji:A.emoji,screenshot:U,notes:j.notes};await i.mutateAsync(Q)}a(v?"Trade updated":"Trade added","success"),s()}catch(A){console.error("Failed to save trade:",A),a("Failed to save trade","error")}finally{B(!1)}};return c.jsx(Qe,{isOpen:!0,onClose:s,title:v?"Edit Trade":"Add Trade",size:"lg",children:c.jsxs("form",{onSubmit:N(H),className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Date"}),c.jsx("input",{type:"date",...w("date",{required:!0}),className:"input"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Time"}),c.jsx("input",{type:"time",...w("time",{required:!0}),className:"input"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Amount"}),c.jsxs("div",{className:"relative",children:[c.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-2xl font-bold text-text-tertiary",children:d}),c.jsx("input",{type:"number",step:"0.01",...w("amount",{required:!0,valueAsNumber:!0}),className:`
                input pl-12 text-3xl font-bold text-center
                ${ie>0?"text-profit":ie<0?"text-loss":""}
              `,placeholder:"0.00"})]}),c.jsx("div",{className:"flex gap-2 mt-2",children:sr.map(j=>c.jsxs("button",{type:"button",onClick:()=>_(j),className:`
                  flex-1 py-2 px-3 rounded-md text-sm font-medium
                  transition-colors
                  ${j>0?"bg-profit/10 text-profit hover:bg-profit/20":"bg-loss/10 text-loss hover:bg-loss/20"}
                `,children:[j>0?"+":"",j]},j))})]}),c.jsxs("div",{className:"relative z-20",children:[c.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Strategy Tag ",r.length===0&&c.jsx("span",{className:"text-text-tertiary text-xs",children:"(Create custom tags in Tags section)"})]}),c.jsx("select",{...w("tagId"),className:"input w-full relative z-20",children:x.map(j=>c.jsxs("option",{value:j.tagId,children:[j.emoji," ",j.name]},j.tagId))}),g&&c.jsxs("div",{className:"mt-2 p-3 rounded-md text-sm",style:{backgroundColor:`${g.color}20`,color:g.color},children:[c.jsx("span",{className:"text-xl mr-2",children:g.emoji}),c.jsx("span",{className:"font-medium",children:g.name})]})]}),c.jsxs("div",{className:"relative z-10",children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Notes (optional)"}),c.jsx("textarea",{...w("notes"),rows:3,className:"input resize-none w-full",placeholder:"What happened? What did you learn?"})]}),c.jsxs("div",{className:"relative z-0",children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Screenshot (optional)"}),V?c.jsxs("div",{className:"relative",children:[c.jsx("img",{src:V,alt:"Screenshot preview",className:"w-full h-48 object-cover rounded-lg"}),c.jsx("button",{type:"button",onClick:X,className:"absolute top-2 right-2 p-2 bg-black/50 rounded-full hover:bg-black/70 transition-colors",children:c.jsx(nr,{size:20,className:"text-white"})})]}):c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsxs("label",{className:"cursor-pointer",children:[c.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:I,className:"hidden"}),c.jsxs("div",{className:"card border-2 border-dashed border-border hover:border-accent transition-colors text-center py-8",children:[c.jsx(kr,{size:32,className:"mx-auto mb-2 text-text-secondary"}),c.jsx("div",{className:"text-sm text-text-secondary",children:"Take Photo"})]})]}),c.jsxs("label",{className:"cursor-pointer",children:[c.jsx("input",{type:"file",accept:"image/*",onChange:I,className:"hidden"}),c.jsxs("div",{className:"card border-2 border-dashed border-border hover:border-accent transition-colors text-center py-8",children:[c.jsx(Mr,{size:32,className:"mx-auto mb-2 text-text-secondary"}),c.jsx("div",{className:"text-sm text-text-secondary",children:"Upload"})]})]})]})]}),c.jsxs("div",{className:"flex gap-3 pt-4 border-t border-border",children:[c.jsx(pe,{type:"button",variant:"secondary",onClick:s,className:"flex-1",disabled:re,children:"Cancel"}),c.jsx(pe,{type:"submit",className:"flex-1",loading:re,children:v?"Update Trade":"Save Trade"})]})]})})},ln=({date:e,trades:t,onClose:r,onAddTrade:s,tags:a=[]})=>{const{showToast:i}=Pt(),l=ur(),d=Xe(w=>w.settings.currency),[v,D]=le.useState(null),O=t.reduce((w,N)=>w+N.amount,0),p=async w=>{if(confirm("Delete this trade?"))try{await l.mutateAsync(w),i("Trade deleted","success"),t.length===1&&r()}catch{i("Failed to delete trade","error")}},F=w=>{D(w)},x=()=>{D(null)};return c.jsxs(c.Fragment,{children:[c.jsx(Qe,{isOpen:!0,onClose:r,title:c.jsxs("div",{children:[c.jsx("div",{className:"text-xl font-bold",children:ge(new Date(e),"EEEE, MMMM d, yyyy")}),c.jsx("div",{className:`text-2xl font-bold mt-1 ${O>=0?"text-profit":"text-loss"}`,children:ze(O,d)}),c.jsxs("div",{className:"text-sm text-text-secondary mt-1",children:[t.length," trade",t.length!==1?"s":""]})]}),children:c.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:t.length===0?c.jsxs("div",{className:"text-center py-8",children:[c.jsx("p",{className:"text-text-secondary mb-4",children:"No trades on this day"}),c.jsx(pe,{onClick:s,children:"Add Trade"})]}):c.jsxs(c.Fragment,{children:[t.map(w=>c.jsx(un,{trade:w,currency:d,onDelete:p,onEdit:F},w.tradeId)),c.jsx(pe,{onClick:s,variant:"secondary",className:"w-full",children:"+ Add Another Trade"})]})})}),v&&c.jsx($t,{trade:v,defaultDate:e,tags:a,onClose:x})]})},un=({trade:e,currency:t,onDelete:r,onEdit:s})=>{const[a,i]=le.useState(!1);return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"card border-l-4",style:{borderLeftColor:e.tagColor},children:[c.jsxs("div",{className:"flex items-start justify-between mb-2",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:`text-2xl font-bold mb-1 ${e.amount>=0?"text-profit":"text-loss"}`,children:ze(e.amount,t)}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xl",children:e.tagEmoji}),c.jsx("span",{className:"text-sm font-medium",style:{color:e.tagColor},children:e.tagName})]})]}),c.jsx("div",{className:"text-sm text-text-tertiary",children:e.time})]}),e.driveImageId&&c.jsxs("button",{onClick:()=>i(!0),className:"w-full h-32 rounded-lg overflow-hidden bg-surface-hover mb-2 relative group",children:[c.jsx("img",{src:Be.getImageUrl(e.driveImageId),alt:"Trade screenshot",className:"w-full h-full object-cover"}),c.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:c.jsx(Fr,{size:32,className:"text-white"})})]}),e.notes&&c.jsx("p",{className:"text-sm text-text-secondary mb-3 p-2 bg-surface rounded",children:e.notes}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs(pe,{variant:"ghost",size:"sm",onClick:()=>s(e),className:"flex-1 text-text-secondary hover:text-accent",children:[c.jsx(hr,{size:16,className:"mr-1"}),"Edit"]}),c.jsxs(pe,{variant:"ghost",size:"sm",onClick:()=>r(e.tradeId),className:"flex-1 text-text-secondary hover:text-loss",children:[c.jsx(mr,{size:16,className:"mr-1"}),"Delete"]})]})]}),a&&c.jsx(Qe,{isOpen:!0,onClose:()=>i(!1),size:"lg",children:c.jsx("img",{src:Be.getImageUrl(e.driveImageId),alt:"Trade screenshot",className:"w-full h-auto rounded-lg"})})]})},pn=()=>{const{year:e,month:t}=ar(),r=ir(),s=new Date,a=e?parseInt(e):s.getFullYear(),i=t?parseInt(t):s.getMonth(),l=new Date(a,i),[d,v]=le.useState(null),[D,O]=le.useState(!1),[p,F]=le.useState("calendar"),x=Xe(g=>g.settings.currency),{data:w=[],isLoading:N}=dr(a,i),{data:R=[]}=yr(),C=br(w),M=vr(w),U=wr(w),z=Cr(l),V=Vr(l),ae=Er({start:z,end:V}),de=Cs(z),ee=Array(de).fill(null),re=()=>{const g=As(l);r(`/month/${g.getFullYear()}/${g.getMonth()}`)},B=()=>{const g=Ct(l,1);r(`/month/${g.getFullYear()}/${g.getMonth()}`)},ie=g=>{mt(g)||v(ge(g,"yyyy-MM-dd"))},k=()=>{O(!0)};return N?c.jsxs(c.Fragment,{children:[c.jsx(ft,{title:"Loading..."}),c.jsx("div",{className:"p-4",children:c.jsx(or,{type:"spinner"})})]}):c.jsxs(c.Fragment,{children:[c.jsx(ft,{title:ge(l,"MMMM yyyy"),showBack:!0,actions:c.jsx("button",{onClick:()=>F(p==="calendar"?"list":"calendar"),className:"p-2 hover:bg-surface rounded-lg transition-colors",title:p==="calendar"?"List view":"Calendar view",children:c.jsx(Nr,{size:20,className:"text-text-secondary"})})}),c.jsxs("div",{className:"p-4 max-w-7xl mx-auto space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("button",{onClick:re,className:"p-2 hover:bg-surface rounded-lg transition-colors",children:c.jsx(Dr,{size:24,className:"text-text-secondary"})}),c.jsx("h2",{className:"text-xl font-semibold",children:ge(l,"MMMM yyyy")}),c.jsx("button",{onClick:B,className:"p-2 hover:bg-surface rounded-lg transition-colors",children:c.jsx(jr,{size:24,className:"text-text-secondary"})})]}),c.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[c.jsx(_e,{label:"P&L",value:Et(C.totalPL,x),color:C.totalPL>=0?"profit":"loss"}),c.jsx(_e,{label:"Trades",value:C.tradeCount}),c.jsx(_e,{label:"Win Rate",value:`${C.winRate}%`,color:C.winRate>=50?"profit":"loss"}),c.jsx(_e,{label:"W/L",value:`${C.winCount}/${C.lossCount}`})]}),p==="calendar"?c.jsxs("div",{className:"card",children:[c.jsx("div",{className:"grid grid-cols-7 gap-2 mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(g=>c.jsx("div",{className:"text-center text-sm font-medium text-text-secondary py-2",children:g},g))}),c.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[ee.map((g,_)=>c.jsx("div",{className:"aspect-square"},`empty-${_}`)),ae.map(g=>{const _=ge(g,"yyyy-MM-dd"),I=M[_]||0,X=U[_]||[],H=mt(g),j=pr(g,new Date);return c.jsx(dn,{date:g,pl:I,tradeCount:X.length,isWeekend:H,isToday:j,currency:x,onClick:()=>ie(g)},_)})]})]}):c.jsx(fn,{trades:w,groupedTrades:U,currency:x,onDayClick:ie})]}),c.jsx(Is,{onClick:k}),d&&c.jsx(ln,{date:d,trades:U[d]||[],tags:R,onClose:()=>v(null),onAddTrade:k}),D&&c.jsx($t,{defaultDate:d,tags:R,onClose:()=>O(!1)})]})},_e=({label:e,value:t,color:r="default"})=>{const s={profit:"text-profit",loss:"text-loss",default:"text-text-primary"};return c.jsxs("div",{className:"card text-center",children:[c.jsx("div",{className:"text-text-tertiary text-xs mb-1",children:e}),c.jsx("div",{className:`text-lg font-bold ${s[r]}`,children:t})]})},dn=({date:e,pl:t,tradeCount:r,isWeekend:s,isToday:a,currency:i,onClick:l})=>{const d=ge(e,"d");if(s)return c.jsxs("div",{className:"aspect-square bg-surface/50 rounded-lg p-2 flex flex-col items-center justify-center opacity-50",children:[c.jsx("div",{className:"text-sm text-text-tertiary",children:d}),c.jsx("div",{className:"text-xs text-text-tertiary",children:"ðŸ”’"})]});const v=t>0?"bg-profit/10":t<0?"bg-loss/10":"bg-surface",D=a?"ring-2 ring-accent":"border border-border";return c.jsxs("button",{onClick:l,className:`
        aspect-square ${v} ${D} rounded-lg p-2
        hover:bg-surface-hover transition-all
        flex flex-col items-center justify-between
        relative
      `,children:[c.jsx("div",{className:"text-sm text-text-secondary",children:d}),r>0&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:`text-sm font-semibold ${t>=0?"text-profit":"text-loss"}`,children:Et(t,i)}),r>1&&c.jsx("div",{className:"absolute bottom-1 right-1 w-5 h-5 rounded-full bg-accent text-white text-xs flex items-center justify-center",children:r})]})]})},fn=({trades:e,groupedTrades:t,currency:r,onDayClick:s})=>{const a=Object.keys(t).sort().reverse();return a.length===0?c.jsx("div",{className:"card text-center py-12",children:c.jsx("p",{className:"text-text-secondary",children:"No trades this month"})}):c.jsx("div",{className:"space-y-2",children:a.map(i=>{const l=t[i],d=l.reduce((v,D)=>v+D.amount,0);return c.jsx("button",{onClick:()=>s(i),className:"card w-full text-left hover:bg-surface-hover transition-colors",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("div",{className:"font-medium",children:ge(new Date(i),"EEEE, MMMM d")}),c.jsxs("div",{className:"text-sm text-text-tertiary",children:[l.length," trade",l.length!==1?"s":""]})]}),c.jsx("div",{className:`text-xl font-bold ${d>=0?"text-profit":"text-loss"}`,children:ze(d,r)})]})},i)})})};export{pn as default};
