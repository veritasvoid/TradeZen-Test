var ct=d=>{throw TypeError(d)};var et=(d,u,v)=>u.has(d)||ct("Cannot "+v);var G=(d,u,v)=>(et(d,u,"read from private field"),v?v.call(d):u.get(d)),Oe=(d,u,v)=>u.has(d)?ct("Cannot add the same private member more than once"):u instanceof WeakSet?u.add(d):u.set(d,v),Ne=(d,u,v,i)=>(et(d,u,"write to private field"),i?i.call(d,v):u.set(d,v),v),ke=(d,u,v)=>(et(d,u,"access private method"),v);import{a as pt}from"./useTags-BM3jPYGl.js";import{S as Ot,s as Nt,h as dt,f as kt,n as mt,i as Ge,r as $e,k as Pt,l as Lt,e as rt,m as De,o as Ht}from"./index-am8LYwIM.js";var be,Te,fe,ye,Ae,Be,it,gt,$t=(gt=class extends Ot{constructor(u,v){super();Oe(this,Ae);Oe(this,be);Oe(this,Te);Oe(this,fe);Oe(this,ye);Ne(this,be,u),this.setOptions(v),this.bindMethods(),ke(this,Ae,Be).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(u){var i;const v=this.options;this.options=G(this,be).defaultMutationOptions(u),Nt(this.options,v)||G(this,be).getMutationCache().notify({type:"observerOptionsUpdated",mutation:G(this,fe),observer:this}),v!=null&&v.mutationKey&&this.options.mutationKey&&dt(v.mutationKey)!==dt(this.options.mutationKey)?this.reset():((i=G(this,fe))==null?void 0:i.state.status)==="pending"&&G(this,fe).setOptions(this.options)}onUnsubscribe(){var u;this.hasListeners()||(u=G(this,fe))==null||u.removeObserver(this)}onMutationUpdate(u){ke(this,Ae,Be).call(this),ke(this,Ae,it).call(this,u)}getCurrentResult(){return G(this,Te)}reset(){var u;(u=G(this,fe))==null||u.removeObserver(this),Ne(this,fe,void 0),ke(this,Ae,Be).call(this),ke(this,Ae,it).call(this)}mutate(u,v){var i;return Ne(this,ye,v),(i=G(this,fe))==null||i.removeObserver(this),Ne(this,fe,G(this,be).getMutationCache().build(G(this,be),this.options)),G(this,fe).addObserver(this),G(this,fe).execute(u)}},be=new WeakMap,Te=new WeakMap,fe=new WeakMap,ye=new WeakMap,Ae=new WeakSet,Be=function(){var v;const u=((v=G(this,fe))==null?void 0:v.state)??kt();Ne(this,Te,{...u,isPending:u.status==="pending",isSuccess:u.status==="success",isError:u.status==="error",isIdle:u.status==="idle",mutate:this.mutate,reset:this.reset})},it=function(u){mt.batch(()=>{var v,i,e,t,a,o,p,b;if(G(this,ye)&&this.hasListeners()){const r=G(this,Te).variables,s=G(this,Te).context,n={client:G(this,be),meta:this.options.meta,mutationKey:this.options.mutationKey};if((u==null?void 0:u.type)==="success"){try{(i=(v=G(this,ye)).onSuccess)==null||i.call(v,u.data,r,s,n)}catch(l){Promise.reject(l)}try{(t=(e=G(this,ye)).onSettled)==null||t.call(e,u.data,null,r,s,n)}catch(l){Promise.reject(l)}}else if((u==null?void 0:u.type)==="error"){try{(o=(a=G(this,ye)).onError)==null||o.call(a,u.error,r,s,n)}catch(l){Promise.reject(l)}try{(b=(p=G(this,ye)).onSettled)==null||b.call(p,void 0,u.error,r,s,n)}catch(l){Promise.reject(l)}}}this.listeners.forEach(r=>{r(G(this,Te))})})},gt);function ot(d,u){const v=Ge(),[i]=$e.useState(()=>new $t(v,d));$e.useEffect(()=>{i.setOptions(d)},[i,d]);const e=$e.useSyncExternalStore($e.useCallback(a=>i.subscribe(mt.batchCalls(a)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),t=$e.useCallback((a,o)=>{i.mutate(a,o).catch(Pt)},[i]);if(e.error&&Lt(i.options.throwOnError,[e.error]))throw e.error;return{...e,mutate:t,mutateAsync:e.mutate}}const An=6048e5,Un=864e5,vt=6e4,wt=36e5;function Qt(d,u){const i=qt(d);let e;if(i.date){const p=Kt(i.date,2);e=jt(p.restDateString,p.year)}if(!e||isNaN(e.getTime()))return new Date(NaN);const t=e.getTime();let a=0,o;if(i.time&&(a=Yt(i.time),isNaN(a)))return new Date(NaN);if(i.timezone){if(o=Zt(i.timezone),isNaN(o))return new Date(NaN)}else{const p=new Date(t+a),b=new Date(0);return b.setFullYear(p.getUTCFullYear(),p.getUTCMonth(),p.getUTCDate()),b.setHours(p.getUTCHours(),p.getUTCMinutes(),p.getUTCSeconds(),p.getUTCMilliseconds()),b}return new Date(t+a+o)}const We={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},zt=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Wt=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Bt=/^([+-])(\d{2})(?::?(\d{2}))?$/;function qt(d){const u={},v=d.split(We.dateTimeDelimiter);let i;if(v.length>2)return u;if(/:/.test(v[0])?i=v[0]:(u.date=v[0],i=v[1],We.timeZoneDelimiter.test(u.date)&&(u.date=d.split(We.timeZoneDelimiter)[0],i=d.substr(u.date.length,d.length))),i){const e=We.timezone.exec(i);e?(u.time=i.replace(e[1],""),u.timezone=e[1]):u.time=i}return u}function Kt(d,u){const v=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+u)+"})|(\\d{2}|[+-]\\d{"+(2+u)+"})$)"),i=d.match(v);if(!i)return{year:NaN,restDateString:""};const e=i[1]?parseInt(i[1]):null,t=i[2]?parseInt(i[2]):null;return{year:t===null?e:t*100,restDateString:d.slice((i[1]||i[2]).length)}}function jt(d,u){if(u===null)return new Date(NaN);const v=d.match(zt);if(!v)return new Date(NaN);const i=!!v[4],e=Qe(v[1]),t=Qe(v[2])-1,a=Qe(v[3]),o=Qe(v[4]),p=Qe(v[5])-1;if(i)return en(u,o,p)?Gt(u,o,p):new Date(NaN);{const b=new Date(0);return!Vt(u,t,a)||!Jt(u,e)?new Date(NaN):(b.setUTCFullYear(u,t,Math.max(e,a)),b)}}function Qe(d){return d?parseInt(d):1}function Yt(d){const u=d.match(Wt);if(!u)return NaN;const v=tt(u[1]),i=tt(u[2]),e=tt(u[3]);return tn(v,i,e)?v*wt+i*vt+e*1e3:NaN}function tt(d){return d&&parseFloat(d.replace(",","."))||0}function Zt(d){if(d==="Z")return 0;const u=d.match(Bt);if(!u)return 0;const v=u[1]==="+"?-1:1,i=parseInt(u[2]),e=u[3]&&parseInt(u[3])||0;return nn(i,e)?v*(i*wt+e*vt):NaN}function Gt(d,u,v){const i=new Date(0);i.setUTCFullYear(d,0,4);const e=i.getUTCDay()||7,t=(u-1)*7+v+1-e;return i.setUTCDate(i.getUTCDate()+t),i}const Xt=[31,null,31,30,31,30,31,31,30,31,30,31];function bt(d){return d%400===0||d%4===0&&d%100!==0}function Vt(d,u,v){return u>=0&&u<=11&&v>=1&&v<=(Xt[u]||(bt(d)?29:28))}function Jt(d,u){return u>=1&&u<=(bt(d)?366:365)}function en(d,u,v){return u>=1&&u<=53&&v>=0&&v<=6}function tn(d,u,v){return d===24?u===0&&v===0:v>=0&&v<60&&u>=0&&u<60&&d>=0&&d<25}function nn(d,u){return u>=0&&u<=59}const In=(d,u="$")=>{const i=Math.abs(d).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2});return`${d>=0?"+":"-"}${u}${i}`},En=(d,u="$")=>{const v=Math.abs(d);let i;return v>=1e6?i=`${(v/1e6).toFixed(1)}M`:v>=1e3?i=`${(v/1e3).toFixed(1)}K`:i=v.toFixed(0),`${d>=0?"+":"-"}${u}${i}`},rn=(d,u)=>{const v=d+u;return v===0?0:Math.round(d/v*100)},sn=d=>{if(!d||d.length===0)return{totalPL:0,tradeCount:0,winCount:0,lossCount:0,winRate:0,avgWin:0,avgLoss:0};const u=d.reduce((a,o)=>a+o.amount,0),v=d.filter(a=>a.amount>0),i=d.filter(a=>a.amount<0),e=v.length>0?v.reduce((a,o)=>a+o.amount,0)/v.length:0,t=i.length>0?i.reduce((a,o)=>a+Math.abs(o.amount),0)/i.length:0;return{totalPL:u,tradeCount:d.length,winCount:v.length,lossCount:i.length,winRate:rn(v.length,i.length),avgWin:e,avgLoss:t}},Tn=(d,u)=>Array.from({length:12},(i,e)=>e).map(i=>{const e=d.filter(t=>{const a=Qt(t.date);return a.getFullYear()===u&&a.getMonth()===i});return{month:i,...sn(e)}}),Cn=()=>crypto.randomUUID();function on(d,u){return u.forEach(function(v){v&&typeof v!="string"&&!Array.isArray(v)&&Object.keys(v).forEach(function(i){if(i!=="default"&&!(i in d)){var e=Object.getOwnPropertyDescriptor(v,i);Object.defineProperty(d,i,e.get?e:{enumerable:!0,get:function(){return v[i]}})}})}),Object.freeze(d)}function yt(d,u){return new Promise(function(v,i){let e;return an(d).then(function(t){try{return e=t,v(new Blob([u.slice(0,2),e,u.slice(2)],{type:"image/jpeg"}))}catch(a){return i(a)}},i)})}const an=d=>new Promise((u,v)=>{const i=new FileReader;i.addEventListener("load",({target:{result:e}})=>{const t=new DataView(e);let a=0;if(t.getUint16(a)!==65496)return v("not a valid JPEG");for(a+=2;;){const o=t.getUint16(a);if(o===65498)break;const p=t.getUint16(a+2);if(o===65505&&t.getUint32(a+4)===1165519206){const b=a+10;let r;switch(t.getUint16(b)){case 18761:r=!0;break;case 19789:r=!1;break;default:return v("TIFF header contains invalid endian")}if(t.getUint16(b+2,r)!==42)return v("TIFF header contains invalid version");const s=t.getUint32(b+4,r),n=b+s+2+12*t.getUint16(b+s,r);for(let l=b+s+2;l<n;l+=12)if(t.getUint16(l,r)==274){if(t.getUint16(l+2,r)!==3)return v("Orientation data type is invalid");if(t.getUint32(l+4,r)!==1)return v("Orientation data count is invalid");t.setUint16(l+8,1,r);break}return u(e.slice(a,a+2+p))}a+=2+p}return u(new Blob)}),i.readAsArrayBuffer(d)});var Ke={},fn={get exports(){return Ke},set exports(d){Ke=d}};(function(d){var u,v,i={};fn.exports=i,i.parse=function(e,t){for(var a=i.bin.readUshort,o=i.bin.readUint,p=0,b={},r=new Uint8Array(e),s=r.length-4;o(r,s)!=101010256;)s--;p=s,p+=4;var n=a(r,p+=4);a(r,p+=2);var l=o(r,p+=2),m=o(r,p+=4);p+=4,p=m;for(var C=0;C<n;C++){o(r,p),p+=4,p+=4,p+=4,o(r,p+=4),l=o(r,p+=4);var R=o(r,p+=4),U=a(r,p+=4),P=a(r,p+2),x=a(r,p+4);p+=6;var M=o(r,p+=8);p+=4,p+=U+P+x,i._readLocal(r,M,b,l,R,t)}return b},i._readLocal=function(e,t,a,o,p,b){var r=i.bin.readUshort,s=i.bin.readUint;s(e,t),r(e,t+=4),r(e,t+=2);var n=r(e,t+=2);s(e,t+=2),s(e,t+=4),t+=4;var l=r(e,t+=8),m=r(e,t+=2);t+=2;var C=i.bin.readUTF8(e,t,l);if(t+=l,t+=m,b)a[C]={size:p,csize:o};else{var R=new Uint8Array(e.buffer,t);if(n==0)a[C]=new Uint8Array(R.buffer.slice(t,t+o));else{if(n!=8)throw"unknown compression method: "+n;var U=new Uint8Array(p);i.inflateRaw(R,U),a[C]=U}}},i.inflateRaw=function(e,t){return i.F.inflate(e,t)},i.inflate=function(e,t){return e[0],e[1],i.inflateRaw(new Uint8Array(e.buffer,e.byteOffset+2,e.length-6),t)},i.deflate=function(e,t){t==null&&(t={level:6});var a=0,o=new Uint8Array(50+Math.floor(1.1*e.length));o[a]=120,o[a+1]=156,a+=2,a=i.F.deflateRaw(e,o,a,t.level);var p=i.adler(e,0,e.length);return o[a+0]=p>>>24&255,o[a+1]=p>>>16&255,o[a+2]=p>>>8&255,o[a+3]=p>>>0&255,new Uint8Array(o.buffer,0,a+4)},i.deflateRaw=function(e,t){t==null&&(t={level:6});var a=new Uint8Array(50+Math.floor(1.1*e.length)),o=i.F.deflateRaw(e,a,o,t.level);return new Uint8Array(a.buffer,0,o)},i.encode=function(e,t){t==null&&(t=!1);var a=0,o=i.bin.writeUint,p=i.bin.writeUshort,b={};for(var r in e){var s=!i._noNeed(r)&&!t,n=e[r],l=i.crc.crc(n,0,n.length);b[r]={cpr:s,usize:n.length,crc:l,file:s?i.deflateRaw(n):n}}for(var r in b)a+=b[r].file.length+30+46+2*i.bin.sizeUTF8(r);a+=22;var m=new Uint8Array(a),C=0,R=[];for(var r in b){var U=b[r];R.push(C),C=i._writeHeader(m,C,r,U,0)}var P=0,x=C;for(var r in b)U=b[r],R.push(C),C=i._writeHeader(m,C,r,U,1,R[P++]);var M=C-x;return o(m,C,101010256),C+=4,p(m,C+=4,P),p(m,C+=2,P),o(m,C+=2,M),o(m,C+=4,x),C+=4,C+=2,m.buffer},i._noNeed=function(e){var t=e.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(t)!=-1},i._writeHeader=function(e,t,a,o,p,b){var r=i.bin.writeUint,s=i.bin.writeUshort,n=o.file;return r(e,t,p==0?67324752:33639248),t+=4,p==1&&(t+=2),s(e,t,20),s(e,t+=2,0),s(e,t+=2,o.cpr?8:0),r(e,t+=2,0),r(e,t+=4,o.crc),r(e,t+=4,n.length),r(e,t+=4,o.usize),s(e,t+=4,i.bin.sizeUTF8(a)),s(e,t+=2,0),t+=2,p==1&&(t+=2,t+=2,r(e,t+=6,b),t+=4),t+=i.bin.writeUTF8(e,t,a),p==0&&(e.set(n,t),t+=n.length),t},i.crc={table:function(){for(var e=new Uint32Array(256),t=0;t<256;t++){for(var a=t,o=0;o<8;o++)1&a?a=3988292384^a>>>1:a>>>=1;e[t]=a}return e}(),update:function(e,t,a,o){for(var p=0;p<o;p++)e=i.crc.table[255&(e^t[a+p])]^e>>>8;return e},crc:function(e,t,a){return 4294967295^i.crc.update(4294967295,e,t,a)}},i.adler=function(e,t,a){for(var o=1,p=0,b=t,r=t+a;b<r;){for(var s=Math.min(b+5552,r);b<s;)p+=o+=e[b++];o%=65521,p%=65521}return p<<16|o},i.bin={readUshort:function(e,t){return e[t]|e[t+1]<<8},writeUshort:function(e,t,a){e[t]=255&a,e[t+1]=a>>8&255},readUint:function(e,t){return 16777216*e[t+3]+(e[t+2]<<16|e[t+1]<<8|e[t])},writeUint:function(e,t,a){e[t]=255&a,e[t+1]=a>>8&255,e[t+2]=a>>16&255,e[t+3]=a>>24&255},readASCII:function(e,t,a){for(var o="",p=0;p<a;p++)o+=String.fromCharCode(e[t+p]);return o},writeASCII:function(e,t,a){for(var o=0;o<a.length;o++)e[t+o]=a.charCodeAt(o)},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,t,a){for(var o,p="",b=0;b<a;b++)p+="%"+i.bin.pad(e[t+b].toString(16));try{o=decodeURIComponent(p)}catch{return i.bin.readASCII(e,t,a)}return o},writeUTF8:function(e,t,a){for(var o=a.length,p=0,b=0;b<o;b++){var r=a.charCodeAt(b);if(!(4294967168&r))e[t+p]=r,p++;else if(!(4294965248&r))e[t+p]=192|r>>6,e[t+p+1]=128|r>>0&63,p+=2;else if(!(4294901760&r))e[t+p]=224|r>>12,e[t+p+1]=128|r>>6&63,e[t+p+2]=128|r>>0&63,p+=3;else{if(4292870144&r)throw"e";e[t+p]=240|r>>18,e[t+p+1]=128|r>>12&63,e[t+p+2]=128|r>>6&63,e[t+p+3]=128|r>>0&63,p+=4}}return p},sizeUTF8:function(e){for(var t=e.length,a=0,o=0;o<t;o++){var p=e.charCodeAt(o);if(!(4294967168&p))a++;else if(!(4294965248&p))a+=2;else if(!(4294901760&p))a+=3;else{if(4292870144&p)throw"e";a+=4}}return a}},i.F={},i.F.deflateRaw=function(e,t,a,o){var p=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][o],b=i.F.U,r=i.F._goodIndex;i.F._hash;var s=i.F._putsE,n=0,l=a<<3,m=0,C=e.length;if(o==0){for(;n<C;)s(t,l,n+(E=Math.min(65535,C-n))==C?1:0),l=i.F._copyExact(e,n,E,t,l+8),n+=E;return l>>>3}var R=b.lits,U=b.strt,P=b.prev,x=0,M=0,k=0,w=0,D=0,h=0;for(C>2&&(U[h=i.F._hash(e,0)]=0),n=0;n<C;n++){if(D=h,n+1<C-2){h=i.F._hash(e,n+1);var c=n+1&32767;P[c]=U[h],U[h]=c}if(m<=n){(x>14e3||M>26697)&&C-n>100&&(m<n&&(R[x]=n-m,x+=2,m=n),l=i.F._writeBlock(n==C-1||m==C?1:0,R,x,w,e,k,n-k,t,l),x=M=w=0,k=n);var A=0;n<C-2&&(A=i.F._bestMatch(e,n,P,D,Math.min(p[2],C-n),p[3]));var E=A>>>16,I=65535&A;if(A!=0){I=65535&A;var T=r(E=A>>>16,b.of0);b.lhst[257+T]++;var y=r(I,b.df0);b.dhst[y]++,w+=b.exb[T]+b.dxb[y],R[x]=E<<23|n-m,R[x+1]=I<<16|T<<8|y,x+=2,m=n+E}else b.lhst[e[n]]++;M++}}for(k==n&&e.length!=0||(m<n&&(R[x]=n-m,x+=2,m=n),l=i.F._writeBlock(1,R,x,w,e,k,n-k,t,l),x=0,M=0,x=M=w=0,k=n);7&l;)l++;return l>>>3},i.F._bestMatch=function(e,t,a,o,p,b){var r=32767&t,s=a[r],n=r-s+32768&32767;if(s==r||o!=i.F._hash(e,t-n))return 0;for(var l=0,m=0,C=Math.min(32767,t);n<=C&&--b!=0&&s!=r;){if(l==0||e[t+l]==e[t+l-n]){var R=i.F._howLong(e,t,n);if(R>l){if(m=n,(l=R)>=p)break;n+2<R&&(R=n+2);for(var U=0,P=0;P<R-2;P++){var x=t-n+P+32768&32767,M=x-a[x]+32768&32767;M>U&&(U=M,s=x)}}}n+=(r=s)-(s=a[r])+32768&32767}return l<<16|m},i.F._howLong=function(e,t,a){if(e[t]!=e[t-a]||e[t+1]!=e[t+1-a]||e[t+2]!=e[t+2-a])return 0;var o=t,p=Math.min(e.length,t+258);for(t+=3;t<p&&e[t]==e[t-a];)t++;return t-o},i.F._hash=function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<4)&65535},i.saved=0,i.F._writeBlock=function(e,t,a,o,p,b,r,s,n){var l,m,C,R,U,P,x,M,k,w=i.F.U,D=i.F._putsF,h=i.F._putsE;w.lhst[256]++,m=(l=i.F.getTrees())[0],C=l[1],R=l[2],U=l[3],P=l[4],x=l[5],M=l[6],k=l[7];var c=32+(n+3&7?8-(n+3&7):0)+(r<<3),A=o+i.F.contSize(w.fltree,w.lhst)+i.F.contSize(w.fdtree,w.dhst),E=o+i.F.contSize(w.ltree,w.lhst)+i.F.contSize(w.dtree,w.dhst);E+=14+3*x+i.F.contSize(w.itree,w.ihst)+(2*w.ihst[16]+3*w.ihst[17]+7*w.ihst[18]);for(var I=0;I<286;I++)w.lhst[I]=0;for(I=0;I<30;I++)w.dhst[I]=0;for(I=0;I<19;I++)w.ihst[I]=0;var T=c<A&&c<E?0:A<E?1:2;if(D(s,n,e),D(s,n+1,T),n+=3,T==0){for(;7&n;)n++;n=i.F._copyExact(p,b,r,s,n)}else{var y,S;if(T==1&&(y=w.fltree,S=w.fdtree),T==2){i.F.makeCodes(w.ltree,m),i.F.revCodes(w.ltree,m),i.F.makeCodes(w.dtree,C),i.F.revCodes(w.dtree,C),i.F.makeCodes(w.itree,R),i.F.revCodes(w.itree,R),y=w.ltree,S=w.dtree,h(s,n,U-257),h(s,n+=5,P-1),h(s,n+=5,x-4),n+=4;for(var g=0;g<x;g++)h(s,n+3*g,w.itree[1+(w.ordr[g]<<1)]);n+=3*x,n=i.F._codeTiny(M,w.itree,s,n),n=i.F._codeTiny(k,w.itree,s,n)}for(var f=b,O=0;O<a;O+=2){for(var F=t[O],N=F>>>23,Q=f+(8388607&F);f<Q;)n=i.F._writeLit(p[f++],y,s,n);if(N!=0){var H=t[O+1],$=H>>16,L=H>>8&255,_=255&H;h(s,n=i.F._writeLit(257+L,y,s,n),N-w.of0[L]),n+=w.exb[L],D(s,n=i.F._writeLit(_,S,s,n),$-w.df0[_]),n+=w.dxb[_],f+=N}}n=i.F._writeLit(256,y,s,n)}return n},i.F._copyExact=function(e,t,a,o,p){var b=p>>>3;return o[b]=a,o[b+1]=a>>>8,o[b+2]=255-o[b],o[b+3]=255-o[b+1],b+=4,o.set(new Uint8Array(e.buffer,t,a),b),p+(a+4<<3)},i.F.getTrees=function(){for(var e=i.F.U,t=i.F._hufTree(e.lhst,e.ltree,15),a=i.F._hufTree(e.dhst,e.dtree,15),o=[],p=i.F._lenCodes(e.ltree,o),b=[],r=i.F._lenCodes(e.dtree,b),s=0;s<o.length;s+=2)e.ihst[o[s]]++;for(s=0;s<b.length;s+=2)e.ihst[b[s]]++;for(var n=i.F._hufTree(e.ihst,e.itree,7),l=19;l>4&&e.itree[1+(e.ordr[l-1]<<1)]==0;)l--;return[t,a,n,p,r,l,o,b]},i.F.getSecond=function(e){for(var t=[],a=0;a<e.length;a+=2)t.push(e[a+1]);return t},i.F.nonZero=function(e){for(var t="",a=0;a<e.length;a+=2)e[a+1]!=0&&(t+=(a>>1)+",");return t},i.F.contSize=function(e,t){for(var a=0,o=0;o<t.length;o++)a+=t[o]*e[1+(o<<1)];return a},i.F._codeTiny=function(e,t,a,o){for(var p=0;p<e.length;p+=2){var b=e[p],r=e[p+1];o=i.F._writeLit(b,t,a,o);var s=b==16?2:b==17?3:7;b>15&&(i.F._putsE(a,o,r,s),o+=s)}return o},i.F._lenCodes=function(e,t){for(var a=e.length;a!=2&&e[a-1]==0;)a-=2;for(var o=0;o<a;o+=2){var p=e[o+1],b=o+3<a?e[o+3]:-1,r=o+5<a?e[o+5]:-1,s=o==0?-1:e[o-1];if(p==0&&b==p&&r==p){for(var n=o+5;n+2<a&&e[n+2]==p;)n+=2;(l=Math.min(n+1-o>>>1,138))<11?t.push(17,l-3):t.push(18,l-11),o+=2*l-2}else if(p==s&&b==p&&r==p){for(n=o+5;n+2<a&&e[n+2]==p;)n+=2;var l=Math.min(n+1-o>>>1,6);t.push(16,l-3),o+=2*l-2}else t.push(p,0)}return a>>>1},i.F._hufTree=function(e,t,a){var o=[],p=e.length,b=t.length,r=0;for(r=0;r<b;r+=2)t[r]=0,t[r+1]=0;for(r=0;r<p;r++)e[r]!=0&&o.push({lit:r,f:e[r]});var s=o.length,n=o.slice(0);if(s==0)return 0;if(s==1){var l=o[0].lit;return n=l==0?1:0,t[1+(l<<1)]=1,t[1+(n<<1)]=1,1}o.sort(function(M,k){return M.f-k.f});var m=o[0],C=o[1],R=0,U=1,P=2;for(o[0]={lit:-1,f:m.f+C.f,l:m,r:C,d:0};U!=s-1;)m=R!=U&&(P==s||o[R].f<o[P].f)?o[R++]:o[P++],C=R!=U&&(P==s||o[R].f<o[P].f)?o[R++]:o[P++],o[U++]={lit:-1,f:m.f+C.f,l:m,r:C};var x=i.F.setDepth(o[U-1],0);for(x>a&&(i.F.restrictDepth(n,a,x),x=a),r=0;r<s;r++)t[1+(n[r].lit<<1)]=n[r].d;return x},i.F.setDepth=function(e,t){return e.lit!=-1?(e.d=t,t):Math.max(i.F.setDepth(e.l,t+1),i.F.setDepth(e.r,t+1))},i.F.restrictDepth=function(e,t,a){var o=0,p=1<<a-t,b=0;for(e.sort(function(s,n){return n.d==s.d?s.f-n.f:n.d-s.d}),o=0;o<e.length&&e[o].d>t;o++){var r=e[o].d;e[o].d=t,b+=p-(1<<a-r)}for(b>>>=a-t;b>0;)(r=e[o].d)<t?(e[o].d++,b-=1<<t-r-1):o++;for(;o>=0;o--)e[o].d==t&&b<0&&(e[o].d--,b++);b!=0&&console.log("debt left")},i.F._goodIndex=function(e,t){var a=0;return t[16|a]<=e&&(a|=16),t[8|a]<=e&&(a|=8),t[4|a]<=e&&(a|=4),t[2|a]<=e&&(a|=2),t[1|a]<=e&&(a|=1),a},i.F._writeLit=function(e,t,a,o){return i.F._putsF(a,o,t[e<<1]),o+t[1+(e<<1)]},i.F.inflate=function(e,t){var a=Uint8Array;if(e[0]==3&&e[1]==0)return t||new a(0);var o=i.F,p=o._bitsF,b=o._bitsE,r=o._decodeTiny,s=o.makeCodes,n=o.codes2map,l=o._get17,m=o.U,C=t==null;C&&(t=new a(e.length>>>2<<3));for(var R,U,P=0,x=0,M=0,k=0,w=0,D=0,h=0,c=0,A=0;P==0;)if(P=p(e,A,1),x=p(e,A+1,2),A+=3,x!=0){if(C&&(t=i.F._check(t,c+(1<<17))),x==1&&(R=m.flmap,U=m.fdmap,D=511,h=31),x==2){M=b(e,A,5)+257,k=b(e,A+5,5)+1,w=b(e,A+10,4)+4,A+=14;for(var E=0;E<38;E+=2)m.itree[E]=0,m.itree[E+1]=0;var I=1;for(E=0;E<w;E++){var T=b(e,A+3*E,3);m.itree[1+(m.ordr[E]<<1)]=T,T>I&&(I=T)}A+=3*w,s(m.itree,I),n(m.itree,I,m.imap),R=m.lmap,U=m.dmap,A=r(m.imap,(1<<I)-1,M+k,e,A,m.ttree);var y=o._copyOut(m.ttree,0,M,m.ltree);D=(1<<y)-1;var S=o._copyOut(m.ttree,M,k,m.dtree);h=(1<<S)-1,s(m.ltree,y),n(m.ltree,y,R),s(m.dtree,S),n(m.dtree,S,U)}for(;;){var g=R[l(e,A)&D];A+=15&g;var f=g>>>4;if(!(f>>>8))t[c++]=f;else{if(f==256)break;var O=c+f-254;if(f>264){var F=m.ldef[f-257];O=c+(F>>>3)+b(e,A,7&F),A+=7&F}var N=U[l(e,A)&h];A+=15&N;var Q=N>>>4,H=m.ddef[Q],$=(H>>>4)+p(e,A,15&H);for(A+=15&H,C&&(t=i.F._check(t,c+(1<<17)));c<O;)t[c]=t[c++-$],t[c]=t[c++-$],t[c]=t[c++-$],t[c]=t[c++-$];c=O}}}else{7&A&&(A+=8-(7&A));var L=4+(A>>>3),_=e[L-4]|e[L-3]<<8;C&&(t=i.F._check(t,c+_)),t.set(new a(e.buffer,e.byteOffset+L,_),c),A=L+_<<3,c+=_}return t.length==c?t:t.slice(0,c)},i.F._check=function(e,t){var a=e.length;if(t<=a)return e;var o=new Uint8Array(Math.max(a<<1,t));return o.set(e,0),o},i.F._decodeTiny=function(e,t,a,o,p,b){for(var r=i.F._bitsE,s=i.F._get17,n=0;n<a;){var l=e[s(o,p)&t];p+=15&l;var m=l>>>4;if(m<=15)b[n]=m,n++;else{var C=0,R=0;m==16?(R=3+r(o,p,2),p+=2,C=b[n-1]):m==17?(R=3+r(o,p,3),p+=3):m==18&&(R=11+r(o,p,7),p+=7);for(var U=n+R;n<U;)b[n]=C,n++}}return p},i.F._copyOut=function(e,t,a,o){for(var p=0,b=0,r=o.length>>>1;b<a;){var s=e[b+t];o[b<<1]=0,o[1+(b<<1)]=s,s>p&&(p=s),b++}for(;b<r;)o[b<<1]=0,o[1+(b<<1)]=0,b++;return p},i.F.makeCodes=function(e,t){for(var a,o,p,b,r=i.F.U,s=e.length,n=r.bl_count,l=0;l<=t;l++)n[l]=0;for(l=1;l<s;l+=2)n[e[l]]++;var m=r.next_code;for(a=0,n[0]=0,o=1;o<=t;o++)a=a+n[o-1]<<1,m[o]=a;for(p=0;p<s;p+=2)(b=e[p+1])!=0&&(e[p]=m[b],m[b]++)},i.F.codes2map=function(e,t,a){for(var o=e.length,p=i.F.U.rev15,b=0;b<o;b+=2)if(e[b+1]!=0)for(var r=b>>1,s=e[b+1],n=r<<4|s,l=t-s,m=e[b]<<l,C=m+(1<<l);m!=C;)a[p[m]>>>15-t]=n,m++},i.F.revCodes=function(e,t){for(var a=i.F.U.rev15,o=15-t,p=0;p<e.length;p+=2){var b=e[p]<<t-e[p+1];e[p]=a[b]>>>o}},i.F._putsE=function(e,t,a){a<<=7&t;var o=t>>>3;e[o]|=a,e[o+1]|=a>>>8},i.F._putsF=function(e,t,a){a<<=7&t;var o=t>>>3;e[o]|=a,e[o+1]|=a>>>8,e[o+2]|=a>>>16},i.F._bitsE=function(e,t,a){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<a)-1},i.F._bitsF=function(e,t,a){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<a)-1},i.F._get17=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)},i.F._get25=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16|e[3+(t>>>3)]<<24)>>>(7&t)},i.F.U=(u=Uint16Array,v=Uint32Array,{next_code:new u(16),bl_count:new u(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new u(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new v(32),flmap:new u(512),fltree:[],fdmap:new u(32),fdtree:[],lmap:new u(32768),ltree:[],ttree:[],dmap:new u(32768),dtree:[],imap:new u(512),itree:[],rev15:new u(32768),lhst:new v(286),dhst:new v(30),ihst:new v(19),lits:new v(15e3),strt:new u(65536),prev:new u(32768)}),function(){for(var e=i.F.U,t=0;t<32768;t++){var a=t;a=(4278255360&(a=(4042322160&(a=(3435973836&(a=(2863311530&a)>>>1|(1431655765&a)<<1))>>>2|(858993459&a)<<2))>>>4|(252645135&a)<<4))>>>8|(16711935&a)<<8,e.rev15[t]=(a>>>16|a<<16)>>>17}function o(p,b,r){for(;b--!=0;)p.push(0,r)}for(t=0;t<32;t++)e.ldef[t]=e.of0[t]<<3|e.exb[t],e.ddef[t]=e.df0[t]<<4|e.dxb[t];o(e.fltree,144,8),o(e.fltree,112,9),o(e.fltree,24,7),o(e.fltree,8,8),i.F.makeCodes(e.fltree,9),i.F.codes2map(e.fltree,9,e.flmap),i.F.revCodes(e.fltree,9),o(e.fdtree,32,5),i.F.makeCodes(e.fdtree,5),i.F.codes2map(e.fdtree,5,e.fdmap),i.F.revCodes(e.fdtree,5),o(e.itree,19,0),o(e.ltree,286,0),o(e.dtree,30,0),o(e.ttree,320,0)}()})();var ln=on({__proto__:null,default:Ke},[Ke]);const ge=function(){var d={nextZero(r,s){for(;r[s]!=0;)s++;return s},readUshort:(r,s)=>r[s]<<8|r[s+1],writeUshort(r,s,n){r[s]=n>>8&255,r[s+1]=255&n},readUint:(r,s)=>16777216*r[s]+(r[s+1]<<16|r[s+2]<<8|r[s+3]),writeUint(r,s,n){r[s]=n>>24&255,r[s+1]=n>>16&255,r[s+2]=n>>8&255,r[s+3]=255&n},readASCII(r,s,n){let l="";for(let m=0;m<n;m++)l+=String.fromCharCode(r[s+m]);return l},writeASCII(r,s,n){for(let l=0;l<n.length;l++)r[s+l]=n.charCodeAt(l)},readBytes(r,s,n){const l=[];for(let m=0;m<n;m++)l.push(r[s+m]);return l},pad:r=>r.length<2?`0${r}`:r,readUTF8(r,s,n){let l,m="";for(let C=0;C<n;C++)m+=`%${d.pad(r[s+C].toString(16))}`;try{l=decodeURIComponent(m)}catch{return d.readASCII(r,s,n)}return l}};function u(r,s,n,l){const m=s*n,C=t(l),R=Math.ceil(s*C/8),U=new Uint8Array(4*m),P=new Uint32Array(U.buffer),{ctype:x}=l,{depth:M}=l,k=d.readUshort;if(x==6){const F=m<<2;if(M==8)for(var w=0;w<F;w+=4)U[w]=r[w],U[w+1]=r[w+1],U[w+2]=r[w+2],U[w+3]=r[w+3];if(M==16)for(w=0;w<F;w++)U[w]=r[w<<1]}else if(x==2){const F=l.tabs.tRNS;if(F==null){if(M==8)for(w=0;w<m;w++){var D=3*w;P[w]=255<<24|r[D+2]<<16|r[D+1]<<8|r[D]}if(M==16)for(w=0;w<m;w++)D=6*w,P[w]=255<<24|r[D+4]<<16|r[D+2]<<8|r[D]}else{var h=F[0];const N=F[1],Q=F[2];if(M==8)for(w=0;w<m;w++){var c=w<<2;D=3*w,P[w]=255<<24|r[D+2]<<16|r[D+1]<<8|r[D],r[D]==h&&r[D+1]==N&&r[D+2]==Q&&(U[c+3]=0)}if(M==16)for(w=0;w<m;w++)c=w<<2,D=6*w,P[w]=255<<24|r[D+4]<<16|r[D+2]<<8|r[D],k(r,D)==h&&k(r,D+2)==N&&k(r,D+4)==Q&&(U[c+3]=0)}}else if(x==3){const F=l.tabs.PLTE,N=l.tabs.tRNS,Q=N?N.length:0;if(M==1)for(var A=0;A<n;A++){var E=A*R,I=A*s;for(w=0;w<s;w++){c=I+w<<2;var T=3*(y=r[E+(w>>3)]>>7-((7&w)<<0)&1);U[c]=F[T],U[c+1]=F[T+1],U[c+2]=F[T+2],U[c+3]=y<Q?N[y]:255}}if(M==2)for(A=0;A<n;A++)for(E=A*R,I=A*s,w=0;w<s;w++)c=I+w<<2,T=3*(y=r[E+(w>>2)]>>6-((3&w)<<1)&3),U[c]=F[T],U[c+1]=F[T+1],U[c+2]=F[T+2],U[c+3]=y<Q?N[y]:255;if(M==4)for(A=0;A<n;A++)for(E=A*R,I=A*s,w=0;w<s;w++)c=I+w<<2,T=3*(y=r[E+(w>>1)]>>4-((1&w)<<2)&15),U[c]=F[T],U[c+1]=F[T+1],U[c+2]=F[T+2],U[c+3]=y<Q?N[y]:255;if(M==8)for(w=0;w<m;w++){var y;c=w<<2,T=3*(y=r[w]),U[c]=F[T],U[c+1]=F[T+1],U[c+2]=F[T+2],U[c+3]=y<Q?N[y]:255}}else if(x==4){if(M==8)for(w=0;w<m;w++){c=w<<2;var S=r[g=w<<1];U[c]=S,U[c+1]=S,U[c+2]=S,U[c+3]=r[g+1]}if(M==16)for(w=0;w<m;w++){var g;c=w<<2,S=r[g=w<<2],U[c]=S,U[c+1]=S,U[c+2]=S,U[c+3]=r[g+2]}}else if(x==0)for(h=l.tabs.tRNS?l.tabs.tRNS:-1,A=0;A<n;A++){const F=A*R,N=A*s;if(M==1)for(var f=0;f<s;f++){var O=(S=255*(r[F+(f>>>3)]>>>7-(7&f)&1))==255*h?0:255;P[N+f]=O<<24|S<<16|S<<8|S}else if(M==2)for(f=0;f<s;f++)O=(S=85*(r[F+(f>>>2)]>>>6-((3&f)<<1)&3))==85*h?0:255,P[N+f]=O<<24|S<<16|S<<8|S;else if(M==4)for(f=0;f<s;f++)O=(S=17*(r[F+(f>>>1)]>>>4-((1&f)<<2)&15))==17*h?0:255,P[N+f]=O<<24|S<<16|S<<8|S;else if(M==8)for(f=0;f<s;f++)O=(S=r[F+f])==h?0:255,P[N+f]=O<<24|S<<16|S<<8|S;else if(M==16)for(f=0;f<s;f++)S=r[F+(f<<1)],O=k(r,F+(f<<1))==h?0:255,P[N+f]=O<<24|S<<16|S<<8|S}return U}function v(r,s,n,l){const m=t(r),C=Math.ceil(n*m/8),R=new Uint8Array((C+1+r.interlace)*l);return s=r.tabs.CgBI?e(s,R):i(s,R),r.interlace==0?s=a(s,r,0,n,l):r.interlace==1&&(s=function(P,x){const M=x.width,k=x.height,w=t(x),D=w>>3,h=Math.ceil(M*w/8),c=new Uint8Array(k*h);let A=0;const E=[0,0,4,0,2,0,1],I=[0,4,0,2,0,1,0],T=[8,8,8,4,4,2,2],y=[8,8,4,4,2,2,1];let S=0;for(;S<7;){const f=T[S],O=y[S];let F=0,N=0,Q=E[S];for(;Q<k;)Q+=f,N++;let H=I[S];for(;H<M;)H+=O,F++;const $=Math.ceil(F*w/8);a(P,x,A,F,N);let L=0,_=E[S];for(;_<k;){let z=I[S],Y=A+L*$<<3;for(;z<M;){var g;if(w==1&&(g=(g=P[Y>>3])>>7-(7&Y)&1,c[_*h+(z>>3)]|=g<<7-((7&z)<<0)),w==2&&(g=(g=P[Y>>3])>>6-(7&Y)&3,c[_*h+(z>>2)]|=g<<6-((3&z)<<1)),w==4&&(g=(g=P[Y>>3])>>4-(7&Y)&15,c[_*h+(z>>1)]|=g<<4-((1&z)<<2)),w>=8){const B=_*h+z*D;for(let W=0;W<D;W++)c[B+W]=P[(Y>>3)+W]}Y+=w,z+=O}L++,_+=f}F*N!=0&&(A+=N*(1+$)),S+=1}return c}(s,r)),s}function i(r,s){return e(new Uint8Array(r.buffer,2,r.length-6),s)}var e=function(){const r={H:{}};return r.H.N=function(s,n){const l=Uint8Array;let m,C,R=0,U=0,P=0,x=0,M=0,k=0,w=0,D=0,h=0;if(s[0]==3&&s[1]==0)return n||new l(0);const c=r.H,A=c.b,E=c.e,I=c.R,T=c.n,y=c.A,S=c.Z,g=c.m,f=n==null;for(f&&(n=new l(s.length>>>2<<5));R==0;)if(R=A(s,h,1),U=A(s,h+1,2),h+=3,U!=0){if(f&&(n=r.H.W(n,D+(1<<17))),U==1&&(m=g.J,C=g.h,k=511,w=31),U==2){P=E(s,h,5)+257,x=E(s,h+5,5)+1,M=E(s,h+10,4)+4,h+=14;let F=1;for(var O=0;O<38;O+=2)g.Q[O]=0,g.Q[O+1]=0;for(O=0;O<M;O++){const H=E(s,h+3*O,3);g.Q[1+(g.X[O]<<1)]=H,H>F&&(F=H)}h+=3*M,T(g.Q,F),y(g.Q,F,g.u),m=g.w,C=g.d,h=I(g.u,(1<<F)-1,P+x,s,h,g.v);const N=c.V(g.v,0,P,g.C);k=(1<<N)-1;const Q=c.V(g.v,P,x,g.D);w=(1<<Q)-1,T(g.C,N),y(g.C,N,m),T(g.D,Q),y(g.D,Q,C)}for(;;){const F=m[S(s,h)&k];h+=15&F;const N=F>>>4;if(!(N>>>8))n[D++]=N;else{if(N==256)break;{let Q=D+N-254;if(N>264){const z=g.q[N-257];Q=D+(z>>>3)+E(s,h,7&z),h+=7&z}const H=C[S(s,h)&w];h+=15&H;const $=H>>>4,L=g.c[$],_=(L>>>4)+A(s,h,15&L);for(h+=15&L;D<Q;)n[D]=n[D++-_],n[D]=n[D++-_],n[D]=n[D++-_],n[D]=n[D++-_];D=Q}}}}else{7&h&&(h+=8-(7&h));const F=4+(h>>>3),N=s[F-4]|s[F-3]<<8;f&&(n=r.H.W(n,D+N)),n.set(new l(s.buffer,s.byteOffset+F,N),D),h=F+N<<3,D+=N}return n.length==D?n:n.slice(0,D)},r.H.W=function(s,n){const l=s.length;if(n<=l)return s;const m=new Uint8Array(l<<1);return m.set(s,0),m},r.H.R=function(s,n,l,m,C,R){const U=r.H.e,P=r.H.Z;let x=0;for(;x<l;){const M=s[P(m,C)&n];C+=15&M;const k=M>>>4;if(k<=15)R[x]=k,x++;else{let w=0,D=0;k==16?(D=3+U(m,C,2),C+=2,w=R[x-1]):k==17?(D=3+U(m,C,3),C+=3):k==18&&(D=11+U(m,C,7),C+=7);const h=x+D;for(;x<h;)R[x]=w,x++}}return C},r.H.V=function(s,n,l,m){let C=0,R=0;const U=m.length>>>1;for(;R<l;){const P=s[R+n];m[R<<1]=0,m[1+(R<<1)]=P,P>C&&(C=P),R++}for(;R<U;)m[R<<1]=0,m[1+(R<<1)]=0,R++;return C},r.H.n=function(s,n){const l=r.H.m,m=s.length;let C,R,U,P;const x=l.j;for(var M=0;M<=n;M++)x[M]=0;for(M=1;M<m;M+=2)x[s[M]]++;const k=l.K;for(C=0,x[0]=0,R=1;R<=n;R++)C=C+x[R-1]<<1,k[R]=C;for(U=0;U<m;U+=2)P=s[U+1],P!=0&&(s[U]=k[P],k[P]++)},r.H.A=function(s,n,l){const m=s.length,C=r.H.m.r;for(let R=0;R<m;R+=2)if(s[R+1]!=0){const U=R>>1,P=s[R+1],x=U<<4|P,M=n-P;let k=s[R]<<M;const w=k+(1<<M);for(;k!=w;)l[C[k]>>>15-n]=x,k++}},r.H.l=function(s,n){const l=r.H.m.r,m=15-n;for(let C=0;C<s.length;C+=2){const R=s[C]<<n-s[C+1];s[C]=l[R]>>>m}},r.H.M=function(s,n,l){l<<=7&n;const m=n>>>3;s[m]|=l,s[m+1]|=l>>>8},r.H.I=function(s,n,l){l<<=7&n;const m=n>>>3;s[m]|=l,s[m+1]|=l>>>8,s[m+2]|=l>>>16},r.H.e=function(s,n,l){return(s[n>>>3]|s[1+(n>>>3)]<<8)>>>(7&n)&(1<<l)-1},r.H.b=function(s,n,l){return(s[n>>>3]|s[1+(n>>>3)]<<8|s[2+(n>>>3)]<<16)>>>(7&n)&(1<<l)-1},r.H.Z=function(s,n){return(s[n>>>3]|s[1+(n>>>3)]<<8|s[2+(n>>>3)]<<16)>>>(7&n)},r.H.i=function(s,n){return(s[n>>>3]|s[1+(n>>>3)]<<8|s[2+(n>>>3)]<<16|s[3+(n>>>3)]<<24)>>>(7&n)},r.H.m=function(){const s=Uint16Array,n=Uint32Array;return{K:new s(16),j:new s(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new s(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new n(32),J:new s(512),_:[],h:new s(32),$:[],w:new s(32768),C:[],v:[],d:new s(32768),D:[],u:new s(512),Q:[],r:new s(32768),s:new n(286),Y:new n(30),a:new n(19),t:new n(15e3),k:new s(65536),g:new s(32768)}}(),function(){const s=r.H.m;for(var n=0;n<32768;n++){let m=n;m=(2863311530&m)>>>1|(1431655765&m)<<1,m=(3435973836&m)>>>2|(858993459&m)<<2,m=(4042322160&m)>>>4|(252645135&m)<<4,m=(4278255360&m)>>>8|(16711935&m)<<8,s.r[n]=(m>>>16|m<<16)>>>17}function l(m,C,R){for(;C--!=0;)m.push(0,R)}for(n=0;n<32;n++)s.q[n]=s.S[n]<<3|s.T[n],s.c[n]=s.p[n]<<4|s.z[n];l(s._,144,8),l(s._,112,9),l(s._,24,7),l(s._,8,8),r.H.n(s._,9),r.H.A(s._,9,s.J),r.H.l(s._,9),l(s.$,32,5),r.H.n(s.$,5),r.H.A(s.$,5,s.h),r.H.l(s.$,5),l(s.Q,19,0),l(s.C,286,0),l(s.D,30,0),l(s.v,320,0)}(),r.H.N}();function t(r){return[1,null,3,1,2,null,4][r.ctype]*r.depth}function a(r,s,n,l,m){let C=t(s);const R=Math.ceil(l*C/8);let U,P;C=Math.ceil(C/8);let x=r[n],M=0;if(x>1&&(r[n]=[0,0,1][x-2]),x==3)for(M=C;M<R;M++)r[M+1]=r[M+1]+(r[M+1-C]>>>1)&255;for(let k=0;k<m;k++)if(U=n+k*R,P=U+k+1,x=r[P-1],M=0,x==0)for(;M<R;M++)r[U+M]=r[P+M];else if(x==1){for(;M<C;M++)r[U+M]=r[P+M];for(;M<R;M++)r[U+M]=r[P+M]+r[U+M-C]}else if(x==2)for(;M<R;M++)r[U+M]=r[P+M]+r[U+M-R];else if(x==3){for(;M<C;M++)r[U+M]=r[P+M]+(r[U+M-R]>>>1);for(;M<R;M++)r[U+M]=r[P+M]+(r[U+M-R]+r[U+M-C]>>>1)}else{for(;M<C;M++)r[U+M]=r[P+M]+o(0,r[U+M-R],0);for(;M<R;M++)r[U+M]=r[P+M]+o(r[U+M-C],r[U+M-R],r[U+M-C-R])}return r}function o(r,s,n){const l=r+s-n,m=l-r,C=l-s,R=l-n;return m*m<=C*C&&m*m<=R*R?r:C*C<=R*R?s:n}function p(r,s,n){n.width=d.readUint(r,s),s+=4,n.height=d.readUint(r,s),s+=4,n.depth=r[s],s++,n.ctype=r[s],s++,n.compress=r[s],s++,n.filter=r[s],s++,n.interlace=r[s],s++}function b(r,s,n,l,m,C,R,U,P){const x=Math.min(s,m),M=Math.min(n,C);let k=0,w=0;for(let S=0;S<M;S++)for(let g=0;g<x;g++)if(R>=0&&U>=0?(k=S*s+g<<2,w=(U+S)*m+R+g<<2):(k=(-U+S)*s-R+g<<2,w=S*m+g<<2),P==0)l[w]=r[k],l[w+1]=r[k+1],l[w+2]=r[k+2],l[w+3]=r[k+3];else if(P==1){var D=r[k+3]*.00392156862745098,h=r[k]*D,c=r[k+1]*D,A=r[k+2]*D,E=l[w+3]*(1/255),I=l[w]*E,T=l[w+1]*E,y=l[w+2]*E;const f=1-D,O=D+E*f,F=O==0?0:1/O;l[w+3]=255*O,l[w+0]=(h+I*f)*F,l[w+1]=(c+T*f)*F,l[w+2]=(A+y*f)*F}else if(P==2)D=r[k+3],h=r[k],c=r[k+1],A=r[k+2],E=l[w+3],I=l[w],T=l[w+1],y=l[w+2],D==E&&h==I&&c==T&&A==y?(l[w]=0,l[w+1]=0,l[w+2]=0,l[w+3]=0):(l[w]=h,l[w+1]=c,l[w+2]=A,l[w+3]=D);else if(P==3){if(D=r[k+3],h=r[k],c=r[k+1],A=r[k+2],E=l[w+3],I=l[w],T=l[w+1],y=l[w+2],D==E&&h==I&&c==T&&A==y)continue;if(D<220&&E>20)return!1}return!0}return{decode:function(s){const n=new Uint8Array(s);let l=8;const m=d,C=m.readUshort,R=m.readUint,U={tabs:{},frames:[]},P=new Uint8Array(n.length);let x,M=0,k=0;const w=[137,80,78,71,13,10,26,10];for(var D=0;D<8;D++)if(n[D]!=w[D])throw"The input is not a PNG file!";for(;l<n.length;){const S=m.readUint(n,l);l+=4;const g=m.readASCII(n,l,4);if(l+=4,g=="IHDR")p(n,l,U);else if(g=="iCCP"){for(var h=l;n[h]!=0;)h++;m.readASCII(n,l,h-l),n[h+1];const f=n.slice(h+2,l+S);let O=null;try{O=i(f)}catch{O=e(f)}U.tabs[g]=O}else if(g=="CgBI")U.tabs[g]=n.slice(l,l+4);else if(g=="IDAT"){for(D=0;D<S;D++)P[M+D]=n[l+D];M+=S}else if(g=="acTL")U.tabs[g]={num_frames:R(n,l),num_plays:R(n,l+4)},x=new Uint8Array(n.length);else if(g=="fcTL"){k!=0&&((y=U.frames[U.frames.length-1]).data=v(U,x.slice(0,k),y.rect.width,y.rect.height),k=0);const f={x:R(n,l+12),y:R(n,l+16),width:R(n,l+4),height:R(n,l+8)};let O=C(n,l+22);O=C(n,l+20)/(O==0?100:O);const F={rect:f,delay:Math.round(1e3*O),dispose:n[l+24],blend:n[l+25]};U.frames.push(F)}else if(g=="fdAT"){for(D=0;D<S-4;D++)x[k+D]=n[l+D+4];k+=S-4}else if(g=="pHYs")U.tabs[g]=[m.readUint(n,l),m.readUint(n,l+4),n[l+8]];else if(g=="cHRM")for(U.tabs[g]=[],D=0;D<8;D++)U.tabs[g].push(m.readUint(n,l+4*D));else if(g=="tEXt"||g=="zTXt"){U.tabs[g]==null&&(U.tabs[g]={});var c=m.nextZero(n,l),A=m.readASCII(n,l,c-l),E=l+S-c-1;if(g=="tEXt")T=m.readASCII(n,c+1,E);else{var I=i(n.slice(c+2,c+2+E));T=m.readUTF8(I,0,I.length)}U.tabs[g][A]=T}else if(g=="iTXt"){U.tabs[g]==null&&(U.tabs[g]={}),c=0,h=l,c=m.nextZero(n,h),A=m.readASCII(n,h,c-h);const f=n[h=c+1];var T;n[h+1],h+=2,c=m.nextZero(n,h),m.readASCII(n,h,c-h),h=c+1,c=m.nextZero(n,h),m.readUTF8(n,h,c-h),E=S-((h=c+1)-l),f==0?T=m.readUTF8(n,h,E):(I=i(n.slice(h,h+E)),T=m.readUTF8(I,0,I.length)),U.tabs[g][A]=T}else if(g=="PLTE")U.tabs[g]=m.readBytes(n,l,S);else if(g=="hIST"){const f=U.tabs.PLTE.length/3;for(U.tabs[g]=[],D=0;D<f;D++)U.tabs[g].push(C(n,l+2*D))}else if(g=="tRNS")U.ctype==3?U.tabs[g]=m.readBytes(n,l,S):U.ctype==0?U.tabs[g]=C(n,l):U.ctype==2&&(U.tabs[g]=[C(n,l),C(n,l+2),C(n,l+4)]);else if(g=="gAMA")U.tabs[g]=m.readUint(n,l)/1e5;else if(g=="sRGB")U.tabs[g]=n[l];else if(g=="bKGD")U.ctype==0||U.ctype==4?U.tabs[g]=[C(n,l)]:U.ctype==2||U.ctype==6?U.tabs[g]=[C(n,l),C(n,l+2),C(n,l+4)]:U.ctype==3&&(U.tabs[g]=n[l]);else if(g=="IEND")break;l+=S,m.readUint(n,l),l+=4}var y;return k!=0&&((y=U.frames[U.frames.length-1]).data=v(U,x.slice(0,k),y.rect.width,y.rect.height)),U.data=v(U,P,U.width,U.height),delete U.compress,delete U.interlace,delete U.filter,U},toRGBA8:function(s){const n=s.width,l=s.height;if(s.tabs.acTL==null)return[u(s.data,n,l,s).buffer];const m=[];s.frames[0].data==null&&(s.frames[0].data=s.data);const C=n*l*4,R=new Uint8Array(C),U=new Uint8Array(C),P=new Uint8Array(C);for(let M=0;M<s.frames.length;M++){const k=s.frames[M],w=k.rect.x,D=k.rect.y,h=k.rect.width,c=k.rect.height,A=u(k.data,h,c,s);if(M!=0)for(var x=0;x<C;x++)P[x]=R[x];if(k.blend==0?b(A,h,c,R,n,l,w,D,0):k.blend==1&&b(A,h,c,R,n,l,w,D,1),m.push(R.buffer.slice(0)),k.dispose!=0){if(k.dispose==1)b(U,h,c,R,n,l,w,D,0);else if(k.dispose==2)for(x=0;x<C;x++)R[x]=P[x]}}return m},_paeth:o,_copyTile:b,_bin:d}}();(function(){const{_copyTile:d}=ge,{_bin:u}=ge,v=ge._paeth;var i={table:function(){const h=new Uint32Array(256);for(let c=0;c<256;c++){let A=c;for(let E=0;E<8;E++)1&A?A=3988292384^A>>>1:A>>>=1;h[c]=A}return h}(),update(h,c,A,E){for(let I=0;I<E;I++)h=i.table[255&(h^c[A+I])]^h>>>8;return h},crc:(h,c,A)=>4294967295^i.update(4294967295,h,c,A)};function e(h,c,A,E){c[A]+=h[0]*E>>4,c[A+1]+=h[1]*E>>4,c[A+2]+=h[2]*E>>4,c[A+3]+=h[3]*E>>4}function t(h){return Math.max(0,Math.min(255,h))}function a(h,c){const A=h[0]-c[0],E=h[1]-c[1],I=h[2]-c[2],T=h[3]-c[3];return A*A+E*E+I*I+T*T}function o(h,c,A,E,I,T,y){y==null&&(y=1);const S=E.length,g=[];for(var f=0;f<S;f++){const _=E[f];g.push([_>>>0&255,_>>>8&255,_>>>16&255,_>>>24&255])}for(f=0;f<S;f++){let _=4294967295;for(var O=0,F=0;F<S;F++){var N=a(g[f],g[F]);F!=f&&N<_&&(_=N,O=F)}}const Q=new Uint32Array(I.buffer),H=new Int16Array(c*A*4),$=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(f=0;f<$.length;f++)$[f]=255*(($[f]+.5)/16-.5);for(let _=0;_<A;_++)for(let z=0;z<c;z++){var L;f=4*(_*c+z),y!=2?L=[t(h[f]+H[f]),t(h[f+1]+H[f+1]),t(h[f+2]+H[f+2]),t(h[f+3]+H[f+3])]:(N=$[4*(3&_)+(3&z)],L=[t(h[f]+N),t(h[f+1]+N),t(h[f+2]+N),t(h[f+3]+N)]),O=0;let Y=16777215;for(F=0;F<S;F++){const q=a(L,g[F]);q<Y&&(Y=q,O=F)}const B=g[O],W=[L[0]-B[0],L[1]-B[1],L[2]-B[2],L[3]-B[3]];y==1&&(z!=c-1&&e(W,H,f+4,7),_!=A-1&&(z!=0&&e(W,H,f+4*c-4,3),e(W,H,f+4*c,5),z!=c-1&&e(W,H,f+4*c+4,1))),T[f>>2]=O,Q[f>>2]=E[O]}}function p(h,c,A,E,I){I==null&&(I={});const{crc:T}=i,y=u.writeUint,S=u.writeUshort,g=u.writeASCII;let f=8;const O=h.frames.length>1;let F,N=!1,Q=33+(O?20:0);if(I.sRGB!=null&&(Q+=13),I.pHYs!=null&&(Q+=21),I.iCCP!=null&&(F=pako.deflate(I.iCCP),Q+=21+F.length+4),h.ctype==3){for(var H=h.plte.length,$=0;$<H;$++)h.plte[$]>>>24!=255&&(N=!0);Q+=8+3*H+4+(N?8+1*H+4:0)}for(var L=0;L<h.frames.length;L++)O&&(Q+=38),Q+=(B=h.frames[L]).cimg.length+12,L!=0&&(Q+=4);Q+=12;const _=new Uint8Array(Q),z=[137,80,78,71,13,10,26,10];for($=0;$<8;$++)_[$]=z[$];if(y(_,f,13),f+=4,g(_,f,"IHDR"),f+=4,y(_,f,c),f+=4,y(_,f,A),f+=4,_[f]=h.depth,f++,_[f]=h.ctype,f++,_[f]=0,f++,_[f]=0,f++,_[f]=0,f++,y(_,f,T(_,f-17,17)),f+=4,I.sRGB!=null&&(y(_,f,1),f+=4,g(_,f,"sRGB"),f+=4,_[f]=I.sRGB,f++,y(_,f,T(_,f-5,5)),f+=4),I.iCCP!=null){const W=13+F.length;y(_,f,W),f+=4,g(_,f,"iCCP"),f+=4,g(_,f,"ICC profile"),f+=11,f+=2,_.set(F,f),f+=F.length,y(_,f,T(_,f-(W+4),W+4)),f+=4}if(I.pHYs!=null&&(y(_,f,9),f+=4,g(_,f,"pHYs"),f+=4,y(_,f,I.pHYs[0]),f+=4,y(_,f,I.pHYs[1]),f+=4,_[f]=I.pHYs[2],f++,y(_,f,T(_,f-13,13)),f+=4),O&&(y(_,f,8),f+=4,g(_,f,"acTL"),f+=4,y(_,f,h.frames.length),f+=4,y(_,f,I.loop!=null?I.loop:0),f+=4,y(_,f,T(_,f-12,12)),f+=4),h.ctype==3){for(y(_,f,3*(H=h.plte.length)),f+=4,g(_,f,"PLTE"),f+=4,$=0;$<H;$++){const W=3*$,q=h.plte[$],V=255&q,te=q>>>8&255,Ce=q>>>16&255;_[f+W+0]=V,_[f+W+1]=te,_[f+W+2]=Ce}if(f+=3*H,y(_,f,T(_,f-3*H-4,3*H+4)),f+=4,N){for(y(_,f,H),f+=4,g(_,f,"tRNS"),f+=4,$=0;$<H;$++)_[f+$]=h.plte[$]>>>24&255;f+=H,y(_,f,T(_,f-H-4,H+4)),f+=4}}let Y=0;for(L=0;L<h.frames.length;L++){var B=h.frames[L];O&&(y(_,f,26),f+=4,g(_,f,"fcTL"),f+=4,y(_,f,Y++),f+=4,y(_,f,B.rect.width),f+=4,y(_,f,B.rect.height),f+=4,y(_,f,B.rect.x),f+=4,y(_,f,B.rect.y),f+=4,S(_,f,E[L]),f+=2,S(_,f,1e3),f+=2,_[f]=B.dispose,f++,_[f]=B.blend,f++,y(_,f,T(_,f-30,30)),f+=4);const W=B.cimg;y(_,f,(H=W.length)+(L==0?0:4)),f+=4;const q=f;g(_,f,L==0?"IDAT":"fdAT"),f+=4,L!=0&&(y(_,f,Y++),f+=4),_.set(W,f),f+=H,y(_,f,T(_,q,f-q)),f+=4}return y(_,f,0),f+=4,g(_,f,"IEND"),f+=4,y(_,f,T(_,f-4,4)),f+=4,_.buffer}function b(h,c,A){for(let E=0;E<h.frames.length;E++){const I=h.frames[E];I.rect.width;const T=I.rect.height,y=new Uint8Array(T*I.bpl+T);I.cimg=l(I.img,T,I.bpp,I.bpl,y,c,A)}}function r(h,c,A,E,I){const T=I[0],y=I[1],S=I[2],g=I[3],f=I[4],O=I[5];let F=6,N=8,Q=255;for(var H=0;H<h.length;H++){const ie=new Uint8Array(h[H]);for(var $=ie.length,L=0;L<$;L+=4)Q&=ie[L+3]}const _=Q!=255,z=function(Z,K,ne,oe,J,ue){const ee=[];for(var j=0;j<Z.length;j++){const ae=new Uint8Array(Z[j]),he=new Uint32Array(ae.buffer);var ce;let de=0,we=0,me=K,Se=ne,Ve=oe?1:0;if(j!=0){const Dt=ue||oe||j==1||ee[j-2].dispose!=0?1:2;let Je=0,lt=1e9;for(let Le=0;Le<Dt;Le++){var Ue=new Uint8Array(Z[j-1-Le]);const xt=new Uint32Array(Z[j-1-Le]);let Ie=K,Ee=ne,xe=-1,He=-1;for(let Me=0;Me<ne;Me++)for(let Re=0;Re<K;Re++)he[se=Me*K+Re]!=xt[se]&&(Re<Ie&&(Ie=Re),Re>xe&&(xe=Re),Me<Ee&&(Ee=Me),Me>He&&(He=Me));xe==-1&&(Ie=Ee=xe=He=0),J&&((1&Ie)==1&&Ie--,(1&Ee)==1&&Ee--);const ut=(xe-Ie+1)*(He-Ee+1);ut<lt&&(lt=ut,Je=Le,de=Ie,we=Ee,me=xe-Ie+1,Se=He-Ee+1)}Ue=new Uint8Array(Z[j-1-Je]),Je==1&&(ee[j-1].dispose=2),ce=new Uint8Array(me*Se*4),d(Ue,K,ne,ce,me,Se,-de,-we,0),Ve=d(ae,K,ne,ce,me,Se,-de,-we,3)?1:0,Ve==1?n(ae,K,ne,ce,{x:de,y:we,width:me,height:Se}):d(ae,K,ne,ce,me,Se,-de,-we,0)}else ce=ae.slice(0);ee.push({rect:{x:de,y:we,width:me,height:Se},img:ce,blend:Ve,dispose:0})}if(oe)for(j=0;j<ee.length;j++){if((Fe=ee[j]).blend==1)continue;const ae=Fe.rect,he=ee[j-1].rect,de=Math.min(ae.x,he.x),we=Math.min(ae.y,he.y),me={x:de,y:we,width:Math.max(ae.x+ae.width,he.x+he.width)-de,height:Math.max(ae.y+ae.height,he.y+he.height)-we};ee[j-1].dispose=1,j-1!=0&&s(Z,K,ne,ee,j-1,me,J),s(Z,K,ne,ee,j,me,J)}let ze=0;if(Z.length!=1)for(var se=0;se<ee.length;se++){var Fe;ze+=(Fe=ee[se]).rect.width*Fe.rect.height}return ee}(h,c,A,T,y,S),Y={},B=[],W=[];if(E!=0){const ie=[];for(L=0;L<z.length;L++)ie.push(z[L].img.buffer);const Z=function(J){let ue=0;for(var ee=0;ee<J.length;ee++)ue+=J[ee].byteLength;const j=new Uint8Array(ue);let ce=0;for(ee=0;ee<J.length;ee++){const Ue=new Uint8Array(J[ee]),ze=Ue.length;for(let se=0;se<ze;se+=4){let Fe=Ue[se],ae=Ue[se+1],he=Ue[se+2];const de=Ue[se+3];de==0&&(Fe=ae=he=0),j[ce+se]=Fe,j[ce+se+1]=ae,j[ce+se+2]=he,j[ce+se+3]=de}ce+=ze}return j.buffer}(ie),K=C(Z,E);for(L=0;L<K.plte.length;L++)B.push(K.plte[L].est.rgba);let ne=0;for(L=0;L<z.length;L++){const oe=(V=z[L]).img.length;var q=new Uint8Array(K.inds.buffer,ne>>2,oe>>2);W.push(q);const J=new Uint8Array(K.abuf,ne,oe);O&&o(V.img,V.rect.width,V.rect.height,B,J,q),V.img.set(J),ne+=oe}}else for(H=0;H<z.length;H++){var V=z[H];const ie=new Uint32Array(V.img.buffer);var te=V.rect.width;for($=ie.length,q=new Uint8Array($),W.push(q),L=0;L<$;L++){const Z=ie[L];if(L!=0&&Z==ie[L-1])q[L]=q[L-1];else if(L>te&&Z==ie[L-te])q[L]=q[L-te];else{let K=Y[Z];if(K==null&&(Y[Z]=K=B.length,B.push(Z),B.length>=300))break;q[L]=K}}}const Ce=B.length;for(Ce<=256&&f==0&&(N=Ce<=2?1:Ce<=4?2:Ce<=16?4:8,N=Math.max(N,g)),H=0;H<z.length;H++){(V=z[H]).rect.x,V.rect.y,te=V.rect.width;const ie=V.rect.height;let Z=V.img;new Uint32Array(Z.buffer);let K=4*te,ne=4;if(Ce<=256&&f==0){K=Math.ceil(N*te/8);var pe=new Uint8Array(K*ie);const oe=W[H];for(let J=0;J<ie;J++){L=J*K;const ue=J*te;if(N==8)for(var X=0;X<te;X++)pe[L+X]=oe[ue+X];else if(N==4)for(X=0;X<te;X++)pe[L+(X>>1)]|=oe[ue+X]<<4-4*(1&X);else if(N==2)for(X=0;X<te;X++)pe[L+(X>>2)]|=oe[ue+X]<<6-2*(3&X);else if(N==1)for(X=0;X<te;X++)pe[L+(X>>3)]|=oe[ue+X]<<7-1*(7&X)}Z=pe,F=3,ne=1}else if(_==0&&z.length==1){pe=new Uint8Array(te*ie*3);const oe=te*ie;for(L=0;L<oe;L++){const J=3*L,ue=4*L;pe[J]=Z[ue],pe[J+1]=Z[ue+1],pe[J+2]=Z[ue+2]}Z=pe,F=2,ne=3,K=3*te}V.img=Z,V.bpl=K,V.bpp=ne}return{ctype:F,depth:N,plte:B,frames:z}}function s(h,c,A,E,I,T,y){const S=Uint8Array,g=Uint32Array,f=new S(h[I-1]),O=new g(h[I-1]),F=I+1<h.length?new S(h[I+1]):null,N=new S(h[I]),Q=new g(N.buffer);let H=c,$=A,L=-1,_=-1;for(let Y=0;Y<T.height;Y++)for(let B=0;B<T.width;B++){const W=T.x+B,q=T.y+Y,V=q*c+W,te=Q[V];te==0||E[I-1].dispose==0&&O[V]==te&&(F==null||F[4*V+3]!=0)||(W<H&&(H=W),W>L&&(L=W),q<$&&($=q),q>_&&(_=q))}L==-1&&(H=$=L=_=0),y&&((1&H)==1&&H--,(1&$)==1&&$--),T={x:H,y:$,width:L-H+1,height:_-$+1};const z=E[I];z.rect=T,z.blend=1,z.img=new Uint8Array(T.width*T.height*4),E[I-1].dispose==0?(d(f,c,A,z.img,T.width,T.height,-T.x,-T.y,0),n(N,c,A,z.img,T)):d(N,c,A,z.img,T.width,T.height,-T.x,-T.y,0)}function n(h,c,A,E,I){d(h,c,A,E,I.width,I.height,-I.x,-I.y,2)}function l(h,c,A,E,I,T,y){const S=[];let g,f=[0,1,2,3,4];T!=-1?f=[T]:(c*E>5e5||A==1)&&(f=[0]),y&&(g={level:0});const O=ln;for(var F=0;F<f.length;F++){for(let H=0;H<c;H++)m(I,h,H,E,A,f[F]);S.push(O.deflate(I,g))}let N,Q=1e9;for(F=0;F<S.length;F++)S[F].length<Q&&(N=F,Q=S[F].length);return S[N]}function m(h,c,A,E,I,T){const y=A*E;let S=y+A;if(h[S]=T,S++,T==0)if(E<500)for(var g=0;g<E;g++)h[S+g]=c[y+g];else h.set(new Uint8Array(c.buffer,y,E),S);else if(T==1){for(g=0;g<I;g++)h[S+g]=c[y+g];for(g=I;g<E;g++)h[S+g]=c[y+g]-c[y+g-I]+256&255}else if(A==0){for(g=0;g<I;g++)h[S+g]=c[y+g];if(T==2)for(g=I;g<E;g++)h[S+g]=c[y+g];if(T==3)for(g=I;g<E;g++)h[S+g]=c[y+g]-(c[y+g-I]>>1)+256&255;if(T==4)for(g=I;g<E;g++)h[S+g]=c[y+g]-v(c[y+g-I],0,0)+256&255}else{if(T==2)for(g=0;g<E;g++)h[S+g]=c[y+g]+256-c[y+g-E]&255;if(T==3){for(g=0;g<I;g++)h[S+g]=c[y+g]+256-(c[y+g-E]>>1)&255;for(g=I;g<E;g++)h[S+g]=c[y+g]+256-(c[y+g-E]+c[y+g-I]>>1)&255}if(T==4){for(g=0;g<I;g++)h[S+g]=c[y+g]+256-v(0,c[y+g-E],0)&255;for(g=I;g<E;g++)h[S+g]=c[y+g]+256-v(c[y+g-I],c[y+g-E],c[y+g-I-E])&255}}}function C(h,c){const A=new Uint8Array(h),E=A.slice(0),I=new Uint32Array(E.buffer),T=R(E,c),y=T[0],S=T[1],g=A.length,f=new Uint8Array(g>>2);let O;if(A.length<2e7)for(var F=0;F<g;F+=4)O=U(y,N=A[F]*(1/255),Q=A[F+1]*(1/255),H=A[F+2]*(1/255),$=A[F+3]*(1/255)),f[F>>2]=O.ind,I[F>>2]=O.est.rgba;else for(F=0;F<g;F+=4){var N=A[F]*.00392156862745098,Q=A[F+1]*(1/255),H=A[F+2]*(1/255),$=A[F+3]*(1/255);for(O=y;O.left;)O=P(O.est,N,Q,H,$)<=0?O.left:O.right;f[F>>2]=O.ind,I[F>>2]=O.est.rgba}return{abuf:E.buffer,inds:f,plte:S}}function R(h,c,A){A==null&&(A=1e-4);const E=new Uint32Array(h.buffer),I={i0:0,i1:h.length,bst:null,est:null,tdst:0,left:null,right:null};I.bst=k(h,I.i0,I.i1),I.est=w(I.bst);const T=[I];for(;T.length<c;){let S=0,g=0;for(var y=0;y<T.length;y++)T[y].est.L>S&&(S=T[y].est.L,g=y);if(S<A)break;const f=T[g],O=x(h,E,f.i0,f.i1,f.est.e,f.est.eMq255);if(f.i0>=O||f.i1<=O){f.est.L=0;continue}const F={i0:f.i0,i1:O,bst:null,est:null,tdst:0,left:null,right:null};F.bst=k(h,F.i0,F.i1),F.est=w(F.bst);const N={i0:O,i1:f.i1,bst:null,est:null,tdst:0,left:null,right:null};for(N.bst={R:[],m:[],N:f.bst.N-F.bst.N},y=0;y<16;y++)N.bst.R[y]=f.bst.R[y]-F.bst.R[y];for(y=0;y<4;y++)N.bst.m[y]=f.bst.m[y]-F.bst.m[y];N.est=w(N.bst),f.left=F,f.right=N,T[g]=F,T.push(N)}for(T.sort((S,g)=>g.bst.N-S.bst.N),y=0;y<T.length;y++)T[y].ind=y;return[I,T]}function U(h,c,A,E,I){if(h.left==null)return h.tdst=function(F,N,Q,H,$){const L=N-F[0],_=Q-F[1],z=H-F[2],Y=$-F[3];return L*L+_*_+z*z+Y*Y}(h.est.q,c,A,E,I),h;const T=P(h.est,c,A,E,I);let y=h.left,S=h.right;T>0&&(y=h.right,S=h.left);const g=U(y,c,A,E,I);if(g.tdst<=T*T)return g;const f=U(S,c,A,E,I);return f.tdst<g.tdst?f:g}function P(h,c,A,E,I){const{e:T}=h;return T[0]*c+T[1]*A+T[2]*E+T[3]*I-h.eMq}function x(h,c,A,E,I,T){for(E-=4;A<E;){for(;M(h,A,I)<=T;)A+=4;for(;M(h,E,I)>T;)E-=4;if(A>=E)break;const y=c[A>>2];c[A>>2]=c[E>>2],c[E>>2]=y,A+=4,E-=4}for(;M(h,A,I)>T;)A-=4;return A+4}function M(h,c,A){return h[c]*A[0]+h[c+1]*A[1]+h[c+2]*A[2]+h[c+3]*A[3]}function k(h,c,A){const E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],I=[0,0,0,0],T=A-c>>2;for(let y=c;y<A;y+=4){const S=h[y]*.00392156862745098,g=h[y+1]*(1/255),f=h[y+2]*(1/255),O=h[y+3]*(1/255);I[0]+=S,I[1]+=g,I[2]+=f,I[3]+=O,E[0]+=S*S,E[1]+=S*g,E[2]+=S*f,E[3]+=S*O,E[5]+=g*g,E[6]+=g*f,E[7]+=g*O,E[10]+=f*f,E[11]+=f*O,E[15]+=O*O}return E[4]=E[1],E[8]=E[2],E[9]=E[6],E[12]=E[3],E[13]=E[7],E[14]=E[11],{R:E,m:I,N:T}}function w(h){const{R:c}=h,{m:A}=h,{N:E}=h,I=A[0],T=A[1],y=A[2],S=A[3],g=E==0?0:1/E,f=[c[0]-I*I*g,c[1]-I*T*g,c[2]-I*y*g,c[3]-I*S*g,c[4]-T*I*g,c[5]-T*T*g,c[6]-T*y*g,c[7]-T*S*g,c[8]-y*I*g,c[9]-y*T*g,c[10]-y*y*g,c[11]-y*S*g,c[12]-S*I*g,c[13]-S*T*g,c[14]-S*y*g,c[15]-S*S*g],O=f,F=D;let N=[Math.random(),Math.random(),Math.random(),Math.random()],Q=0,H=0;if(E!=0)for(let L=0;L<16&&(N=F.multVec(O,N),H=Math.sqrt(F.dot(N,N)),N=F.sml(1/H,N),!(L!=0&&Math.abs(H-Q)<1e-9));L++)Q=H;const $=[I*g,T*g,y*g,S*g];return{Cov:f,q:$,e:N,L:Q,eMq255:F.dot(F.sml(255,$),N),eMq:F.dot(N,$),rgba:(Math.round(255*$[3])<<24|Math.round(255*$[2])<<16|Math.round(255*$[1])<<8|Math.round(255*$[0])<<0)>>>0}}var D={multVec:(h,c)=>[h[0]*c[0]+h[1]*c[1]+h[2]*c[2]+h[3]*c[3],h[4]*c[0]+h[5]*c[1]+h[6]*c[2]+h[7]*c[3],h[8]*c[0]+h[9]*c[1]+h[10]*c[2]+h[11]*c[3],h[12]*c[0]+h[13]*c[1]+h[14]*c[2]+h[15]*c[3]],dot:(h,c)=>h[0]*c[0]+h[1]*c[1]+h[2]*c[2]+h[3]*c[3],sml:(h,c)=>[h*c[0],h*c[1],h*c[2],h*c[3]]};ge.encode=function(c,A,E,I,T,y,S){I==null&&(I=0),S==null&&(S=!1);const g=r(c,A,E,I,[!1,!1,!1,0,S,!1]);return b(g,-1),p(g,A,E,T,y)},ge.encodeLL=function(c,A,E,I,T,y,S,g){const f={ctype:0+(I==1?0:2)+(T==0?0:4),depth:y,frames:[]},O=(I+T)*y,F=O*A;for(let N=0;N<c.length;N++)f.frames.push({rect:{x:0,y:0,width:A,height:E},img:new Uint8Array(c[N]),blend:0,dispose:1,bpp:Math.ceil(O/8),bpl:Math.ceil(F/8)});return b(f,0,!0),p(f,A,E,S,g)},ge.encode.compress=r,ge.encode.dither=o,ge.quantize=C,ge.quantize.getKDtree=R,ge.quantize.getNearest=U})();const At={toArrayBuffer(d,u){const v=d.width,i=d.height,e=v<<2,t=d.getContext("2d").getImageData(0,0,v,i),a=new Uint32Array(t.data.buffer),o=(32*v+31)/32<<2,p=o*i,b=122+p,r=new ArrayBuffer(b),s=new DataView(r),n=1<<20;let l,m,C,R,U=n,P=0,x=0,M=0;function k(h){s.setUint16(x,h,!0),x+=2}function w(h){s.setUint32(x,h,!0),x+=4}function D(h){x+=h}k(19778),w(b),D(4),w(122),w(108),w(v),w(-i>>>0),k(1),k(32),w(3),w(p),w(2835),w(2835),D(8),w(16711680),w(65280),w(255),w(4278190080),w(1466527264),function h(){for(;P<i&&U>0;){for(R=122+P*o,l=0;l<e;)U--,m=a[M++],C=m>>>24,s.setUint32(R+l,m<<8|C),l+=4;P++}M<a.length?(U=n,setTimeout(h,At._dly)):u(r)}()},toBlob(d,u){this.toArrayBuffer(d,v=>{u(new Blob([v],{type:"image/bmp"}))})},_dly:9};var le={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},un={[le.CHROME]:16384,[le.FIREFOX]:11180,[le.DESKTOP_SAFARI]:16384,[le.IE]:8192,[le.IOS]:4096,[le.ETC]:8192};const at=typeof window<"u",Ut=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,je=at&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),cn=(at||Ut)&&(je&&je.getOriginalSymbol(window,"File")||typeof File<"u"&&File),It=(at||Ut)&&(je&&je.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function ft(d,u,v=Date.now()){return new Promise(i=>{const e=d.split(","),t=e[0].match(/:(.*?);/)[1],a=globalThis.atob(e[1]);let o=a.length;const p=new Uint8Array(o);for(;o--;)p[o]=a.charCodeAt(o);const b=new Blob([p],{type:t});b.name=u,b.lastModified=v,i(b)})}function Et(d){return new Promise((u,v)=>{const i=new It;i.onload=()=>u(i.result),i.onerror=e=>v(e),i.readAsDataURL(d)})}function Tt(d){return new Promise((u,v)=>{const i=new Image;i.onload=()=>u(i),i.onerror=e=>v(e),i.src=d})}function _e(){if(_e.cachedResult!==void 0)return _e.cachedResult;let d=le.ETC;const{userAgent:u}=navigator;return/Chrom(e|ium)/i.test(u)?d=le.CHROME:/iP(ad|od|hone)/i.test(u)&&/WebKit/i.test(u)?d=le.IOS:/Safari/i.test(u)?d=le.DESKTOP_SAFARI:/Firefox/i.test(u)?d=le.FIREFOX:(/MSIE/i.test(u)||document.documentMode)&&(d=le.IE),_e.cachedResult=d,_e.cachedResult}function Ct(d,u){const v=_e(),i=un[v];let e=d,t=u,a=e*t;const o=e>t?t/e:e/t;for(;a>i*i;){const p=(i+e)/2,b=(i+t)/2;p<b?(t=b,e=b*o):(t=p*o,e=p),a=e*t}return{width:e,height:t}}function Xe(d,u){let v,i;try{if(v=new OffscreenCanvas(d,u),i=v.getContext("2d"),i===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{v=document.createElement("canvas"),i=v.getContext("2d")}return v.width=d,v.height=u,[v,i]}function Ft(d,u){const{width:v,height:i}=Ct(d.width,d.height),[e,t]=Xe(v,i);return u&&/jpe?g/.test(u)&&(t.fillStyle="white",t.fillRect(0,0,e.width,e.height)),t.drawImage(d,0,0,e.width,e.height),e}function qe(){return qe.cachedResult!==void 0||(qe.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),qe.cachedResult}function Ye(d,u={}){return new Promise(function(v,i){let e,t;var a=function(){try{return t=Ft(e,u.fileType||d.type),v([e,t])}catch(p){return i(p)}},o=function(p){try{var b=function(r){try{throw r}catch(s){return i(s)}};try{let r;return Et(d).then(function(s){try{return r=s,Tt(r).then(function(n){try{return e=n,function(){try{return a()}catch(l){return i(l)}}()}catch(l){return b(l)}},b)}catch(n){return b(n)}},b)}catch(r){b(r)}}catch(r){return i(r)}};try{if(qe()||[le.DESKTOP_SAFARI,le.MOBILE_SAFARI].includes(_e()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(d).then(function(p){try{return e=p,a()}catch{return o()}},o)}catch{o()}})}function Ze(d,u,v,i,e=1){return new Promise(function(t,a){let o;if(u==="image/png"){let b,r,s;return b=d.getContext("2d"),{data:r}=b.getImageData(0,0,d.width,d.height),s=ge.encode([r.buffer],d.width,d.height,4096*e),o=new Blob([s],{type:u}),o.name=v,o.lastModified=i,p.call(this)}{let b=function(){return p.call(this)};if(u==="image/bmp")return new Promise(r=>At.toBlob(d,r)).then((function(r){try{return o=r,o.name=v,o.lastModified=i,b.call(this)}catch(s){return a(s)}}).bind(this),a);{let r=function(){return b.call(this)};if(typeof OffscreenCanvas=="function"&&d instanceof OffscreenCanvas)return d.convertToBlob({type:u,quality:e}).then((function(s){try{return o=s,o.name=v,o.lastModified=i,r.call(this)}catch(n){return a(n)}}).bind(this),a);{let s;return s=d.toDataURL(u,e),ft(s,v,i).then((function(n){try{return o=n,r.call(this)}catch(l){return a(l)}}).bind(this),a)}}}function p(){return t(o)}})}function ve(d){d.width=0,d.height=0}function Pe(){return new Promise(function(d,u){let v,i,e,t;return Pe.cachedResult!==void 0?d(Pe.cachedResult):ft("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(a){try{return v=a,Ye(v).then(function(o){try{return i=o[1],Ze(i,v.type,v.name,v.lastModified).then(function(p){try{return e=p,ve(i),Ye(e).then(function(b){try{return t=b[0],Pe.cachedResult=t.width===1&&t.height===2,d(Pe.cachedResult)}catch(r){return u(r)}},u)}catch(b){return u(b)}},u)}catch(p){return u(p)}},u)}catch(o){return u(o)}},u)})}function St(d){return new Promise((u,v)=>{const i=new It;i.onload=e=>{const t=new DataView(e.target.result);if(t.getUint16(0,!1)!=65496)return u(-2);const a=t.byteLength;let o=2;for(;o<a;){if(t.getUint16(o+2,!1)<=8)return u(-1);const p=t.getUint16(o,!1);if(o+=2,p==65505){if(t.getUint32(o+=2,!1)!=1165519206)return u(-1);const b=t.getUint16(o+=6,!1)==18761;o+=t.getUint32(o+4,b);const r=t.getUint16(o,b);o+=2;for(let s=0;s<r;s++)if(t.getUint16(o+12*s,b)==274)return u(t.getUint16(o+12*s+8,b))}else{if((65280&p)!=65280)break;o+=t.getUint16(o,!1)}}return u(-1)},i.onerror=e=>v(e),i.readAsArrayBuffer(d)})}function Mt(d,u){const{width:v}=d,{height:i}=d,{maxWidthOrHeight:e}=u;let t,a=d;return isFinite(e)&&(v>e||i>e)&&([a,t]=Xe(v,i),v>i?(a.width=e,a.height=i/v*e):(a.width=v/i*e,a.height=e),t.drawImage(d,0,0,a.width,a.height),ve(d)),a}function Rt(d,u){const{width:v}=d,{height:i}=d,[e,t]=Xe(v,i);switch(u>4&&u<9?(e.width=i,e.height=v):(e.width=v,e.height=i),u){case 2:t.transform(-1,0,0,1,v,0);break;case 3:t.transform(-1,0,0,-1,v,i);break;case 4:t.transform(1,0,0,-1,0,i);break;case 5:t.transform(0,1,1,0,0,0);break;case 6:t.transform(0,1,-1,0,i,0);break;case 7:t.transform(0,-1,-1,0,i,v);break;case 8:t.transform(0,-1,1,0,0,v)}return t.drawImage(d,0,0,v,i),ve(d),e}function ht(d,u,v=0){return new Promise(function(i,e){let t,a,o,p,b,r,s,n,l,m,C,R,U,P,x,M,k,w,D,h;function c(E=5){if(u.signal&&u.signal.aborted)throw u.signal.reason;t+=E,u.onProgress(Math.min(t,100))}function A(E){if(u.signal&&u.signal.aborted)throw u.signal.reason;t=Math.min(Math.max(E,t),100),u.onProgress(t)}return t=v,a=u.maxIteration||10,o=1024*u.maxSizeMB*1024,c(),Ye(d,u).then((function(E){try{return[,p]=E,c(),b=Mt(p,u),c(),new Promise(function(I,T){var y;if(!(y=u.exifOrientation))return St(d).then((function(g){try{return y=g,S.call(this)}catch(f){return T(f)}}).bind(this),T);function S(){return I(y)}return S.call(this)}).then((function(I){try{return r=I,c(),Pe().then((function(T){try{return s=T?b:Rt(b,r),c(),n=u.initialQuality||1,l=u.fileType||d.type,Ze(s,l,d.name,d.lastModified,n).then((function(y){try{{let g=function(){if(a--&&(x>o||x>U)){let O,F;return O=h?.95*D.width:D.width,F=h?.95*D.height:D.height,[k,w]=Xe(O,F),w.drawImage(D,0,0,O,F),n*=l==="image/png"?.85:.95,Ze(k,l,d.name,d.lastModified,n).then(function(N){try{return M=N,ve(D),D=k,x=M.size,A(Math.min(99,Math.floor((P-x)/(P-o)*100))),g}catch(Q){return e(Q)}},e)}return[1]},f=function(){return ve(D),ve(k),ve(b),ve(s),ve(p),A(100),i(M)};if(m=y,c(),C=m.size>o,R=m.size>d.size,!C&&!R)return A(100),i(m);var S;return U=d.size,P=m.size,x=P,D=s,h=!u.alwaysKeepResolution&&C,(S=(function(O){for(;O;){if(O.then)return void O.then(S,e);try{if(O.pop){if(O.length)return O.pop()?f.call(this):O;O=g}else O=O.call(this)}catch(F){return e(F)}}}).bind(this))(g)}}catch(g){return e(g)}}).bind(this),e)}catch(y){return e(y)}}).bind(this),e)}catch(T){return e(T)}}).bind(this),e)}catch(I){return e(I)}}).bind(this),e)})}const dn=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let nt;function hn(d,u){return new Promise((v,i)=>{nt||(nt=function(a){const o=[];return o.push(a),URL.createObjectURL(new Blob(o))}(dn));const e=new Worker(nt);e.addEventListener("message",function(a){if(u.signal&&u.signal.aborted)e.terminate();else if(a.data.progress===void 0){if(a.data.error)return i(new Error(a.data.error)),void e.terminate();v(a.data.file),e.terminate()}else u.onProgress(a.data.progress)}),e.addEventListener("error",i),u.signal&&u.signal.addEventListener("abort",()=>{i(u.signal.reason),e.terminate()}),e.postMessage({file:d,imageCompressionLibUrl:u.libURL,options:{...u,onProgress:void 0,signal:void 0}})})}function re(d,u){return new Promise(function(v,i){let e,t,a,o,p,b;if(e={...u},a=0,{onProgress:o}=e,e.maxSizeMB=e.maxSizeMB||Number.POSITIVE_INFINITY,p=typeof e.useWebWorker!="boolean"||e.useWebWorker,delete e.useWebWorker,e.onProgress=l=>{a=l,typeof o=="function"&&o(a)},!(d instanceof Blob||d instanceof cn))return i(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(d.type))return i(new Error("The file given is not an image"));if(b=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!p||typeof Worker!="function"||b)return ht(d,e).then((function(l){try{return t=l,n.call(this)}catch(m){return i(m)}}).bind(this),i);var r=(function(){try{return n.call(this)}catch(l){return i(l)}}).bind(this),s=function(l){try{return ht(d,e).then(function(m){try{return t=m,r()}catch(C){return i(C)}},i)}catch(m){return i(m)}};try{return e.libURL=e.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",hn(d,e).then(function(l){try{return t=l,r()}catch{return s()}},s)}catch{s()}function n(){try{t.name=d.name,t.lastModified=d.lastModified}catch{}try{e.preserveExif&&d.type==="image/jpeg"&&(!e.fileType||e.fileType&&e.fileType===d.type)&&(t=yt(d,t))}catch{}return v(t)}})}re.getDataUrlFromFile=Et,re.getFilefromDataUrl=ft,re.loadImage=Tt,re.drawImageInCanvas=Ft,re.drawFileInCanvas=Ye,re.canvasToFile=Ze,re.getExifOrientation=St,re.handleMaxWidthOrHeight=Mt,re.followExifOrientation=Rt,re.cleanupCanvasMemory=ve,re.isAutoOrientationInBrowser=Pe,re.approximateBelowMaximumCanvasSizeOfBrowser=Ct,re.copyExifWithoutOrientation=yt,re.getBrowserName=_e,re.version="2.0.2";const st=d=>!d||d.length<12?null:{tradeId:d[0],date:d[1],time:d[2],amount:parseFloat(d[3])||0,tagId:d[4],tagName:d[5],tagColor:d[6],tagEmoji:d[7],driveImageId:d[8]||null,notes:d[9]||"",createdAt:d[10],updatedAt:d[11]},_t=async()=>{const d="1ruzm5D-ofifAU7d5oRChBT7DAYFTlVLgULSsXvYEtXU";console.log(" Fetching all trades from sheet:",d);try{const v=(await window.gapi.client.sheets.spreadsheets.values.get({spreadsheetId:d,range:`${De.TRADES}!A2:L`})).result.values||[];console.log(" Received rows from sheet:",v.length);const i=v.map(st).filter(Boolean);return console.log(" Parsed trades:",i.length),i}catch(u){return console.error(" Failed to fetch trades:",u),[]}},gn=async(d,u)=>{console.log(` Fetching trades for: ${d}-${u} (month is 0-indexed, so ${u} = ${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][u]})`);const v=await _t();console.log(` Total trades in sheet: ${v.length}`),v.length>0&&console.log(" All trade dates:",v.map(e=>e.date));const i=v.filter(e=>{const[t,a]=e.date.split("-").map(Number),o=t===d&&a===u+1;return console.log(o?`   Trade ${e.date} MATCHES!`:`   Trade ${e.date} doesn't match: tradeYear=${t} vs ${d}, tradeMonth=${a} vs ${u+1}`),o});return console.log(` Filtered to ${i.length} trades for ${d}-${u+1}`),i},pn=async d=>{const u=await rt.getOrCreateSpreadsheet();let v=null;if(d.screenshot){const t=await re(d.screenshot,{maxSizeMB:1,maxWidthOrHeight:1200,useWebWorker:!0}),a=`${d.tradeId}_${d.date}.jpg`;v=await rt.uploadImage(t,a)}const i=new Date().toISOString(),e=[d.tradeId,d.date,d.time,d.amount,d.tagId,d.tagName,d.tagColor,d.tagEmoji,v||"",d.notes||"",i,i];return await window.gapi.client.sheets.spreadsheets.values.append({spreadsheetId:u,range:`${De.TRADES}!A:L`,valueInputOption:"USER_ENTERED",resource:{values:[e]}}),{...d,driveImageId:v,createdAt:i,updatedAt:i}},mn=async({tradeId:d,updates:u})=>{const v=localStorage.getItem(Ht.SHEET_ID),t=((await window.gapi.client.sheets.spreadsheets.values.get({spreadsheetId:v,range:`${De.TRADES}!A:A`})).result.values||[]).findIndex(n=>n[0]===d);if(t===-1)throw new Error("Trade not found");const o=(await window.gapi.client.sheets.spreadsheets.values.get({spreadsheetId:v,range:`${De.TRADES}!A${t+1}:L${t+1}`})).result.values[0],p=st(o);let b=p.driveImageId;if(u.screenshot){const n=await re(u.screenshot,{maxSizeMB:1,maxWidthOrHeight:1200,useWebWorker:!0}),l=`${d}_${u.date||p.date}.jpg`;b=await rt.uploadImage(n,l)}const r=new Date().toISOString(),s=[d,u.date||p.date,u.time||p.time,u.amount!==void 0?u.amount:p.amount,u.tagId||p.tagId,u.tagName||p.tagName,u.tagColor||p.tagColor,u.tagEmoji||p.tagEmoji,b||"",u.notes!==void 0?u.notes:p.notes,p.createdAt,r];return await window.gapi.client.sheets.spreadsheets.values.update({spreadsheetId:v,range:`${De.TRADES}!A${t+1}:L${t+1}`,valueInputOption:"USER_ENTERED",resource:{values:[s]}}),st(s)},vn=async d=>{const u="1ruzm5D-ofifAU7d5oRChBT7DAYFTlVLgULSsXvYEtXU";console.log(" Deleting trade:",d);const e=((await window.gapi.client.sheets.spreadsheets.values.get({spreadsheetId:u,range:`${De.TRADES}!A:A`})).result.values||[]).findIndex(p=>p[0]===d);if(e===-1)throw new Error("Trade not found");console.log(" Found trade at row:",e);const o=(await window.gapi.client.sheets.spreadsheets.get({spreadsheetId:u})).result.sheets.find(p=>p.properties.title===De.TRADES).properties.sheetId;await window.gapi.client.sheets.spreadsheets.batchUpdate({spreadsheetId:u,resource:{requests:[{deleteDimension:{range:{sheetId:o,dimension:"ROWS",startIndex:e,endIndex:e+1}}}]}}),console.log(" Trade deleted successfully")},Fn=()=>pt({queryKey:["trades"],queryFn:_t,staleTime:5*60*1e3,cacheTime:30*60*1e3}),Sn=(d,u)=>pt({queryKey:["trades",d,u],queryFn:()=>gn(d,u),staleTime:5*60*1e3}),Mn=()=>{const d=Ge();return ot({mutationFn:pn,onMutate:async u=>{await d.cancelQueries({queryKey:["trades"]});const v=d.getQueryData(["trades"]);return v&&d.setQueryData(["trades"],i=>[...i||[],u]),{previousTrades:v}},onError:(u,v,i)=>{i!=null&&i.previousTrades&&d.setQueryData(["trades"],i.previousTrades)},onSettled:()=>{d.invalidateQueries({queryKey:["trades"]})}})},Rn=()=>{const d=Ge();return ot({mutationFn:mn,onSuccess:()=>{d.invalidateQueries({queryKey:["trades"]})}})},_n=()=>{const d=Ge();return ot({mutationFn:vn,onMutate:async u=>{await d.cancelQueries({queryKey:["trades"]});const v=d.getQueryData(["trades"]);return v&&d.setQueryData(["trades"],i=>(i||[]).filter(e=>e.tradeId!==u)),{previousTrades:v}},onError:(u,v,i)=>{i!=null&&i.previousTrades&&d.setQueryData(["trades"],i.previousTrades)},onSettled:()=>{d.invalidateQueries({queryKey:["trades"]})}})};export{An as a,Mn as b,Tn as c,Rn as d,_n as e,En as f,Cn as g,In as h,Sn as i,Un as m,Fn as u};
