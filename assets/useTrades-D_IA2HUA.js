var ct=h=>{throw TypeError(h)};var et=(h,u,v)=>u.has(h)||ct("Cannot "+v);var G=(h,u,v)=>(et(h,u,"read from private field"),v?v.call(h):u.get(h)),xe=(h,u,v)=>u.has(h)?ct("Cannot add the same private member more than once"):u instanceof WeakSet?u.add(h):u.set(h,v),Oe=(h,u,v,i)=>(et(h,u,"write to private field"),i?i.call(h,v):u.set(h,v),v),Ne=(h,u,v)=>(et(h,u,"access private method"),v);import{a as pt}from"./useTags-CTOCHUNH.js";import{S as Nt,s as kt,h as dt,f as Pt,n as mt,i as Ge,r as $e,k as Lt,l as Ht,e as rt,m as Pe,o as vt}from"./index-jh0xkNTl.js";var we,Te,fe,ye,Ae,Be,it,gt,$t=(gt=class extends Nt{constructor(u,v){super();xe(this,Ae);xe(this,we);xe(this,Te);xe(this,fe);xe(this,ye);Oe(this,we,u),this.setOptions(v),this.bindMethods(),Ne(this,Ae,Be).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(u){var i;const v=this.options;this.options=G(this,we).defaultMutationOptions(u),kt(this.options,v)||G(this,we).getMutationCache().notify({type:"observerOptionsUpdated",mutation:G(this,fe),observer:this}),v!=null&&v.mutationKey&&this.options.mutationKey&&dt(v.mutationKey)!==dt(this.options.mutationKey)?this.reset():((i=G(this,fe))==null?void 0:i.state.status)==="pending"&&G(this,fe).setOptions(this.options)}onUnsubscribe(){var u;this.hasListeners()||(u=G(this,fe))==null||u.removeObserver(this)}onMutationUpdate(u){Ne(this,Ae,Be).call(this),Ne(this,Ae,it).call(this,u)}getCurrentResult(){return G(this,Te)}reset(){var u;(u=G(this,fe))==null||u.removeObserver(this),Oe(this,fe,void 0),Ne(this,Ae,Be).call(this),Ne(this,Ae,it).call(this)}mutate(u,v){var i;return Oe(this,ye,v),(i=G(this,fe))==null||i.removeObserver(this),Oe(this,fe,G(this,we).getMutationCache().build(G(this,we),this.options)),G(this,fe).addObserver(this),G(this,fe).execute(u)}},we=new WeakMap,Te=new WeakMap,fe=new WeakMap,ye=new WeakMap,Ae=new WeakSet,Be=function(){var v;const u=((v=G(this,fe))==null?void 0:v.state)??Pt();Oe(this,Te,{...u,isPending:u.status==="pending",isSuccess:u.status==="success",isError:u.status==="error",isIdle:u.status==="idle",mutate:this.mutate,reset:this.reset})},it=function(u){mt.batch(()=>{var v,i,e,t,a,o,p,w;if(G(this,ye)&&this.hasListeners()){const r=G(this,Te).variables,s=G(this,Te).context,n={client:G(this,we),meta:this.options.meta,mutationKey:this.options.mutationKey};if((u==null?void 0:u.type)==="success"){try{(i=(v=G(this,ye)).onSuccess)==null||i.call(v,u.data,r,s,n)}catch(l){Promise.reject(l)}try{(t=(e=G(this,ye)).onSettled)==null||t.call(e,u.data,null,r,s,n)}catch(l){Promise.reject(l)}}else if((u==null?void 0:u.type)==="error"){try{(o=(a=G(this,ye)).onError)==null||o.call(a,u.error,r,s,n)}catch(l){Promise.reject(l)}try{(w=(p=G(this,ye)).onSettled)==null||w.call(p,void 0,u.error,r,s,n)}catch(l){Promise.reject(l)}}}this.listeners.forEach(r=>{r(G(this,Te))})})},gt);function ot(h,u){const v=Ge(),[i]=$e.useState(()=>new $t(v,h));$e.useEffect(()=>{i.setOptions(h)},[i,h]);const e=$e.useSyncExternalStore($e.useCallback(a=>i.subscribe(mt.batchCalls(a)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),t=$e.useCallback((a,o)=>{i.mutate(a,o).catch(Lt)},[i]);if(e.error&&Ht(i.options.throwOnError,[e.error]))throw e.error;return{...e,mutate:t,mutateAsync:e.mutate}}const An=6048e5,Un=864e5,bt=6e4,wt=36e5;function Qt(h,u){const i=qt(h);let e;if(i.date){const p=Kt(i.date,2);e=jt(p.restDateString,p.year)}if(!e||isNaN(e.getTime()))return new Date(NaN);const t=e.getTime();let a=0,o;if(i.time&&(a=Yt(i.time),isNaN(a)))return new Date(NaN);if(i.timezone){if(o=Zt(i.timezone),isNaN(o))return new Date(NaN)}else{const p=new Date(t+a),w=new Date(0);return w.setFullYear(p.getUTCFullYear(),p.getUTCMonth(),p.getUTCDate()),w.setHours(p.getUTCHours(),p.getUTCMinutes(),p.getUTCSeconds(),p.getUTCMilliseconds()),w}return new Date(t+a+o)}const We={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},zt=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Wt=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Bt=/^([+-])(\d{2})(?::?(\d{2}))?$/;function qt(h){const u={},v=h.split(We.dateTimeDelimiter);let i;if(v.length>2)return u;if(/:/.test(v[0])?i=v[0]:(u.date=v[0],i=v[1],We.timeZoneDelimiter.test(u.date)&&(u.date=h.split(We.timeZoneDelimiter)[0],i=h.substr(u.date.length,h.length))),i){const e=We.timezone.exec(i);e?(u.time=i.replace(e[1],""),u.timezone=e[1]):u.time=i}return u}function Kt(h,u){const v=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+u)+"})|(\\d{2}|[+-]\\d{"+(2+u)+"})$)"),i=h.match(v);if(!i)return{year:NaN,restDateString:""};const e=i[1]?parseInt(i[1]):null,t=i[2]?parseInt(i[2]):null;return{year:t===null?e:t*100,restDateString:h.slice((i[1]||i[2]).length)}}function jt(h,u){if(u===null)return new Date(NaN);const v=h.match(zt);if(!v)return new Date(NaN);const i=!!v[4],e=Qe(v[1]),t=Qe(v[2])-1,a=Qe(v[3]),o=Qe(v[4]),p=Qe(v[5])-1;if(i)return en(u,o,p)?Gt(u,o,p):new Date(NaN);{const w=new Date(0);return!Vt(u,t,a)||!Jt(u,e)?new Date(NaN):(w.setUTCFullYear(u,t,Math.max(e,a)),w)}}function Qe(h){return h?parseInt(h):1}function Yt(h){const u=h.match(Wt);if(!u)return NaN;const v=tt(u[1]),i=tt(u[2]),e=tt(u[3]);return tn(v,i,e)?v*wt+i*bt+e*1e3:NaN}function tt(h){return h&&parseFloat(h.replace(",","."))||0}function Zt(h){if(h==="Z")return 0;const u=h.match(Bt);if(!u)return 0;const v=u[1]==="+"?-1:1,i=parseInt(u[2]),e=u[3]&&parseInt(u[3])||0;return nn(i,e)?v*(i*wt+e*bt):NaN}function Gt(h,u,v){const i=new Date(0);i.setUTCFullYear(h,0,4);const e=i.getUTCDay()||7,t=(u-1)*7+v+1-e;return i.setUTCDate(i.getUTCDate()+t),i}const Xt=[31,null,31,30,31,30,31,31,30,31,30,31];function yt(h){return h%400===0||h%4===0&&h%100!==0}function Vt(h,u,v){return u>=0&&u<=11&&v>=1&&v<=(Xt[u]||(yt(h)?29:28))}function Jt(h,u){return u>=1&&u<=(yt(h)?366:365)}function en(h,u,v){return u>=1&&u<=53&&v>=0&&v<=6}function tn(h,u,v){return h===24?u===0&&v===0:v>=0&&v<60&&u>=0&&u<60&&h>=0&&h<25}function nn(h,u){return u>=0&&u<=59}const In=(h,u="$")=>{const i=Math.abs(h).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2});return`${h>=0?"+":"-"}${u}${i}`},En=(h,u="$")=>{const v=Math.abs(h);let i;return v>=1e6?i=`${(v/1e6).toFixed(1)}M`:v>=1e3?i=`${(v/1e3).toFixed(1)}K`:i=v.toFixed(0),`${h>=0?"+":"-"}${u}${i}`},rn=(h,u)=>{const v=h+u;return v===0?0:Math.round(h/v*100)},sn=h=>{if(!h||h.length===0)return{totalPL:0,tradeCount:0,winCount:0,lossCount:0,winRate:0,avgWin:0,avgLoss:0};const u=h.reduce((a,o)=>a+o.amount,0),v=h.filter(a=>a.amount>0),i=h.filter(a=>a.amount<0),e=v.length>0?v.reduce((a,o)=>a+o.amount,0)/v.length:0,t=i.length>0?i.reduce((a,o)=>a+Math.abs(o.amount),0)/i.length:0;return{totalPL:u,tradeCount:h.length,winCount:v.length,lossCount:i.length,winRate:rn(v.length,i.length),avgWin:e,avgLoss:t}},Tn=(h,u)=>Array.from({length:12},(i,e)=>e).map(i=>{const e=h.filter(t=>{const a=Qt(t.date);return a.getFullYear()===u&&a.getMonth()===i});return{month:i,...sn(e)}}),Cn=()=>crypto.randomUUID();function on(h,u){return u.forEach(function(v){v&&typeof v!="string"&&!Array.isArray(v)&&Object.keys(v).forEach(function(i){if(i!=="default"&&!(i in h)){var e=Object.getOwnPropertyDescriptor(v,i);Object.defineProperty(h,i,e.get?e:{enumerable:!0,get:function(){return v[i]}})}})}),Object.freeze(h)}function At(h,u){return new Promise(function(v,i){let e;return an(h).then(function(t){try{return e=t,v(new Blob([u.slice(0,2),e,u.slice(2)],{type:"image/jpeg"}))}catch(a){return i(a)}},i)})}const an=h=>new Promise((u,v)=>{const i=new FileReader;i.addEventListener("load",({target:{result:e}})=>{const t=new DataView(e);let a=0;if(t.getUint16(a)!==65496)return v("not a valid JPEG");for(a+=2;;){const o=t.getUint16(a);if(o===65498)break;const p=t.getUint16(a+2);if(o===65505&&t.getUint32(a+4)===1165519206){const w=a+10;let r;switch(t.getUint16(w)){case 18761:r=!0;break;case 19789:r=!1;break;default:return v("TIFF header contains invalid endian")}if(t.getUint16(w+2,r)!==42)return v("TIFF header contains invalid version");const s=t.getUint32(w+4,r),n=w+s+2+12*t.getUint16(w+s,r);for(let l=w+s+2;l<n;l+=12)if(t.getUint16(l,r)==274){if(t.getUint16(l+2,r)!==3)return v("Orientation data type is invalid");if(t.getUint32(l+4,r)!==1)return v("Orientation data count is invalid");t.setUint16(l+8,1,r);break}return u(e.slice(a,a+2+p))}a+=2+p}return u(new Blob)}),i.readAsArrayBuffer(h)});var Ke={},fn={get exports(){return Ke},set exports(h){Ke=h}};(function(h){var u,v,i={};fn.exports=i,i.parse=function(e,t){for(var a=i.bin.readUshort,o=i.bin.readUint,p=0,w={},r=new Uint8Array(e),s=r.length-4;o(r,s)!=101010256;)s--;p=s,p+=4;var n=a(r,p+=4);a(r,p+=2);var l=o(r,p+=2),m=o(r,p+=4);p+=4,p=m;for(var C=0;C<n;C++){o(r,p),p+=4,p+=4,p+=4,o(r,p+=4),l=o(r,p+=4);var _=o(r,p+=4),U=a(r,p+=4),P=a(r,p+2),x=a(r,p+4);p+=6;var M=o(r,p+=8);p+=4,p+=U+P+x,i._readLocal(r,M,w,l,_,t)}return w},i._readLocal=function(e,t,a,o,p,w){var r=i.bin.readUshort,s=i.bin.readUint;s(e,t),r(e,t+=4),r(e,t+=2);var n=r(e,t+=2);s(e,t+=2),s(e,t+=4),t+=4;var l=r(e,t+=8),m=r(e,t+=2);t+=2;var C=i.bin.readUTF8(e,t,l);if(t+=l,t+=m,w)a[C]={size:p,csize:o};else{var _=new Uint8Array(e.buffer,t);if(n==0)a[C]=new Uint8Array(_.buffer.slice(t,t+o));else{if(n!=8)throw"unknown compression method: "+n;var U=new Uint8Array(p);i.inflateRaw(_,U),a[C]=U}}},i.inflateRaw=function(e,t){return i.F.inflate(e,t)},i.inflate=function(e,t){return e[0],e[1],i.inflateRaw(new Uint8Array(e.buffer,e.byteOffset+2,e.length-6),t)},i.deflate=function(e,t){t==null&&(t={level:6});var a=0,o=new Uint8Array(50+Math.floor(1.1*e.length));o[a]=120,o[a+1]=156,a+=2,a=i.F.deflateRaw(e,o,a,t.level);var p=i.adler(e,0,e.length);return o[a+0]=p>>>24&255,o[a+1]=p>>>16&255,o[a+2]=p>>>8&255,o[a+3]=p>>>0&255,new Uint8Array(o.buffer,0,a+4)},i.deflateRaw=function(e,t){t==null&&(t={level:6});var a=new Uint8Array(50+Math.floor(1.1*e.length)),o=i.F.deflateRaw(e,a,o,t.level);return new Uint8Array(a.buffer,0,o)},i.encode=function(e,t){t==null&&(t=!1);var a=0,o=i.bin.writeUint,p=i.bin.writeUshort,w={};for(var r in e){var s=!i._noNeed(r)&&!t,n=e[r],l=i.crc.crc(n,0,n.length);w[r]={cpr:s,usize:n.length,crc:l,file:s?i.deflateRaw(n):n}}for(var r in w)a+=w[r].file.length+30+46+2*i.bin.sizeUTF8(r);a+=22;var m=new Uint8Array(a),C=0,_=[];for(var r in w){var U=w[r];_.push(C),C=i._writeHeader(m,C,r,U,0)}var P=0,x=C;for(var r in w)U=w[r],_.push(C),C=i._writeHeader(m,C,r,U,1,_[P++]);var M=C-x;return o(m,C,101010256),C+=4,p(m,C+=4,P),p(m,C+=2,P),o(m,C+=2,M),o(m,C+=4,x),C+=4,C+=2,m.buffer},i._noNeed=function(e){var t=e.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(t)!=-1},i._writeHeader=function(e,t,a,o,p,w){var r=i.bin.writeUint,s=i.bin.writeUshort,n=o.file;return r(e,t,p==0?67324752:33639248),t+=4,p==1&&(t+=2),s(e,t,20),s(e,t+=2,0),s(e,t+=2,o.cpr?8:0),r(e,t+=2,0),r(e,t+=4,o.crc),r(e,t+=4,n.length),r(e,t+=4,o.usize),s(e,t+=4,i.bin.sizeUTF8(a)),s(e,t+=2,0),t+=2,p==1&&(t+=2,t+=2,r(e,t+=6,w),t+=4),t+=i.bin.writeUTF8(e,t,a),p==0&&(e.set(n,t),t+=n.length),t},i.crc={table:function(){for(var e=new Uint32Array(256),t=0;t<256;t++){for(var a=t,o=0;o<8;o++)1&a?a=3988292384^a>>>1:a>>>=1;e[t]=a}return e}(),update:function(e,t,a,o){for(var p=0;p<o;p++)e=i.crc.table[255&(e^t[a+p])]^e>>>8;return e},crc:function(e,t,a){return 4294967295^i.crc.update(4294967295,e,t,a)}},i.adler=function(e,t,a){for(var o=1,p=0,w=t,r=t+a;w<r;){for(var s=Math.min(w+5552,r);w<s;)p+=o+=e[w++];o%=65521,p%=65521}return p<<16|o},i.bin={readUshort:function(e,t){return e[t]|e[t+1]<<8},writeUshort:function(e,t,a){e[t]=255&a,e[t+1]=a>>8&255},readUint:function(e,t){return 16777216*e[t+3]+(e[t+2]<<16|e[t+1]<<8|e[t])},writeUint:function(e,t,a){e[t]=255&a,e[t+1]=a>>8&255,e[t+2]=a>>16&255,e[t+3]=a>>24&255},readASCII:function(e,t,a){for(var o="",p=0;p<a;p++)o+=String.fromCharCode(e[t+p]);return o},writeASCII:function(e,t,a){for(var o=0;o<a.length;o++)e[t+o]=a.charCodeAt(o)},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,t,a){for(var o,p="",w=0;w<a;w++)p+="%"+i.bin.pad(e[t+w].toString(16));try{o=decodeURIComponent(p)}catch{return i.bin.readASCII(e,t,a)}return o},writeUTF8:function(e,t,a){for(var o=a.length,p=0,w=0;w<o;w++){var r=a.charCodeAt(w);if(!(4294967168&r))e[t+p]=r,p++;else if(!(4294965248&r))e[t+p]=192|r>>6,e[t+p+1]=128|r>>0&63,p+=2;else if(!(4294901760&r))e[t+p]=224|r>>12,e[t+p+1]=128|r>>6&63,e[t+p+2]=128|r>>0&63,p+=3;else{if(4292870144&r)throw"e";e[t+p]=240|r>>18,e[t+p+1]=128|r>>12&63,e[t+p+2]=128|r>>6&63,e[t+p+3]=128|r>>0&63,p+=4}}return p},sizeUTF8:function(e){for(var t=e.length,a=0,o=0;o<t;o++){var p=e.charCodeAt(o);if(!(4294967168&p))a++;else if(!(4294965248&p))a+=2;else if(!(4294901760&p))a+=3;else{if(4292870144&p)throw"e";a+=4}}return a}},i.F={},i.F.deflateRaw=function(e,t,a,o){var p=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][o],w=i.F.U,r=i.F._goodIndex;i.F._hash;var s=i.F._putsE,n=0,l=a<<3,m=0,C=e.length;if(o==0){for(;n<C;)s(t,l,n+(E=Math.min(65535,C-n))==C?1:0),l=i.F._copyExact(e,n,E,t,l+8),n+=E;return l>>>3}var _=w.lits,U=w.strt,P=w.prev,x=0,M=0,k=0,b=0,D=0,d=0;for(C>2&&(U[d=i.F._hash(e,0)]=0),n=0;n<C;n++){if(D=d,n+1<C-2){d=i.F._hash(e,n+1);var c=n+1&32767;P[c]=U[d],U[d]=c}if(m<=n){(x>14e3||M>26697)&&C-n>100&&(m<n&&(_[x]=n-m,x+=2,m=n),l=i.F._writeBlock(n==C-1||m==C?1:0,_,x,b,e,k,n-k,t,l),x=M=b=0,k=n);var A=0;n<C-2&&(A=i.F._bestMatch(e,n,P,D,Math.min(p[2],C-n),p[3]));var E=A>>>16,I=65535&A;if(A!=0){I=65535&A;var T=r(E=A>>>16,w.of0);w.lhst[257+T]++;var y=r(I,w.df0);w.dhst[y]++,b+=w.exb[T]+w.dxb[y],_[x]=E<<23|n-m,_[x+1]=I<<16|T<<8|y,x+=2,m=n+E}else w.lhst[e[n]]++;M++}}for(k==n&&e.length!=0||(m<n&&(_[x]=n-m,x+=2,m=n),l=i.F._writeBlock(1,_,x,b,e,k,n-k,t,l),x=0,M=0,x=M=b=0,k=n);7&l;)l++;return l>>>3},i.F._bestMatch=function(e,t,a,o,p,w){var r=32767&t,s=a[r],n=r-s+32768&32767;if(s==r||o!=i.F._hash(e,t-n))return 0;for(var l=0,m=0,C=Math.min(32767,t);n<=C&&--w!=0&&s!=r;){if(l==0||e[t+l]==e[t+l-n]){var _=i.F._howLong(e,t,n);if(_>l){if(m=n,(l=_)>=p)break;n+2<_&&(_=n+2);for(var U=0,P=0;P<_-2;P++){var x=t-n+P+32768&32767,M=x-a[x]+32768&32767;M>U&&(U=M,s=x)}}}n+=(r=s)-(s=a[r])+32768&32767}return l<<16|m},i.F._howLong=function(e,t,a){if(e[t]!=e[t-a]||e[t+1]!=e[t+1-a]||e[t+2]!=e[t+2-a])return 0;var o=t,p=Math.min(e.length,t+258);for(t+=3;t<p&&e[t]==e[t-a];)t++;return t-o},i.F._hash=function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<4)&65535},i.saved=0,i.F._writeBlock=function(e,t,a,o,p,w,r,s,n){var l,m,C,_,U,P,x,M,k,b=i.F.U,D=i.F._putsF,d=i.F._putsE;b.lhst[256]++,m=(l=i.F.getTrees())[0],C=l[1],_=l[2],U=l[3],P=l[4],x=l[5],M=l[6],k=l[7];var c=32+(n+3&7?8-(n+3&7):0)+(r<<3),A=o+i.F.contSize(b.fltree,b.lhst)+i.F.contSize(b.fdtree,b.dhst),E=o+i.F.contSize(b.ltree,b.lhst)+i.F.contSize(b.dtree,b.dhst);E+=14+3*x+i.F.contSize(b.itree,b.ihst)+(2*b.ihst[16]+3*b.ihst[17]+7*b.ihst[18]);for(var I=0;I<286;I++)b.lhst[I]=0;for(I=0;I<30;I++)b.dhst[I]=0;for(I=0;I<19;I++)b.ihst[I]=0;var T=c<A&&c<E?0:A<E?1:2;if(D(s,n,e),D(s,n+1,T),n+=3,T==0){for(;7&n;)n++;n=i.F._copyExact(p,w,r,s,n)}else{var y,S;if(T==1&&(y=b.fltree,S=b.fdtree),T==2){i.F.makeCodes(b.ltree,m),i.F.revCodes(b.ltree,m),i.F.makeCodes(b.dtree,C),i.F.revCodes(b.dtree,C),i.F.makeCodes(b.itree,_),i.F.revCodes(b.itree,_),y=b.ltree,S=b.dtree,d(s,n,U-257),d(s,n+=5,P-1),d(s,n+=5,x-4),n+=4;for(var g=0;g<x;g++)d(s,n+3*g,b.itree[1+(b.ordr[g]<<1)]);n+=3*x,n=i.F._codeTiny(M,b.itree,s,n),n=i.F._codeTiny(k,b.itree,s,n)}for(var f=w,O=0;O<a;O+=2){for(var F=t[O],N=F>>>23,Q=f+(8388607&F);f<Q;)n=i.F._writeLit(p[f++],y,s,n);if(N!=0){var H=t[O+1],$=H>>16,L=H>>8&255,R=255&H;d(s,n=i.F._writeLit(257+L,y,s,n),N-b.of0[L]),n+=b.exb[L],D(s,n=i.F._writeLit(R,S,s,n),$-b.df0[R]),n+=b.dxb[R],f+=N}}n=i.F._writeLit(256,y,s,n)}return n},i.F._copyExact=function(e,t,a,o,p){var w=p>>>3;return o[w]=a,o[w+1]=a>>>8,o[w+2]=255-o[w],o[w+3]=255-o[w+1],w+=4,o.set(new Uint8Array(e.buffer,t,a),w),p+(a+4<<3)},i.F.getTrees=function(){for(var e=i.F.U,t=i.F._hufTree(e.lhst,e.ltree,15),a=i.F._hufTree(e.dhst,e.dtree,15),o=[],p=i.F._lenCodes(e.ltree,o),w=[],r=i.F._lenCodes(e.dtree,w),s=0;s<o.length;s+=2)e.ihst[o[s]]++;for(s=0;s<w.length;s+=2)e.ihst[w[s]]++;for(var n=i.F._hufTree(e.ihst,e.itree,7),l=19;l>4&&e.itree[1+(e.ordr[l-1]<<1)]==0;)l--;return[t,a,n,p,r,l,o,w]},i.F.getSecond=function(e){for(var t=[],a=0;a<e.length;a+=2)t.push(e[a+1]);return t},i.F.nonZero=function(e){for(var t="",a=0;a<e.length;a+=2)e[a+1]!=0&&(t+=(a>>1)+",");return t},i.F.contSize=function(e,t){for(var a=0,o=0;o<t.length;o++)a+=t[o]*e[1+(o<<1)];return a},i.F._codeTiny=function(e,t,a,o){for(var p=0;p<e.length;p+=2){var w=e[p],r=e[p+1];o=i.F._writeLit(w,t,a,o);var s=w==16?2:w==17?3:7;w>15&&(i.F._putsE(a,o,r,s),o+=s)}return o},i.F._lenCodes=function(e,t){for(var a=e.length;a!=2&&e[a-1]==0;)a-=2;for(var o=0;o<a;o+=2){var p=e[o+1],w=o+3<a?e[o+3]:-1,r=o+5<a?e[o+5]:-1,s=o==0?-1:e[o-1];if(p==0&&w==p&&r==p){for(var n=o+5;n+2<a&&e[n+2]==p;)n+=2;(l=Math.min(n+1-o>>>1,138))<11?t.push(17,l-3):t.push(18,l-11),o+=2*l-2}else if(p==s&&w==p&&r==p){for(n=o+5;n+2<a&&e[n+2]==p;)n+=2;var l=Math.min(n+1-o>>>1,6);t.push(16,l-3),o+=2*l-2}else t.push(p,0)}return a>>>1},i.F._hufTree=function(e,t,a){var o=[],p=e.length,w=t.length,r=0;for(r=0;r<w;r+=2)t[r]=0,t[r+1]=0;for(r=0;r<p;r++)e[r]!=0&&o.push({lit:r,f:e[r]});var s=o.length,n=o.slice(0);if(s==0)return 0;if(s==1){var l=o[0].lit;return n=l==0?1:0,t[1+(l<<1)]=1,t[1+(n<<1)]=1,1}o.sort(function(M,k){return M.f-k.f});var m=o[0],C=o[1],_=0,U=1,P=2;for(o[0]={lit:-1,f:m.f+C.f,l:m,r:C,d:0};U!=s-1;)m=_!=U&&(P==s||o[_].f<o[P].f)?o[_++]:o[P++],C=_!=U&&(P==s||o[_].f<o[P].f)?o[_++]:o[P++],o[U++]={lit:-1,f:m.f+C.f,l:m,r:C};var x=i.F.setDepth(o[U-1],0);for(x>a&&(i.F.restrictDepth(n,a,x),x=a),r=0;r<s;r++)t[1+(n[r].lit<<1)]=n[r].d;return x},i.F.setDepth=function(e,t){return e.lit!=-1?(e.d=t,t):Math.max(i.F.setDepth(e.l,t+1),i.F.setDepth(e.r,t+1))},i.F.restrictDepth=function(e,t,a){var o=0,p=1<<a-t,w=0;for(e.sort(function(s,n){return n.d==s.d?s.f-n.f:n.d-s.d}),o=0;o<e.length&&e[o].d>t;o++){var r=e[o].d;e[o].d=t,w+=p-(1<<a-r)}for(w>>>=a-t;w>0;)(r=e[o].d)<t?(e[o].d++,w-=1<<t-r-1):o++;for(;o>=0;o--)e[o].d==t&&w<0&&(e[o].d--,w++);w!=0&&console.log("debt left")},i.F._goodIndex=function(e,t){var a=0;return t[16|a]<=e&&(a|=16),t[8|a]<=e&&(a|=8),t[4|a]<=e&&(a|=4),t[2|a]<=e&&(a|=2),t[1|a]<=e&&(a|=1),a},i.F._writeLit=function(e,t,a,o){return i.F._putsF(a,o,t[e<<1]),o+t[1+(e<<1)]},i.F.inflate=function(e,t){var a=Uint8Array;if(e[0]==3&&e[1]==0)return t||new a(0);var o=i.F,p=o._bitsF,w=o._bitsE,r=o._decodeTiny,s=o.makeCodes,n=o.codes2map,l=o._get17,m=o.U,C=t==null;C&&(t=new a(e.length>>>2<<3));for(var _,U,P=0,x=0,M=0,k=0,b=0,D=0,d=0,c=0,A=0;P==0;)if(P=p(e,A,1),x=p(e,A+1,2),A+=3,x!=0){if(C&&(t=i.F._check(t,c+(1<<17))),x==1&&(_=m.flmap,U=m.fdmap,D=511,d=31),x==2){M=w(e,A,5)+257,k=w(e,A+5,5)+1,b=w(e,A+10,4)+4,A+=14;for(var E=0;E<38;E+=2)m.itree[E]=0,m.itree[E+1]=0;var I=1;for(E=0;E<b;E++){var T=w(e,A+3*E,3);m.itree[1+(m.ordr[E]<<1)]=T,T>I&&(I=T)}A+=3*b,s(m.itree,I),n(m.itree,I,m.imap),_=m.lmap,U=m.dmap,A=r(m.imap,(1<<I)-1,M+k,e,A,m.ttree);var y=o._copyOut(m.ttree,0,M,m.ltree);D=(1<<y)-1;var S=o._copyOut(m.ttree,M,k,m.dtree);d=(1<<S)-1,s(m.ltree,y),n(m.ltree,y,_),s(m.dtree,S),n(m.dtree,S,U)}for(;;){var g=_[l(e,A)&D];A+=15&g;var f=g>>>4;if(!(f>>>8))t[c++]=f;else{if(f==256)break;var O=c+f-254;if(f>264){var F=m.ldef[f-257];O=c+(F>>>3)+w(e,A,7&F),A+=7&F}var N=U[l(e,A)&d];A+=15&N;var Q=N>>>4,H=m.ddef[Q],$=(H>>>4)+p(e,A,15&H);for(A+=15&H,C&&(t=i.F._check(t,c+(1<<17)));c<O;)t[c]=t[c++-$],t[c]=t[c++-$],t[c]=t[c++-$],t[c]=t[c++-$];c=O}}}else{7&A&&(A+=8-(7&A));var L=4+(A>>>3),R=e[L-4]|e[L-3]<<8;C&&(t=i.F._check(t,c+R)),t.set(new a(e.buffer,e.byteOffset+L,R),c),A=L+R<<3,c+=R}return t.length==c?t:t.slice(0,c)},i.F._check=function(e,t){var a=e.length;if(t<=a)return e;var o=new Uint8Array(Math.max(a<<1,t));return o.set(e,0),o},i.F._decodeTiny=function(e,t,a,o,p,w){for(var r=i.F._bitsE,s=i.F._get17,n=0;n<a;){var l=e[s(o,p)&t];p+=15&l;var m=l>>>4;if(m<=15)w[n]=m,n++;else{var C=0,_=0;m==16?(_=3+r(o,p,2),p+=2,C=w[n-1]):m==17?(_=3+r(o,p,3),p+=3):m==18&&(_=11+r(o,p,7),p+=7);for(var U=n+_;n<U;)w[n]=C,n++}}return p},i.F._copyOut=function(e,t,a,o){for(var p=0,w=0,r=o.length>>>1;w<a;){var s=e[w+t];o[w<<1]=0,o[1+(w<<1)]=s,s>p&&(p=s),w++}for(;w<r;)o[w<<1]=0,o[1+(w<<1)]=0,w++;return p},i.F.makeCodes=function(e,t){for(var a,o,p,w,r=i.F.U,s=e.length,n=r.bl_count,l=0;l<=t;l++)n[l]=0;for(l=1;l<s;l+=2)n[e[l]]++;var m=r.next_code;for(a=0,n[0]=0,o=1;o<=t;o++)a=a+n[o-1]<<1,m[o]=a;for(p=0;p<s;p+=2)(w=e[p+1])!=0&&(e[p]=m[w],m[w]++)},i.F.codes2map=function(e,t,a){for(var o=e.length,p=i.F.U.rev15,w=0;w<o;w+=2)if(e[w+1]!=0)for(var r=w>>1,s=e[w+1],n=r<<4|s,l=t-s,m=e[w]<<l,C=m+(1<<l);m!=C;)a[p[m]>>>15-t]=n,m++},i.F.revCodes=function(e,t){for(var a=i.F.U.rev15,o=15-t,p=0;p<e.length;p+=2){var w=e[p]<<t-e[p+1];e[p]=a[w]>>>o}},i.F._putsE=function(e,t,a){a<<=7&t;var o=t>>>3;e[o]|=a,e[o+1]|=a>>>8},i.F._putsF=function(e,t,a){a<<=7&t;var o=t>>>3;e[o]|=a,e[o+1]|=a>>>8,e[o+2]|=a>>>16},i.F._bitsE=function(e,t,a){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<a)-1},i.F._bitsF=function(e,t,a){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<a)-1},i.F._get17=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)},i.F._get25=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16|e[3+(t>>>3)]<<24)>>>(7&t)},i.F.U=(u=Uint16Array,v=Uint32Array,{next_code:new u(16),bl_count:new u(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new u(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new v(32),flmap:new u(512),fltree:[],fdmap:new u(32),fdtree:[],lmap:new u(32768),ltree:[],ttree:[],dmap:new u(32768),dtree:[],imap:new u(512),itree:[],rev15:new u(32768),lhst:new v(286),dhst:new v(30),ihst:new v(19),lits:new v(15e3),strt:new u(65536),prev:new u(32768)}),function(){for(var e=i.F.U,t=0;t<32768;t++){var a=t;a=(4278255360&(a=(4042322160&(a=(3435973836&(a=(2863311530&a)>>>1|(1431655765&a)<<1))>>>2|(858993459&a)<<2))>>>4|(252645135&a)<<4))>>>8|(16711935&a)<<8,e.rev15[t]=(a>>>16|a<<16)>>>17}function o(p,w,r){for(;w--!=0;)p.push(0,r)}for(t=0;t<32;t++)e.ldef[t]=e.of0[t]<<3|e.exb[t],e.ddef[t]=e.df0[t]<<4|e.dxb[t];o(e.fltree,144,8),o(e.fltree,112,9),o(e.fltree,24,7),o(e.fltree,8,8),i.F.makeCodes(e.fltree,9),i.F.codes2map(e.fltree,9,e.flmap),i.F.revCodes(e.fltree,9),o(e.fdtree,32,5),i.F.makeCodes(e.fdtree,5),i.F.codes2map(e.fdtree,5,e.fdmap),i.F.revCodes(e.fdtree,5),o(e.itree,19,0),o(e.ltree,286,0),o(e.dtree,30,0),o(e.ttree,320,0)}()})();var ln=on({__proto__:null,default:Ke},[Ke]);const ge=function(){var h={nextZero(r,s){for(;r[s]!=0;)s++;return s},readUshort:(r,s)=>r[s]<<8|r[s+1],writeUshort(r,s,n){r[s]=n>>8&255,r[s+1]=255&n},readUint:(r,s)=>16777216*r[s]+(r[s+1]<<16|r[s+2]<<8|r[s+3]),writeUint(r,s,n){r[s]=n>>24&255,r[s+1]=n>>16&255,r[s+2]=n>>8&255,r[s+3]=255&n},readASCII(r,s,n){let l="";for(let m=0;m<n;m++)l+=String.fromCharCode(r[s+m]);return l},writeASCII(r,s,n){for(let l=0;l<n.length;l++)r[s+l]=n.charCodeAt(l)},readBytes(r,s,n){const l=[];for(let m=0;m<n;m++)l.push(r[s+m]);return l},pad:r=>r.length<2?`0${r}`:r,readUTF8(r,s,n){let l,m="";for(let C=0;C<n;C++)m+=`%${h.pad(r[s+C].toString(16))}`;try{l=decodeURIComponent(m)}catch{return h.readASCII(r,s,n)}return l}};function u(r,s,n,l){const m=s*n,C=t(l),_=Math.ceil(s*C/8),U=new Uint8Array(4*m),P=new Uint32Array(U.buffer),{ctype:x}=l,{depth:M}=l,k=h.readUshort;if(x==6){const F=m<<2;if(M==8)for(var b=0;b<F;b+=4)U[b]=r[b],U[b+1]=r[b+1],U[b+2]=r[b+2],U[b+3]=r[b+3];if(M==16)for(b=0;b<F;b++)U[b]=r[b<<1]}else if(x==2){const F=l.tabs.tRNS;if(F==null){if(M==8)for(b=0;b<m;b++){var D=3*b;P[b]=255<<24|r[D+2]<<16|r[D+1]<<8|r[D]}if(M==16)for(b=0;b<m;b++)D=6*b,P[b]=255<<24|r[D+4]<<16|r[D+2]<<8|r[D]}else{var d=F[0];const N=F[1],Q=F[2];if(M==8)for(b=0;b<m;b++){var c=b<<2;D=3*b,P[b]=255<<24|r[D+2]<<16|r[D+1]<<8|r[D],r[D]==d&&r[D+1]==N&&r[D+2]==Q&&(U[c+3]=0)}if(M==16)for(b=0;b<m;b++)c=b<<2,D=6*b,P[b]=255<<24|r[D+4]<<16|r[D+2]<<8|r[D],k(r,D)==d&&k(r,D+2)==N&&k(r,D+4)==Q&&(U[c+3]=0)}}else if(x==3){const F=l.tabs.PLTE,N=l.tabs.tRNS,Q=N?N.length:0;if(M==1)for(var A=0;A<n;A++){var E=A*_,I=A*s;for(b=0;b<s;b++){c=I+b<<2;var T=3*(y=r[E+(b>>3)]>>7-((7&b)<<0)&1);U[c]=F[T],U[c+1]=F[T+1],U[c+2]=F[T+2],U[c+3]=y<Q?N[y]:255}}if(M==2)for(A=0;A<n;A++)for(E=A*_,I=A*s,b=0;b<s;b++)c=I+b<<2,T=3*(y=r[E+(b>>2)]>>6-((3&b)<<1)&3),U[c]=F[T],U[c+1]=F[T+1],U[c+2]=F[T+2],U[c+3]=y<Q?N[y]:255;if(M==4)for(A=0;A<n;A++)for(E=A*_,I=A*s,b=0;b<s;b++)c=I+b<<2,T=3*(y=r[E+(b>>1)]>>4-((1&b)<<2)&15),U[c]=F[T],U[c+1]=F[T+1],U[c+2]=F[T+2],U[c+3]=y<Q?N[y]:255;if(M==8)for(b=0;b<m;b++){var y;c=b<<2,T=3*(y=r[b]),U[c]=F[T],U[c+1]=F[T+1],U[c+2]=F[T+2],U[c+3]=y<Q?N[y]:255}}else if(x==4){if(M==8)for(b=0;b<m;b++){c=b<<2;var S=r[g=b<<1];U[c]=S,U[c+1]=S,U[c+2]=S,U[c+3]=r[g+1]}if(M==16)for(b=0;b<m;b++){var g;c=b<<2,S=r[g=b<<2],U[c]=S,U[c+1]=S,U[c+2]=S,U[c+3]=r[g+2]}}else if(x==0)for(d=l.tabs.tRNS?l.tabs.tRNS:-1,A=0;A<n;A++){const F=A*_,N=A*s;if(M==1)for(var f=0;f<s;f++){var O=(S=255*(r[F+(f>>>3)]>>>7-(7&f)&1))==255*d?0:255;P[N+f]=O<<24|S<<16|S<<8|S}else if(M==2)for(f=0;f<s;f++)O=(S=85*(r[F+(f>>>2)]>>>6-((3&f)<<1)&3))==85*d?0:255,P[N+f]=O<<24|S<<16|S<<8|S;else if(M==4)for(f=0;f<s;f++)O=(S=17*(r[F+(f>>>1)]>>>4-((1&f)<<2)&15))==17*d?0:255,P[N+f]=O<<24|S<<16|S<<8|S;else if(M==8)for(f=0;f<s;f++)O=(S=r[F+f])==d?0:255,P[N+f]=O<<24|S<<16|S<<8|S;else if(M==16)for(f=0;f<s;f++)S=r[F+(f<<1)],O=k(r,F+(f<<1))==d?0:255,P[N+f]=O<<24|S<<16|S<<8|S}return U}function v(r,s,n,l){const m=t(r),C=Math.ceil(n*m/8),_=new Uint8Array((C+1+r.interlace)*l);return s=r.tabs.CgBI?e(s,_):i(s,_),r.interlace==0?s=a(s,r,0,n,l):r.interlace==1&&(s=function(P,x){const M=x.width,k=x.height,b=t(x),D=b>>3,d=Math.ceil(M*b/8),c=new Uint8Array(k*d);let A=0;const E=[0,0,4,0,2,0,1],I=[0,4,0,2,0,1,0],T=[8,8,8,4,4,2,2],y=[8,8,4,4,2,2,1];let S=0;for(;S<7;){const f=T[S],O=y[S];let F=0,N=0,Q=E[S];for(;Q<k;)Q+=f,N++;let H=I[S];for(;H<M;)H+=O,F++;const $=Math.ceil(F*b/8);a(P,x,A,F,N);let L=0,R=E[S];for(;R<k;){let z=I[S],Y=A+L*$<<3;for(;z<M;){var g;if(b==1&&(g=(g=P[Y>>3])>>7-(7&Y)&1,c[R*d+(z>>3)]|=g<<7-((7&z)<<0)),b==2&&(g=(g=P[Y>>3])>>6-(7&Y)&3,c[R*d+(z>>2)]|=g<<6-((3&z)<<1)),b==4&&(g=(g=P[Y>>3])>>4-(7&Y)&15,c[R*d+(z>>1)]|=g<<4-((1&z)<<2)),b>=8){const B=R*d+z*D;for(let W=0;W<D;W++)c[B+W]=P[(Y>>3)+W]}Y+=b,z+=O}L++,R+=f}F*N!=0&&(A+=N*(1+$)),S+=1}return c}(s,r)),s}function i(r,s){return e(new Uint8Array(r.buffer,2,r.length-6),s)}var e=function(){const r={H:{}};return r.H.N=function(s,n){const l=Uint8Array;let m,C,_=0,U=0,P=0,x=0,M=0,k=0,b=0,D=0,d=0;if(s[0]==3&&s[1]==0)return n||new l(0);const c=r.H,A=c.b,E=c.e,I=c.R,T=c.n,y=c.A,S=c.Z,g=c.m,f=n==null;for(f&&(n=new l(s.length>>>2<<5));_==0;)if(_=A(s,d,1),U=A(s,d+1,2),d+=3,U!=0){if(f&&(n=r.H.W(n,D+(1<<17))),U==1&&(m=g.J,C=g.h,k=511,b=31),U==2){P=E(s,d,5)+257,x=E(s,d+5,5)+1,M=E(s,d+10,4)+4,d+=14;let F=1;for(var O=0;O<38;O+=2)g.Q[O]=0,g.Q[O+1]=0;for(O=0;O<M;O++){const H=E(s,d+3*O,3);g.Q[1+(g.X[O]<<1)]=H,H>F&&(F=H)}d+=3*M,T(g.Q,F),y(g.Q,F,g.u),m=g.w,C=g.d,d=I(g.u,(1<<F)-1,P+x,s,d,g.v);const N=c.V(g.v,0,P,g.C);k=(1<<N)-1;const Q=c.V(g.v,P,x,g.D);b=(1<<Q)-1,T(g.C,N),y(g.C,N,m),T(g.D,Q),y(g.D,Q,C)}for(;;){const F=m[S(s,d)&k];d+=15&F;const N=F>>>4;if(!(N>>>8))n[D++]=N;else{if(N==256)break;{let Q=D+N-254;if(N>264){const z=g.q[N-257];Q=D+(z>>>3)+E(s,d,7&z),d+=7&z}const H=C[S(s,d)&b];d+=15&H;const $=H>>>4,L=g.c[$],R=(L>>>4)+A(s,d,15&L);for(d+=15&L;D<Q;)n[D]=n[D++-R],n[D]=n[D++-R],n[D]=n[D++-R],n[D]=n[D++-R];D=Q}}}}else{7&d&&(d+=8-(7&d));const F=4+(d>>>3),N=s[F-4]|s[F-3]<<8;f&&(n=r.H.W(n,D+N)),n.set(new l(s.buffer,s.byteOffset+F,N),D),d=F+N<<3,D+=N}return n.length==D?n:n.slice(0,D)},r.H.W=function(s,n){const l=s.length;if(n<=l)return s;const m=new Uint8Array(l<<1);return m.set(s,0),m},r.H.R=function(s,n,l,m,C,_){const U=r.H.e,P=r.H.Z;let x=0;for(;x<l;){const M=s[P(m,C)&n];C+=15&M;const k=M>>>4;if(k<=15)_[x]=k,x++;else{let b=0,D=0;k==16?(D=3+U(m,C,2),C+=2,b=_[x-1]):k==17?(D=3+U(m,C,3),C+=3):k==18&&(D=11+U(m,C,7),C+=7);const d=x+D;for(;x<d;)_[x]=b,x++}}return C},r.H.V=function(s,n,l,m){let C=0,_=0;const U=m.length>>>1;for(;_<l;){const P=s[_+n];m[_<<1]=0,m[1+(_<<1)]=P,P>C&&(C=P),_++}for(;_<U;)m[_<<1]=0,m[1+(_<<1)]=0,_++;return C},r.H.n=function(s,n){const l=r.H.m,m=s.length;let C,_,U,P;const x=l.j;for(var M=0;M<=n;M++)x[M]=0;for(M=1;M<m;M+=2)x[s[M]]++;const k=l.K;for(C=0,x[0]=0,_=1;_<=n;_++)C=C+x[_-1]<<1,k[_]=C;for(U=0;U<m;U+=2)P=s[U+1],P!=0&&(s[U]=k[P],k[P]++)},r.H.A=function(s,n,l){const m=s.length,C=r.H.m.r;for(let _=0;_<m;_+=2)if(s[_+1]!=0){const U=_>>1,P=s[_+1],x=U<<4|P,M=n-P;let k=s[_]<<M;const b=k+(1<<M);for(;k!=b;)l[C[k]>>>15-n]=x,k++}},r.H.l=function(s,n){const l=r.H.m.r,m=15-n;for(let C=0;C<s.length;C+=2){const _=s[C]<<n-s[C+1];s[C]=l[_]>>>m}},r.H.M=function(s,n,l){l<<=7&n;const m=n>>>3;s[m]|=l,s[m+1]|=l>>>8},r.H.I=function(s,n,l){l<<=7&n;const m=n>>>3;s[m]|=l,s[m+1]|=l>>>8,s[m+2]|=l>>>16},r.H.e=function(s,n,l){return(s[n>>>3]|s[1+(n>>>3)]<<8)>>>(7&n)&(1<<l)-1},r.H.b=function(s,n,l){return(s[n>>>3]|s[1+(n>>>3)]<<8|s[2+(n>>>3)]<<16)>>>(7&n)&(1<<l)-1},r.H.Z=function(s,n){return(s[n>>>3]|s[1+(n>>>3)]<<8|s[2+(n>>>3)]<<16)>>>(7&n)},r.H.i=function(s,n){return(s[n>>>3]|s[1+(n>>>3)]<<8|s[2+(n>>>3)]<<16|s[3+(n>>>3)]<<24)>>>(7&n)},r.H.m=function(){const s=Uint16Array,n=Uint32Array;return{K:new s(16),j:new s(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new s(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new n(32),J:new s(512),_:[],h:new s(32),$:[],w:new s(32768),C:[],v:[],d:new s(32768),D:[],u:new s(512),Q:[],r:new s(32768),s:new n(286),Y:new n(30),a:new n(19),t:new n(15e3),k:new s(65536),g:new s(32768)}}(),function(){const s=r.H.m;for(var n=0;n<32768;n++){let m=n;m=(2863311530&m)>>>1|(1431655765&m)<<1,m=(3435973836&m)>>>2|(858993459&m)<<2,m=(4042322160&m)>>>4|(252645135&m)<<4,m=(4278255360&m)>>>8|(16711935&m)<<8,s.r[n]=(m>>>16|m<<16)>>>17}function l(m,C,_){for(;C--!=0;)m.push(0,_)}for(n=0;n<32;n++)s.q[n]=s.S[n]<<3|s.T[n],s.c[n]=s.p[n]<<4|s.z[n];l(s._,144,8),l(s._,112,9),l(s._,24,7),l(s._,8,8),r.H.n(s._,9),r.H.A(s._,9,s.J),r.H.l(s._,9),l(s.$,32,5),r.H.n(s.$,5),r.H.A(s.$,5,s.h),r.H.l(s.$,5),l(s.Q,19,0),l(s.C,286,0),l(s.D,30,0),l(s.v,320,0)}(),r.H.N}();function t(r){return[1,null,3,1,2,null,4][r.ctype]*r.depth}function a(r,s,n,l,m){let C=t(s);const _=Math.ceil(l*C/8);let U,P;C=Math.ceil(C/8);let x=r[n],M=0;if(x>1&&(r[n]=[0,0,1][x-2]),x==3)for(M=C;M<_;M++)r[M+1]=r[M+1]+(r[M+1-C]>>>1)&255;for(let k=0;k<m;k++)if(U=n+k*_,P=U+k+1,x=r[P-1],M=0,x==0)for(;M<_;M++)r[U+M]=r[P+M];else if(x==1){for(;M<C;M++)r[U+M]=r[P+M];for(;M<_;M++)r[U+M]=r[P+M]+r[U+M-C]}else if(x==2)for(;M<_;M++)r[U+M]=r[P+M]+r[U+M-_];else if(x==3){for(;M<C;M++)r[U+M]=r[P+M]+(r[U+M-_]>>>1);for(;M<_;M++)r[U+M]=r[P+M]+(r[U+M-_]+r[U+M-C]>>>1)}else{for(;M<C;M++)r[U+M]=r[P+M]+o(0,r[U+M-_],0);for(;M<_;M++)r[U+M]=r[P+M]+o(r[U+M-C],r[U+M-_],r[U+M-C-_])}return r}function o(r,s,n){const l=r+s-n,m=l-r,C=l-s,_=l-n;return m*m<=C*C&&m*m<=_*_?r:C*C<=_*_?s:n}function p(r,s,n){n.width=h.readUint(r,s),s+=4,n.height=h.readUint(r,s),s+=4,n.depth=r[s],s++,n.ctype=r[s],s++,n.compress=r[s],s++,n.filter=r[s],s++,n.interlace=r[s],s++}function w(r,s,n,l,m,C,_,U,P){const x=Math.min(s,m),M=Math.min(n,C);let k=0,b=0;for(let S=0;S<M;S++)for(let g=0;g<x;g++)if(_>=0&&U>=0?(k=S*s+g<<2,b=(U+S)*m+_+g<<2):(k=(-U+S)*s-_+g<<2,b=S*m+g<<2),P==0)l[b]=r[k],l[b+1]=r[k+1],l[b+2]=r[k+2],l[b+3]=r[k+3];else if(P==1){var D=r[k+3]*.00392156862745098,d=r[k]*D,c=r[k+1]*D,A=r[k+2]*D,E=l[b+3]*(1/255),I=l[b]*E,T=l[b+1]*E,y=l[b+2]*E;const f=1-D,O=D+E*f,F=O==0?0:1/O;l[b+3]=255*O,l[b+0]=(d+I*f)*F,l[b+1]=(c+T*f)*F,l[b+2]=(A+y*f)*F}else if(P==2)D=r[k+3],d=r[k],c=r[k+1],A=r[k+2],E=l[b+3],I=l[b],T=l[b+1],y=l[b+2],D==E&&d==I&&c==T&&A==y?(l[b]=0,l[b+1]=0,l[b+2]=0,l[b+3]=0):(l[b]=d,l[b+1]=c,l[b+2]=A,l[b+3]=D);else if(P==3){if(D=r[k+3],d=r[k],c=r[k+1],A=r[k+2],E=l[b+3],I=l[b],T=l[b+1],y=l[b+2],D==E&&d==I&&c==T&&A==y)continue;if(D<220&&E>20)return!1}return!0}return{decode:function(s){const n=new Uint8Array(s);let l=8;const m=h,C=m.readUshort,_=m.readUint,U={tabs:{},frames:[]},P=new Uint8Array(n.length);let x,M=0,k=0;const b=[137,80,78,71,13,10,26,10];for(var D=0;D<8;D++)if(n[D]!=b[D])throw"The input is not a PNG file!";for(;l<n.length;){const S=m.readUint(n,l);l+=4;const g=m.readASCII(n,l,4);if(l+=4,g=="IHDR")p(n,l,U);else if(g=="iCCP"){for(var d=l;n[d]!=0;)d++;m.readASCII(n,l,d-l),n[d+1];const f=n.slice(d+2,l+S);let O=null;try{O=i(f)}catch{O=e(f)}U.tabs[g]=O}else if(g=="CgBI")U.tabs[g]=n.slice(l,l+4);else if(g=="IDAT"){for(D=0;D<S;D++)P[M+D]=n[l+D];M+=S}else if(g=="acTL")U.tabs[g]={num_frames:_(n,l),num_plays:_(n,l+4)},x=new Uint8Array(n.length);else if(g=="fcTL"){k!=0&&((y=U.frames[U.frames.length-1]).data=v(U,x.slice(0,k),y.rect.width,y.rect.height),k=0);const f={x:_(n,l+12),y:_(n,l+16),width:_(n,l+4),height:_(n,l+8)};let O=C(n,l+22);O=C(n,l+20)/(O==0?100:O);const F={rect:f,delay:Math.round(1e3*O),dispose:n[l+24],blend:n[l+25]};U.frames.push(F)}else if(g=="fdAT"){for(D=0;D<S-4;D++)x[k+D]=n[l+D+4];k+=S-4}else if(g=="pHYs")U.tabs[g]=[m.readUint(n,l),m.readUint(n,l+4),n[l+8]];else if(g=="cHRM")for(U.tabs[g]=[],D=0;D<8;D++)U.tabs[g].push(m.readUint(n,l+4*D));else if(g=="tEXt"||g=="zTXt"){U.tabs[g]==null&&(U.tabs[g]={});var c=m.nextZero(n,l),A=m.readASCII(n,l,c-l),E=l+S-c-1;if(g=="tEXt")T=m.readASCII(n,c+1,E);else{var I=i(n.slice(c+2,c+2+E));T=m.readUTF8(I,0,I.length)}U.tabs[g][A]=T}else if(g=="iTXt"){U.tabs[g]==null&&(U.tabs[g]={}),c=0,d=l,c=m.nextZero(n,d),A=m.readASCII(n,d,c-d);const f=n[d=c+1];var T;n[d+1],d+=2,c=m.nextZero(n,d),m.readASCII(n,d,c-d),d=c+1,c=m.nextZero(n,d),m.readUTF8(n,d,c-d),E=S-((d=c+1)-l),f==0?T=m.readUTF8(n,d,E):(I=i(n.slice(d,d+E)),T=m.readUTF8(I,0,I.length)),U.tabs[g][A]=T}else if(g=="PLTE")U.tabs[g]=m.readBytes(n,l,S);else if(g=="hIST"){const f=U.tabs.PLTE.length/3;for(U.tabs[g]=[],D=0;D<f;D++)U.tabs[g].push(C(n,l+2*D))}else if(g=="tRNS")U.ctype==3?U.tabs[g]=m.readBytes(n,l,S):U.ctype==0?U.tabs[g]=C(n,l):U.ctype==2&&(U.tabs[g]=[C(n,l),C(n,l+2),C(n,l+4)]);else if(g=="gAMA")U.tabs[g]=m.readUint(n,l)/1e5;else if(g=="sRGB")U.tabs[g]=n[l];else if(g=="bKGD")U.ctype==0||U.ctype==4?U.tabs[g]=[C(n,l)]:U.ctype==2||U.ctype==6?U.tabs[g]=[C(n,l),C(n,l+2),C(n,l+4)]:U.ctype==3&&(U.tabs[g]=n[l]);else if(g=="IEND")break;l+=S,m.readUint(n,l),l+=4}var y;return k!=0&&((y=U.frames[U.frames.length-1]).data=v(U,x.slice(0,k),y.rect.width,y.rect.height)),U.data=v(U,P,U.width,U.height),delete U.compress,delete U.interlace,delete U.filter,U},toRGBA8:function(s){const n=s.width,l=s.height;if(s.tabs.acTL==null)return[u(s.data,n,l,s).buffer];const m=[];s.frames[0].data==null&&(s.frames[0].data=s.data);const C=n*l*4,_=new Uint8Array(C),U=new Uint8Array(C),P=new Uint8Array(C);for(let M=0;M<s.frames.length;M++){const k=s.frames[M],b=k.rect.x,D=k.rect.y,d=k.rect.width,c=k.rect.height,A=u(k.data,d,c,s);if(M!=0)for(var x=0;x<C;x++)P[x]=_[x];if(k.blend==0?w(A,d,c,_,n,l,b,D,0):k.blend==1&&w(A,d,c,_,n,l,b,D,1),m.push(_.buffer.slice(0)),k.dispose!=0){if(k.dispose==1)w(U,d,c,_,n,l,b,D,0);else if(k.dispose==2)for(x=0;x<C;x++)_[x]=P[x]}}return m},_paeth:o,_copyTile:w,_bin:h}}();(function(){const{_copyTile:h}=ge,{_bin:u}=ge,v=ge._paeth;var i={table:function(){const d=new Uint32Array(256);for(let c=0;c<256;c++){let A=c;for(let E=0;E<8;E++)1&A?A=3988292384^A>>>1:A>>>=1;d[c]=A}return d}(),update(d,c,A,E){for(let I=0;I<E;I++)d=i.table[255&(d^c[A+I])]^d>>>8;return d},crc:(d,c,A)=>4294967295^i.update(4294967295,d,c,A)};function e(d,c,A,E){c[A]+=d[0]*E>>4,c[A+1]+=d[1]*E>>4,c[A+2]+=d[2]*E>>4,c[A+3]+=d[3]*E>>4}function t(d){return Math.max(0,Math.min(255,d))}function a(d,c){const A=d[0]-c[0],E=d[1]-c[1],I=d[2]-c[2],T=d[3]-c[3];return A*A+E*E+I*I+T*T}function o(d,c,A,E,I,T,y){y==null&&(y=1);const S=E.length,g=[];for(var f=0;f<S;f++){const R=E[f];g.push([R>>>0&255,R>>>8&255,R>>>16&255,R>>>24&255])}for(f=0;f<S;f++){let R=4294967295;for(var O=0,F=0;F<S;F++){var N=a(g[f],g[F]);F!=f&&N<R&&(R=N,O=F)}}const Q=new Uint32Array(I.buffer),H=new Int16Array(c*A*4),$=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(f=0;f<$.length;f++)$[f]=255*(($[f]+.5)/16-.5);for(let R=0;R<A;R++)for(let z=0;z<c;z++){var L;f=4*(R*c+z),y!=2?L=[t(d[f]+H[f]),t(d[f+1]+H[f+1]),t(d[f+2]+H[f+2]),t(d[f+3]+H[f+3])]:(N=$[4*(3&R)+(3&z)],L=[t(d[f]+N),t(d[f+1]+N),t(d[f+2]+N),t(d[f+3]+N)]),O=0;let Y=16777215;for(F=0;F<S;F++){const q=a(L,g[F]);q<Y&&(Y=q,O=F)}const B=g[O],W=[L[0]-B[0],L[1]-B[1],L[2]-B[2],L[3]-B[3]];y==1&&(z!=c-1&&e(W,H,f+4,7),R!=A-1&&(z!=0&&e(W,H,f+4*c-4,3),e(W,H,f+4*c,5),z!=c-1&&e(W,H,f+4*c+4,1))),T[f>>2]=O,Q[f>>2]=E[O]}}function p(d,c,A,E,I){I==null&&(I={});const{crc:T}=i,y=u.writeUint,S=u.writeUshort,g=u.writeASCII;let f=8;const O=d.frames.length>1;let F,N=!1,Q=33+(O?20:0);if(I.sRGB!=null&&(Q+=13),I.pHYs!=null&&(Q+=21),I.iCCP!=null&&(F=pako.deflate(I.iCCP),Q+=21+F.length+4),d.ctype==3){for(var H=d.plte.length,$=0;$<H;$++)d.plte[$]>>>24!=255&&(N=!0);Q+=8+3*H+4+(N?8+1*H+4:0)}for(var L=0;L<d.frames.length;L++)O&&(Q+=38),Q+=(B=d.frames[L]).cimg.length+12,L!=0&&(Q+=4);Q+=12;const R=new Uint8Array(Q),z=[137,80,78,71,13,10,26,10];for($=0;$<8;$++)R[$]=z[$];if(y(R,f,13),f+=4,g(R,f,"IHDR"),f+=4,y(R,f,c),f+=4,y(R,f,A),f+=4,R[f]=d.depth,f++,R[f]=d.ctype,f++,R[f]=0,f++,R[f]=0,f++,R[f]=0,f++,y(R,f,T(R,f-17,17)),f+=4,I.sRGB!=null&&(y(R,f,1),f+=4,g(R,f,"sRGB"),f+=4,R[f]=I.sRGB,f++,y(R,f,T(R,f-5,5)),f+=4),I.iCCP!=null){const W=13+F.length;y(R,f,W),f+=4,g(R,f,"iCCP"),f+=4,g(R,f,"ICC profile"),f+=11,f+=2,R.set(F,f),f+=F.length,y(R,f,T(R,f-(W+4),W+4)),f+=4}if(I.pHYs!=null&&(y(R,f,9),f+=4,g(R,f,"pHYs"),f+=4,y(R,f,I.pHYs[0]),f+=4,y(R,f,I.pHYs[1]),f+=4,R[f]=I.pHYs[2],f++,y(R,f,T(R,f-13,13)),f+=4),O&&(y(R,f,8),f+=4,g(R,f,"acTL"),f+=4,y(R,f,d.frames.length),f+=4,y(R,f,I.loop!=null?I.loop:0),f+=4,y(R,f,T(R,f-12,12)),f+=4),d.ctype==3){for(y(R,f,3*(H=d.plte.length)),f+=4,g(R,f,"PLTE"),f+=4,$=0;$<H;$++){const W=3*$,q=d.plte[$],V=255&q,te=q>>>8&255,Ce=q>>>16&255;R[f+W+0]=V,R[f+W+1]=te,R[f+W+2]=Ce}if(f+=3*H,y(R,f,T(R,f-3*H-4,3*H+4)),f+=4,N){for(y(R,f,H),f+=4,g(R,f,"tRNS"),f+=4,$=0;$<H;$++)R[f+$]=d.plte[$]>>>24&255;f+=H,y(R,f,T(R,f-H-4,H+4)),f+=4}}let Y=0;for(L=0;L<d.frames.length;L++){var B=d.frames[L];O&&(y(R,f,26),f+=4,g(R,f,"fcTL"),f+=4,y(R,f,Y++),f+=4,y(R,f,B.rect.width),f+=4,y(R,f,B.rect.height),f+=4,y(R,f,B.rect.x),f+=4,y(R,f,B.rect.y),f+=4,S(R,f,E[L]),f+=2,S(R,f,1e3),f+=2,R[f]=B.dispose,f++,R[f]=B.blend,f++,y(R,f,T(R,f-30,30)),f+=4);const W=B.cimg;y(R,f,(H=W.length)+(L==0?0:4)),f+=4;const q=f;g(R,f,L==0?"IDAT":"fdAT"),f+=4,L!=0&&(y(R,f,Y++),f+=4),R.set(W,f),f+=H,y(R,f,T(R,q,f-q)),f+=4}return y(R,f,0),f+=4,g(R,f,"IEND"),f+=4,y(R,f,T(R,f-4,4)),f+=4,R.buffer}function w(d,c,A){for(let E=0;E<d.frames.length;E++){const I=d.frames[E];I.rect.width;const T=I.rect.height,y=new Uint8Array(T*I.bpl+T);I.cimg=l(I.img,T,I.bpp,I.bpl,y,c,A)}}function r(d,c,A,E,I){const T=I[0],y=I[1],S=I[2],g=I[3],f=I[4],O=I[5];let F=6,N=8,Q=255;for(var H=0;H<d.length;H++){const ie=new Uint8Array(d[H]);for(var $=ie.length,L=0;L<$;L+=4)Q&=ie[L+3]}const R=Q!=255,z=function(Z,K,ne,oe,J,ue){const ee=[];for(var j=0;j<Z.length;j++){const ae=new Uint8Array(Z[j]),he=new Uint32Array(ae.buffer);var ce;let de=0,be=0,me=K,Se=ne,Ve=oe?1:0;if(j!=0){const xt=ue||oe||j==1||ee[j-2].dispose!=0?1:2;let Je=0,lt=1e9;for(let Le=0;Le<xt;Le++){var Ue=new Uint8Array(Z[j-1-Le]);const Ot=new Uint32Array(Z[j-1-Le]);let Ie=K,Ee=ne,De=-1,He=-1;for(let Me=0;Me<ne;Me++)for(let _e=0;_e<K;_e++)he[se=Me*K+_e]!=Ot[se]&&(_e<Ie&&(Ie=_e),_e>De&&(De=_e),Me<Ee&&(Ee=Me),Me>He&&(He=Me));De==-1&&(Ie=Ee=De=He=0),J&&((1&Ie)==1&&Ie--,(1&Ee)==1&&Ee--);const ut=(De-Ie+1)*(He-Ee+1);ut<lt&&(lt=ut,Je=Le,de=Ie,be=Ee,me=De-Ie+1,Se=He-Ee+1)}Ue=new Uint8Array(Z[j-1-Je]),Je==1&&(ee[j-1].dispose=2),ce=new Uint8Array(me*Se*4),h(Ue,K,ne,ce,me,Se,-de,-be,0),Ve=h(ae,K,ne,ce,me,Se,-de,-be,3)?1:0,Ve==1?n(ae,K,ne,ce,{x:de,y:be,width:me,height:Se}):h(ae,K,ne,ce,me,Se,-de,-be,0)}else ce=ae.slice(0);ee.push({rect:{x:de,y:be,width:me,height:Se},img:ce,blend:Ve,dispose:0})}if(oe)for(j=0;j<ee.length;j++){if((Fe=ee[j]).blend==1)continue;const ae=Fe.rect,he=ee[j-1].rect,de=Math.min(ae.x,he.x),be=Math.min(ae.y,he.y),me={x:de,y:be,width:Math.max(ae.x+ae.width,he.x+he.width)-de,height:Math.max(ae.y+ae.height,he.y+he.height)-be};ee[j-1].dispose=1,j-1!=0&&s(Z,K,ne,ee,j-1,me,J),s(Z,K,ne,ee,j,me,J)}let ze=0;if(Z.length!=1)for(var se=0;se<ee.length;se++){var Fe;ze+=(Fe=ee[se]).rect.width*Fe.rect.height}return ee}(d,c,A,T,y,S),Y={},B=[],W=[];if(E!=0){const ie=[];for(L=0;L<z.length;L++)ie.push(z[L].img.buffer);const Z=function(J){let ue=0;for(var ee=0;ee<J.length;ee++)ue+=J[ee].byteLength;const j=new Uint8Array(ue);let ce=0;for(ee=0;ee<J.length;ee++){const Ue=new Uint8Array(J[ee]),ze=Ue.length;for(let se=0;se<ze;se+=4){let Fe=Ue[se],ae=Ue[se+1],he=Ue[se+2];const de=Ue[se+3];de==0&&(Fe=ae=he=0),j[ce+se]=Fe,j[ce+se+1]=ae,j[ce+se+2]=he,j[ce+se+3]=de}ce+=ze}return j.buffer}(ie),K=C(Z,E);for(L=0;L<K.plte.length;L++)B.push(K.plte[L].est.rgba);let ne=0;for(L=0;L<z.length;L++){const oe=(V=z[L]).img.length;var q=new Uint8Array(K.inds.buffer,ne>>2,oe>>2);W.push(q);const J=new Uint8Array(K.abuf,ne,oe);O&&o(V.img,V.rect.width,V.rect.height,B,J,q),V.img.set(J),ne+=oe}}else for(H=0;H<z.length;H++){var V=z[H];const ie=new Uint32Array(V.img.buffer);var te=V.rect.width;for($=ie.length,q=new Uint8Array($),W.push(q),L=0;L<$;L++){const Z=ie[L];if(L!=0&&Z==ie[L-1])q[L]=q[L-1];else if(L>te&&Z==ie[L-te])q[L]=q[L-te];else{let K=Y[Z];if(K==null&&(Y[Z]=K=B.length,B.push(Z),B.length>=300))break;q[L]=K}}}const Ce=B.length;for(Ce<=256&&f==0&&(N=Ce<=2?1:Ce<=4?2:Ce<=16?4:8,N=Math.max(N,g)),H=0;H<z.length;H++){(V=z[H]).rect.x,V.rect.y,te=V.rect.width;const ie=V.rect.height;let Z=V.img;new Uint32Array(Z.buffer);let K=4*te,ne=4;if(Ce<=256&&f==0){K=Math.ceil(N*te/8);var pe=new Uint8Array(K*ie);const oe=W[H];for(let J=0;J<ie;J++){L=J*K;const ue=J*te;if(N==8)for(var X=0;X<te;X++)pe[L+X]=oe[ue+X];else if(N==4)for(X=0;X<te;X++)pe[L+(X>>1)]|=oe[ue+X]<<4-4*(1&X);else if(N==2)for(X=0;X<te;X++)pe[L+(X>>2)]|=oe[ue+X]<<6-2*(3&X);else if(N==1)for(X=0;X<te;X++)pe[L+(X>>3)]|=oe[ue+X]<<7-1*(7&X)}Z=pe,F=3,ne=1}else if(R==0&&z.length==1){pe=new Uint8Array(te*ie*3);const oe=te*ie;for(L=0;L<oe;L++){const J=3*L,ue=4*L;pe[J]=Z[ue],pe[J+1]=Z[ue+1],pe[J+2]=Z[ue+2]}Z=pe,F=2,ne=3,K=3*te}V.img=Z,V.bpl=K,V.bpp=ne}return{ctype:F,depth:N,plte:B,frames:z}}function s(d,c,A,E,I,T,y){const S=Uint8Array,g=Uint32Array,f=new S(d[I-1]),O=new g(d[I-1]),F=I+1<d.length?new S(d[I+1]):null,N=new S(d[I]),Q=new g(N.buffer);let H=c,$=A,L=-1,R=-1;for(let Y=0;Y<T.height;Y++)for(let B=0;B<T.width;B++){const W=T.x+B,q=T.y+Y,V=q*c+W,te=Q[V];te==0||E[I-1].dispose==0&&O[V]==te&&(F==null||F[4*V+3]!=0)||(W<H&&(H=W),W>L&&(L=W),q<$&&($=q),q>R&&(R=q))}L==-1&&(H=$=L=R=0),y&&((1&H)==1&&H--,(1&$)==1&&$--),T={x:H,y:$,width:L-H+1,height:R-$+1};const z=E[I];z.rect=T,z.blend=1,z.img=new Uint8Array(T.width*T.height*4),E[I-1].dispose==0?(h(f,c,A,z.img,T.width,T.height,-T.x,-T.y,0),n(N,c,A,z.img,T)):h(N,c,A,z.img,T.width,T.height,-T.x,-T.y,0)}function n(d,c,A,E,I){h(d,c,A,E,I.width,I.height,-I.x,-I.y,2)}function l(d,c,A,E,I,T,y){const S=[];let g,f=[0,1,2,3,4];T!=-1?f=[T]:(c*E>5e5||A==1)&&(f=[0]),y&&(g={level:0});const O=ln;for(var F=0;F<f.length;F++){for(let H=0;H<c;H++)m(I,d,H,E,A,f[F]);S.push(O.deflate(I,g))}let N,Q=1e9;for(F=0;F<S.length;F++)S[F].length<Q&&(N=F,Q=S[F].length);return S[N]}function m(d,c,A,E,I,T){const y=A*E;let S=y+A;if(d[S]=T,S++,T==0)if(E<500)for(var g=0;g<E;g++)d[S+g]=c[y+g];else d.set(new Uint8Array(c.buffer,y,E),S);else if(T==1){for(g=0;g<I;g++)d[S+g]=c[y+g];for(g=I;g<E;g++)d[S+g]=c[y+g]-c[y+g-I]+256&255}else if(A==0){for(g=0;g<I;g++)d[S+g]=c[y+g];if(T==2)for(g=I;g<E;g++)d[S+g]=c[y+g];if(T==3)for(g=I;g<E;g++)d[S+g]=c[y+g]-(c[y+g-I]>>1)+256&255;if(T==4)for(g=I;g<E;g++)d[S+g]=c[y+g]-v(c[y+g-I],0,0)+256&255}else{if(T==2)for(g=0;g<E;g++)d[S+g]=c[y+g]+256-c[y+g-E]&255;if(T==3){for(g=0;g<I;g++)d[S+g]=c[y+g]+256-(c[y+g-E]>>1)&255;for(g=I;g<E;g++)d[S+g]=c[y+g]+256-(c[y+g-E]+c[y+g-I]>>1)&255}if(T==4){for(g=0;g<I;g++)d[S+g]=c[y+g]+256-v(0,c[y+g-E],0)&255;for(g=I;g<E;g++)d[S+g]=c[y+g]+256-v(c[y+g-I],c[y+g-E],c[y+g-I-E])&255}}}function C(d,c){const A=new Uint8Array(d),E=A.slice(0),I=new Uint32Array(E.buffer),T=_(E,c),y=T[0],S=T[1],g=A.length,f=new Uint8Array(g>>2);let O;if(A.length<2e7)for(var F=0;F<g;F+=4)O=U(y,N=A[F]*(1/255),Q=A[F+1]*(1/255),H=A[F+2]*(1/255),$=A[F+3]*(1/255)),f[F>>2]=O.ind,I[F>>2]=O.est.rgba;else for(F=0;F<g;F+=4){var N=A[F]*.00392156862745098,Q=A[F+1]*(1/255),H=A[F+2]*(1/255),$=A[F+3]*(1/255);for(O=y;O.left;)O=P(O.est,N,Q,H,$)<=0?O.left:O.right;f[F>>2]=O.ind,I[F>>2]=O.est.rgba}return{abuf:E.buffer,inds:f,plte:S}}function _(d,c,A){A==null&&(A=1e-4);const E=new Uint32Array(d.buffer),I={i0:0,i1:d.length,bst:null,est:null,tdst:0,left:null,right:null};I.bst=k(d,I.i0,I.i1),I.est=b(I.bst);const T=[I];for(;T.length<c;){let S=0,g=0;for(var y=0;y<T.length;y++)T[y].est.L>S&&(S=T[y].est.L,g=y);if(S<A)break;const f=T[g],O=x(d,E,f.i0,f.i1,f.est.e,f.est.eMq255);if(f.i0>=O||f.i1<=O){f.est.L=0;continue}const F={i0:f.i0,i1:O,bst:null,est:null,tdst:0,left:null,right:null};F.bst=k(d,F.i0,F.i1),F.est=b(F.bst);const N={i0:O,i1:f.i1,bst:null,est:null,tdst:0,left:null,right:null};for(N.bst={R:[],m:[],N:f.bst.N-F.bst.N},y=0;y<16;y++)N.bst.R[y]=f.bst.R[y]-F.bst.R[y];for(y=0;y<4;y++)N.bst.m[y]=f.bst.m[y]-F.bst.m[y];N.est=b(N.bst),f.left=F,f.right=N,T[g]=F,T.push(N)}for(T.sort((S,g)=>g.bst.N-S.bst.N),y=0;y<T.length;y++)T[y].ind=y;return[I,T]}function U(d,c,A,E,I){if(d.left==null)return d.tdst=function(F,N,Q,H,$){const L=N-F[0],R=Q-F[1],z=H-F[2],Y=$-F[3];return L*L+R*R+z*z+Y*Y}(d.est.q,c,A,E,I),d;const T=P(d.est,c,A,E,I);let y=d.left,S=d.right;T>0&&(y=d.right,S=d.left);const g=U(y,c,A,E,I);if(g.tdst<=T*T)return g;const f=U(S,c,A,E,I);return f.tdst<g.tdst?f:g}function P(d,c,A,E,I){const{e:T}=d;return T[0]*c+T[1]*A+T[2]*E+T[3]*I-d.eMq}function x(d,c,A,E,I,T){for(E-=4;A<E;){for(;M(d,A,I)<=T;)A+=4;for(;M(d,E,I)>T;)E-=4;if(A>=E)break;const y=c[A>>2];c[A>>2]=c[E>>2],c[E>>2]=y,A+=4,E-=4}for(;M(d,A,I)>T;)A-=4;return A+4}function M(d,c,A){return d[c]*A[0]+d[c+1]*A[1]+d[c+2]*A[2]+d[c+3]*A[3]}function k(d,c,A){const E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],I=[0,0,0,0],T=A-c>>2;for(let y=c;y<A;y+=4){const S=d[y]*.00392156862745098,g=d[y+1]*(1/255),f=d[y+2]*(1/255),O=d[y+3]*(1/255);I[0]+=S,I[1]+=g,I[2]+=f,I[3]+=O,E[0]+=S*S,E[1]+=S*g,E[2]+=S*f,E[3]+=S*O,E[5]+=g*g,E[6]+=g*f,E[7]+=g*O,E[10]+=f*f,E[11]+=f*O,E[15]+=O*O}return E[4]=E[1],E[8]=E[2],E[9]=E[6],E[12]=E[3],E[13]=E[7],E[14]=E[11],{R:E,m:I,N:T}}function b(d){const{R:c}=d,{m:A}=d,{N:E}=d,I=A[0],T=A[1],y=A[2],S=A[3],g=E==0?0:1/E,f=[c[0]-I*I*g,c[1]-I*T*g,c[2]-I*y*g,c[3]-I*S*g,c[4]-T*I*g,c[5]-T*T*g,c[6]-T*y*g,c[7]-T*S*g,c[8]-y*I*g,c[9]-y*T*g,c[10]-y*y*g,c[11]-y*S*g,c[12]-S*I*g,c[13]-S*T*g,c[14]-S*y*g,c[15]-S*S*g],O=f,F=D;let N=[Math.random(),Math.random(),Math.random(),Math.random()],Q=0,H=0;if(E!=0)for(let L=0;L<16&&(N=F.multVec(O,N),H=Math.sqrt(F.dot(N,N)),N=F.sml(1/H,N),!(L!=0&&Math.abs(H-Q)<1e-9));L++)Q=H;const $=[I*g,T*g,y*g,S*g];return{Cov:f,q:$,e:N,L:Q,eMq255:F.dot(F.sml(255,$),N),eMq:F.dot(N,$),rgba:(Math.round(255*$[3])<<24|Math.round(255*$[2])<<16|Math.round(255*$[1])<<8|Math.round(255*$[0])<<0)>>>0}}var D={multVec:(d,c)=>[d[0]*c[0]+d[1]*c[1]+d[2]*c[2]+d[3]*c[3],d[4]*c[0]+d[5]*c[1]+d[6]*c[2]+d[7]*c[3],d[8]*c[0]+d[9]*c[1]+d[10]*c[2]+d[11]*c[3],d[12]*c[0]+d[13]*c[1]+d[14]*c[2]+d[15]*c[3]],dot:(d,c)=>d[0]*c[0]+d[1]*c[1]+d[2]*c[2]+d[3]*c[3],sml:(d,c)=>[d*c[0],d*c[1],d*c[2],d*c[3]]};ge.encode=function(c,A,E,I,T,y,S){I==null&&(I=0),S==null&&(S=!1);const g=r(c,A,E,I,[!1,!1,!1,0,S,!1]);return w(g,-1),p(g,A,E,T,y)},ge.encodeLL=function(c,A,E,I,T,y,S,g){const f={ctype:0+(I==1?0:2)+(T==0?0:4),depth:y,frames:[]},O=(I+T)*y,F=O*A;for(let N=0;N<c.length;N++)f.frames.push({rect:{x:0,y:0,width:A,height:E},img:new Uint8Array(c[N]),blend:0,dispose:1,bpp:Math.ceil(O/8),bpl:Math.ceil(F/8)});return w(f,0,!0),p(f,A,E,S,g)},ge.encode.compress=r,ge.encode.dither=o,ge.quantize=C,ge.quantize.getKDtree=_,ge.quantize.getNearest=U})();const Ut={toArrayBuffer(h,u){const v=h.width,i=h.height,e=v<<2,t=h.getContext("2d").getImageData(0,0,v,i),a=new Uint32Array(t.data.buffer),o=(32*v+31)/32<<2,p=o*i,w=122+p,r=new ArrayBuffer(w),s=new DataView(r),n=1<<20;let l,m,C,_,U=n,P=0,x=0,M=0;function k(d){s.setUint16(x,d,!0),x+=2}function b(d){s.setUint32(x,d,!0),x+=4}function D(d){x+=d}k(19778),b(w),D(4),b(122),b(108),b(v),b(-i>>>0),k(1),k(32),b(3),b(p),b(2835),b(2835),D(8),b(16711680),b(65280),b(255),b(4278190080),b(1466527264),function d(){for(;P<i&&U>0;){for(_=122+P*o,l=0;l<e;)U--,m=a[M++],C=m>>>24,s.setUint32(_+l,m<<8|C),l+=4;P++}M<a.length?(U=n,setTimeout(d,Ut._dly)):u(r)}()},toBlob(h,u){this.toArrayBuffer(h,v=>{u(new Blob([v],{type:"image/bmp"}))})},_dly:9};var le={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},un={[le.CHROME]:16384,[le.FIREFOX]:11180,[le.DESKTOP_SAFARI]:16384,[le.IE]:8192,[le.IOS]:4096,[le.ETC]:8192};const at=typeof window<"u",It=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,je=at&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),cn=(at||It)&&(je&&je.getOriginalSymbol(window,"File")||typeof File<"u"&&File),Et=(at||It)&&(je&&je.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function ft(h,u,v=Date.now()){return new Promise(i=>{const e=h.split(","),t=e[0].match(/:(.*?);/)[1],a=globalThis.atob(e[1]);let o=a.length;const p=new Uint8Array(o);for(;o--;)p[o]=a.charCodeAt(o);const w=new Blob([p],{type:t});w.name=u,w.lastModified=v,i(w)})}function Tt(h){return new Promise((u,v)=>{const i=new Et;i.onload=()=>u(i.result),i.onerror=e=>v(e),i.readAsDataURL(h)})}function Ct(h){return new Promise((u,v)=>{const i=new Image;i.onload=()=>u(i),i.onerror=e=>v(e),i.src=h})}function Re(){if(Re.cachedResult!==void 0)return Re.cachedResult;let h=le.ETC;const{userAgent:u}=navigator;return/Chrom(e|ium)/i.test(u)?h=le.CHROME:/iP(ad|od|hone)/i.test(u)&&/WebKit/i.test(u)?h=le.IOS:/Safari/i.test(u)?h=le.DESKTOP_SAFARI:/Firefox/i.test(u)?h=le.FIREFOX:(/MSIE/i.test(u)||document.documentMode)&&(h=le.IE),Re.cachedResult=h,Re.cachedResult}function Ft(h,u){const v=Re(),i=un[v];let e=h,t=u,a=e*t;const o=e>t?t/e:e/t;for(;a>i*i;){const p=(i+e)/2,w=(i+t)/2;p<w?(t=w,e=w*o):(t=p*o,e=p),a=e*t}return{width:e,height:t}}function Xe(h,u){let v,i;try{if(v=new OffscreenCanvas(h,u),i=v.getContext("2d"),i===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{v=document.createElement("canvas"),i=v.getContext("2d")}return v.width=h,v.height=u,[v,i]}function St(h,u){const{width:v,height:i}=Ft(h.width,h.height),[e,t]=Xe(v,i);return u&&/jpe?g/.test(u)&&(t.fillStyle="white",t.fillRect(0,0,e.width,e.height)),t.drawImage(h,0,0,e.width,e.height),e}function qe(){return qe.cachedResult!==void 0||(qe.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),qe.cachedResult}function Ye(h,u={}){return new Promise(function(v,i){let e,t;var a=function(){try{return t=St(e,u.fileType||h.type),v([e,t])}catch(p){return i(p)}},o=function(p){try{var w=function(r){try{throw r}catch(s){return i(s)}};try{let r;return Tt(h).then(function(s){try{return r=s,Ct(r).then(function(n){try{return e=n,function(){try{return a()}catch(l){return i(l)}}()}catch(l){return w(l)}},w)}catch(n){return w(n)}},w)}catch(r){w(r)}}catch(r){return i(r)}};try{if(qe()||[le.DESKTOP_SAFARI,le.MOBILE_SAFARI].includes(Re()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(h).then(function(p){try{return e=p,a()}catch{return o()}},o)}catch{o()}})}function Ze(h,u,v,i,e=1){return new Promise(function(t,a){let o;if(u==="image/png"){let w,r,s;return w=h.getContext("2d"),{data:r}=w.getImageData(0,0,h.width,h.height),s=ge.encode([r.buffer],h.width,h.height,4096*e),o=new Blob([s],{type:u}),o.name=v,o.lastModified=i,p.call(this)}{let w=function(){return p.call(this)};if(u==="image/bmp")return new Promise(r=>Ut.toBlob(h,r)).then((function(r){try{return o=r,o.name=v,o.lastModified=i,w.call(this)}catch(s){return a(s)}}).bind(this),a);{let r=function(){return w.call(this)};if(typeof OffscreenCanvas=="function"&&h instanceof OffscreenCanvas)return h.convertToBlob({type:u,quality:e}).then((function(s){try{return o=s,o.name=v,o.lastModified=i,r.call(this)}catch(n){return a(n)}}).bind(this),a);{let s;return s=h.toDataURL(u,e),ft(s,v,i).then((function(n){try{return o=n,r.call(this)}catch(l){return a(l)}}).bind(this),a)}}}function p(){return t(o)}})}function ve(h){h.width=0,h.height=0}function ke(){return new Promise(function(h,u){let v,i,e,t;return ke.cachedResult!==void 0?h(ke.cachedResult):ft("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(a){try{return v=a,Ye(v).then(function(o){try{return i=o[1],Ze(i,v.type,v.name,v.lastModified).then(function(p){try{return e=p,ve(i),Ye(e).then(function(w){try{return t=w[0],ke.cachedResult=t.width===1&&t.height===2,h(ke.cachedResult)}catch(r){return u(r)}},u)}catch(w){return u(w)}},u)}catch(p){return u(p)}},u)}catch(o){return u(o)}},u)})}function Mt(h){return new Promise((u,v)=>{const i=new Et;i.onload=e=>{const t=new DataView(e.target.result);if(t.getUint16(0,!1)!=65496)return u(-2);const a=t.byteLength;let o=2;for(;o<a;){if(t.getUint16(o+2,!1)<=8)return u(-1);const p=t.getUint16(o,!1);if(o+=2,p==65505){if(t.getUint32(o+=2,!1)!=1165519206)return u(-1);const w=t.getUint16(o+=6,!1)==18761;o+=t.getUint32(o+4,w);const r=t.getUint16(o,w);o+=2;for(let s=0;s<r;s++)if(t.getUint16(o+12*s,w)==274)return u(t.getUint16(o+12*s+8,w))}else{if((65280&p)!=65280)break;o+=t.getUint16(o,!1)}}return u(-1)},i.onerror=e=>v(e),i.readAsArrayBuffer(h)})}function _t(h,u){const{width:v}=h,{height:i}=h,{maxWidthOrHeight:e}=u;let t,a=h;return isFinite(e)&&(v>e||i>e)&&([a,t]=Xe(v,i),v>i?(a.width=e,a.height=i/v*e):(a.width=v/i*e,a.height=e),t.drawImage(h,0,0,a.width,a.height),ve(h)),a}function Rt(h,u){const{width:v}=h,{height:i}=h,[e,t]=Xe(v,i);switch(u>4&&u<9?(e.width=i,e.height=v):(e.width=v,e.height=i),u){case 2:t.transform(-1,0,0,1,v,0);break;case 3:t.transform(-1,0,0,-1,v,i);break;case 4:t.transform(1,0,0,-1,0,i);break;case 5:t.transform(0,1,1,0,0,0);break;case 6:t.transform(0,1,-1,0,i,0);break;case 7:t.transform(0,-1,-1,0,i,v);break;case 8:t.transform(0,-1,1,0,0,v)}return t.drawImage(h,0,0,v,i),ve(h),e}function ht(h,u,v=0){return new Promise(function(i,e){let t,a,o,p,w,r,s,n,l,m,C,_,U,P,x,M,k,b,D,d;function c(E=5){if(u.signal&&u.signal.aborted)throw u.signal.reason;t+=E,u.onProgress(Math.min(t,100))}function A(E){if(u.signal&&u.signal.aborted)throw u.signal.reason;t=Math.min(Math.max(E,t),100),u.onProgress(t)}return t=v,a=u.maxIteration||10,o=1024*u.maxSizeMB*1024,c(),Ye(h,u).then((function(E){try{return[,p]=E,c(),w=_t(p,u),c(),new Promise(function(I,T){var y;if(!(y=u.exifOrientation))return Mt(h).then((function(g){try{return y=g,S.call(this)}catch(f){return T(f)}}).bind(this),T);function S(){return I(y)}return S.call(this)}).then((function(I){try{return r=I,c(),ke().then((function(T){try{return s=T?w:Rt(w,r),c(),n=u.initialQuality||1,l=u.fileType||h.type,Ze(s,l,h.name,h.lastModified,n).then((function(y){try{{let g=function(){if(a--&&(x>o||x>U)){let O,F;return O=d?.95*D.width:D.width,F=d?.95*D.height:D.height,[k,b]=Xe(O,F),b.drawImage(D,0,0,O,F),n*=l==="image/png"?.85:.95,Ze(k,l,h.name,h.lastModified,n).then(function(N){try{return M=N,ve(D),D=k,x=M.size,A(Math.min(99,Math.floor((P-x)/(P-o)*100))),g}catch(Q){return e(Q)}},e)}return[1]},f=function(){return ve(D),ve(k),ve(w),ve(s),ve(p),A(100),i(M)};if(m=y,c(),C=m.size>o,_=m.size>h.size,!C&&!_)return A(100),i(m);var S;return U=h.size,P=m.size,x=P,D=s,d=!u.alwaysKeepResolution&&C,(S=(function(O){for(;O;){if(O.then)return void O.then(S,e);try{if(O.pop){if(O.length)return O.pop()?f.call(this):O;O=g}else O=O.call(this)}catch(F){return e(F)}}}).bind(this))(g)}}catch(g){return e(g)}}).bind(this),e)}catch(y){return e(y)}}).bind(this),e)}catch(T){return e(T)}}).bind(this),e)}catch(I){return e(I)}}).bind(this),e)})}const dn=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let nt;function hn(h,u){return new Promise((v,i)=>{nt||(nt=function(a){const o=[];return o.push(a),URL.createObjectURL(new Blob(o))}(dn));const e=new Worker(nt);e.addEventListener("message",function(a){if(u.signal&&u.signal.aborted)e.terminate();else if(a.data.progress===void 0){if(a.data.error)return i(new Error(a.data.error)),void e.terminate();v(a.data.file),e.terminate()}else u.onProgress(a.data.progress)}),e.addEventListener("error",i),u.signal&&u.signal.addEventListener("abort",()=>{i(u.signal.reason),e.terminate()}),e.postMessage({file:h,imageCompressionLibUrl:u.libURL,options:{...u,onProgress:void 0,signal:void 0}})})}function re(h,u){return new Promise(function(v,i){let e,t,a,o,p,w;if(e={...u},a=0,{onProgress:o}=e,e.maxSizeMB=e.maxSizeMB||Number.POSITIVE_INFINITY,p=typeof e.useWebWorker!="boolean"||e.useWebWorker,delete e.useWebWorker,e.onProgress=l=>{a=l,typeof o=="function"&&o(a)},!(h instanceof Blob||h instanceof cn))return i(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(h.type))return i(new Error("The file given is not an image"));if(w=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!p||typeof Worker!="function"||w)return ht(h,e).then((function(l){try{return t=l,n.call(this)}catch(m){return i(m)}}).bind(this),i);var r=(function(){try{return n.call(this)}catch(l){return i(l)}}).bind(this),s=function(l){try{return ht(h,e).then(function(m){try{return t=m,r()}catch(C){return i(C)}},i)}catch(m){return i(m)}};try{return e.libURL=e.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",hn(h,e).then(function(l){try{return t=l,r()}catch{return s()}},s)}catch{s()}function n(){try{t.name=h.name,t.lastModified=h.lastModified}catch{}try{e.preserveExif&&h.type==="image/jpeg"&&(!e.fileType||e.fileType&&e.fileType===h.type)&&(t=At(h,t))}catch{}return v(t)}})}re.getDataUrlFromFile=Tt,re.getFilefromDataUrl=ft,re.loadImage=Ct,re.drawImageInCanvas=St,re.drawFileInCanvas=Ye,re.canvasToFile=Ze,re.getExifOrientation=Mt,re.handleMaxWidthOrHeight=_t,re.followExifOrientation=Rt,re.cleanupCanvasMemory=ve,re.isAutoOrientationInBrowser=ke,re.approximateBelowMaximumCanvasSizeOfBrowser=Ft,re.copyExifWithoutOrientation=At,re.getBrowserName=Re,re.version="2.0.2";const st=h=>!h||h.length<12?null:{tradeId:h[0],date:h[1],time:h[2],amount:parseFloat(h[3])||0,tagId:h[4],tagName:h[5],tagColor:h[6],tagEmoji:h[7],driveImageId:h[8]||null,notes:h[9]||"",createdAt:h[10],updatedAt:h[11]},Dt=async()=>{const h="1ruzm5D-ofifAU7d5oRChBT7DAYFTlVLgULSsXvYEtXU";console.log(" Fetching all trades from sheet:",h);try{const v=(await window.gapi.client.sheets.spreadsheets.values.get({spreadsheetId:h,range:`${Pe.TRADES}!A2:L`})).result.values||[];console.log(" Received rows from sheet:",v.length);const i=v.map(st).filter(Boolean);return console.log(" Parsed trades:",i.length),i}catch(u){return console.error(" Failed to fetch trades:",u),[]}},gn=async(h,u)=>{console.log(` Fetching trades for: ${h}-${u} (month is 0-indexed, so ${u} = ${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][u]})`);const v=await Dt();console.log(` Total trades in sheet: ${v.length}`),v.length>0&&console.log(" All trade dates:",v.map(e=>e.date));const i=v.filter(e=>{const[t,a]=e.date.split("-").map(Number),o=t===h&&a===u+1;return console.log(o?`   Trade ${e.date} MATCHES!`:`   Trade ${e.date} doesn't match: tradeYear=${t} vs ${h}, tradeMonth=${a} vs ${u+1}`),o});return console.log(` Filtered to ${i.length} trades for ${h}-${u+1}`),i},pn=async h=>{const u=await rt.getOrCreateSpreadsheet();let v=null;if(h.screenshot){const t=await re(h.screenshot,{maxSizeMB:1,maxWidthOrHeight:1200,useWebWorker:!0}),a=`${h.tradeId}_${h.date}.jpg`;v=await rt.uploadImage(t,a)}const i=new Date().toISOString(),e=[h.tradeId,h.date,h.time,h.amount,h.tagId,h.tagName,h.tagColor,h.tagEmoji,v||"",h.notes||"",i,i];return await window.gapi.client.sheets.spreadsheets.values.append({spreadsheetId:u,range:`${Pe.TRADES}!A:L`,valueInputOption:"USER_ENTERED",resource:{values:[e]}}),{...h,driveImageId:v,createdAt:i,updatedAt:i}},mn=async({tradeId:h,updates:u})=>{const v=localStorage.getItem(vt.SHEET_ID),t=((await window.gapi.client.sheets.spreadsheets.values.get({spreadsheetId:v,range:`${Pe.TRADES}!A:A`})).result.values||[]).findIndex(n=>n[0]===h);if(t===-1)throw new Error("Trade not found");const o=(await window.gapi.client.sheets.spreadsheets.values.get({spreadsheetId:v,range:`${Pe.TRADES}!A${t+1}:L${t+1}`})).result.values[0],p=st(o);let w=p.driveImageId;if(u.screenshot){const n=await re(u.screenshot,{maxSizeMB:1,maxWidthOrHeight:1200,useWebWorker:!0}),l=`${h}_${u.date||p.date}.jpg`;w=await rt.uploadImage(n,l)}const r=new Date().toISOString(),s=[h,u.date||p.date,u.time||p.time,u.amount!==void 0?u.amount:p.amount,u.tagId||p.tagId,u.tagName||p.tagName,u.tagColor||p.tagColor,u.tagEmoji||p.tagEmoji,w||"",u.notes!==void 0?u.notes:p.notes,p.createdAt,r];return await window.gapi.client.sheets.spreadsheets.values.update({spreadsheetId:v,range:`${Pe.TRADES}!A${t+1}:L${t+1}`,valueInputOption:"USER_ENTERED",resource:{values:[s]}}),st(s)},vn=async h=>{const u=localStorage.getItem(vt.SHEET_ID),e=((await window.gapi.client.sheets.spreadsheets.values.get({spreadsheetId:u,range:`${Pe.TRADES}!A:A`})).result.values||[]).findIndex(t=>t[0]===h);if(e===-1)throw new Error("Trade not found");await window.gapi.client.sheets.spreadsheets.batchUpdate({spreadsheetId:u,resource:{requests:[{deleteDimension:{range:{sheetId:0,dimension:"ROWS",startIndex:e,endIndex:e+1}}}]}})},Fn=()=>pt({queryKey:["trades"],queryFn:Dt,staleTime:5*60*1e3,cacheTime:30*60*1e3}),Sn=(h,u)=>pt({queryKey:["trades",h,u],queryFn:()=>gn(h,u),staleTime:5*60*1e3}),Mn=()=>{const h=Ge();return ot({mutationFn:pn,onMutate:async u=>{await h.cancelQueries({queryKey:["trades"]});const v=h.getQueryData(["trades"]);return v&&h.setQueryData(["trades"],i=>[...i||[],u]),{previousTrades:v}},onError:(u,v,i)=>{i!=null&&i.previousTrades&&h.setQueryData(["trades"],i.previousTrades)},onSettled:()=>{h.invalidateQueries({queryKey:["trades"]})}})},_n=()=>{const h=Ge();return ot({mutationFn:mn,onSuccess:()=>{h.invalidateQueries({queryKey:["trades"]})}})},Rn=()=>{const h=Ge();return ot({mutationFn:vn,onMutate:async u=>{await h.cancelQueries({queryKey:["trades"]});const v=h.getQueryData(["trades"]);return v&&h.setQueryData(["trades"],i=>(i||[]).filter(e=>e.tradeId!==u)),{previousTrades:v}},onError:(u,v,i)=>{i!=null&&i.previousTrades&&h.setQueryData(["trades"],i.previousTrades)},onSettled:()=>{h.invalidateQueries({queryKey:["trades"]})}})};export{An as a,Mn as b,Tn as c,_n as d,Rn as e,En as f,Cn as g,In as h,Sn as i,Un as m,Fn as u};
