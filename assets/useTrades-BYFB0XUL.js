import{u as Xe,k as We}from"./utils-DTu9Sqye.js";import{h as qe,e as ze,S as Te,i as $e}from"./index-Bd9gDzVl.js";function dt(b,F){return F.forEach(function(x){x&&typeof x!="string"&&!Array.isArray(x)&&Object.keys(x).forEach(function(f){if(f!=="default"&&!(f in b)){var e=Object.getOwnPropertyDescriptor(x,f);Object.defineProperty(b,f,e.get?e:{enumerable:!0,get:function(){return x[f]}})}})}),Object.freeze(b)}function Ve(b,F){return new Promise(function(x,f){let e;return ht(b).then(function(t){try{return e=t,x(new Blob([F.slice(0,2),e,F.slice(2)],{type:"image/jpeg"}))}catch(u){return f(u)}},f)})}const ht=b=>new Promise((F,x)=>{const f=new FileReader;f.addEventListener("load",({target:{result:e}})=>{const t=new DataView(e);let u=0;if(t.getUint16(u)!==65496)return x("not a valid JPEG");for(u+=2;;){const a=t.getUint16(u);if(a===65498)break;const p=t.getUint16(u+2);if(a===65505&&t.getUint32(u+4)===1165519206){const v=u+10;let r;switch(t.getUint16(v)){case 18761:r=!0;break;case 19789:r=!1;break;default:return x("TIFF header contains invalid endian")}if(t.getUint16(v+2,r)!==42)return x("TIFF header contains invalid version");const i=t.getUint32(v+4,r),n=v+i+2+12*t.getUint16(v+i,r);for(let s=v+i+2;s<n;s+=12)if(t.getUint16(s,r)==274){if(t.getUint16(s+2,r)!==3)return x("Orientation data type is invalid");if(t.getUint32(s+4,r)!==1)return x("Orientation data count is invalid");t.setUint16(s+8,1,r);break}return F(e.slice(u,u+2+p))}u+=2+p}return F(new Blob)}),f.readAsArrayBuffer(b)});var Oe={},gt={get exports(){return Oe},set exports(b){Oe=b}};(function(b){var F,x,f={};gt.exports=f,f.parse=function(e,t){for(var u=f.bin.readUshort,a=f.bin.readUint,p=0,v={},r=new Uint8Array(e),i=r.length-4;a(r,i)!=101010256;)i--;p=i,p+=4;var n=u(r,p+=4);u(r,p+=2);var s=a(r,p+=2),h=a(r,p+=4);p+=4,p=h;for(var U=0;U<n;U++){a(r,p),p+=4,p+=4,p+=4,a(r,p+=4),s=a(r,p+=4);var S=a(r,p+=4),A=u(r,p+=4),H=u(r,p+2),O=u(r,p+4);p+=6;var C=a(r,p+=8);p+=4,p+=A+H+O,f._readLocal(r,C,v,s,S,t)}return v},f._readLocal=function(e,t,u,a,p,v){var r=f.bin.readUshort,i=f.bin.readUint;i(e,t),r(e,t+=4),r(e,t+=2);var n=r(e,t+=2);i(e,t+=2),i(e,t+=4),t+=4;var s=r(e,t+=8),h=r(e,t+=2);t+=2;var U=f.bin.readUTF8(e,t,s);if(t+=s,t+=h,v)u[U]={size:p,csize:a};else{var S=new Uint8Array(e.buffer,t);if(n==0)u[U]=new Uint8Array(S.buffer.slice(t,t+a));else{if(n!=8)throw"unknown compression method: "+n;var A=new Uint8Array(p);f.inflateRaw(S,A),u[U]=A}}},f.inflateRaw=function(e,t){return f.F.inflate(e,t)},f.inflate=function(e,t){return e[0],e[1],f.inflateRaw(new Uint8Array(e.buffer,e.byteOffset+2,e.length-6),t)},f.deflate=function(e,t){t==null&&(t={level:6});var u=0,a=new Uint8Array(50+Math.floor(1.1*e.length));a[u]=120,a[u+1]=156,u+=2,u=f.F.deflateRaw(e,a,u,t.level);var p=f.adler(e,0,e.length);return a[u+0]=p>>>24&255,a[u+1]=p>>>16&255,a[u+2]=p>>>8&255,a[u+3]=p>>>0&255,new Uint8Array(a.buffer,0,u+4)},f.deflateRaw=function(e,t){t==null&&(t={level:6});var u=new Uint8Array(50+Math.floor(1.1*e.length)),a=f.F.deflateRaw(e,u,a,t.level);return new Uint8Array(u.buffer,0,a)},f.encode=function(e,t){t==null&&(t=!1);var u=0,a=f.bin.writeUint,p=f.bin.writeUshort,v={};for(var r in e){var i=!f._noNeed(r)&&!t,n=e[r],s=f.crc.crc(n,0,n.length);v[r]={cpr:i,usize:n.length,crc:s,file:i?f.deflateRaw(n):n}}for(var r in v)u+=v[r].file.length+30+46+2*f.bin.sizeUTF8(r);u+=22;var h=new Uint8Array(u),U=0,S=[];for(var r in v){var A=v[r];S.push(U),U=f._writeHeader(h,U,r,A,0)}var H=0,O=U;for(var r in v)A=v[r],S.push(U),U=f._writeHeader(h,U,r,A,1,S[H++]);var C=U-O;return a(h,U,101010256),U+=4,p(h,U+=4,H),p(h,U+=2,H),a(h,U+=2,C),a(h,U+=4,O),U+=4,U+=2,h.buffer},f._noNeed=function(e){var t=e.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(t)!=-1},f._writeHeader=function(e,t,u,a,p,v){var r=f.bin.writeUint,i=f.bin.writeUshort,n=a.file;return r(e,t,p==0?67324752:33639248),t+=4,p==1&&(t+=2),i(e,t,20),i(e,t+=2,0),i(e,t+=2,a.cpr?8:0),r(e,t+=2,0),r(e,t+=4,a.crc),r(e,t+=4,n.length),r(e,t+=4,a.usize),i(e,t+=4,f.bin.sizeUTF8(u)),i(e,t+=2,0),t+=2,p==1&&(t+=2,t+=2,r(e,t+=6,v),t+=4),t+=f.bin.writeUTF8(e,t,u),p==0&&(e.set(n,t),t+=n.length),t},f.crc={table:function(){for(var e=new Uint32Array(256),t=0;t<256;t++){for(var u=t,a=0;a<8;a++)1&u?u=3988292384^u>>>1:u>>>=1;e[t]=u}return e}(),update:function(e,t,u,a){for(var p=0;p<a;p++)e=f.crc.table[255&(e^t[u+p])]^e>>>8;return e},crc:function(e,t,u){return 4294967295^f.crc.update(4294967295,e,t,u)}},f.adler=function(e,t,u){for(var a=1,p=0,v=t,r=t+u;v<r;){for(var i=Math.min(v+5552,r);v<i;)p+=a+=e[v++];a%=65521,p%=65521}return p<<16|a},f.bin={readUshort:function(e,t){return e[t]|e[t+1]<<8},writeUshort:function(e,t,u){e[t]=255&u,e[t+1]=u>>8&255},readUint:function(e,t){return 16777216*e[t+3]+(e[t+2]<<16|e[t+1]<<8|e[t])},writeUint:function(e,t,u){e[t]=255&u,e[t+1]=u>>8&255,e[t+2]=u>>16&255,e[t+3]=u>>24&255},readASCII:function(e,t,u){for(var a="",p=0;p<u;p++)a+=String.fromCharCode(e[t+p]);return a},writeASCII:function(e,t,u){for(var a=0;a<u.length;a++)e[t+a]=u.charCodeAt(a)},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,t,u){for(var a,p="",v=0;v<u;v++)p+="%"+f.bin.pad(e[t+v].toString(16));try{a=decodeURIComponent(p)}catch{return f.bin.readASCII(e,t,u)}return a},writeUTF8:function(e,t,u){for(var a=u.length,p=0,v=0;v<a;v++){var r=u.charCodeAt(v);if(!(4294967168&r))e[t+p]=r,p++;else if(!(4294965248&r))e[t+p]=192|r>>6,e[t+p+1]=128|r>>0&63,p+=2;else if(!(4294901760&r))e[t+p]=224|r>>12,e[t+p+1]=128|r>>6&63,e[t+p+2]=128|r>>0&63,p+=3;else{if(4292870144&r)throw"e";e[t+p]=240|r>>18,e[t+p+1]=128|r>>12&63,e[t+p+2]=128|r>>6&63,e[t+p+3]=128|r>>0&63,p+=4}}return p},sizeUTF8:function(e){for(var t=e.length,u=0,a=0;a<t;a++){var p=e.charCodeAt(a);if(!(4294967168&p))u++;else if(!(4294965248&p))u+=2;else if(!(4294901760&p))u+=3;else{if(4292870144&p)throw"e";u+=4}}return u}},f.F={},f.F.deflateRaw=function(e,t,u,a){var p=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][a],v=f.F.U,r=f.F._goodIndex;f.F._hash;var i=f.F._putsE,n=0,s=u<<3,h=0,U=e.length;if(a==0){for(;n<U;)i(t,s,n+(I=Math.min(65535,U-n))==U?1:0),s=f.F._copyExact(e,n,I,t,s+8),n+=I;return s>>>3}var S=v.lits,A=v.strt,H=v.prev,O=0,C=0,P=0,g=0,M=0,c=0;for(U>2&&(A[c=f.F._hash(e,0)]=0),n=0;n<U;n++){if(M=c,n+1<U-2){c=f.F._hash(e,n+1);var l=n+1&32767;H[l]=A[c],A[c]=l}if(h<=n){(O>14e3||C>26697)&&U-n>100&&(h<n&&(S[O]=n-h,O+=2,h=n),s=f.F._writeBlock(n==U-1||h==U?1:0,S,O,g,e,P,n-P,t,s),O=C=g=0,P=n);var w=0;n<U-2&&(w=f.F._bestMatch(e,n,H,M,Math.min(p[2],U-n),p[3]));var I=w>>>16,y=65535&w;if(w!=0){y=65535&w;var E=r(I=w>>>16,v.of0);v.lhst[257+E]++;var m=r(y,v.df0);v.dhst[m]++,g+=v.exb[E]+v.dxb[m],S[O]=I<<23|n-h,S[O+1]=y<<16|E<<8|m,O+=2,h=n+I}else v.lhst[e[n]]++;C++}}for(P==n&&e.length!=0||(h<n&&(S[O]=n-h,O+=2,h=n),s=f.F._writeBlock(1,S,O,g,e,P,n-P,t,s),O=0,C=0,O=C=g=0,P=n);7&s;)s++;return s>>>3},f.F._bestMatch=function(e,t,u,a,p,v){var r=32767&t,i=u[r],n=r-i+32768&32767;if(i==r||a!=f.F._hash(e,t-n))return 0;for(var s=0,h=0,U=Math.min(32767,t);n<=U&&--v!=0&&i!=r;){if(s==0||e[t+s]==e[t+s-n]){var S=f.F._howLong(e,t,n);if(S>s){if(h=n,(s=S)>=p)break;n+2<S&&(S=n+2);for(var A=0,H=0;H<S-2;H++){var O=t-n+H+32768&32767,C=O-u[O]+32768&32767;C>A&&(A=C,i=O)}}}n+=(r=i)-(i=u[r])+32768&32767}return s<<16|h},f.F._howLong=function(e,t,u){if(e[t]!=e[t-u]||e[t+1]!=e[t+1-u]||e[t+2]!=e[t+2-u])return 0;var a=t,p=Math.min(e.length,t+258);for(t+=3;t<p&&e[t]==e[t-u];)t++;return t-a},f.F._hash=function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<4)&65535},f.saved=0,f.F._writeBlock=function(e,t,u,a,p,v,r,i,n){var s,h,U,S,A,H,O,C,P,g=f.F.U,M=f.F._putsF,c=f.F._putsE;g.lhst[256]++,h=(s=f.F.getTrees())[0],U=s[1],S=s[2],A=s[3],H=s[4],O=s[5],C=s[6],P=s[7];var l=32+(n+3&7?8-(n+3&7):0)+(r<<3),w=a+f.F.contSize(g.fltree,g.lhst)+f.F.contSize(g.fdtree,g.dhst),I=a+f.F.contSize(g.ltree,g.lhst)+f.F.contSize(g.dtree,g.dhst);I+=14+3*O+f.F.contSize(g.itree,g.ihst)+(2*g.ihst[16]+3*g.ihst[17]+7*g.ihst[18]);for(var y=0;y<286;y++)g.lhst[y]=0;for(y=0;y<30;y++)g.dhst[y]=0;for(y=0;y<19;y++)g.ihst[y]=0;var E=l<w&&l<I?0:w<I?1:2;if(M(i,n,e),M(i,n+1,E),n+=3,E==0){for(;7&n;)n++;n=f.F._copyExact(p,v,r,i,n)}else{var m,_;if(E==1&&(m=g.fltree,_=g.fdtree),E==2){f.F.makeCodes(g.ltree,h),f.F.revCodes(g.ltree,h),f.F.makeCodes(g.dtree,U),f.F.revCodes(g.dtree,U),f.F.makeCodes(g.itree,S),f.F.revCodes(g.itree,S),m=g.ltree,_=g.dtree,c(i,n,A-257),c(i,n+=5,H-1),c(i,n+=5,O-4),n+=4;for(var d=0;d<O;d++)c(i,n+3*d,g.itree[1+(g.ordr[d]<<1)]);n+=3*O,n=f.F._codeTiny(C,g.itree,i,n),n=f.F._codeTiny(P,g.itree,i,n)}for(var o=v,D=0;D<u;D+=2){for(var T=t[D],k=T>>>23,z=o+(8388607&T);o<z;)n=f.F._writeLit(p[o++],m,i,n);if(k!=0){var Q=t[D+1],N=Q>>16,L=Q>>8&255,R=255&Q;c(i,n=f.F._writeLit(257+L,m,i,n),k-g.of0[L]),n+=g.exb[L],M(i,n=f.F._writeLit(R,_,i,n),N-g.df0[R]),n+=g.dxb[R],o+=k}}n=f.F._writeLit(256,m,i,n)}return n},f.F._copyExact=function(e,t,u,a,p){var v=p>>>3;return a[v]=u,a[v+1]=u>>>8,a[v+2]=255-a[v],a[v+3]=255-a[v+1],v+=4,a.set(new Uint8Array(e.buffer,t,u),v),p+(u+4<<3)},f.F.getTrees=function(){for(var e=f.F.U,t=f.F._hufTree(e.lhst,e.ltree,15),u=f.F._hufTree(e.dhst,e.dtree,15),a=[],p=f.F._lenCodes(e.ltree,a),v=[],r=f.F._lenCodes(e.dtree,v),i=0;i<a.length;i+=2)e.ihst[a[i]]++;for(i=0;i<v.length;i+=2)e.ihst[v[i]]++;for(var n=f.F._hufTree(e.ihst,e.itree,7),s=19;s>4&&e.itree[1+(e.ordr[s-1]<<1)]==0;)s--;return[t,u,n,p,r,s,a,v]},f.F.getSecond=function(e){for(var t=[],u=0;u<e.length;u+=2)t.push(e[u+1]);return t},f.F.nonZero=function(e){for(var t="",u=0;u<e.length;u+=2)e[u+1]!=0&&(t+=(u>>1)+",");return t},f.F.contSize=function(e,t){for(var u=0,a=0;a<t.length;a++)u+=t[a]*e[1+(a<<1)];return u},f.F._codeTiny=function(e,t,u,a){for(var p=0;p<e.length;p+=2){var v=e[p],r=e[p+1];a=f.F._writeLit(v,t,u,a);var i=v==16?2:v==17?3:7;v>15&&(f.F._putsE(u,a,r,i),a+=i)}return a},f.F._lenCodes=function(e,t){for(var u=e.length;u!=2&&e[u-1]==0;)u-=2;for(var a=0;a<u;a+=2){var p=e[a+1],v=a+3<u?e[a+3]:-1,r=a+5<u?e[a+5]:-1,i=a==0?-1:e[a-1];if(p==0&&v==p&&r==p){for(var n=a+5;n+2<u&&e[n+2]==p;)n+=2;(s=Math.min(n+1-a>>>1,138))<11?t.push(17,s-3):t.push(18,s-11),a+=2*s-2}else if(p==i&&v==p&&r==p){for(n=a+5;n+2<u&&e[n+2]==p;)n+=2;var s=Math.min(n+1-a>>>1,6);t.push(16,s-3),a+=2*s-2}else t.push(p,0)}return u>>>1},f.F._hufTree=function(e,t,u){var a=[],p=e.length,v=t.length,r=0;for(r=0;r<v;r+=2)t[r]=0,t[r+1]=0;for(r=0;r<p;r++)e[r]!=0&&a.push({lit:r,f:e[r]});var i=a.length,n=a.slice(0);if(i==0)return 0;if(i==1){var s=a[0].lit;return n=s==0?1:0,t[1+(s<<1)]=1,t[1+(n<<1)]=1,1}a.sort(function(C,P){return C.f-P.f});var h=a[0],U=a[1],S=0,A=1,H=2;for(a[0]={lit:-1,f:h.f+U.f,l:h,r:U,d:0};A!=i-1;)h=S!=A&&(H==i||a[S].f<a[H].f)?a[S++]:a[H++],U=S!=A&&(H==i||a[S].f<a[H].f)?a[S++]:a[H++],a[A++]={lit:-1,f:h.f+U.f,l:h,r:U};var O=f.F.setDepth(a[A-1],0);for(O>u&&(f.F.restrictDepth(n,u,O),O=u),r=0;r<i;r++)t[1+(n[r].lit<<1)]=n[r].d;return O},f.F.setDepth=function(e,t){return e.lit!=-1?(e.d=t,t):Math.max(f.F.setDepth(e.l,t+1),f.F.setDepth(e.r,t+1))},f.F.restrictDepth=function(e,t,u){var a=0,p=1<<u-t,v=0;for(e.sort(function(i,n){return n.d==i.d?i.f-n.f:n.d-i.d}),a=0;a<e.length&&e[a].d>t;a++){var r=e[a].d;e[a].d=t,v+=p-(1<<u-r)}for(v>>>=u-t;v>0;)(r=e[a].d)<t?(e[a].d++,v-=1<<t-r-1):a++;for(;a>=0;a--)e[a].d==t&&v<0&&(e[a].d--,v++);v!=0&&console.log("debt left")},f.F._goodIndex=function(e,t){var u=0;return t[16|u]<=e&&(u|=16),t[8|u]<=e&&(u|=8),t[4|u]<=e&&(u|=4),t[2|u]<=e&&(u|=2),t[1|u]<=e&&(u|=1),u},f.F._writeLit=function(e,t,u,a){return f.F._putsF(u,a,t[e<<1]),a+t[1+(e<<1)]},f.F.inflate=function(e,t){var u=Uint8Array;if(e[0]==3&&e[1]==0)return t||new u(0);var a=f.F,p=a._bitsF,v=a._bitsE,r=a._decodeTiny,i=a.makeCodes,n=a.codes2map,s=a._get17,h=a.U,U=t==null;U&&(t=new u(e.length>>>2<<3));for(var S,A,H=0,O=0,C=0,P=0,g=0,M=0,c=0,l=0,w=0;H==0;)if(H=p(e,w,1),O=p(e,w+1,2),w+=3,O!=0){if(U&&(t=f.F._check(t,l+(1<<17))),O==1&&(S=h.flmap,A=h.fdmap,M=511,c=31),O==2){C=v(e,w,5)+257,P=v(e,w+5,5)+1,g=v(e,w+10,4)+4,w+=14;for(var I=0;I<38;I+=2)h.itree[I]=0,h.itree[I+1]=0;var y=1;for(I=0;I<g;I++){var E=v(e,w+3*I,3);h.itree[1+(h.ordr[I]<<1)]=E,E>y&&(y=E)}w+=3*g,i(h.itree,y),n(h.itree,y,h.imap),S=h.lmap,A=h.dmap,w=r(h.imap,(1<<y)-1,C+P,e,w,h.ttree);var m=a._copyOut(h.ttree,0,C,h.ltree);M=(1<<m)-1;var _=a._copyOut(h.ttree,C,P,h.dtree);c=(1<<_)-1,i(h.ltree,m),n(h.ltree,m,S),i(h.dtree,_),n(h.dtree,_,A)}for(;;){var d=S[s(e,w)&M];w+=15&d;var o=d>>>4;if(!(o>>>8))t[l++]=o;else{if(o==256)break;var D=l+o-254;if(o>264){var T=h.ldef[o-257];D=l+(T>>>3)+v(e,w,7&T),w+=7&T}var k=A[s(e,w)&c];w+=15&k;var z=k>>>4,Q=h.ddef[z],N=(Q>>>4)+p(e,w,15&Q);for(w+=15&Q,U&&(t=f.F._check(t,l+(1<<17)));l<D;)t[l]=t[l++-N],t[l]=t[l++-N],t[l]=t[l++-N],t[l]=t[l++-N];l=D}}}else{7&w&&(w+=8-(7&w));var L=4+(w>>>3),R=e[L-4]|e[L-3]<<8;U&&(t=f.F._check(t,l+R)),t.set(new u(e.buffer,e.byteOffset+L,R),l),w=L+R<<3,l+=R}return t.length==l?t:t.slice(0,l)},f.F._check=function(e,t){var u=e.length;if(t<=u)return e;var a=new Uint8Array(Math.max(u<<1,t));return a.set(e,0),a},f.F._decodeTiny=function(e,t,u,a,p,v){for(var r=f.F._bitsE,i=f.F._get17,n=0;n<u;){var s=e[i(a,p)&t];p+=15&s;var h=s>>>4;if(h<=15)v[n]=h,n++;else{var U=0,S=0;h==16?(S=3+r(a,p,2),p+=2,U=v[n-1]):h==17?(S=3+r(a,p,3),p+=3):h==18&&(S=11+r(a,p,7),p+=7);for(var A=n+S;n<A;)v[n]=U,n++}}return p},f.F._copyOut=function(e,t,u,a){for(var p=0,v=0,r=a.length>>>1;v<u;){var i=e[v+t];a[v<<1]=0,a[1+(v<<1)]=i,i>p&&(p=i),v++}for(;v<r;)a[v<<1]=0,a[1+(v<<1)]=0,v++;return p},f.F.makeCodes=function(e,t){for(var u,a,p,v,r=f.F.U,i=e.length,n=r.bl_count,s=0;s<=t;s++)n[s]=0;for(s=1;s<i;s+=2)n[e[s]]++;var h=r.next_code;for(u=0,n[0]=0,a=1;a<=t;a++)u=u+n[a-1]<<1,h[a]=u;for(p=0;p<i;p+=2)(v=e[p+1])!=0&&(e[p]=h[v],h[v]++)},f.F.codes2map=function(e,t,u){for(var a=e.length,p=f.F.U.rev15,v=0;v<a;v+=2)if(e[v+1]!=0)for(var r=v>>1,i=e[v+1],n=r<<4|i,s=t-i,h=e[v]<<s,U=h+(1<<s);h!=U;)u[p[h]>>>15-t]=n,h++},f.F.revCodes=function(e,t){for(var u=f.F.U.rev15,a=15-t,p=0;p<e.length;p+=2){var v=e[p]<<t-e[p+1];e[p]=u[v]>>>a}},f.F._putsE=function(e,t,u){u<<=7&t;var a=t>>>3;e[a]|=u,e[a+1]|=u>>>8},f.F._putsF=function(e,t,u){u<<=7&t;var a=t>>>3;e[a]|=u,e[a+1]|=u>>>8,e[a+2]|=u>>>16},f.F._bitsE=function(e,t,u){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<u)-1},f.F._bitsF=function(e,t,u){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<u)-1},f.F._get17=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)},f.F._get25=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16|e[3+(t>>>3)]<<24)>>>(7&t)},f.F.U=(F=Uint16Array,x=Uint32Array,{next_code:new F(16),bl_count:new F(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new F(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new x(32),flmap:new F(512),fltree:[],fdmap:new F(32),fdtree:[],lmap:new F(32768),ltree:[],ttree:[],dmap:new F(32768),dtree:[],imap:new F(512),itree:[],rev15:new F(32768),lhst:new x(286),dhst:new x(30),ihst:new x(19),lits:new x(15e3),strt:new F(65536),prev:new F(32768)}),function(){for(var e=f.F.U,t=0;t<32768;t++){var u=t;u=(4278255360&(u=(4042322160&(u=(3435973836&(u=(2863311530&u)>>>1|(1431655765&u)<<1))>>>2|(858993459&u)<<2))>>>4|(252645135&u)<<4))>>>8|(16711935&u)<<8,e.rev15[t]=(u>>>16|u<<16)>>>17}function a(p,v,r){for(;v--!=0;)p.push(0,r)}for(t=0;t<32;t++)e.ldef[t]=e.of0[t]<<3|e.exb[t],e.ddef[t]=e.df0[t]<<4|e.dxb[t];a(e.fltree,144,8),a(e.fltree,112,9),a(e.fltree,24,7),a(e.fltree,8,8),f.F.makeCodes(e.fltree,9),f.F.codes2map(e.fltree,9,e.flmap),f.F.revCodes(e.fltree,9),a(e.fdtree,32,5),f.F.makeCodes(e.fdtree,5),f.F.codes2map(e.fdtree,5,e.fdmap),f.F.revCodes(e.fdtree,5),a(e.itree,19,0),a(e.ltree,286,0),a(e.dtree,30,0),a(e.ttree,320,0)}()})();var pt=dt({__proto__:null,default:Oe},[Oe]);const de=function(){var b={nextZero(r,i){for(;r[i]!=0;)i++;return i},readUshort:(r,i)=>r[i]<<8|r[i+1],writeUshort(r,i,n){r[i]=n>>8&255,r[i+1]=255&n},readUint:(r,i)=>16777216*r[i]+(r[i+1]<<16|r[i+2]<<8|r[i+3]),writeUint(r,i,n){r[i]=n>>24&255,r[i+1]=n>>16&255,r[i+2]=n>>8&255,r[i+3]=255&n},readASCII(r,i,n){let s="";for(let h=0;h<n;h++)s+=String.fromCharCode(r[i+h]);return s},writeASCII(r,i,n){for(let s=0;s<n.length;s++)r[i+s]=n.charCodeAt(s)},readBytes(r,i,n){const s=[];for(let h=0;h<n;h++)s.push(r[i+h]);return s},pad:r=>r.length<2?`0${r}`:r,readUTF8(r,i,n){let s,h="";for(let U=0;U<n;U++)h+=`%${b.pad(r[i+U].toString(16))}`;try{s=decodeURIComponent(h)}catch{return b.readASCII(r,i,n)}return s}};function F(r,i,n,s){const h=i*n,U=t(s),S=Math.ceil(i*U/8),A=new Uint8Array(4*h),H=new Uint32Array(A.buffer),{ctype:O}=s,{depth:C}=s,P=b.readUshort;if(O==6){const T=h<<2;if(C==8)for(var g=0;g<T;g+=4)A[g]=r[g],A[g+1]=r[g+1],A[g+2]=r[g+2],A[g+3]=r[g+3];if(C==16)for(g=0;g<T;g++)A[g]=r[g<<1]}else if(O==2){const T=s.tabs.tRNS;if(T==null){if(C==8)for(g=0;g<h;g++){var M=3*g;H[g]=255<<24|r[M+2]<<16|r[M+1]<<8|r[M]}if(C==16)for(g=0;g<h;g++)M=6*g,H[g]=255<<24|r[M+4]<<16|r[M+2]<<8|r[M]}else{var c=T[0];const k=T[1],z=T[2];if(C==8)for(g=0;g<h;g++){var l=g<<2;M=3*g,H[g]=255<<24|r[M+2]<<16|r[M+1]<<8|r[M],r[M]==c&&r[M+1]==k&&r[M+2]==z&&(A[l+3]=0)}if(C==16)for(g=0;g<h;g++)l=g<<2,M=6*g,H[g]=255<<24|r[M+4]<<16|r[M+2]<<8|r[M],P(r,M)==c&&P(r,M+2)==k&&P(r,M+4)==z&&(A[l+3]=0)}}else if(O==3){const T=s.tabs.PLTE,k=s.tabs.tRNS,z=k?k.length:0;if(C==1)for(var w=0;w<n;w++){var I=w*S,y=w*i;for(g=0;g<i;g++){l=y+g<<2;var E=3*(m=r[I+(g>>3)]>>7-((7&g)<<0)&1);A[l]=T[E],A[l+1]=T[E+1],A[l+2]=T[E+2],A[l+3]=m<z?k[m]:255}}if(C==2)for(w=0;w<n;w++)for(I=w*S,y=w*i,g=0;g<i;g++)l=y+g<<2,E=3*(m=r[I+(g>>2)]>>6-((3&g)<<1)&3),A[l]=T[E],A[l+1]=T[E+1],A[l+2]=T[E+2],A[l+3]=m<z?k[m]:255;if(C==4)for(w=0;w<n;w++)for(I=w*S,y=w*i,g=0;g<i;g++)l=y+g<<2,E=3*(m=r[I+(g>>1)]>>4-((1&g)<<2)&15),A[l]=T[E],A[l+1]=T[E+1],A[l+2]=T[E+2],A[l+3]=m<z?k[m]:255;if(C==8)for(g=0;g<h;g++){var m;l=g<<2,E=3*(m=r[g]),A[l]=T[E],A[l+1]=T[E+1],A[l+2]=T[E+2],A[l+3]=m<z?k[m]:255}}else if(O==4){if(C==8)for(g=0;g<h;g++){l=g<<2;var _=r[d=g<<1];A[l]=_,A[l+1]=_,A[l+2]=_,A[l+3]=r[d+1]}if(C==16)for(g=0;g<h;g++){var d;l=g<<2,_=r[d=g<<2],A[l]=_,A[l+1]=_,A[l+2]=_,A[l+3]=r[d+2]}}else if(O==0)for(c=s.tabs.tRNS?s.tabs.tRNS:-1,w=0;w<n;w++){const T=w*S,k=w*i;if(C==1)for(var o=0;o<i;o++){var D=(_=255*(r[T+(o>>>3)]>>>7-(7&o)&1))==255*c?0:255;H[k+o]=D<<24|_<<16|_<<8|_}else if(C==2)for(o=0;o<i;o++)D=(_=85*(r[T+(o>>>2)]>>>6-((3&o)<<1)&3))==85*c?0:255,H[k+o]=D<<24|_<<16|_<<8|_;else if(C==4)for(o=0;o<i;o++)D=(_=17*(r[T+(o>>>1)]>>>4-((1&o)<<2)&15))==17*c?0:255,H[k+o]=D<<24|_<<16|_<<8|_;else if(C==8)for(o=0;o<i;o++)D=(_=r[T+o])==c?0:255,H[k+o]=D<<24|_<<16|_<<8|_;else if(C==16)for(o=0;o<i;o++)_=r[T+(o<<1)],D=P(r,T+(o<<1))==c?0:255,H[k+o]=D<<24|_<<16|_<<8|_}return A}function x(r,i,n,s){const h=t(r),U=Math.ceil(n*h/8),S=new Uint8Array((U+1+r.interlace)*s);return i=r.tabs.CgBI?e(i,S):f(i,S),r.interlace==0?i=u(i,r,0,n,s):r.interlace==1&&(i=function(H,O){const C=O.width,P=O.height,g=t(O),M=g>>3,c=Math.ceil(C*g/8),l=new Uint8Array(P*c);let w=0;const I=[0,0,4,0,2,0,1],y=[0,4,0,2,0,1,0],E=[8,8,8,4,4,2,2],m=[8,8,4,4,2,2,1];let _=0;for(;_<7;){const o=E[_],D=m[_];let T=0,k=0,z=I[_];for(;z<P;)z+=o,k++;let Q=y[_];for(;Q<C;)Q+=D,T++;const N=Math.ceil(T*g/8);u(H,O,w,T,k);let L=0,R=I[_];for(;R<P;){let B=y[_],G=w+L*N<<3;for(;B<C;){var d;if(g==1&&(d=(d=H[G>>3])>>7-(7&G)&1,l[R*c+(B>>3)]|=d<<7-((7&B)<<0)),g==2&&(d=(d=H[G>>3])>>6-(7&G)&3,l[R*c+(B>>2)]|=d<<6-((3&B)<<1)),g==4&&(d=(d=H[G>>3])>>4-(7&G)&15,l[R*c+(B>>1)]|=d<<4-((1&B)<<2)),g>=8){const q=R*c+B*M;for(let W=0;W<M;W++)l[q+W]=H[(G>>3)+W]}G+=g,B+=D}L++,R+=o}T*k!=0&&(w+=k*(1+N)),_+=1}return l}(i,r)),i}function f(r,i){return e(new Uint8Array(r.buffer,2,r.length-6),i)}var e=function(){const r={H:{}};return r.H.N=function(i,n){const s=Uint8Array;let h,U,S=0,A=0,H=0,O=0,C=0,P=0,g=0,M=0,c=0;if(i[0]==3&&i[1]==0)return n||new s(0);const l=r.H,w=l.b,I=l.e,y=l.R,E=l.n,m=l.A,_=l.Z,d=l.m,o=n==null;for(o&&(n=new s(i.length>>>2<<5));S==0;)if(S=w(i,c,1),A=w(i,c+1,2),c+=3,A!=0){if(o&&(n=r.H.W(n,M+(1<<17))),A==1&&(h=d.J,U=d.h,P=511,g=31),A==2){H=I(i,c,5)+257,O=I(i,c+5,5)+1,C=I(i,c+10,4)+4,c+=14;let T=1;for(var D=0;D<38;D+=2)d.Q[D]=0,d.Q[D+1]=0;for(D=0;D<C;D++){const Q=I(i,c+3*D,3);d.Q[1+(d.X[D]<<1)]=Q,Q>T&&(T=Q)}c+=3*C,E(d.Q,T),m(d.Q,T,d.u),h=d.w,U=d.d,c=y(d.u,(1<<T)-1,H+O,i,c,d.v);const k=l.V(d.v,0,H,d.C);P=(1<<k)-1;const z=l.V(d.v,H,O,d.D);g=(1<<z)-1,E(d.C,k),m(d.C,k,h),E(d.D,z),m(d.D,z,U)}for(;;){const T=h[_(i,c)&P];c+=15&T;const k=T>>>4;if(!(k>>>8))n[M++]=k;else{if(k==256)break;{let z=M+k-254;if(k>264){const B=d.q[k-257];z=M+(B>>>3)+I(i,c,7&B),c+=7&B}const Q=U[_(i,c)&g];c+=15&Q;const N=Q>>>4,L=d.c[N],R=(L>>>4)+w(i,c,15&L);for(c+=15&L;M<z;)n[M]=n[M++-R],n[M]=n[M++-R],n[M]=n[M++-R],n[M]=n[M++-R];M=z}}}}else{7&c&&(c+=8-(7&c));const T=4+(c>>>3),k=i[T-4]|i[T-3]<<8;o&&(n=r.H.W(n,M+k)),n.set(new s(i.buffer,i.byteOffset+T,k),M),c=T+k<<3,M+=k}return n.length==M?n:n.slice(0,M)},r.H.W=function(i,n){const s=i.length;if(n<=s)return i;const h=new Uint8Array(s<<1);return h.set(i,0),h},r.H.R=function(i,n,s,h,U,S){const A=r.H.e,H=r.H.Z;let O=0;for(;O<s;){const C=i[H(h,U)&n];U+=15&C;const P=C>>>4;if(P<=15)S[O]=P,O++;else{let g=0,M=0;P==16?(M=3+A(h,U,2),U+=2,g=S[O-1]):P==17?(M=3+A(h,U,3),U+=3):P==18&&(M=11+A(h,U,7),U+=7);const c=O+M;for(;O<c;)S[O]=g,O++}}return U},r.H.V=function(i,n,s,h){let U=0,S=0;const A=h.length>>>1;for(;S<s;){const H=i[S+n];h[S<<1]=0,h[1+(S<<1)]=H,H>U&&(U=H),S++}for(;S<A;)h[S<<1]=0,h[1+(S<<1)]=0,S++;return U},r.H.n=function(i,n){const s=r.H.m,h=i.length;let U,S,A,H;const O=s.j;for(var C=0;C<=n;C++)O[C]=0;for(C=1;C<h;C+=2)O[i[C]]++;const P=s.K;for(U=0,O[0]=0,S=1;S<=n;S++)U=U+O[S-1]<<1,P[S]=U;for(A=0;A<h;A+=2)H=i[A+1],H!=0&&(i[A]=P[H],P[H]++)},r.H.A=function(i,n,s){const h=i.length,U=r.H.m.r;for(let S=0;S<h;S+=2)if(i[S+1]!=0){const A=S>>1,H=i[S+1],O=A<<4|H,C=n-H;let P=i[S]<<C;const g=P+(1<<C);for(;P!=g;)s[U[P]>>>15-n]=O,P++}},r.H.l=function(i,n){const s=r.H.m.r,h=15-n;for(let U=0;U<i.length;U+=2){const S=i[U]<<n-i[U+1];i[U]=s[S]>>>h}},r.H.M=function(i,n,s){s<<=7&n;const h=n>>>3;i[h]|=s,i[h+1]|=s>>>8},r.H.I=function(i,n,s){s<<=7&n;const h=n>>>3;i[h]|=s,i[h+1]|=s>>>8,i[h+2]|=s>>>16},r.H.e=function(i,n,s){return(i[n>>>3]|i[1+(n>>>3)]<<8)>>>(7&n)&(1<<s)-1},r.H.b=function(i,n,s){return(i[n>>>3]|i[1+(n>>>3)]<<8|i[2+(n>>>3)]<<16)>>>(7&n)&(1<<s)-1},r.H.Z=function(i,n){return(i[n>>>3]|i[1+(n>>>3)]<<8|i[2+(n>>>3)]<<16)>>>(7&n)},r.H.i=function(i,n){return(i[n>>>3]|i[1+(n>>>3)]<<8|i[2+(n>>>3)]<<16|i[3+(n>>>3)]<<24)>>>(7&n)},r.H.m=function(){const i=Uint16Array,n=Uint32Array;return{K:new i(16),j:new i(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new i(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new n(32),J:new i(512),_:[],h:new i(32),$:[],w:new i(32768),C:[],v:[],d:new i(32768),D:[],u:new i(512),Q:[],r:new i(32768),s:new n(286),Y:new n(30),a:new n(19),t:new n(15e3),k:new i(65536),g:new i(32768)}}(),function(){const i=r.H.m;for(var n=0;n<32768;n++){let h=n;h=(2863311530&h)>>>1|(1431655765&h)<<1,h=(3435973836&h)>>>2|(858993459&h)<<2,h=(4042322160&h)>>>4|(252645135&h)<<4,h=(4278255360&h)>>>8|(16711935&h)<<8,i.r[n]=(h>>>16|h<<16)>>>17}function s(h,U,S){for(;U--!=0;)h.push(0,S)}for(n=0;n<32;n++)i.q[n]=i.S[n]<<3|i.T[n],i.c[n]=i.p[n]<<4|i.z[n];s(i._,144,8),s(i._,112,9),s(i._,24,7),s(i._,8,8),r.H.n(i._,9),r.H.A(i._,9,i.J),r.H.l(i._,9),s(i.$,32,5),r.H.n(i.$,5),r.H.A(i.$,5,i.h),r.H.l(i.$,5),s(i.Q,19,0),s(i.C,286,0),s(i.D,30,0),s(i.v,320,0)}(),r.H.N}();function t(r){return[1,null,3,1,2,null,4][r.ctype]*r.depth}function u(r,i,n,s,h){let U=t(i);const S=Math.ceil(s*U/8);let A,H;U=Math.ceil(U/8);let O=r[n],C=0;if(O>1&&(r[n]=[0,0,1][O-2]),O==3)for(C=U;C<S;C++)r[C+1]=r[C+1]+(r[C+1-U]>>>1)&255;for(let P=0;P<h;P++)if(A=n+P*S,H=A+P+1,O=r[H-1],C=0,O==0)for(;C<S;C++)r[A+C]=r[H+C];else if(O==1){for(;C<U;C++)r[A+C]=r[H+C];for(;C<S;C++)r[A+C]=r[H+C]+r[A+C-U]}else if(O==2)for(;C<S;C++)r[A+C]=r[H+C]+r[A+C-S];else if(O==3){for(;C<U;C++)r[A+C]=r[H+C]+(r[A+C-S]>>>1);for(;C<S;C++)r[A+C]=r[H+C]+(r[A+C-S]+r[A+C-U]>>>1)}else{for(;C<U;C++)r[A+C]=r[H+C]+a(0,r[A+C-S],0);for(;C<S;C++)r[A+C]=r[H+C]+a(r[A+C-U],r[A+C-S],r[A+C-U-S])}return r}function a(r,i,n){const s=r+i-n,h=s-r,U=s-i,S=s-n;return h*h<=U*U&&h*h<=S*S?r:U*U<=S*S?i:n}function p(r,i,n){n.width=b.readUint(r,i),i+=4,n.height=b.readUint(r,i),i+=4,n.depth=r[i],i++,n.ctype=r[i],i++,n.compress=r[i],i++,n.filter=r[i],i++,n.interlace=r[i],i++}function v(r,i,n,s,h,U,S,A,H){const O=Math.min(i,h),C=Math.min(n,U);let P=0,g=0;for(let _=0;_<C;_++)for(let d=0;d<O;d++)if(S>=0&&A>=0?(P=_*i+d<<2,g=(A+_)*h+S+d<<2):(P=(-A+_)*i-S+d<<2,g=_*h+d<<2),H==0)s[g]=r[P],s[g+1]=r[P+1],s[g+2]=r[P+2],s[g+3]=r[P+3];else if(H==1){var M=r[P+3]*.00392156862745098,c=r[P]*M,l=r[P+1]*M,w=r[P+2]*M,I=s[g+3]*(1/255),y=s[g]*I,E=s[g+1]*I,m=s[g+2]*I;const o=1-M,D=M+I*o,T=D==0?0:1/D;s[g+3]=255*D,s[g+0]=(c+y*o)*T,s[g+1]=(l+E*o)*T,s[g+2]=(w+m*o)*T}else if(H==2)M=r[P+3],c=r[P],l=r[P+1],w=r[P+2],I=s[g+3],y=s[g],E=s[g+1],m=s[g+2],M==I&&c==y&&l==E&&w==m?(s[g]=0,s[g+1]=0,s[g+2]=0,s[g+3]=0):(s[g]=c,s[g+1]=l,s[g+2]=w,s[g+3]=M);else if(H==3){if(M=r[P+3],c=r[P],l=r[P+1],w=r[P+2],I=s[g+3],y=s[g],E=s[g+1],m=s[g+2],M==I&&c==y&&l==E&&w==m)continue;if(M<220&&I>20)return!1}return!0}return{decode:function(i){const n=new Uint8Array(i);let s=8;const h=b,U=h.readUshort,S=h.readUint,A={tabs:{},frames:[]},H=new Uint8Array(n.length);let O,C=0,P=0;const g=[137,80,78,71,13,10,26,10];for(var M=0;M<8;M++)if(n[M]!=g[M])throw"The input is not a PNG file!";for(;s<n.length;){const _=h.readUint(n,s);s+=4;const d=h.readASCII(n,s,4);if(s+=4,d=="IHDR")p(n,s,A);else if(d=="iCCP"){for(var c=s;n[c]!=0;)c++;h.readASCII(n,s,c-s),n[c+1];const o=n.slice(c+2,s+_);let D=null;try{D=f(o)}catch{D=e(o)}A.tabs[d]=D}else if(d=="CgBI")A.tabs[d]=n.slice(s,s+4);else if(d=="IDAT"){for(M=0;M<_;M++)H[C+M]=n[s+M];C+=_}else if(d=="acTL")A.tabs[d]={num_frames:S(n,s),num_plays:S(n,s+4)},O=new Uint8Array(n.length);else if(d=="fcTL"){P!=0&&((m=A.frames[A.frames.length-1]).data=x(A,O.slice(0,P),m.rect.width,m.rect.height),P=0);const o={x:S(n,s+12),y:S(n,s+16),width:S(n,s+4),height:S(n,s+8)};let D=U(n,s+22);D=U(n,s+20)/(D==0?100:D);const T={rect:o,delay:Math.round(1e3*D),dispose:n[s+24],blend:n[s+25]};A.frames.push(T)}else if(d=="fdAT"){for(M=0;M<_-4;M++)O[P+M]=n[s+M+4];P+=_-4}else if(d=="pHYs")A.tabs[d]=[h.readUint(n,s),h.readUint(n,s+4),n[s+8]];else if(d=="cHRM")for(A.tabs[d]=[],M=0;M<8;M++)A.tabs[d].push(h.readUint(n,s+4*M));else if(d=="tEXt"||d=="zTXt"){A.tabs[d]==null&&(A.tabs[d]={});var l=h.nextZero(n,s),w=h.readASCII(n,s,l-s),I=s+_-l-1;if(d=="tEXt")E=h.readASCII(n,l+1,I);else{var y=f(n.slice(l+2,l+2+I));E=h.readUTF8(y,0,y.length)}A.tabs[d][w]=E}else if(d=="iTXt"){A.tabs[d]==null&&(A.tabs[d]={}),l=0,c=s,l=h.nextZero(n,c),w=h.readASCII(n,c,l-c);const o=n[c=l+1];var E;n[c+1],c+=2,l=h.nextZero(n,c),h.readASCII(n,c,l-c),c=l+1,l=h.nextZero(n,c),h.readUTF8(n,c,l-c),I=_-((c=l+1)-s),o==0?E=h.readUTF8(n,c,I):(y=f(n.slice(c,c+I)),E=h.readUTF8(y,0,y.length)),A.tabs[d][w]=E}else if(d=="PLTE")A.tabs[d]=h.readBytes(n,s,_);else if(d=="hIST"){const o=A.tabs.PLTE.length/3;for(A.tabs[d]=[],M=0;M<o;M++)A.tabs[d].push(U(n,s+2*M))}else if(d=="tRNS")A.ctype==3?A.tabs[d]=h.readBytes(n,s,_):A.ctype==0?A.tabs[d]=U(n,s):A.ctype==2&&(A.tabs[d]=[U(n,s),U(n,s+2),U(n,s+4)]);else if(d=="gAMA")A.tabs[d]=h.readUint(n,s)/1e5;else if(d=="sRGB")A.tabs[d]=n[s];else if(d=="bKGD")A.ctype==0||A.ctype==4?A.tabs[d]=[U(n,s)]:A.ctype==2||A.ctype==6?A.tabs[d]=[U(n,s),U(n,s+2),U(n,s+4)]:A.ctype==3&&(A.tabs[d]=n[s]);else if(d=="IEND")break;s+=_,h.readUint(n,s),s+=4}var m;return P!=0&&((m=A.frames[A.frames.length-1]).data=x(A,O.slice(0,P),m.rect.width,m.rect.height)),A.data=x(A,H,A.width,A.height),delete A.compress,delete A.interlace,delete A.filter,A},toRGBA8:function(i){const n=i.width,s=i.height;if(i.tabs.acTL==null)return[F(i.data,n,s,i).buffer];const h=[];i.frames[0].data==null&&(i.frames[0].data=i.data);const U=n*s*4,S=new Uint8Array(U),A=new Uint8Array(U),H=new Uint8Array(U);for(let C=0;C<i.frames.length;C++){const P=i.frames[C],g=P.rect.x,M=P.rect.y,c=P.rect.width,l=P.rect.height,w=F(P.data,c,l,i);if(C!=0)for(var O=0;O<U;O++)H[O]=S[O];if(P.blend==0?v(w,c,l,S,n,s,g,M,0):P.blend==1&&v(w,c,l,S,n,s,g,M,1),h.push(S.buffer.slice(0)),P.dispose!=0){if(P.dispose==1)v(A,c,l,S,n,s,g,M,0);else if(P.dispose==2)for(O=0;O<U;O++)S[O]=H[O]}}return h},_paeth:a,_copyTile:v,_bin:b}}();(function(){const{_copyTile:b}=de,{_bin:F}=de,x=de._paeth;var f={table:function(){const c=new Uint32Array(256);for(let l=0;l<256;l++){let w=l;for(let I=0;I<8;I++)1&w?w=3988292384^w>>>1:w>>>=1;c[l]=w}return c}(),update(c,l,w,I){for(let y=0;y<I;y++)c=f.table[255&(c^l[w+y])]^c>>>8;return c},crc:(c,l,w)=>4294967295^f.update(4294967295,c,l,w)};function e(c,l,w,I){l[w]+=c[0]*I>>4,l[w+1]+=c[1]*I>>4,l[w+2]+=c[2]*I>>4,l[w+3]+=c[3]*I>>4}function t(c){return Math.max(0,Math.min(255,c))}function u(c,l){const w=c[0]-l[0],I=c[1]-l[1],y=c[2]-l[2],E=c[3]-l[3];return w*w+I*I+y*y+E*E}function a(c,l,w,I,y,E,m){m==null&&(m=1);const _=I.length,d=[];for(var o=0;o<_;o++){const R=I[o];d.push([R>>>0&255,R>>>8&255,R>>>16&255,R>>>24&255])}for(o=0;o<_;o++){let R=4294967295;for(var D=0,T=0;T<_;T++){var k=u(d[o],d[T]);T!=o&&k<R&&(R=k,D=T)}}const z=new Uint32Array(y.buffer),Q=new Int16Array(l*w*4),N=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(o=0;o<N.length;o++)N[o]=255*((N[o]+.5)/16-.5);for(let R=0;R<w;R++)for(let B=0;B<l;B++){var L;o=4*(R*l+B),m!=2?L=[t(c[o]+Q[o]),t(c[o+1]+Q[o+1]),t(c[o+2]+Q[o+2]),t(c[o+3]+Q[o+3])]:(k=N[4*(3&R)+(3&B)],L=[t(c[o]+k),t(c[o+1]+k),t(c[o+2]+k),t(c[o+3]+k)]),D=0;let G=16777215;for(T=0;T<_;T++){const $=u(L,d[T]);$<G&&(G=$,D=T)}const q=d[D],W=[L[0]-q[0],L[1]-q[1],L[2]-q[2],L[3]-q[3]];m==1&&(B!=l-1&&e(W,Q,o+4,7),R!=w-1&&(B!=0&&e(W,Q,o+4*l-4,3),e(W,Q,o+4*l,5),B!=l-1&&e(W,Q,o+4*l+4,1))),E[o>>2]=D,z[o>>2]=I[D]}}function p(c,l,w,I,y){y==null&&(y={});const{crc:E}=f,m=F.writeUint,_=F.writeUshort,d=F.writeASCII;let o=8;const D=c.frames.length>1;let T,k=!1,z=33+(D?20:0);if(y.sRGB!=null&&(z+=13),y.pHYs!=null&&(z+=21),y.iCCP!=null&&(T=pako.deflate(y.iCCP),z+=21+T.length+4),c.ctype==3){for(var Q=c.plte.length,N=0;N<Q;N++)c.plte[N]>>>24!=255&&(k=!0);z+=8+3*Q+4+(k?8+1*Q+4:0)}for(var L=0;L<c.frames.length;L++)D&&(z+=38),z+=(q=c.frames[L]).cimg.length+12,L!=0&&(z+=4);z+=12;const R=new Uint8Array(z),B=[137,80,78,71,13,10,26,10];for(N=0;N<8;N++)R[N]=B[N];if(m(R,o,13),o+=4,d(R,o,"IHDR"),o+=4,m(R,o,l),o+=4,m(R,o,w),o+=4,R[o]=c.depth,o++,R[o]=c.ctype,o++,R[o]=0,o++,R[o]=0,o++,R[o]=0,o++,m(R,o,E(R,o-17,17)),o+=4,y.sRGB!=null&&(m(R,o,1),o+=4,d(R,o,"sRGB"),o+=4,R[o]=y.sRGB,o++,m(R,o,E(R,o-5,5)),o+=4),y.iCCP!=null){const W=13+T.length;m(R,o,W),o+=4,d(R,o,"iCCP"),o+=4,d(R,o,"ICC profile"),o+=11,o+=2,R.set(T,o),o+=T.length,m(R,o,E(R,o-(W+4),W+4)),o+=4}if(y.pHYs!=null&&(m(R,o,9),o+=4,d(R,o,"pHYs"),o+=4,m(R,o,y.pHYs[0]),o+=4,m(R,o,y.pHYs[1]),o+=4,R[o]=y.pHYs[2],o++,m(R,o,E(R,o-13,13)),o+=4),D&&(m(R,o,8),o+=4,d(R,o,"acTL"),o+=4,m(R,o,c.frames.length),o+=4,m(R,o,y.loop!=null?y.loop:0),o+=4,m(R,o,E(R,o-12,12)),o+=4),c.ctype==3){for(m(R,o,3*(Q=c.plte.length)),o+=4,d(R,o,"PLTE"),o+=4,N=0;N<Q;N++){const W=3*N,$=c.plte[N],X=255&$,ee=$>>>8&255,be=$>>>16&255;R[o+W+0]=X,R[o+W+1]=ee,R[o+W+2]=be}if(o+=3*Q,m(R,o,E(R,o-3*Q-4,3*Q+4)),o+=4,k){for(m(R,o,Q),o+=4,d(R,o,"tRNS"),o+=4,N=0;N<Q;N++)R[o+N]=c.plte[N]>>>24&255;o+=Q,m(R,o,E(R,o-Q-4,Q+4)),o+=4}}let G=0;for(L=0;L<c.frames.length;L++){var q=c.frames[L];D&&(m(R,o,26),o+=4,d(R,o,"fcTL"),o+=4,m(R,o,G++),o+=4,m(R,o,q.rect.width),o+=4,m(R,o,q.rect.height),o+=4,m(R,o,q.rect.x),o+=4,m(R,o,q.rect.y),o+=4,_(R,o,I[L]),o+=2,_(R,o,1e3),o+=2,R[o]=q.dispose,o++,R[o]=q.blend,o++,m(R,o,E(R,o-30,30)),o+=4);const W=q.cimg;m(R,o,(Q=W.length)+(L==0?0:4)),o+=4;const $=o;d(R,o,L==0?"IDAT":"fdAT"),o+=4,L!=0&&(m(R,o,G++),o+=4),R.set(W,o),o+=Q,m(R,o,E(R,$,o-$)),o+=4}return m(R,o,0),o+=4,d(R,o,"IEND"),o+=4,m(R,o,E(R,o-4,4)),o+=4,R.buffer}function v(c,l,w){for(let I=0;I<c.frames.length;I++){const y=c.frames[I];y.rect.width;const E=y.rect.height,m=new Uint8Array(E*y.bpl+E);y.cimg=s(y.img,E,y.bpp,y.bpl,m,l,w)}}function r(c,l,w,I,y){const E=y[0],m=y[1],_=y[2],d=y[3],o=y[4],D=y[5];let T=6,k=8,z=255;for(var Q=0;Q<c.length;Q++){const re=new Uint8Array(c[Q]);for(var N=re.length,L=0;L<N;L+=4)z&=re[L+3]}const R=z!=255,B=function(Z,j,te,oe,V,fe){const J=[];for(var K=0;K<Z.length;K++){const ae=new Uint8Array(Z[K]),ce=new Uint32Array(ae.buffer);var le;let ue=0,ve=0,ge=j,Ie=te,Le=oe?1:0;if(K!=0){const ut=fe||oe||K==1||J[K-2].dispose!=0?1:2;let Qe=0,Ge=1e9;for(let Ce=0;Ce<ut;Ce++){var me=new Uint8Array(Z[K-1-Ce]);const ct=new Uint32Array(Z[K-1-Ce]);let we=j,Ae=te,_e=-1,Re=-1;for(let Ue=0;Ue<te;Ue++)for(let Ee=0;Ee<j;Ee++)ce[ie=Ue*j+Ee]!=ct[ie]&&(Ee<we&&(we=Ee),Ee>_e&&(_e=Ee),Ue<Ae&&(Ae=Ue),Ue>Re&&(Re=Ue));_e==-1&&(we=Ae=_e=Re=0),V&&((1&we)==1&&we--,(1&Ae)==1&&Ae--);const Ze=(_e-we+1)*(Re-Ae+1);Ze<Ge&&(Ge=Ze,Qe=Ce,ue=we,ve=Ae,ge=_e-we+1,Ie=Re-Ae+1)}me=new Uint8Array(Z[K-1-Qe]),Qe==1&&(J[K-1].dispose=2),le=new Uint8Array(ge*Ie*4),b(me,j,te,le,ge,Ie,-ue,-ve,0),Le=b(ae,j,te,le,ge,Ie,-ue,-ve,3)?1:0,Le==1?n(ae,j,te,le,{x:ue,y:ve,width:ge,height:Ie}):b(ae,j,te,le,ge,Ie,-ue,-ve,0)}else le=ae.slice(0);J.push({rect:{x:ue,y:ve,width:ge,height:Ie},img:le,blend:Le,dispose:0})}if(oe)for(K=0;K<J.length;K++){if((ye=J[K]).blend==1)continue;const ae=ye.rect,ce=J[K-1].rect,ue=Math.min(ae.x,ce.x),ve=Math.min(ae.y,ce.y),ge={x:ue,y:ve,width:Math.max(ae.x+ae.width,ce.x+ce.width)-ue,height:Math.max(ae.y+ae.height,ce.y+ce.height)-ve};J[K-1].dispose=1,K-1!=0&&i(Z,j,te,J,K-1,ge,V),i(Z,j,te,J,K,ge,V)}let Me=0;if(Z.length!=1)for(var ie=0;ie<J.length;ie++){var ye;Me+=(ye=J[ie]).rect.width*ye.rect.height}return J}(c,l,w,E,m,_),G={},q=[],W=[];if(I!=0){const re=[];for(L=0;L<B.length;L++)re.push(B[L].img.buffer);const Z=function(V){let fe=0;for(var J=0;J<V.length;J++)fe+=V[J].byteLength;const K=new Uint8Array(fe);let le=0;for(J=0;J<V.length;J++){const me=new Uint8Array(V[J]),Me=me.length;for(let ie=0;ie<Me;ie+=4){let ye=me[ie],ae=me[ie+1],ce=me[ie+2];const ue=me[ie+3];ue==0&&(ye=ae=ce=0),K[le+ie]=ye,K[le+ie+1]=ae,K[le+ie+2]=ce,K[le+ie+3]=ue}le+=Me}return K.buffer}(re),j=U(Z,I);for(L=0;L<j.plte.length;L++)q.push(j.plte[L].est.rgba);let te=0;for(L=0;L<B.length;L++){const oe=(X=B[L]).img.length;var $=new Uint8Array(j.inds.buffer,te>>2,oe>>2);W.push($);const V=new Uint8Array(j.abuf,te,oe);D&&a(X.img,X.rect.width,X.rect.height,q,V,$),X.img.set(V),te+=oe}}else for(Q=0;Q<B.length;Q++){var X=B[Q];const re=new Uint32Array(X.img.buffer);var ee=X.rect.width;for(N=re.length,$=new Uint8Array(N),W.push($),L=0;L<N;L++){const Z=re[L];if(L!=0&&Z==re[L-1])$[L]=$[L-1];else if(L>ee&&Z==re[L-ee])$[L]=$[L-ee];else{let j=G[Z];if(j==null&&(G[Z]=j=q.length,q.push(Z),q.length>=300))break;$[L]=j}}}const be=q.length;for(be<=256&&o==0&&(k=be<=2?1:be<=4?2:be<=16?4:8,k=Math.max(k,d)),Q=0;Q<B.length;Q++){(X=B[Q]).rect.x,X.rect.y,ee=X.rect.width;const re=X.rect.height;let Z=X.img;new Uint32Array(Z.buffer);let j=4*ee,te=4;if(be<=256&&o==0){j=Math.ceil(k*ee/8);var he=new Uint8Array(j*re);const oe=W[Q];for(let V=0;V<re;V++){L=V*j;const fe=V*ee;if(k==8)for(var Y=0;Y<ee;Y++)he[L+Y]=oe[fe+Y];else if(k==4)for(Y=0;Y<ee;Y++)he[L+(Y>>1)]|=oe[fe+Y]<<4-4*(1&Y);else if(k==2)for(Y=0;Y<ee;Y++)he[L+(Y>>2)]|=oe[fe+Y]<<6-2*(3&Y);else if(k==1)for(Y=0;Y<ee;Y++)he[L+(Y>>3)]|=oe[fe+Y]<<7-1*(7&Y)}Z=he,T=3,te=1}else if(R==0&&B.length==1){he=new Uint8Array(ee*re*3);const oe=ee*re;for(L=0;L<oe;L++){const V=3*L,fe=4*L;he[V]=Z[fe],he[V+1]=Z[fe+1],he[V+2]=Z[fe+2]}Z=he,T=2,te=3,j=3*ee}X.img=Z,X.bpl=j,X.bpp=te}return{ctype:T,depth:k,plte:q,frames:B}}function i(c,l,w,I,y,E,m){const _=Uint8Array,d=Uint32Array,o=new _(c[y-1]),D=new d(c[y-1]),T=y+1<c.length?new _(c[y+1]):null,k=new _(c[y]),z=new d(k.buffer);let Q=l,N=w,L=-1,R=-1;for(let G=0;G<E.height;G++)for(let q=0;q<E.width;q++){const W=E.x+q,$=E.y+G,X=$*l+W,ee=z[X];ee==0||I[y-1].dispose==0&&D[X]==ee&&(T==null||T[4*X+3]!=0)||(W<Q&&(Q=W),W>L&&(L=W),$<N&&(N=$),$>R&&(R=$))}L==-1&&(Q=N=L=R=0),m&&((1&Q)==1&&Q--,(1&N)==1&&N--),E={x:Q,y:N,width:L-Q+1,height:R-N+1};const B=I[y];B.rect=E,B.blend=1,B.img=new Uint8Array(E.width*E.height*4),I[y-1].dispose==0?(b(o,l,w,B.img,E.width,E.height,-E.x,-E.y,0),n(k,l,w,B.img,E)):b(k,l,w,B.img,E.width,E.height,-E.x,-E.y,0)}function n(c,l,w,I,y){b(c,l,w,I,y.width,y.height,-y.x,-y.y,2)}function s(c,l,w,I,y,E,m){const _=[];let d,o=[0,1,2,3,4];E!=-1?o=[E]:(l*I>5e5||w==1)&&(o=[0]),m&&(d={level:0});const D=pt;for(var T=0;T<o.length;T++){for(let Q=0;Q<l;Q++)h(y,c,Q,I,w,o[T]);_.push(D.deflate(y,d))}let k,z=1e9;for(T=0;T<_.length;T++)_[T].length<z&&(k=T,z=_[T].length);return _[k]}function h(c,l,w,I,y,E){const m=w*I;let _=m+w;if(c[_]=E,_++,E==0)if(I<500)for(var d=0;d<I;d++)c[_+d]=l[m+d];else c.set(new Uint8Array(l.buffer,m,I),_);else if(E==1){for(d=0;d<y;d++)c[_+d]=l[m+d];for(d=y;d<I;d++)c[_+d]=l[m+d]-l[m+d-y]+256&255}else if(w==0){for(d=0;d<y;d++)c[_+d]=l[m+d];if(E==2)for(d=y;d<I;d++)c[_+d]=l[m+d];if(E==3)for(d=y;d<I;d++)c[_+d]=l[m+d]-(l[m+d-y]>>1)+256&255;if(E==4)for(d=y;d<I;d++)c[_+d]=l[m+d]-x(l[m+d-y],0,0)+256&255}else{if(E==2)for(d=0;d<I;d++)c[_+d]=l[m+d]+256-l[m+d-I]&255;if(E==3){for(d=0;d<y;d++)c[_+d]=l[m+d]+256-(l[m+d-I]>>1)&255;for(d=y;d<I;d++)c[_+d]=l[m+d]+256-(l[m+d-I]+l[m+d-y]>>1)&255}if(E==4){for(d=0;d<y;d++)c[_+d]=l[m+d]+256-x(0,l[m+d-I],0)&255;for(d=y;d<I;d++)c[_+d]=l[m+d]+256-x(l[m+d-y],l[m+d-I],l[m+d-y-I])&255}}}function U(c,l){const w=new Uint8Array(c),I=w.slice(0),y=new Uint32Array(I.buffer),E=S(I,l),m=E[0],_=E[1],d=w.length,o=new Uint8Array(d>>2);let D;if(w.length<2e7)for(var T=0;T<d;T+=4)D=A(m,k=w[T]*(1/255),z=w[T+1]*(1/255),Q=w[T+2]*(1/255),N=w[T+3]*(1/255)),o[T>>2]=D.ind,y[T>>2]=D.est.rgba;else for(T=0;T<d;T+=4){var k=w[T]*.00392156862745098,z=w[T+1]*(1/255),Q=w[T+2]*(1/255),N=w[T+3]*(1/255);for(D=m;D.left;)D=H(D.est,k,z,Q,N)<=0?D.left:D.right;o[T>>2]=D.ind,y[T>>2]=D.est.rgba}return{abuf:I.buffer,inds:o,plte:_}}function S(c,l,w){w==null&&(w=1e-4);const I=new Uint32Array(c.buffer),y={i0:0,i1:c.length,bst:null,est:null,tdst:0,left:null,right:null};y.bst=P(c,y.i0,y.i1),y.est=g(y.bst);const E=[y];for(;E.length<l;){let _=0,d=0;for(var m=0;m<E.length;m++)E[m].est.L>_&&(_=E[m].est.L,d=m);if(_<w)break;const o=E[d],D=O(c,I,o.i0,o.i1,o.est.e,o.est.eMq255);if(o.i0>=D||o.i1<=D){o.est.L=0;continue}const T={i0:o.i0,i1:D,bst:null,est:null,tdst:0,left:null,right:null};T.bst=P(c,T.i0,T.i1),T.est=g(T.bst);const k={i0:D,i1:o.i1,bst:null,est:null,tdst:0,left:null,right:null};for(k.bst={R:[],m:[],N:o.bst.N-T.bst.N},m=0;m<16;m++)k.bst.R[m]=o.bst.R[m]-T.bst.R[m];for(m=0;m<4;m++)k.bst.m[m]=o.bst.m[m]-T.bst.m[m];k.est=g(k.bst),o.left=T,o.right=k,E[d]=T,E.push(k)}for(E.sort((_,d)=>d.bst.N-_.bst.N),m=0;m<E.length;m++)E[m].ind=m;return[y,E]}function A(c,l,w,I,y){if(c.left==null)return c.tdst=function(T,k,z,Q,N){const L=k-T[0],R=z-T[1],B=Q-T[2],G=N-T[3];return L*L+R*R+B*B+G*G}(c.est.q,l,w,I,y),c;const E=H(c.est,l,w,I,y);let m=c.left,_=c.right;E>0&&(m=c.right,_=c.left);const d=A(m,l,w,I,y);if(d.tdst<=E*E)return d;const o=A(_,l,w,I,y);return o.tdst<d.tdst?o:d}function H(c,l,w,I,y){const{e:E}=c;return E[0]*l+E[1]*w+E[2]*I+E[3]*y-c.eMq}function O(c,l,w,I,y,E){for(I-=4;w<I;){for(;C(c,w,y)<=E;)w+=4;for(;C(c,I,y)>E;)I-=4;if(w>=I)break;const m=l[w>>2];l[w>>2]=l[I>>2],l[I>>2]=m,w+=4,I-=4}for(;C(c,w,y)>E;)w-=4;return w+4}function C(c,l,w){return c[l]*w[0]+c[l+1]*w[1]+c[l+2]*w[2]+c[l+3]*w[3]}function P(c,l,w){const I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],y=[0,0,0,0],E=w-l>>2;for(let m=l;m<w;m+=4){const _=c[m]*.00392156862745098,d=c[m+1]*(1/255),o=c[m+2]*(1/255),D=c[m+3]*(1/255);y[0]+=_,y[1]+=d,y[2]+=o,y[3]+=D,I[0]+=_*_,I[1]+=_*d,I[2]+=_*o,I[3]+=_*D,I[5]+=d*d,I[6]+=d*o,I[7]+=d*D,I[10]+=o*o,I[11]+=o*D,I[15]+=D*D}return I[4]=I[1],I[8]=I[2],I[9]=I[6],I[12]=I[3],I[13]=I[7],I[14]=I[11],{R:I,m:y,N:E}}function g(c){const{R:l}=c,{m:w}=c,{N:I}=c,y=w[0],E=w[1],m=w[2],_=w[3],d=I==0?0:1/I,o=[l[0]-y*y*d,l[1]-y*E*d,l[2]-y*m*d,l[3]-y*_*d,l[4]-E*y*d,l[5]-E*E*d,l[6]-E*m*d,l[7]-E*_*d,l[8]-m*y*d,l[9]-m*E*d,l[10]-m*m*d,l[11]-m*_*d,l[12]-_*y*d,l[13]-_*E*d,l[14]-_*m*d,l[15]-_*_*d],D=o,T=M;let k=[Math.random(),Math.random(),Math.random(),Math.random()],z=0,Q=0;if(I!=0)for(let L=0;L<16&&(k=T.multVec(D,k),Q=Math.sqrt(T.dot(k,k)),k=T.sml(1/Q,k),!(L!=0&&Math.abs(Q-z)<1e-9));L++)z=Q;const N=[y*d,E*d,m*d,_*d];return{Cov:o,q:N,e:k,L:z,eMq255:T.dot(T.sml(255,N),k),eMq:T.dot(k,N),rgba:(Math.round(255*N[3])<<24|Math.round(255*N[2])<<16|Math.round(255*N[1])<<8|Math.round(255*N[0])<<0)>>>0}}var M={multVec:(c,l)=>[c[0]*l[0]+c[1]*l[1]+c[2]*l[2]+c[3]*l[3],c[4]*l[0]+c[5]*l[1]+c[6]*l[2]+c[7]*l[3],c[8]*l[0]+c[9]*l[1]+c[10]*l[2]+c[11]*l[3],c[12]*l[0]+c[13]*l[1]+c[14]*l[2]+c[15]*l[3]],dot:(c,l)=>c[0]*l[0]+c[1]*l[1]+c[2]*l[2]+c[3]*l[3],sml:(c,l)=>[c*l[0],c*l[1],c*l[2],c*l[3]]};de.encode=function(l,w,I,y,E,m,_){y==null&&(y=0),_==null&&(_=!1);const d=r(l,w,I,y,[!1,!1,!1,0,_,!1]);return v(d,-1),p(d,w,I,E,m)},de.encodeLL=function(l,w,I,y,E,m,_,d){const o={ctype:0+(y==1?0:2)+(E==0?0:4),depth:m,frames:[]},D=(y+E)*m,T=D*w;for(let k=0;k<l.length;k++)o.frames.push({rect:{x:0,y:0,width:w,height:I},img:new Uint8Array(l[k]),blend:0,dispose:1,bpp:Math.ceil(D/8),bpl:Math.ceil(T/8)});return v(o,0,!0),p(o,w,I,_,d)},de.encode.compress=r,de.encode.dither=a,de.quantize=U,de.quantize.getKDtree=S,de.quantize.getNearest=A})();const Je={toArrayBuffer(b,F){const x=b.width,f=b.height,e=x<<2,t=b.getContext("2d").getImageData(0,0,x,f),u=new Uint32Array(t.data.buffer),a=(32*x+31)/32<<2,p=a*f,v=122+p,r=new ArrayBuffer(v),i=new DataView(r),n=1<<20;let s,h,U,S,A=n,H=0,O=0,C=0;function P(c){i.setUint16(O,c,!0),O+=2}function g(c){i.setUint32(O,c,!0),O+=4}function M(c){O+=c}P(19778),g(v),M(4),g(122),g(108),g(x),g(-f>>>0),P(1),P(32),g(3),g(p),g(2835),g(2835),M(8),g(16711680),g(65280),g(255),g(4278190080),g(1466527264),function c(){for(;H<f&&A>0;){for(S=122+H*a,s=0;s<e;)A--,h=u[C++],U=h>>>24,i.setUint32(S+s,h<<8|U),s+=4;H++}C<u.length?(A=n,setTimeout(c,Je._dly)):F(r)}()},toBlob(b,F){this.toArrayBuffer(b,x=>{F(new Blob([x],{type:"image/bmp"}))})},_dly:9};var se={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},vt={[se.CHROME]:16384,[se.FIREFOX]:11180,[se.DESKTOP_SAFARI]:16384,[se.IE]:8192,[se.IOS]:4096,[se.ETC]:8192};const je=typeof window<"u",et=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,De=je&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),mt=(je||et)&&(De&&De.getOriginalSymbol(window,"File")||typeof File<"u"&&File),tt=(je||et)&&(De&&De.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function Ke(b,F,x=Date.now()){return new Promise(f=>{const e=b.split(","),t=e[0].match(/:(.*?);/)[1],u=globalThis.atob(e[1]);let a=u.length;const p=new Uint8Array(a);for(;a--;)p[a]=u.charCodeAt(a);const v=new Blob([p],{type:t});v.name=F,v.lastModified=x,f(v)})}function nt(b){return new Promise((F,x)=>{const f=new tt;f.onload=()=>F(f.result),f.onerror=e=>x(e),f.readAsDataURL(b)})}function rt(b){return new Promise((F,x)=>{const f=new Image;f.onload=()=>F(f),f.onerror=e=>x(e),f.src=b})}function Fe(){if(Fe.cachedResult!==void 0)return Fe.cachedResult;let b=se.ETC;const{userAgent:F}=navigator;return/Chrom(e|ium)/i.test(F)?b=se.CHROME:/iP(ad|od|hone)/i.test(F)&&/WebKit/i.test(F)?b=se.IOS:/Safari/i.test(F)?b=se.DESKTOP_SAFARI:/Firefox/i.test(F)?b=se.FIREFOX:(/MSIE/i.test(F)||document.documentMode)&&(b=se.IE),Fe.cachedResult=b,Fe.cachedResult}function it(b,F){const x=Fe(),f=vt[x];let e=b,t=F,u=e*t;const a=e>t?t/e:e/t;for(;u>f*f;){const p=(f+e)/2,v=(f+t)/2;p<v?(t=v,e=v*a):(t=p*a,e=p),u=e*t}return{width:e,height:t}}function He(b,F){let x,f;try{if(x=new OffscreenCanvas(b,F),f=x.getContext("2d"),f===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{x=document.createElement("canvas"),f=x.getContext("2d")}return x.width=b,x.height=F,[x,f]}function ot(b,F){const{width:x,height:f}=it(b.width,b.height),[e,t]=He(x,f);return F&&/jpe?g/.test(F)&&(t.fillStyle="white",t.fillRect(0,0,e.width,e.height)),t.drawImage(b,0,0,e.width,e.height),e}function xe(){return xe.cachedResult!==void 0||(xe.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),xe.cachedResult}function ke(b,F={}){return new Promise(function(x,f){let e,t;var u=function(){try{return t=ot(e,F.fileType||b.type),x([e,t])}catch(p){return f(p)}},a=function(p){try{var v=function(r){try{throw r}catch(i){return f(i)}};try{let r;return nt(b).then(function(i){try{return r=i,rt(r).then(function(n){try{return e=n,function(){try{return u()}catch(s){return f(s)}}()}catch(s){return v(s)}},v)}catch(n){return v(n)}},v)}catch(r){v(r)}}catch(r){return f(r)}};try{if(xe()||[se.DESKTOP_SAFARI,se.MOBILE_SAFARI].includes(Fe()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(b).then(function(p){try{return e=p,u()}catch{return a()}},a)}catch{a()}})}function Pe(b,F,x,f,e=1){return new Promise(function(t,u){let a;if(F==="image/png"){let v,r,i;return v=b.getContext("2d"),{data:r}=v.getImageData(0,0,b.width,b.height),i=de.encode([r.buffer],b.width,b.height,4096*e),a=new Blob([i],{type:F}),a.name=x,a.lastModified=f,p.call(this)}{let v=function(){return p.call(this)};if(F==="image/bmp")return new Promise(r=>Je.toBlob(b,r)).then((function(r){try{return a=r,a.name=x,a.lastModified=f,v.call(this)}catch(i){return u(i)}}).bind(this),u);{let r=function(){return v.call(this)};if(typeof OffscreenCanvas=="function"&&b instanceof OffscreenCanvas)return b.convertToBlob({type:F,quality:e}).then((function(i){try{return a=i,a.name=x,a.lastModified=f,r.call(this)}catch(n){return u(n)}}).bind(this),u);{let i;return i=b.toDataURL(F,e),Ke(i,x,f).then((function(n){try{return a=n,r.call(this)}catch(s){return u(s)}}).bind(this),u)}}}function p(){return t(a)}})}function pe(b){b.width=0,b.height=0}function Se(){return new Promise(function(b,F){let x,f,e,t;return Se.cachedResult!==void 0?b(Se.cachedResult):Ke("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(u){try{return x=u,ke(x).then(function(a){try{return f=a[1],Pe(f,x.type,x.name,x.lastModified).then(function(p){try{return e=p,pe(f),ke(e).then(function(v){try{return t=v[0],Se.cachedResult=t.width===1&&t.height===2,b(Se.cachedResult)}catch(r){return F(r)}},F)}catch(v){return F(v)}},F)}catch(p){return F(p)}},F)}catch(a){return F(a)}},F)})}function at(b){return new Promise((F,x)=>{const f=new tt;f.onload=e=>{const t=new DataView(e.target.result);if(t.getUint16(0,!1)!=65496)return F(-2);const u=t.byteLength;let a=2;for(;a<u;){if(t.getUint16(a+2,!1)<=8)return F(-1);const p=t.getUint16(a,!1);if(a+=2,p==65505){if(t.getUint32(a+=2,!1)!=1165519206)return F(-1);const v=t.getUint16(a+=6,!1)==18761;a+=t.getUint32(a+4,v);const r=t.getUint16(a,v);a+=2;for(let i=0;i<r;i++)if(t.getUint16(a+12*i,v)==274)return F(t.getUint16(a+12*i+8,v))}else{if((65280&p)!=65280)break;a+=t.getUint16(a,!1)}}return F(-1)},f.onerror=e=>x(e),f.readAsArrayBuffer(b)})}function st(b,F){const{width:x}=b,{height:f}=b,{maxWidthOrHeight:e}=F;let t,u=b;return isFinite(e)&&(x>e||f>e)&&([u,t]=He(x,f),x>f?(u.width=e,u.height=f/x*e):(u.width=x/f*e,u.height=e),t.drawImage(b,0,0,u.width,u.height),pe(b)),u}function ft(b,F){const{width:x}=b,{height:f}=b,[e,t]=He(x,f);switch(F>4&&F<9?(e.width=f,e.height=x):(e.width=x,e.height=f),F){case 2:t.transform(-1,0,0,1,x,0);break;case 3:t.transform(-1,0,0,-1,x,f);break;case 4:t.transform(1,0,0,-1,0,f);break;case 5:t.transform(0,1,1,0,0,0);break;case 6:t.transform(0,1,-1,0,f,0);break;case 7:t.transform(0,-1,-1,0,f,x);break;case 8:t.transform(0,-1,1,0,0,x)}return t.drawImage(b,0,0,x,f),pe(b),e}function Ye(b,F,x=0){return new Promise(function(f,e){let t,u,a,p,v,r,i,n,s,h,U,S,A,H,O,C,P,g,M,c;function l(I=5){if(F.signal&&F.signal.aborted)throw F.signal.reason;t+=I,F.onProgress(Math.min(t,100))}function w(I){if(F.signal&&F.signal.aborted)throw F.signal.reason;t=Math.min(Math.max(I,t),100),F.onProgress(t)}return t=x,u=F.maxIteration||10,a=1024*F.maxSizeMB*1024,l(),ke(b,F).then((function(I){try{return[,p]=I,l(),v=st(p,F),l(),new Promise(function(y,E){var m;if(!(m=F.exifOrientation))return at(b).then((function(d){try{return m=d,_.call(this)}catch(o){return E(o)}}).bind(this),E);function _(){return y(m)}return _.call(this)}).then((function(y){try{return r=y,l(),Se().then((function(E){try{return i=E?v:ft(v,r),l(),n=F.initialQuality||1,s=F.fileType||b.type,Pe(i,s,b.name,b.lastModified,n).then((function(m){try{{let d=function(){if(u--&&(O>a||O>A)){let D,T;return D=c?.95*M.width:M.width,T=c?.95*M.height:M.height,[P,g]=He(D,T),g.drawImage(M,0,0,D,T),n*=s==="image/png"?.85:.95,Pe(P,s,b.name,b.lastModified,n).then(function(k){try{return C=k,pe(M),M=P,O=C.size,w(Math.min(99,Math.floor((H-O)/(H-a)*100))),d}catch(z){return e(z)}},e)}return[1]},o=function(){return pe(M),pe(P),pe(v),pe(i),pe(p),w(100),f(C)};if(h=m,l(),U=h.size>a,S=h.size>b.size,!U&&!S)return w(100),f(h);var _;return A=b.size,H=h.size,O=H,M=i,c=!F.alwaysKeepResolution&&U,(_=(function(D){for(;D;){if(D.then)return void D.then(_,e);try{if(D.pop){if(D.length)return D.pop()?o.call(this):D;D=d}else D=D.call(this)}catch(T){return e(T)}}}).bind(this))(d)}}catch(d){return e(d)}}).bind(this),e)}catch(m){return e(m)}}).bind(this),e)}catch(E){return e(E)}}).bind(this),e)}catch(y){return e(y)}}).bind(this),e)})}const wt=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let Ne;function At(b,F){return new Promise((x,f)=>{Ne||(Ne=function(u){const a=[];return a.push(u),URL.createObjectURL(new Blob(a))}(wt));const e=new Worker(Ne);e.addEventListener("message",function(u){if(F.signal&&F.signal.aborted)e.terminate();else if(u.data.progress===void 0){if(u.data.error)return f(new Error(u.data.error)),void e.terminate();x(u.data.file),e.terminate()}else F.onProgress(u.data.progress)}),e.addEventListener("error",f),F.signal&&F.signal.addEventListener("abort",()=>{f(F.signal.reason),e.terminate()}),e.postMessage({file:b,imageCompressionLibUrl:F.libURL,options:{...F,onProgress:void 0,signal:void 0}})})}function ne(b,F){return new Promise(function(x,f){let e,t,u,a,p,v;if(e={...F},u=0,{onProgress:a}=e,e.maxSizeMB=e.maxSizeMB||Number.POSITIVE_INFINITY,p=typeof e.useWebWorker!="boolean"||e.useWebWorker,delete e.useWebWorker,e.onProgress=s=>{u=s,typeof a=="function"&&a(u)},!(b instanceof Blob||b instanceof mt))return f(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(b.type))return f(new Error("The file given is not an image"));if(v=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!p||typeof Worker!="function"||v)return Ye(b,e).then((function(s){try{return t=s,n.call(this)}catch(h){return f(h)}}).bind(this),f);var r=(function(){try{return n.call(this)}catch(s){return f(s)}}).bind(this),i=function(s){try{return Ye(b,e).then(function(h){try{return t=h,r()}catch(U){return f(U)}},f)}catch(h){return f(h)}};try{return e.libURL=e.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",At(b,e).then(function(s){try{return t=s,r()}catch{return i()}},i)}catch{i()}function n(){try{t.name=b.name,t.lastModified=b.lastModified}catch{}try{e.preserveExif&&b.type==="image/jpeg"&&(!e.fileType||e.fileType&&e.fileType===b.type)&&(t=Ve(b,t))}catch{}return x(t)}})}ne.getDataUrlFromFile=nt,ne.getFilefromDataUrl=Ke,ne.loadImage=rt,ne.drawImageInCanvas=ot,ne.drawFileInCanvas=ke,ne.canvasToFile=Pe,ne.getExifOrientation=at,ne.handleMaxWidthOrHeight=st,ne.followExifOrientation=ft,ne.cleanupCanvasMemory=pe,ne.isAutoOrientationInBrowser=Se,ne.approximateBelowMaximumCanvasSizeOfBrowser=it,ne.copyExifWithoutOrientation=Ve,ne.getBrowserName=Fe,ne.version="2.0.2";const Be=b=>!b||b.length<12?null:{tradeId:b[0],date:b[1],time:b[2],amount:parseFloat(b[3])||0,tagId:b[4],tagName:b[5],tagColor:b[6],tagEmoji:b[7],driveImageId:b[8]||null,notes:b[9]||"",createdAt:b[10],updatedAt:b[11]},lt=async()=>{const b=localStorage.getItem($e.SHEET_ID);if(!b)return[];try{return((await window.gapi.client.sheets.spreadsheets.values.get({spreadsheetId:b,range:`${Te.TRADES}!A2:L`})).result.values||[]).map(Be).filter(Boolean)}catch(F){return console.error("Failed to fetch trades:",F),[]}},bt=async(b,F)=>(await lt()).filter(f=>{const[e,t]=f.date.split("-").map(Number);return e===b&&t===F+1}),yt=async b=>{const F=await ze.getOrCreateSpreadsheet();let x=null;if(b.screenshot){const t=await ne(b.screenshot,{maxSizeMB:1,maxWidthOrHeight:1200,useWebWorker:!0}),u=b.time.replace(":","-"),a=`${b.tradeId}_${b.date}_${u}.jpg`;x=await ze.uploadImage(t,a)}const f=new Date().toISOString(),e=[b.tradeId,b.date,b.time,b.amount,b.tagId,b.tagName,b.tagColor,b.tagEmoji,x||"",b.notes||"",f,f];return await window.gapi.client.sheets.spreadsheets.values.append({spreadsheetId:F,range:`${Te.TRADES}!A:L`,valueInputOption:"USER_ENTERED",resource:{values:[e]}}),{...b,driveImageId:x,createdAt:f,updatedAt:f}},It=async({tradeId:b,updates:F})=>{const x=localStorage.getItem($e.SHEET_ID),t=((await window.gapi.client.sheets.spreadsheets.values.get({spreadsheetId:x,range:`${Te.TRADES}!A2:A`})).result.values||[]).findIndex(s=>s[0]===b);if(t===-1)throw new Error("Trade not found");const u=t+2,p=(await window.gapi.client.sheets.spreadsheets.values.get({spreadsheetId:x,range:`${Te.TRADES}!A${u}:L${u}`})).result.values[0],v=Be(p);let r=v.driveImageId;if(F.driveImageId==="")r="";else if(F.screenshot){const s=await ne(F.screenshot,{maxSizeMB:1,maxWidthOrHeight:1200,useWebWorker:!0}),h=F.date||v.date,U=(F.time||v.time).replace(":","-"),S=`${b}_${h}_${U}.jpg`;r=await ze.uploadImage(s,S)}const i=new Date().toISOString(),n=[b,F.date||v.date,F.time||v.time,F.amount!==void 0?F.amount:v.amount,F.tagId||v.tagId,F.tagName||v.tagName,F.tagColor||v.tagColor,F.tagEmoji||v.tagEmoji,r||"",F.notes!==void 0?F.notes:v.notes,v.createdAt,i];return await window.gapi.client.sheets.spreadsheets.values.update({spreadsheetId:x,range:`${Te.TRADES}!A${u}:L${u}`,valueInputOption:"USER_ENTERED",resource:{values:[n]}}),Be(n)},Ut=async b=>{const F=localStorage.getItem($e.SHEET_ID),f=(await window.gapi.client.sheets.spreadsheets.get({spreadsheetId:F,fields:"sheets(properties(sheetId,title))"})).result.sheets.find(v=>v.properties.title===Te.TRADES);if(!f)throw new Error("Trades sheet not found");const e=f.properties.sheetId,a=((await window.gapi.client.sheets.spreadsheets.values.get({spreadsheetId:F,range:`${Te.TRADES}!A2:A`})).result.values||[]).findIndex(v=>v[0]===b);if(a===-1)throw new Error("Trade not found");const p=a+1;await window.gapi.client.sheets.spreadsheets.batchUpdate({spreadsheetId:F,resource:{requests:[{deleteDimension:{range:{sheetId:e,dimension:"ROWS",startIndex:p,endIndex:p+1}}}]}})},Tt=()=>Xe({queryKey:["trades"],queryFn:lt,staleTime:5*60*1e3,cacheTime:30*60*1e3}),_t=(b,F)=>Xe({queryKey:["trades",b,F],queryFn:()=>bt(b,F),staleTime:5*60*1e3}),St=()=>{const b=qe();return We({mutationFn:yt,onMutate:async F=>{await b.cancelQueries({queryKey:["trades"]});const x=b.getQueryData(["trades"]);return x&&b.setQueryData(["trades"],f=>[...f||[],F]),{previousTrades:x}},onError:(F,x,f)=>{f!=null&&f.previousTrades&&b.setQueryData(["trades"],f.previousTrades)},onSettled:()=>{b.invalidateQueries({queryKey:["trades"]})}})},Ct=()=>{const b=qe();return We({mutationFn:It,onSuccess:()=>{b.invalidateQueries({queryKey:["trades"]})}})},Rt=()=>{const b=qe();return We({mutationFn:Ut,onMutate:async F=>{await b.cancelQueries({queryKey:["trades"]});const x=b.getQueryData(["trades"]);return x&&b.setQueryData(["trades"],f=>(f||[]).filter(e=>e.tradeId!==F)),{previousTrades:x}},onError:(F,x,f)=>{f!=null&&f.previousTrades&&b.setQueryData(["trades"],f.previousTrades)},onSettled:()=>{b.invalidateQueries({queryKey:["trades"]})}})};export{St as a,Ct as b,Rt as c,_t as d,Tt as u};
