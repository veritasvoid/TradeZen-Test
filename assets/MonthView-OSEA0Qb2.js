import{c as we,j as c,d as Pt,R as z,e as dt,r as be,Q as rr,X as sr,f as nr,b as ar,L as ir}from"./index-BR4kzkPL.js";import{a as or,b as cr,c as lr}from"./useTrades-BrfZAkum.js";import{P as ur,M as $e,S as dr,T as fr,u as hr}from"./Modal-BfCIrpbG.js";import{H as ft}from"./Header-DlgcEkYk.js";import{B as ve}from"./Button-bn6NEuun.js";import{t as B,s as ht,m as mr,a as Vt,b as Qe,g as yr,d as gr,e as xr,h as br,f as Et,i as mt,j as vr}from"./utils-Dl5JNC--.js";import{u as Xe}from"./settingsStore-BStjF_2g.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=we("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=we("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=we("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=we("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=we("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=we("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);function ie(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function Ct(e,t){const r=B(e);if(isNaN(t))return ie(e,NaN);if(!t)return r;const s=r.getDate(),a=ie(e,r.getTime());a.setMonth(r.getMonth()+t+1,0);const i=a.getDate();return s>=i?a:(r.setFullYear(a.getFullYear(),a.getMonth(),s),r)}let Nr={};function Ce(){return Nr}function Se(e,t){var d,w,k,_;const r=Ce(),s=(t==null?void 0:t.weekStartsOn)??((w=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:w.weekStartsOn)??r.weekStartsOn??((_=(k=r.locale)==null?void 0:k.options)==null?void 0:_.weekStartsOn)??0,a=B(e),i=a.getDay(),l=(i<s?7:0)+i-s;return a.setDate(a.getDate()-l),a.setHours(0,0,0,0),a}function Pe(e){return Se(e,{weekStartsOn:1})}function At(e){const t=B(e),r=t.getFullYear(),s=ie(e,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const a=Pe(s),i=ie(e,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const l=Pe(i);return t.getTime()>=a.getTime()?r+1:t.getTime()>=l.getTime()?r:r-1}function yt(e){const t=B(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function Fr(e,t){const r=ht(e),s=ht(t),a=+r-yt(r),i=+s-yt(s);return Math.round((a-i)/mr)}function Sr(e){const t=At(e),r=ie(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Pe(r)}function Tr(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Or(e){if(!Tr(e)&&typeof e!="number")return!1;const t=B(e);return!isNaN(Number(t))}function _r(e){const t=B(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function Pr(e,t){const r=B(e.start),s=B(e.end);let a=+r>+s;const i=a?+r:+s,l=a?s:r;l.setHours(0,0,0,0);let d=1;const w=[];for(;+l<=i;)w.push(B(l)),l.setDate(l.getDate()+d),l.setHours(0,0,0,0);return a?w.reverse():w}function Vr(e){const t=B(e);return t.setDate(1),t.setHours(0,0,0,0),t}function Er(e){const t=B(e),r=ie(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}const Cr={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Ar=(e,t,r)=>{let s;const a=Cr[e];return typeof a=="string"?s=a:t===1?s=a.one:s=a.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};function qe(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const Wr={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Ir={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Lr={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Yr={date:qe({formats:Wr,defaultWidth:"full"}),time:qe({formats:Ir,defaultWidth:"full"}),dateTime:qe({formats:Lr,defaultWidth:"full"})},Rr={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},qr=(e,t,r,s)=>Rr[e];function De(e){return(t,r)=>{const s=r!=null&&r.context?String(r.context):"standalone";let a;if(s==="formatting"&&e.formattingValues){const l=e.defaultFormattingWidth||e.defaultWidth,d=r!=null&&r.width?String(r.width):l;a=e.formattingValues[d]||e.formattingValues[l]}else{const l=e.defaultWidth,d=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[d]||e.values[l]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const Ur={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Br={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Hr={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},$r={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Qr={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Xr={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},zr=(e,t)=>{const r=Number(e),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Gr={ordinalNumber:zr,era:De({values:Ur,defaultWidth:"wide"}),quarter:De({values:Br,defaultWidth:"wide",argumentCallback:e=>e-1}),month:De({values:Hr,defaultWidth:"wide"}),day:De({values:$r,defaultWidth:"wide"}),dayPeriod:De({values:Qr,defaultWidth:"wide",formattingValues:Xr,defaultFormattingWidth:"wide"})};function je(e){return(t,r={})=>{const s=r.width,a=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const l=i[0],d=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],w=Array.isArray(d)?Kr(d,p=>p.test(l)):Jr(d,p=>p.test(l));let k;k=e.valueCallback?e.valueCallback(w):w,k=r.valueCallback?r.valueCallback(k):k;const _=t.slice(l.length);return{value:k,rest:_}}}function Jr(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function Kr(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function Zr(e){return(t,r={})=>{const s=t.match(e.matchPattern);if(!s)return null;const a=s[0],i=t.match(e.parsePattern);if(!i)return null;let l=e.valueCallback?e.valueCallback(i[0]):i[0];l=r.valueCallback?r.valueCallback(l):l;const d=t.slice(a.length);return{value:l,rest:d}}}const es=/^(\d+)(th|st|nd|rd)?/i,ts=/\d+/i,rs={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ss={any:[/^b/i,/^(a|c)/i]},ns={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},as={any:[/1/i,/2/i,/3/i,/4/i]},is={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},os={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},cs={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},ls={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},us={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},ds={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},fs={ordinalNumber:Zr({matchPattern:es,parsePattern:ts,valueCallback:e=>parseInt(e,10)}),era:je({matchPatterns:rs,defaultMatchWidth:"wide",parsePatterns:ss,defaultParseWidth:"any"}),quarter:je({matchPatterns:ns,defaultMatchWidth:"wide",parsePatterns:as,defaultParseWidth:"any",valueCallback:e=>e+1}),month:je({matchPatterns:is,defaultMatchWidth:"wide",parsePatterns:os,defaultParseWidth:"any"}),day:je({matchPatterns:cs,defaultMatchWidth:"wide",parsePatterns:ls,defaultParseWidth:"any"}),dayPeriod:je({matchPatterns:us,defaultMatchWidth:"any",parsePatterns:ds,defaultParseWidth:"any"})},hs={code:"en-US",formatDistance:Ar,formatLong:Yr,formatRelative:qr,localize:Gr,match:fs,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ms(e){const t=B(e);return Fr(t,Er(t))+1}function ys(e){const t=B(e),r=+Pe(t)-+Sr(t);return Math.round(r/Vt)+1}function Wt(e,t){var _,p,S,v;const r=B(e),s=r.getFullYear(),a=Ce(),i=(t==null?void 0:t.firstWeekContainsDate)??((p=(_=t==null?void 0:t.locale)==null?void 0:_.options)==null?void 0:p.firstWeekContainsDate)??a.firstWeekContainsDate??((v=(S=a.locale)==null?void 0:S.options)==null?void 0:v.firstWeekContainsDate)??1,l=ie(e,0);l.setFullYear(s+1,0,i),l.setHours(0,0,0,0);const d=Se(l,t),w=ie(e,0);w.setFullYear(s,0,i),w.setHours(0,0,0,0);const k=Se(w,t);return r.getTime()>=d.getTime()?s+1:r.getTime()>=k.getTime()?s:s-1}function gs(e,t){var d,w,k,_;const r=Ce(),s=(t==null?void 0:t.firstWeekContainsDate)??((w=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:w.firstWeekContainsDate)??r.firstWeekContainsDate??((_=(k=r.locale)==null?void 0:k.options)==null?void 0:_.firstWeekContainsDate)??1,a=Wt(e,t),i=ie(e,0);return i.setFullYear(a,0,s),i.setHours(0,0,0,0),Se(i,t)}function xs(e,t){const r=B(e),s=+Se(r,t)-+gs(r,t);return Math.round(s/Vt)+1}function O(e,t){const r=e<0?"-":"",s=Math.abs(e).toString().padStart(t,"0");return r+s}const le={y(e,t){const r=e.getFullYear(),s=r>0?r:1-r;return O(t==="yy"?s%100:s,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):O(r+1,2)},d(e,t){return O(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return O(e.getHours()%12||12,t.length)},H(e,t){return O(e.getHours(),t.length)},m(e,t){return O(e.getMinutes(),t.length)},s(e,t){return O(e.getSeconds(),t.length)},S(e,t){const r=t.length,s=e.getMilliseconds(),a=Math.trunc(s*Math.pow(10,r-3));return O(a,t.length)}},ye={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},gt={G:function(e,t,r){const s=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});case"GGGG":default:return r.era(s,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const s=e.getFullYear(),a=s>0?s:1-s;return r.ordinalNumber(a,{unit:"year"})}return le.y(e,t)},Y:function(e,t,r,s){const a=Wt(e,s),i=a>0?a:1-a;if(t==="YY"){const l=i%100;return O(l,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):O(i,t.length)},R:function(e,t){const r=At(e);return O(r,t.length)},u:function(e,t){const r=e.getFullYear();return O(r,t.length)},Q:function(e,t,r){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(s);case"QQ":return O(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,t,r){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(s);case"qq":return O(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,t,r){const s=e.getMonth();switch(t){case"M":case"MM":return le.M(e,t);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(e,t,r){const s=e.getMonth();switch(t){case"L":return String(s+1);case"LL":return O(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(e,t,r,s){const a=xs(e,s);return t==="wo"?r.ordinalNumber(a,{unit:"week"}):O(a,t.length)},I:function(e,t,r){const s=ys(e);return t==="Io"?r.ordinalNumber(s,{unit:"week"}):O(s,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):le.d(e,t)},D:function(e,t,r){const s=ms(e);return t==="Do"?r.ordinalNumber(s,{unit:"dayOfYear"}):O(s,t.length)},E:function(e,t,r){const s=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});case"EEEE":default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(e,t,r,s){const a=e.getDay(),i=(a-s.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return O(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,s){const a=e.getDay(),i=(a-s.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return O(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const s=e.getDay(),a=s===0?7:s;switch(t){case"i":return String(a);case"ii":return O(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});case"iiii":default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(e,t,r){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){const s=e.getHours();let a;switch(s===12?a=ye.noon:s===0?a=ye.midnight:a=s/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const s=e.getHours();let a;switch(s>=17?a=ye.evening:s>=12?a=ye.afternoon:s>=4?a=ye.morning:a=ye.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let s=e.getHours()%12;return s===0&&(s=12),r.ordinalNumber(s,{unit:"hour"})}return le.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):le.H(e,t)},K:function(e,t,r){const s=e.getHours()%12;return t==="Ko"?r.ordinalNumber(s,{unit:"hour"}):O(s,t.length)},k:function(e,t,r){let s=e.getHours();return s===0&&(s=24),t==="ko"?r.ordinalNumber(s,{unit:"hour"}):O(s,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):le.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):le.s(e,t)},S:function(e,t){return le.S(e,t)},X:function(e,t,r){const s=e.getTimezoneOffset();if(s===0)return"Z";switch(t){case"X":return bt(s);case"XXXX":case"XX":return fe(s);case"XXXXX":case"XXX":default:return fe(s,":")}},x:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"x":return bt(s);case"xxxx":case"xx":return fe(s);case"xxxxx":case"xxx":default:return fe(s,":")}},O:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+xt(s,":");case"OOOO":default:return"GMT"+fe(s,":")}},z:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+xt(s,":");case"zzzz":default:return"GMT"+fe(s,":")}},t:function(e,t,r){const s=Math.trunc(e.getTime()/1e3);return O(s,t.length)},T:function(e,t,r){const s=e.getTime();return O(s,t.length)}};function xt(e,t=""){const r=e>0?"-":"+",s=Math.abs(e),a=Math.trunc(s/60),i=s%60;return i===0?r+String(a):r+String(a)+t+O(i,2)}function bt(e,t){return e%60===0?(e>0?"-":"+")+O(Math.abs(e)/60,2):fe(e,t)}function fe(e,t=""){const r=e>0?"-":"+",s=Math.abs(e),a=O(Math.trunc(s/60),2),i=O(s%60,2);return r+a+t+i}const vt=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},It=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},bs=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],s=r[1],a=r[2];if(!a)return vt(e,t);let i;switch(s){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",vt(s,t)).replace("{{time}}",It(a,t))},vs={p:It,P:bs},ws=/^D+$/,ps=/^Y+$/,ks=["D","DD","YY","YYYY"];function Ds(e){return ws.test(e)}function js(e){return ps.test(e)}function Ms(e,t,r){const s=Ns(e,t,r);if(console.warn(s),ks.includes(e))throw new RangeError(s)}function Ns(e,t,r){const s=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${s} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Fs=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ss=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ts=/^'([^]*?)'?$/,Os=/''/g,_s=/[a-zA-Z]/;function he(e,t,r){var _,p,S,v;const s=Ce(),a=s.locale??hs,i=s.firstWeekContainsDate??((p=(_=s.locale)==null?void 0:_.options)==null?void 0:p.firstWeekContainsDate)??1,l=s.weekStartsOn??((v=(S=s.locale)==null?void 0:S.options)==null?void 0:v.weekStartsOn)??0,d=B(e);if(!Or(d))throw new RangeError("Invalid time value");let w=t.match(Ss).map(N=>{const M=N[0];if(M==="p"||M==="P"){const R=vs[M];return R(N,a.formatLong)}return N}).join("").match(Fs).map(N=>{if(N==="''")return{isToken:!1,value:"'"};const M=N[0];if(M==="'")return{isToken:!1,value:Ps(N)};if(gt[M])return{isToken:!0,value:N};if(M.match(_s))throw new RangeError("Format string contains an unescaped latin alphabet character `"+M+"`");return{isToken:!1,value:N}});a.localize.preprocessor&&(w=a.localize.preprocessor(d,w));const k={firstWeekContainsDate:i,weekStartsOn:l,locale:a};return w.map(N=>{if(!N.isToken)return N.value;const M=N.value;(js(M)||Ds(M))&&Ms(M,t,String(e));const R=gt[M[0]];return R(d,M,a.localize,k)}).join("")}function Ps(e){const t=e.match(Ts);return t?t[1].replace(Os,"'"):e}function Vs(e){return B(e).getDay()}function Es(e,t){return Ct(e,-1)}const Cs=({onClick:e,icon:t=ur,label:r="Add"})=>c.jsx("button",{onClick:e,className:"fixed bottom-6 right-6 z-30 w-14 h-14 bg-accent hover:bg-accent-hover text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-200 flex items-center justify-center active:scale-95","aria-label":r,children:c.jsx(t,{size:24})}),As=({date:e,trades:t,onClose:r,onAddTrade:s})=>{const{showToast:a}=Pt(),i=or(),l=Xe(k=>k.settings.currency),d=t.reduce((k,_)=>k+_.amount,0),w=async k=>{if(confirm("Delete this trade?"))try{await i.mutateAsync(k),a("Trade deleted","success")}catch{a("Failed to delete trade","error")}};return c.jsx($e,{isOpen:!0,onClose:r,title:c.jsxs("div",{children:[c.jsx("div",{className:"text-xl font-bold",children:he(new Date(e),"EEEE, MMMM d, yyyy")}),c.jsx("div",{className:`text-2xl font-bold mt-1 ${d>=0?"text-profit":"text-loss"}`,children:Qe(d,l)}),c.jsxs("div",{className:"text-sm text-text-secondary mt-1",children:[t.length," trade",t.length!==1?"s":""]})]}),children:c.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:t.length===0?c.jsxs("div",{className:"text-center py-8",children:[c.jsx("p",{className:"text-text-secondary mb-4",children:"No trades on this day"}),c.jsx(ve,{onClick:s,children:"Add Trade"})]}):c.jsxs(c.Fragment,{children:[t.map(k=>c.jsx(Ws,{trade:k,currency:l,onDelete:w},k.tradeId)),c.jsx(ve,{onClick:s,variant:"secondary",className:"w-full",children:"+ Add Another Trade"})]})})})},Ws=({trade:e,currency:t,onDelete:r})=>{const[s,a]=z.useState(!1);return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"card border-l-4",style:{borderLeftColor:e.tagColor},children:[c.jsxs("div",{className:"flex items-start justify-between mb-2",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:`text-2xl font-bold mb-1 ${e.amount>=0?"text-profit":"text-loss"}`,children:Qe(e.amount,t)}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xl",children:e.tagEmoji}),c.jsx("span",{className:"text-sm font-medium",style:{color:e.tagColor},children:e.tagName})]})]}),c.jsx("div",{className:"text-sm text-text-tertiary",children:e.time})]}),e.driveImageId&&c.jsxs("button",{onClick:()=>a(!0),className:"w-full h-32 rounded-lg overflow-hidden bg-surface-hover mb-2 relative group",children:[c.jsx("img",{src:dt.getImageUrl(e.driveImageId),alt:"Trade screenshot",className:"w-full h-full object-cover"}),c.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:c.jsx(Mr,{size:32,className:"text-white"})})]}),e.notes&&c.jsx("p",{className:"text-sm text-text-secondary mb-3 p-2 bg-surface rounded",children:e.notes}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs(ve,{variant:"ghost",size:"sm",className:"flex-1 text-text-secondary hover:text-accent",children:[c.jsx(dr,{size:16,className:"mr-1"}),"Edit"]}),c.jsxs(ve,{variant:"ghost",size:"sm",onClick:()=>r(e.tradeId),className:"flex-1 text-text-secondary hover:text-loss",children:[c.jsx(fr,{size:16,className:"mr-1"}),"Delete"]})]})]}),s&&c.jsx($e,{isOpen:!0,onClose:()=>a(!1),size:"lg",children:c.jsx("img",{src:dt.getImageUrl(e.driveImageId),alt:"Trade screenshot",className:"w-full h-auto rounded-lg"})})]})};var Te=e=>e.type==="checkbox",me=e=>e instanceof Date,G=e=>e==null;const Lt=e=>typeof e=="object";var I=e=>!G(e)&&!Array.isArray(e)&&Lt(e)&&!me(e),Is=e=>I(e)&&e.target?Te(e.target)?e.target.checked:e.target.value:e,Ls=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Ys=(e,t)=>e.has(Ls(t)),Rs=e=>{const t=e.constructor&&e.constructor.prototype;return I(t)&&t.hasOwnProperty("isPrototypeOf")},ze=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Y(e){if(e instanceof Date)return new Date(e);const t=typeof FileList<"u"&&e instanceof FileList;if(ze&&(e instanceof Blob||t))return e;const r=Array.isArray(e);if(!r&&!(I(e)&&Rs(e)))return e;const s=r?[]:Object.create(Object.getPrototypeOf(e));for(const a in e)Object.prototype.hasOwnProperty.call(e,a)&&(s[a]=Y(e[a]));return s}var Ae=e=>/^\w*$/.test(e),A=e=>e===void 0,Ge=e=>Array.isArray(e)?e.filter(Boolean):[],Je=e=>Ge(e.replace(/["|']|\]/g,"").split(/\.|\[/)),y=(e,t,r)=>{if(!t||!I(e))return r;const s=(Ae(t)?[t]:Je(t)).reduce((a,i)=>G(a)?a:a[i],e);return A(s)||s===e?A(e[t])?r:e[t]:s},se=e=>typeof e=="boolean",Z=e=>typeof e=="function",E=(e,t,r)=>{let s=-1;const a=Ae(t)?[t]:Je(t),i=a.length,l=i-1;for(;++s<i;){const d=a[s];let w=r;if(s!==l){const k=e[d];w=I(k)||Array.isArray(k)?k:isNaN(+a[s+1])?{}:[]}if(d==="__proto__"||d==="constructor"||d==="prototype")return;e[d]=w,e=e[d]}};const wt={BLUR:"blur",FOCUS_OUT:"focusout"},ee={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ae={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},qs=z.createContext(null);qs.displayName="HookFormContext";var Us=(e,t,r,s=!0)=>{const a={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(a,i,{get:()=>{const l=i;return t._proxyFormState[l]!==ee.all&&(t._proxyFormState[l]=!s||ee.all),e[l]}});return a};const Bs=typeof window<"u"?z.useLayoutEffect:z.useEffect;var J=e=>typeof e=="string",Hs=(e,t,r,s,a)=>J(e)?(s&&t.watch.add(e),y(r,e,a)):Array.isArray(e)?e.map(i=>(s&&t.watch.add(i),y(r,i))):(s&&(t.watchAll=!0),r),Be=e=>G(e)||!Lt(e);function ue(e,t,r=new WeakSet){if(Be(e)||Be(t))return Object.is(e,t);if(me(e)&&me(t))return e.getTime()===t.getTime();const s=Object.keys(e),a=Object.keys(t);if(s.length!==a.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const i of s){const l=e[i];if(!a.includes(i))return!1;if(i!=="ref"){const d=t[i];if(me(l)&&me(d)||I(l)&&I(d)||Array.isArray(l)&&Array.isArray(d)?!ue(l,d,r):!Object.is(l,d))return!1}}return!0}var $s=(e,t,r,s,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[s]:a||!0}}:{},Ne=e=>Array.isArray(e)?e:[e],pt=()=>{let e=[];return{get observers(){return e},next:a=>{for(const i of e)i.next&&i.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(i=>i!==a)}}),unsubscribe:()=>{e=[]}}};function Yt(e,t){const r={};for(const s in e)if(e.hasOwnProperty(s)){const a=e[s],i=t[s];if(a&&I(a)&&i){const l=Yt(a,i);I(l)&&(r[s]=l)}else e[s]&&(r[s]=i)}return r}var X=e=>I(e)&&!Object.keys(e).length,Ke=e=>e.type==="file",Ve=e=>{if(!ze)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Rt=e=>e.type==="select-multiple",Ze=e=>e.type==="radio",Qs=e=>Ze(e)||Te(e),Ue=e=>Ve(e)&&e.isConnected;function Xs(e,t){const r=t.slice(0,-1).length;let s=0;for(;s<r;)e=A(e)?s++:e[t[s++]];return e}function zs(e){for(const t in e)if(e.hasOwnProperty(t)&&!A(e[t]))return!1;return!0}function W(e,t){const r=Array.isArray(t)?t:Ae(t)?[t]:Je(t),s=r.length===1?e:Xs(e,r),a=r.length-1,i=r[a];return s&&delete s[i],a!==0&&(I(s)&&X(s)||Array.isArray(s)&&zs(s))&&W(e,r.slice(0,-1)),e}var Gs=e=>{for(const t in e)if(Z(e[t]))return!0;return!1};function qt(e){return Array.isArray(e)||I(e)&&!Gs(e)}function He(e,t={}){for(const r in e){const s=e[r];qt(s)?(t[r]=Array.isArray(s)?[]:{},He(s,t[r])):A(s)||(t[r]=!0)}return t}function xe(e,t,r){r||(r=He(t));for(const s in e){const a=e[s];if(qt(a))A(t)||Be(r[s])?r[s]=He(a,Array.isArray(a)?[]:{}):xe(a,G(t)?{}:t[s],r[s]);else{const i=t[s];r[s]=!ue(a,i)}}return r}const kt={value:!1,isValid:!1},Dt={value:!0,isValid:!0};var Ut=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!A(e[0].attributes.value)?A(e[0].value)||e[0].value===""?Dt:{value:e[0].value,isValid:!0}:Dt:kt}return kt},Bt=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:s})=>A(e)?e:t?e===""?NaN:e&&+e:r&&J(e)?new Date(e):s?s(e):e;const jt={isValid:!1,value:null};var Ht=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,jt):jt;function Mt(e){const t=e.ref;return Ke(t)?t.files:Ze(t)?Ht(e.refs).value:Rt(t)?[...t.selectedOptions].map(({value:r})=>r):Te(t)?Ut(e.refs).value:Bt(A(t.value)?e.ref.value:t.value,e)}var Js=(e,t,r,s)=>{const a={};for(const i of e){const l=y(t,i);l&&E(a,i,l._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:s}},Ee=e=>e instanceof RegExp,Me=e=>A(e)?e:Ee(e)?e.source:I(e)?Ee(e.value)?e.value.source:e.value:e,Nt=e=>({isOnSubmit:!e||e===ee.onSubmit,isOnBlur:e===ee.onBlur,isOnChange:e===ee.onChange,isOnAll:e===ee.all,isOnTouch:e===ee.onTouched});const Ft="AsyncFunction";var Ks=e=>!!e&&!!e.validate&&!!(Z(e.validate)&&e.validate.constructor.name===Ft||I(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===Ft)),Zs=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),St=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(s=>e.startsWith(s)&&/^\.\w+/.test(e.slice(s.length))));const Fe=(e,t,r,s)=>{for(const a of r||Object.keys(e)){const i=y(e,a);if(i){const{_f:l,...d}=i;if(l){if(l.refs&&l.refs[0]&&t(l.refs[0],a)&&!s)return!0;if(l.ref&&t(l.ref,l.name)&&!s)return!0;if(Fe(d,t))break}else if(I(d)&&Fe(d,t))break}}};function Tt(e,t,r){const s=y(e,r);if(s||Ae(r))return{error:s,name:r};const a=r.split(".");for(;a.length;){const i=a.join("."),l=y(t,i),d=y(e,i);if(l&&!Array.isArray(l)&&r!==i)return{name:r};if(d&&d.type)return{name:i,error:d};if(d&&d.root&&d.root.type)return{name:`${i}.root`,error:d.root};a.pop()}return{name:r}}var en=(e,t,r,s)=>{r(e);const{name:a,...i}=e;return X(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(l=>t[l]===(!s||ee.all))},tn=(e,t,r)=>!e||!t||e===t||Ne(e).some(s=>s&&(r?s===t:s.startsWith(t)||t.startsWith(s))),rn=(e,t,r,s,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(t||e):(r?s.isOnBlur:a.isOnBlur)?!e:(r?s.isOnChange:a.isOnChange)?e:!0,sn=(e,t)=>!Ge(y(e,t)).length&&W(e,t),nn=(e,t,r)=>{const s=Ne(y(e,r));return E(s,"root",t[r]),E(e,r,s),e};function Ot(e,t,r="validate"){if(J(e)||Array.isArray(e)&&e.every(J)||se(e)&&!e)return{type:r,message:J(e)?e:"",ref:t}}var ge=e=>I(e)&&!Ee(e)?e:{value:e,message:""},_t=async(e,t,r,s,a,i)=>{const{ref:l,refs:d,required:w,maxLength:k,minLength:_,min:p,max:S,pattern:v,validate:N,name:M,valueAsNumber:R,mount:C}=e._f,j=y(r,M);if(!C||t.has(M))return{};const H=d?d[0]:l,$=D=>{a&&H.reportValidity&&(H.setCustomValidity(se(D)?"":D||""),H.reportValidity())},V={},te=Ze(l),oe=Te(l),Q=te||oe,re=(R||Ke(l))&&A(l.value)&&A(j)||Ve(l)&&l.value===""||j===""||Array.isArray(j)&&!j.length,q=$s.bind(null,M,s,V),ne=(D,g,x,F=ae.maxLength,L=ae.minLength)=>{const U=D?g:x;V[M]={type:D?F:L,message:U,ref:l,...q(D?F:L,U)}};if(i?!Array.isArray(j)||!j.length:w&&(!Q&&(re||G(j))||se(j)&&!j||oe&&!Ut(d).isValid||te&&!Ht(d).isValid)){const{value:D,message:g}=J(w)?{value:!!w,message:w}:ge(w);if(D&&(V[M]={type:ae.required,message:g,ref:H,...q(ae.required,g)},!s))return $(g),V}if(!re&&(!G(p)||!G(S))){let D,g;const x=ge(S),F=ge(p);if(!G(j)&&!isNaN(j)){const L=l.valueAsNumber||j&&+j;G(x.value)||(D=L>x.value),G(F.value)||(g=L<F.value)}else{const L=l.valueAsDate||new Date(j),U=ke=>new Date(new Date().toDateString()+" "+ke),de=l.type=="time",pe=l.type=="week";J(x.value)&&j&&(D=de?U(j)>U(x.value):pe?j>x.value:L>new Date(x.value)),J(F.value)&&j&&(g=de?U(j)<U(F.value):pe?j<F.value:L<new Date(F.value))}if((D||g)&&(ne(!!D,x.message,F.message,ae.max,ae.min),!s))return $(V[M].message),V}if((k||_)&&!re&&(J(j)||i&&Array.isArray(j))){const D=ge(k),g=ge(_),x=!G(D.value)&&j.length>+D.value,F=!G(g.value)&&j.length<+g.value;if((x||F)&&(ne(x,D.message,g.message),!s))return $(V[M].message),V}if(v&&!re&&J(j)){const{value:D,message:g}=ge(v);if(Ee(D)&&!j.match(D)&&(V[M]={type:ae.pattern,message:g,ref:l,...q(ae.pattern,g)},!s))return $(g),V}if(N){if(Z(N)){const D=await N(j,r),g=Ot(D,H);if(g&&(V[M]={...g,...q(ae.validate,g.message)},!s))return $(g.message),V}else if(I(N)){let D={};for(const g in N){if(!X(D)&&!s)break;const x=Ot(await N[g](j,r),H,g);x&&(D={...x,...q(g,x.message)},$(x.message),s&&(V[M]=D))}if(!X(D)&&(V[M]={ref:H,...D},!s))return V}}return $(!0),V};const an={mode:ee.onSubmit,reValidateMode:ee.onChange,shouldFocusError:!0};function on(e={}){let t={...an,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Z(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},s={},a=I(t.defaultValues)||I(t.values)?Y(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:Y(a),l={action:!1,mount:!1,watch:!1,keepIsValid:!1},d={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},w,k=0;const _={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},p={..._};let S={...p};const v={array:pt(),state:pt()},N=t.criteriaMode===ee.all,M=n=>o=>{clearTimeout(k),k=setTimeout(n,o)},R=async n=>{if(!l.keepIsValid&&!t.disabled&&(p.isValid||S.isValid||n)){let o;t.resolver?(o=X((await Q()).errors),C()):o=await q(s,!0),o!==r.isValid&&v.state.next({isValid:o})}},C=(n,o)=>{!t.disabled&&(p.isValidating||p.validatingFields||S.isValidating||S.validatingFields)&&((n||Array.from(d.mount)).forEach(u=>{u&&(o?E(r.validatingFields,u,o):W(r.validatingFields,u))}),v.state.next({validatingFields:r.validatingFields,isValidating:!X(r.validatingFields)}))},j=(n,o=[],u,m,h=!0,f=!0)=>{if(m&&u&&!t.disabled){if(l.action=!0,f&&Array.isArray(y(s,n))){const b=u(y(s,n),m.argA,m.argB);h&&E(s,n,b)}if(f&&Array.isArray(y(r.errors,n))){const b=u(y(r.errors,n),m.argA,m.argB);h&&E(r.errors,n,b),sn(r.errors,n)}if((p.touchedFields||S.touchedFields)&&f&&Array.isArray(y(r.touchedFields,n))){const b=u(y(r.touchedFields,n),m.argA,m.argB);h&&E(r.touchedFields,n,b)}(p.dirtyFields||S.dirtyFields)&&(r.dirtyFields=xe(a,i)),v.state.next({name:n,isDirty:D(n,o),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else E(i,n,o)},H=(n,o)=>{E(r.errors,n,o),v.state.next({errors:r.errors})},$=n=>{r.errors=n,v.state.next({errors:r.errors,isValid:!1})},V=(n,o,u,m)=>{const h=y(s,n);if(h){const f=y(i,n,A(u)?y(a,n):u);A(f)||m&&m.defaultChecked||o?E(i,n,o?f:Mt(h._f)):F(n,f),l.mount&&!l.action&&R()}},te=(n,o,u,m,h)=>{let f=!1,b=!1;const T={name:n};if(!t.disabled){if(!u||m){(p.isDirty||S.isDirty)&&(b=r.isDirty,r.isDirty=T.isDirty=D(),f=b!==T.isDirty);const P=ue(y(a,n),o);b=!!y(r.dirtyFields,n),P?W(r.dirtyFields,n):E(r.dirtyFields,n,!0),T.dirtyFields=r.dirtyFields,f=f||(p.dirtyFields||S.dirtyFields)&&b!==!P}if(u){const P=y(r.touchedFields,n);P||(E(r.touchedFields,n,u),T.touchedFields=r.touchedFields,f=f||(p.touchedFields||S.touchedFields)&&P!==u)}f&&h&&v.state.next(T)}return f?T:{}},oe=(n,o,u,m)=>{const h=y(r.errors,n),f=(p.isValid||S.isValid)&&se(o)&&r.isValid!==o;if(t.delayError&&u?(w=M(()=>H(n,u)),w(t.delayError)):(clearTimeout(k),w=null,u?E(r.errors,n,u):W(r.errors,n)),(u?!ue(h,u):h)||!X(m)||f){const b={...m,...f&&se(o)?{isValid:o}:{},errors:r.errors,name:n};r={...r,...b},v.state.next(b)}},Q=async n=>(C(n,!0),await t.resolver(i,t.context,Js(n||d.mount,s,t.criteriaMode,t.shouldUseNativeValidation))),re=async n=>{const{errors:o}=await Q(n);if(C(n),n)for(const u of n){const m=y(o,u);m?E(r.errors,u,m):W(r.errors,u)}else r.errors=o;return o},q=async(n,o,u={valid:!0})=>{for(const m in n){const h=n[m];if(h){const{_f:f,...b}=h;if(f){const T=d.array.has(f.name),P=h._f&&Ks(h._f);P&&p.validatingFields&&C([f.name],!0);const K=await _t(h,d.disabled,i,N,t.shouldUseNativeValidation&&!o,T);if(P&&p.validatingFields&&C([f.name]),K[f.name]&&(u.valid=!1,o))break;!o&&(y(K,f.name)?T?nn(r.errors,K,f.name):E(r.errors,f.name,K[f.name]):W(r.errors,f.name))}!X(b)&&await q(b,o,u)}}return u.valid},ne=()=>{for(const n of d.unMount){const o=y(s,n);o&&(o._f.refs?o._f.refs.every(u=>!Ue(u)):!Ue(o._f.ref))&&We(n)}d.unMount=new Set},D=(n,o)=>!t.disabled&&(n&&o&&E(i,n,o),!ue(et(),a)),g=(n,o,u)=>Hs(n,d,{...l.mount?i:A(o)?a:J(n)?{[n]:o}:o},u,o),x=n=>Ge(y(l.mount?i:a,n,t.shouldUnregister?y(a,n,[]):[])),F=(n,o,u={})=>{const m=y(s,n);let h=o;if(m){const f=m._f;f&&(!f.disabled&&E(i,n,Bt(o,f)),h=Ve(f.ref)&&G(o)?"":o,Rt(f.ref)?[...f.ref.options].forEach(b=>b.selected=h.includes(b.value)):f.refs?Te(f.ref)?f.refs.forEach(b=>{(!b.defaultChecked||!b.disabled)&&(Array.isArray(h)?b.checked=!!h.find(T=>T===b.value):b.checked=h===b.value||!!h)}):f.refs.forEach(b=>b.checked=b.value===h):Ke(f.ref)?f.ref.value="":(f.ref.value=h,f.ref.type||v.state.next({name:n,values:Y(i)})))}(u.shouldDirty||u.shouldTouch)&&te(n,h,u.shouldTouch,u.shouldDirty,!0),u.shouldValidate&&ke(n)},L=(n,o,u)=>{for(const m in o){if(!o.hasOwnProperty(m))return;const h=o[m],f=n+"."+m,b=y(s,f);(d.array.has(n)||I(h)||b&&!b._f)&&!me(h)?L(f,h,u):F(f,h,u)}},U=(n,o,u={})=>{const m=y(s,n),h=d.array.has(n),f=Y(o);E(i,n,f),h?(v.array.next({name:n,values:Y(i)}),(p.isDirty||p.dirtyFields||S.isDirty||S.dirtyFields)&&u.shouldDirty&&v.state.next({name:n,dirtyFields:xe(a,i),isDirty:D(n,f)})):m&&!m._f&&!G(f)?L(n,f,u):F(n,f,u),St(n,d)&&v.state.next({...r,name:n}),v.state.next({name:l.mount?n:void 0,values:Y(i)})},de=async n=>{l.mount=!0;const o=n.target;let u=o.name,m=!0;const h=y(s,u),f=P=>{m=Number.isNaN(P)||me(P)&&isNaN(P.getTime())||ue(P,y(i,u,P))},b=Nt(t.mode),T=Nt(t.reValidateMode);if(h){let P,K;const Oe=o.type?Mt(h._f):Is(n),ce=n.type===wt.BLUR||n.type===wt.FOCUS_OUT,Zt=!Zs(h._f)&&!t.resolver&&!y(r.errors,u)&&!h._f.deps||rn(ce,y(r.touchedFields,u),r.isSubmitted,T,b),Ye=St(u,d,ce);E(i,u,Oe),ce?(!o||!o.readOnly)&&(h._f.onBlur&&h._f.onBlur(n),w&&w(0)):h._f.onChange&&h._f.onChange(n);const Re=te(u,Oe,ce),er=!X(Re)||Ye;if(!ce&&v.state.next({name:u,type:n.type,values:Y(i)}),Zt)return(p.isValid||S.isValid)&&(t.mode==="onBlur"?ce&&R():ce||R()),er&&v.state.next({name:u,...Ye?{}:Re});if(!ce&&Ye&&v.state.next({...r}),t.resolver){const{errors:lt}=await Q([u]);if(C([u]),f(Oe),m){const tr=Tt(r.errors,s,u),ut=Tt(lt,s,tr.name||u);P=ut.error,u=ut.name,K=X(lt)}}else C([u],!0),P=(await _t(h,d.disabled,i,N,t.shouldUseNativeValidation))[u],C([u]),f(Oe),m&&(P?K=!1:(p.isValid||S.isValid)&&(K=await q(s,!0)));m&&(h._f.deps&&(!Array.isArray(h._f.deps)||h._f.deps.length>0)&&ke(h._f.deps),oe(u,K,P,Re))}},pe=(n,o)=>{if(y(r.errors,o)&&n.focus)return n.focus(),1},ke=async(n,o={})=>{let u,m;const h=Ne(n);if(t.resolver){const f=await re(A(n)?n:h);u=X(f),m=n?!h.some(b=>y(f,b)):u}else n?(m=(await Promise.all(h.map(async f=>{const b=y(s,f);return await q(b&&b._f?{[f]:b}:b)}))).every(Boolean),!(!m&&!r.isValid)&&R()):m=u=await q(s);return v.state.next({...!J(n)||(p.isValid||S.isValid)&&u!==r.isValid?{}:{name:n},...t.resolver||!n?{isValid:u}:{},errors:r.errors}),o.shouldFocus&&!m&&Fe(s,pe,n?h:d.mount),m},et=(n,o)=>{let u={...l.mount?i:a};return o&&(u=Yt(o.dirtyFields?r.dirtyFields:r.touchedFields,u)),A(n)?u:J(n)?y(u,n):n.map(m=>y(u,m))},tt=(n,o)=>({invalid:!!y((o||r).errors,n),isDirty:!!y((o||r).dirtyFields,n),error:y((o||r).errors,n),isValidating:!!y(r.validatingFields,n),isTouched:!!y((o||r).touchedFields,n)}),$t=n=>{n&&Ne(n).forEach(o=>W(r.errors,o)),v.state.next({errors:n?r.errors:{}})},rt=(n,o,u)=>{const m=(y(s,n,{_f:{}})._f||{}).ref,h=y(r.errors,n)||{},{ref:f,message:b,type:T,...P}=h;E(r.errors,n,{...P,...o,ref:m}),v.state.next({name:n,errors:r.errors,isValid:!1}),u&&u.shouldFocus&&m&&m.focus&&m.focus()},Qt=(n,o)=>Z(n)?v.state.subscribe({next:u=>"values"in u&&n(g(void 0,o),u)}):g(n,o,!0),st=n=>v.state.subscribe({next:o=>{tn(n.name,o.name,n.exact)&&en(o,n.formState||p,Kt,n.reRenderRoot)&&n.callback({values:{...i},...r,...o,defaultValues:a})}}).unsubscribe,Xt=n=>(l.mount=!0,S={...S,...n.formState},st({...n,formState:{..._,...n.formState}})),We=(n,o={})=>{for(const u of n?Ne(n):d.mount)d.mount.delete(u),d.array.delete(u),o.keepValue||(W(s,u),W(i,u)),!o.keepError&&W(r.errors,u),!o.keepDirty&&W(r.dirtyFields,u),!o.keepTouched&&W(r.touchedFields,u),!o.keepIsValidating&&W(r.validatingFields,u),!t.shouldUnregister&&!o.keepDefaultValue&&W(a,u);v.state.next({values:Y(i)}),v.state.next({...r,...o.keepDirty?{isDirty:D()}:{}}),!o.keepIsValid&&R()},nt=({disabled:n,name:o})=>{(se(n)&&l.mount||n||d.disabled.has(o))&&(n?d.disabled.add(o):d.disabled.delete(o))},Ie=(n,o={})=>{let u=y(s,n);const m=se(o.disabled)||se(t.disabled);return E(s,n,{...u||{},_f:{...u&&u._f?u._f:{ref:{name:n}},name:n,mount:!0,...o}}),d.mount.add(n),u?nt({disabled:se(o.disabled)?o.disabled:t.disabled,name:n}):V(n,!0,o.value),{...m?{disabled:o.disabled||t.disabled}:{},...t.progressive?{required:!!o.required,min:Me(o.min),max:Me(o.max),minLength:Me(o.minLength),maxLength:Me(o.maxLength),pattern:Me(o.pattern)}:{},name:n,onChange:de,onBlur:de,ref:h=>{if(h){Ie(n,o),u=y(s,n);const f=A(h.value)&&h.querySelectorAll&&h.querySelectorAll("input,select,textarea")[0]||h,b=Qs(f),T=u._f.refs||[];if(b?T.find(P=>P===f):f===u._f.ref)return;E(s,n,{_f:{...u._f,...b?{refs:[...T.filter(Ue),f,...Array.isArray(y(a,n))?[{}]:[]],ref:{type:f.type,name:n}}:{ref:f}}}),V(n,!1,void 0,f)}else u=y(s,n,{}),u._f&&(u._f.mount=!1),(t.shouldUnregister||o.shouldUnregister)&&!(Ys(d.array,n)&&l.action)&&d.unMount.add(n)}}},Le=()=>t.shouldFocusError&&Fe(s,pe,d.mount),zt=n=>{se(n)&&(v.state.next({disabled:n}),Fe(s,(o,u)=>{const m=y(s,u);m&&(o.disabled=m._f.disabled||n,Array.isArray(m._f.refs)&&m._f.refs.forEach(h=>{h.disabled=m._f.disabled||n}))},0,!1))},at=(n,o)=>async u=>{let m;u&&(u.preventDefault&&u.preventDefault(),u.persist&&u.persist());let h=Y(i);if(v.state.next({isSubmitting:!0}),t.resolver){const{errors:f,values:b}=await Q();C(),r.errors=f,h=Y(b)}else await q(s);if(d.disabled.size)for(const f of d.disabled)W(h,f);if(W(r.errors,"root"),X(r.errors)){v.state.next({errors:{}});try{await n(h,u)}catch(f){m=f}}else o&&await o({...r.errors},u),Le(),setTimeout(Le);if(v.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:X(r.errors)&&!m,submitCount:r.submitCount+1,errors:r.errors}),m)throw m},Gt=(n,o={})=>{y(s,n)&&(A(o.defaultValue)?U(n,Y(y(a,n))):(U(n,o.defaultValue),E(a,n,Y(o.defaultValue))),o.keepTouched||W(r.touchedFields,n),o.keepDirty||(W(r.dirtyFields,n),r.isDirty=o.defaultValue?D(n,Y(y(a,n))):D()),o.keepError||(W(r.errors,n),p.isValid&&R()),v.state.next({...r}))},it=(n,o={})=>{const u=n?Y(n):a,m=Y(u),h=X(n),f=h?a:m;if(o.keepDefaultValues||(a=u),!o.keepValues){if(o.keepDirtyValues){const b=new Set([...d.mount,...Object.keys(xe(a,i))]);for(const T of Array.from(b))y(r.dirtyFields,T)?E(f,T,y(i,T)):U(T,y(f,T))}else{if(ze&&A(n))for(const b of d.mount){const T=y(s,b);if(T&&T._f){const P=Array.isArray(T._f.refs)?T._f.refs[0]:T._f.ref;if(Ve(P)){const K=P.closest("form");if(K){K.reset();break}}}}if(o.keepFieldsRef)for(const b of d.mount)U(b,y(f,b));else s={}}i=t.shouldUnregister?o.keepDefaultValues?Y(a):{}:Y(f),v.array.next({values:{...f}}),v.state.next({values:{...f}})}d={mount:o.keepDirtyValues?d.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!p.isValid||!!o.keepIsValid||!!o.keepDirtyValues||!t.shouldUnregister&&!X(f),l.watch=!!t.shouldUnregister,l.keepIsValid=!!o.keepIsValid,l.action=!1,o.keepErrors||(r.errors={}),v.state.next({submitCount:o.keepSubmitCount?r.submitCount:0,isDirty:h?!1:o.keepDirty?r.isDirty:!!(o.keepDefaultValues&&!ue(n,a)),isSubmitted:o.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:h?{}:o.keepDirtyValues?o.keepDefaultValues&&i?xe(a,i):r.dirtyFields:o.keepDefaultValues&&n?xe(a,n):o.keepDirty?r.dirtyFields:{},touchedFields:o.keepTouched?r.touchedFields:{},errors:o.keepErrors?r.errors:{},isSubmitSuccessful:o.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:a})},ot=(n,o)=>it(Z(n)?n(i):n,{...t.resetOptions,...o}),Jt=(n,o={})=>{const u=y(s,n),m=u&&u._f;if(m){const h=m.refs?m.refs[0]:m.ref;h.focus&&setTimeout(()=>{h.focus(),o.shouldSelect&&Z(h.select)&&h.select()})}},Kt=n=>{r={...r,...n}},ct={control:{register:Ie,unregister:We,getFieldState:tt,handleSubmit:at,setError:rt,_subscribe:st,_runSchema:Q,_updateIsValidating:C,_focusError:Le,_getWatch:g,_getDirty:D,_setValid:R,_setFieldArray:j,_setDisabledField:nt,_setErrors:$,_getFieldArray:x,_reset:it,_resetDefaultValues:()=>Z(t.defaultValues)&&t.defaultValues().then(n=>{ot(n,t.resetOptions),v.state.next({isLoading:!1})}),_removeUnmounted:ne,_disableForm:zt,_subjects:v,_proxyFormState:p,get _fields(){return s},get _formValues(){return i},get _state(){return l},set _state(n){l=n},get _defaultValues(){return a},get _names(){return d},set _names(n){d=n},get _formState(){return r},get _options(){return t},set _options(n){t={...t,...n}}},subscribe:Xt,trigger:ke,register:Ie,handleSubmit:at,watch:Qt,setValue:U,getValues:et,reset:ot,resetField:Gt,clearErrors:$t,unregister:We,setError:rt,setFocus:Jt,getFieldState:tt};return{...ct,formControl:ct}}function cn(e={}){const t=z.useRef(void 0),r=z.useRef(void 0),[s,a]=z.useState({isDirty:!1,isValidating:!1,isLoading:Z(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Z(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:s},e.defaultValues&&!Z(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:l,...d}=on(e);t.current={...d,formState:s}}const i=t.current.control;return i._options=e,Bs(()=>{const l=i._subscribe({formState:i._proxyFormState,callback:()=>a({...i._formState}),reRenderRoot:!0});return a(d=>({...d,isReady:!0})),i._formState.isReady=!0,l},[i]),z.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),z.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),z.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),z.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),z.useEffect(()=>{if(i._proxyFormState.isDirty){const l=i._getDirty();l!==s.isDirty&&i._subjects.state.next({isDirty:l})}},[i,s.isDirty]),z.useEffect(()=>{var l;e.values&&!ue(e.values,r.current)?(i._reset(e.values,{keepFieldsRef:!0,...i._options.resetOptions}),!((l=i._options.resetOptions)===null||l===void 0)&&l.keepIsValid||i._setValid(),r.current=e.values,a(d=>({...d}))):i._resetDefaultValues()},[i,e.values]),z.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=Us(s,i),t.current}const ln=({defaultDate:e=null,trade:t=null,tags:r=[],onClose:s})=>{var g;const{showToast:a}=Pt(),i=cr(),l=Xe(x=>x.settings.currency),d=!!t,w=new Date,k=e||w.toISOString().split("T")[0],_=w.toTimeString().slice(0,5),{register:p,handleSubmit:S,watch:v,setValue:N,formState:{errors:M}}=cn({defaultValues:{date:(t==null?void 0:t.date)||k,time:(t==null?void 0:t.time)||_,amount:(t==null?void 0:t.amount)||"",tagId:(t==null?void 0:t.tagId)||((g=r[0])==null?void 0:g.tagId)||"",notes:(t==null?void 0:t.notes)||""}}),[R,C]=be.useState(null),[j,H]=be.useState(t!=null&&t.driveImageId?`drive://${t.driveImageId}`:null),[$,V]=be.useState(!1),te=v("amount"),oe=v("tagId"),Q=r.find(x=>x.tagId===oe),re=x=>{N("amount",x)},q=x=>{var L;const F=(L=x.target.files)==null?void 0:L[0];if(F){if(!F.type.startsWith("image/")){a("Please select an image file","error");return}if(F.size>10*1024*1024){a("Image too large (max 10MB)","error");return}C(F),H(URL.createObjectURL(F))}},ne=()=>{C(null),H(null)},D=async x=>{if(!x.amount||x.amount===0){a("Please enter an amount","error");return}if(!x.tagId){a("Please select a tag","error");return}try{V(!0);const F=r.find(U=>U.tagId===x.tagId),L={tradeId:(t==null?void 0:t.tradeId)||yr(),date:x.date,time:x.time,amount:parseFloat(x.amount),tagId:x.tagId,tagName:F.name,tagColor:F.color,tagEmoji:F.emoji,screenshot:R,notes:x.notes};await i.mutateAsync(L),a(d?"Trade updated":"Trade added","success"),s()}catch(F){console.error("Failed to save trade:",F),a("Failed to save trade","error")}finally{V(!1)}};return c.jsx($e,{isOpen:!0,onClose:s,title:d?"Edit Trade":"Add Trade",children:c.jsxs("form",{onSubmit:S(D),className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Date"}),c.jsx("input",{type:"date",...p("date",{required:!0}),className:"input"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Time"}),c.jsx("input",{type:"time",...p("time",{required:!0}),className:"input"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Amount"}),c.jsxs("div",{className:"relative",children:[c.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-2xl font-bold text-text-tertiary",children:l}),c.jsx("input",{type:"number",step:"0.01",...p("amount",{required:!0,valueAsNumber:!0}),className:`
                input pl-12 text-3xl font-bold text-center
                ${te>0?"text-profit":te<0?"text-loss":""}
              `,placeholder:"0.00"})]}),c.jsx("div",{className:"flex gap-2 mt-2",children:rr.map(x=>c.jsxs("button",{type:"button",onClick:()=>re(x),className:`
                  flex-1 py-2 px-3 rounded-md text-sm font-medium
                  transition-colors
                  ${x>0?"bg-profit/10 text-profit hover:bg-profit/20":"bg-loss/10 text-loss hover:bg-loss/20"}
                `,children:[x>0?"+":"",x]},x))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Strategy Tag"}),c.jsx("select",{...p("tagId",{required:!0}),className:"input",children:r.map(x=>c.jsxs("option",{value:x.tagId,children:[x.emoji," ",x.name]},x.tagId))}),Q&&c.jsxs("div",{className:"mt-2 p-2 rounded-md text-sm",style:{backgroundColor:`${Q.color}20`,color:Q.color},children:[c.jsx("span",{className:"text-xl mr-2",children:Q.emoji}),Q.name]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Screenshot (optional)"}),j?c.jsxs("div",{className:"relative",children:[c.jsx("img",{src:j,alt:"Screenshot preview",className:"w-full h-48 object-cover rounded-lg"}),c.jsx("button",{type:"button",onClick:ne,className:"absolute top-2 right-2 p-2 bg-black/50 rounded-full hover:bg-black/70 transition-colors",children:c.jsx(sr,{size:20,className:"text-white"})})]}):c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsxs("label",{className:"cursor-pointer",children:[c.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:q,className:"hidden"}),c.jsxs("div",{className:"card border-2 border-dashed border-border hover:border-accent transition-colors text-center py-8",children:[c.jsx(wr,{size:32,className:"mx-auto mb-2 text-text-secondary"}),c.jsx("div",{className:"text-sm text-text-secondary",children:"Take Photo"})]})]}),c.jsxs("label",{className:"cursor-pointer",children:[c.jsx("input",{type:"file",accept:"image/*",onChange:q,className:"hidden"}),c.jsxs("div",{className:"card border-2 border-dashed border-border hover:border-accent transition-colors text-center py-8",children:[c.jsx(jr,{size:32,className:"mx-auto mb-2 text-text-secondary"}),c.jsx("div",{className:"text-sm text-text-secondary",children:"Upload"})]})]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Notes (optional)"}),c.jsx("textarea",{...p("notes"),rows:3,className:"input resize-none",placeholder:"What happened? What did you learn?"})]}),c.jsxs("div",{className:"flex gap-3 pt-2",children:[c.jsx(ve,{type:"button",variant:"secondary",onClick:s,className:"flex-1",disabled:$,children:"Cancel"}),c.jsx(ve,{type:"submit",className:"flex-1",loading:$,children:d?"Update Trade":"Save Trade"})]})]})})},wn=()=>{const{year:e,month:t}=nr(),r=ar(),s=new Date,a=e?parseInt(e):s.getFullYear(),i=t?parseInt(t):s.getMonth(),l=new Date(a,i),[d,w]=be.useState(null),[k,_]=be.useState(!1),[p,S]=be.useState("calendar"),v=Xe(g=>g.settings.currency),{data:N=[],isLoading:M}=lr(a,i),{data:R=[]}=hr(),C=gr(N),j=xr(N),H=br(N),$=Vr(l),V=_r(l),te=Pr({start:$,end:V}),oe=Vs($),Q=Array(oe).fill(null),re=()=>{const g=Es(l);r(`/month/${g.getFullYear()}/${g.getMonth()}`)},q=()=>{const g=Ct(l,1);r(`/month/${g.getFullYear()}/${g.getMonth()}`)},ne=g=>{mt(g)||w(he(g,"yyyy-MM-dd"))},D=()=>{_(!0)};return M?c.jsxs(c.Fragment,{children:[c.jsx(ft,{title:"Loading..."}),c.jsx("div",{className:"p-4",children:c.jsx(ir,{type:"spinner"})})]}):c.jsxs(c.Fragment,{children:[c.jsx(ft,{title:he(l,"MMMM yyyy"),showBack:!0,actions:c.jsx("button",{onClick:()=>S(p==="calendar"?"list":"calendar"),className:"p-2 hover:bg-surface rounded-lg transition-colors",title:p==="calendar"?"List view":"Calendar view",children:c.jsx(Dr,{size:20,className:"text-text-secondary"})})}),c.jsxs("div",{className:"p-4 max-w-7xl mx-auto space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("button",{onClick:re,className:"p-2 hover:bg-surface rounded-lg transition-colors",children:c.jsx(pr,{size:24,className:"text-text-secondary"})}),c.jsx("h2",{className:"text-xl font-semibold",children:he(l,"MMMM yyyy")}),c.jsx("button",{onClick:q,className:"p-2 hover:bg-surface rounded-lg transition-colors",children:c.jsx(kr,{size:24,className:"text-text-secondary"})})]}),c.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[c.jsx(_e,{label:"P&L",value:Et(C.totalPL,v),color:C.totalPL>=0?"profit":"loss"}),c.jsx(_e,{label:"Trades",value:C.tradeCount}),c.jsx(_e,{label:"Win Rate",value:`${C.winRate}%`,color:C.winRate>=50?"profit":"loss"}),c.jsx(_e,{label:"W/L",value:`${C.winCount}/${C.lossCount}`})]}),p==="calendar"?c.jsxs("div",{className:"card",children:[c.jsx("div",{className:"grid grid-cols-7 gap-2 mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(g=>c.jsx("div",{className:"text-center text-sm font-medium text-text-secondary py-2",children:g},g))}),c.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[Q.map((g,x)=>c.jsx("div",{className:"aspect-square"},`empty-${x}`)),te.map(g=>{const x=he(g,"yyyy-MM-dd"),F=j[x]||0,L=H[x]||[],U=mt(g),de=vr(g,new Date);return c.jsx(un,{date:g,pl:F,tradeCount:L.length,isWeekend:U,isToday:de,currency:v,onClick:()=>ne(g)},x)})]})]}):c.jsx(dn,{trades:N,groupedTrades:H,currency:v,onDayClick:ne})]}),c.jsx(Cs,{onClick:D}),d&&c.jsx(As,{date:d,trades:H[d]||[],onClose:()=>w(null),onAddTrade:D}),k&&c.jsx(ln,{defaultDate:d,tags:R,onClose:()=>_(!1)})]})},_e=({label:e,value:t,color:r="default"})=>{const s={profit:"text-profit",loss:"text-loss",default:"text-text-primary"};return c.jsxs("div",{className:"card text-center",children:[c.jsx("div",{className:"text-text-tertiary text-xs mb-1",children:e}),c.jsx("div",{className:`text-lg font-bold ${s[r]}`,children:t})]})},un=({date:e,pl:t,tradeCount:r,isWeekend:s,isToday:a,currency:i,onClick:l})=>{const d=he(e,"d");if(s)return c.jsxs("div",{className:"aspect-square bg-surface/50 rounded-lg p-2 flex flex-col items-center justify-center opacity-50",children:[c.jsx("div",{className:"text-sm text-text-tertiary",children:d}),c.jsx("div",{className:"text-xs text-text-tertiary",children:""})]});const w=t>0?"bg-profit/10":t<0?"bg-loss/10":"bg-surface",k=a?"ring-2 ring-accent":"border border-border";return c.jsxs("button",{onClick:l,className:`
        aspect-square ${w} ${k} rounded-lg p-2
        hover:bg-surface-hover transition-all
        flex flex-col items-center justify-between
        relative
      `,children:[c.jsx("div",{className:"text-sm text-text-secondary",children:d}),r>0&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:`text-sm font-semibold ${t>=0?"text-profit":"text-loss"}`,children:Et(t,i)}),r>1&&c.jsx("div",{className:"absolute bottom-1 right-1 w-5 h-5 rounded-full bg-accent text-white text-xs flex items-center justify-center",children:r})]})]})},dn=({trades:e,groupedTrades:t,currency:r,onDayClick:s})=>{const a=Object.keys(t).sort().reverse();return a.length===0?c.jsx("div",{className:"card text-center py-12",children:c.jsx("p",{className:"text-text-secondary",children:"No trades this month"})}):c.jsx("div",{className:"space-y-2",children:a.map(i=>{const l=t[i],d=l.reduce((w,k)=>w+k.amount,0);return c.jsx("button",{onClick:()=>s(i),className:"card w-full text-left hover:bg-surface-hover transition-colors",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("div",{className:"font-medium",children:he(new Date(i),"EEEE, MMMM d")}),c.jsxs("div",{className:"text-sm text-text-tertiary",children:[l.length," trade",l.length!==1?"s":""]})]}),c.jsx("div",{className:`text-xl font-bold ${d>=0?"text-profit":"text-loss"}`,children:Qe(d,r)})]})},i)})})};export{wn as default};
