var dt=g=>{throw TypeError(g)};var et=(g,d,b)=>d.has(g)||dt("Cannot "+b);var G=(g,d,b)=>(et(g,d,"read from private field"),b?b.call(g):d.get(g)),xe=(g,d,b)=>d.has(g)?dt("Cannot add the same private member more than once"):d instanceof WeakSet?d.add(g):d.set(g,b),Oe=(g,d,b,i)=>(et(g,d,"write to private field"),i?i.call(g,b):d.set(g,b),b),Ne=(g,d,b)=>(et(g,d,"access private method"),b);import{a as mt}from"./useTags-BNuWpbWI.js";import{S as Nt,s as kt,h as ht,f as Pt,n as vt,i as Ge,r as Qe,k as Lt,l as Ht,e as rt,m as Pe,o as ot}from"./index-DvESeNnY.js";var ye,Te,fe,we,Ae,Be,it,pt,Qt=(pt=class extends Nt{constructor(d,b){super();xe(this,Ae);xe(this,ye);xe(this,Te);xe(this,fe);xe(this,we);Oe(this,ye,d),this.setOptions(b),this.bindMethods(),Ne(this,Ae,Be).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(d){var i;const b=this.options;this.options=G(this,ye).defaultMutationOptions(d),kt(this.options,b)||G(this,ye).getMutationCache().notify({type:"observerOptionsUpdated",mutation:G(this,fe),observer:this}),b!=null&&b.mutationKey&&this.options.mutationKey&&ht(b.mutationKey)!==ht(this.options.mutationKey)?this.reset():((i=G(this,fe))==null?void 0:i.state.status)==="pending"&&G(this,fe).setOptions(this.options)}onUnsubscribe(){var d;this.hasListeners()||(d=G(this,fe))==null||d.removeObserver(this)}onMutationUpdate(d){Ne(this,Ae,Be).call(this),Ne(this,Ae,it).call(this,d)}getCurrentResult(){return G(this,Te)}reset(){var d;(d=G(this,fe))==null||d.removeObserver(this),Oe(this,fe,void 0),Ne(this,Ae,Be).call(this),Ne(this,Ae,it).call(this)}mutate(d,b){var i;return Oe(this,we,b),(i=G(this,fe))==null||i.removeObserver(this),Oe(this,fe,G(this,ye).getMutationCache().build(G(this,ye),this.options)),G(this,fe).addObserver(this),G(this,fe).execute(d)}},ye=new WeakMap,Te=new WeakMap,fe=new WeakMap,we=new WeakMap,Ae=new WeakSet,Be=function(){var b;const d=((b=G(this,fe))==null?void 0:b.state)??Pt();Oe(this,Te,{...d,isPending:d.status==="pending",isSuccess:d.status==="success",isError:d.status==="error",isIdle:d.status==="idle",mutate:this.mutate,reset:this.reset})},it=function(d){vt.batch(()=>{var b,i,e,t,a,o,p,y;if(G(this,we)&&this.hasListeners()){const r=G(this,Te).variables,s=G(this,Te).context,n={client:G(this,ye),meta:this.options.meta,mutationKey:this.options.mutationKey};if((d==null?void 0:d.type)==="success"){try{(i=(b=G(this,we)).onSuccess)==null||i.call(b,d.data,r,s,n)}catch(l){Promise.reject(l)}try{(t=(e=G(this,we)).onSettled)==null||t.call(e,d.data,null,r,s,n)}catch(l){Promise.reject(l)}}else if((d==null?void 0:d.type)==="error"){try{(o=(a=G(this,we)).onError)==null||o.call(a,d.error,r,s,n)}catch(l){Promise.reject(l)}try{(y=(p=G(this,we)).onSettled)==null||y.call(p,void 0,d.error,r,s,n)}catch(l){Promise.reject(l)}}}this.listeners.forEach(r=>{r(G(this,Te))})})},pt);function at(g,d){const b=Ge(),[i]=Qe.useState(()=>new Qt(b,g));Qe.useEffect(()=>{i.setOptions(g)},[i,g]);const e=Qe.useSyncExternalStore(Qe.useCallback(a=>i.subscribe(vt.batchCalls(a)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),t=Qe.useCallback((a,o)=>{i.mutate(a,o).catch(Lt)},[i]);if(e.error&&Ht(i.options.throwOnError,[e.error]))throw e.error;return{...e,mutate:t,mutateAsync:e.mutate}}const An=6048e5,Un=864e5,bt=6e4,yt=36e5;function zt(g,d){const i=qt(g);let e;if(i.date){const p=Kt(i.date,2);e=jt(p.restDateString,p.year)}if(!e||isNaN(e.getTime()))return new Date(NaN);const t=e.getTime();let a=0,o;if(i.time&&(a=Yt(i.time),isNaN(a)))return new Date(NaN);if(i.timezone){if(o=Zt(i.timezone),isNaN(o))return new Date(NaN)}else{const p=new Date(t+a),y=new Date(0);return y.setFullYear(p.getUTCFullYear(),p.getUTCMonth(),p.getUTCDate()),y.setHours(p.getUTCHours(),p.getUTCMinutes(),p.getUTCSeconds(),p.getUTCMilliseconds()),y}return new Date(t+a+o)}const We={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},$t=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Wt=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Bt=/^([+-])(\d{2})(?::?(\d{2}))?$/;function qt(g){const d={},b=g.split(We.dateTimeDelimiter);let i;if(b.length>2)return d;if(/:/.test(b[0])?i=b[0]:(d.date=b[0],i=b[1],We.timeZoneDelimiter.test(d.date)&&(d.date=g.split(We.timeZoneDelimiter)[0],i=g.substr(d.date.length,g.length))),i){const e=We.timezone.exec(i);e?(d.time=i.replace(e[1],""),d.timezone=e[1]):d.time=i}return d}function Kt(g,d){const b=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+d)+"})|(\\d{2}|[+-]\\d{"+(2+d)+"})$)"),i=g.match(b);if(!i)return{year:NaN,restDateString:""};const e=i[1]?parseInt(i[1]):null,t=i[2]?parseInt(i[2]):null;return{year:t===null?e:t*100,restDateString:g.slice((i[1]||i[2]).length)}}function jt(g,d){if(d===null)return new Date(NaN);const b=g.match($t);if(!b)return new Date(NaN);const i=!!b[4],e=ze(b[1]),t=ze(b[2])-1,a=ze(b[3]),o=ze(b[4]),p=ze(b[5])-1;if(i)return en(d,o,p)?Gt(d,o,p):new Date(NaN);{const y=new Date(0);return!Vt(d,t,a)||!Jt(d,e)?new Date(NaN):(y.setUTCFullYear(d,t,Math.max(e,a)),y)}}function ze(g){return g?parseInt(g):1}function Yt(g){const d=g.match(Wt);if(!d)return NaN;const b=tt(d[1]),i=tt(d[2]),e=tt(d[3]);return tn(b,i,e)?b*yt+i*bt+e*1e3:NaN}function tt(g){return g&&parseFloat(g.replace(",","."))||0}function Zt(g){if(g==="Z")return 0;const d=g.match(Bt);if(!d)return 0;const b=d[1]==="+"?-1:1,i=parseInt(d[2]),e=d[3]&&parseInt(d[3])||0;return nn(i,e)?b*(i*yt+e*bt):NaN}function Gt(g,d,b){const i=new Date(0);i.setUTCFullYear(g,0,4);const e=i.getUTCDay()||7,t=(d-1)*7+b+1-e;return i.setUTCDate(i.getUTCDate()+t),i}const Xt=[31,null,31,30,31,30,31,31,30,31,30,31];function wt(g){return g%400===0||g%4===0&&g%100!==0}function Vt(g,d,b){return d>=0&&d<=11&&b>=1&&b<=(Xt[d]||(wt(g)?29:28))}function Jt(g,d){return d>=1&&d<=(wt(g)?366:365)}function en(g,d,b){return d>=1&&d<=53&&b>=0&&b<=6}function tn(g,d,b){return g===24?d===0&&b===0:b>=0&&b<60&&d>=0&&d<60&&g>=0&&g<25}function nn(g,d){return d>=0&&d<=59}const In=(g,d="$")=>{const i=Math.abs(g).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2});return`${g>=0?"+":"-"}${d}${i}`},En=(g,d="$")=>{const b=Math.abs(g);let i;return b>=1e6?i=`${(b/1e6).toFixed(1)}M`:b>=1e3?i=`${(b/1e3).toFixed(1)}K`:i=b.toFixed(0),`${g>=0?"+":"-"}${d}${i}`},rn=(g,d)=>{const b=g+d;return b===0?0:Math.round(g/b*100)},sn=g=>{if(!g||g.length===0)return{totalPL:0,tradeCount:0,winCount:0,lossCount:0,winRate:0,avgWin:0,avgLoss:0};const d=g.reduce((a,o)=>a+o.amount,0),b=g.filter(a=>a.amount>0),i=g.filter(a=>a.amount<0),e=b.length>0?b.reduce((a,o)=>a+o.amount,0)/b.length:0,t=i.length>0?i.reduce((a,o)=>a+Math.abs(o.amount),0)/i.length:0;return{totalPL:d,tradeCount:g.length,winCount:b.length,lossCount:i.length,winRate:rn(b.length,i.length),avgWin:e,avgLoss:t}},Tn=(g,d)=>Array.from({length:12},(i,e)=>e).map(i=>{const e=g.filter(t=>{const a=zt(t.date);return a.getFullYear()===d&&a.getMonth()===i});return{month:i,...sn(e)}}),Cn=()=>crypto.randomUUID();function on(g,d){return d.forEach(function(b){b&&typeof b!="string"&&!Array.isArray(b)&&Object.keys(b).forEach(function(i){if(i!=="default"&&!(i in g)){var e=Object.getOwnPropertyDescriptor(b,i);Object.defineProperty(g,i,e.get?e:{enumerable:!0,get:function(){return b[i]}})}})}),Object.freeze(g)}function At(g,d){return new Promise(function(b,i){let e;return an(g).then(function(t){try{return e=t,b(new Blob([d.slice(0,2),e,d.slice(2)],{type:"image/jpeg"}))}catch(a){return i(a)}},i)})}const an=g=>new Promise((d,b)=>{const i=new FileReader;i.addEventListener("load",({target:{result:e}})=>{const t=new DataView(e);let a=0;if(t.getUint16(a)!==65496)return b("not a valid JPEG");for(a+=2;;){const o=t.getUint16(a);if(o===65498)break;const p=t.getUint16(a+2);if(o===65505&&t.getUint32(a+4)===1165519206){const y=a+10;let r;switch(t.getUint16(y)){case 18761:r=!0;break;case 19789:r=!1;break;default:return b("TIFF header contains invalid endian")}if(t.getUint16(y+2,r)!==42)return b("TIFF header contains invalid version");const s=t.getUint32(y+4,r),n=y+s+2+12*t.getUint16(y+s,r);for(let l=y+s+2;l<n;l+=12)if(t.getUint16(l,r)==274){if(t.getUint16(l+2,r)!==3)return b("Orientation data type is invalid");if(t.getUint32(l+4,r)!==1)return b("Orientation data count is invalid");t.setUint16(l+8,1,r);break}return d(e.slice(a,a+2+p))}a+=2+p}return d(new Blob)}),i.readAsArrayBuffer(g)});var Ke={},fn={get exports(){return Ke},set exports(g){Ke=g}};(function(g){var d,b,i={};fn.exports=i,i.parse=function(e,t){for(var a=i.bin.readUshort,o=i.bin.readUint,p=0,y={},r=new Uint8Array(e),s=r.length-4;o(r,s)!=101010256;)s--;p=s,p+=4;var n=a(r,p+=4);a(r,p+=2);var l=o(r,p+=2),m=o(r,p+=4);p+=4,p=m;for(var C=0;C<n;C++){o(r,p),p+=4,p+=4,p+=4,o(r,p+=4),l=o(r,p+=4);var _=o(r,p+=4),U=a(r,p+=4),P=a(r,p+2),x=a(r,p+4);p+=6;var M=o(r,p+=8);p+=4,p+=U+P+x,i._readLocal(r,M,y,l,_,t)}return y},i._readLocal=function(e,t,a,o,p,y){var r=i.bin.readUshort,s=i.bin.readUint;s(e,t),r(e,t+=4),r(e,t+=2);var n=r(e,t+=2);s(e,t+=2),s(e,t+=4),t+=4;var l=r(e,t+=8),m=r(e,t+=2);t+=2;var C=i.bin.readUTF8(e,t,l);if(t+=l,t+=m,y)a[C]={size:p,csize:o};else{var _=new Uint8Array(e.buffer,t);if(n==0)a[C]=new Uint8Array(_.buffer.slice(t,t+o));else{if(n!=8)throw"unknown compression method: "+n;var U=new Uint8Array(p);i.inflateRaw(_,U),a[C]=U}}},i.inflateRaw=function(e,t){return i.F.inflate(e,t)},i.inflate=function(e,t){return e[0],e[1],i.inflateRaw(new Uint8Array(e.buffer,e.byteOffset+2,e.length-6),t)},i.deflate=function(e,t){t==null&&(t={level:6});var a=0,o=new Uint8Array(50+Math.floor(1.1*e.length));o[a]=120,o[a+1]=156,a+=2,a=i.F.deflateRaw(e,o,a,t.level);var p=i.adler(e,0,e.length);return o[a+0]=p>>>24&255,o[a+1]=p>>>16&255,o[a+2]=p>>>8&255,o[a+3]=p>>>0&255,new Uint8Array(o.buffer,0,a+4)},i.deflateRaw=function(e,t){t==null&&(t={level:6});var a=new Uint8Array(50+Math.floor(1.1*e.length)),o=i.F.deflateRaw(e,a,o,t.level);return new Uint8Array(a.buffer,0,o)},i.encode=function(e,t){t==null&&(t=!1);var a=0,o=i.bin.writeUint,p=i.bin.writeUshort,y={};for(var r in e){var s=!i._noNeed(r)&&!t,n=e[r],l=i.crc.crc(n,0,n.length);y[r]={cpr:s,usize:n.length,crc:l,file:s?i.deflateRaw(n):n}}for(var r in y)a+=y[r].file.length+30+46+2*i.bin.sizeUTF8(r);a+=22;var m=new Uint8Array(a),C=0,_=[];for(var r in y){var U=y[r];_.push(C),C=i._writeHeader(m,C,r,U,0)}var P=0,x=C;for(var r in y)U=y[r],_.push(C),C=i._writeHeader(m,C,r,U,1,_[P++]);var M=C-x;return o(m,C,101010256),C+=4,p(m,C+=4,P),p(m,C+=2,P),o(m,C+=2,M),o(m,C+=4,x),C+=4,C+=2,m.buffer},i._noNeed=function(e){var t=e.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(t)!=-1},i._writeHeader=function(e,t,a,o,p,y){var r=i.bin.writeUint,s=i.bin.writeUshort,n=o.file;return r(e,t,p==0?67324752:33639248),t+=4,p==1&&(t+=2),s(e,t,20),s(e,t+=2,0),s(e,t+=2,o.cpr?8:0),r(e,t+=2,0),r(e,t+=4,o.crc),r(e,t+=4,n.length),r(e,t+=4,o.usize),s(e,t+=4,i.bin.sizeUTF8(a)),s(e,t+=2,0),t+=2,p==1&&(t+=2,t+=2,r(e,t+=6,y),t+=4),t+=i.bin.writeUTF8(e,t,a),p==0&&(e.set(n,t),t+=n.length),t},i.crc={table:function(){for(var e=new Uint32Array(256),t=0;t<256;t++){for(var a=t,o=0;o<8;o++)1&a?a=3988292384^a>>>1:a>>>=1;e[t]=a}return e}(),update:function(e,t,a,o){for(var p=0;p<o;p++)e=i.crc.table[255&(e^t[a+p])]^e>>>8;return e},crc:function(e,t,a){return 4294967295^i.crc.update(4294967295,e,t,a)}},i.adler=function(e,t,a){for(var o=1,p=0,y=t,r=t+a;y<r;){for(var s=Math.min(y+5552,r);y<s;)p+=o+=e[y++];o%=65521,p%=65521}return p<<16|o},i.bin={readUshort:function(e,t){return e[t]|e[t+1]<<8},writeUshort:function(e,t,a){e[t]=255&a,e[t+1]=a>>8&255},readUint:function(e,t){return 16777216*e[t+3]+(e[t+2]<<16|e[t+1]<<8|e[t])},writeUint:function(e,t,a){e[t]=255&a,e[t+1]=a>>8&255,e[t+2]=a>>16&255,e[t+3]=a>>24&255},readASCII:function(e,t,a){for(var o="",p=0;p<a;p++)o+=String.fromCharCode(e[t+p]);return o},writeASCII:function(e,t,a){for(var o=0;o<a.length;o++)e[t+o]=a.charCodeAt(o)},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,t,a){for(var o,p="",y=0;y<a;y++)p+="%"+i.bin.pad(e[t+y].toString(16));try{o=decodeURIComponent(p)}catch{return i.bin.readASCII(e,t,a)}return o},writeUTF8:function(e,t,a){for(var o=a.length,p=0,y=0;y<o;y++){var r=a.charCodeAt(y);if(!(4294967168&r))e[t+p]=r,p++;else if(!(4294965248&r))e[t+p]=192|r>>6,e[t+p+1]=128|r>>0&63,p+=2;else if(!(4294901760&r))e[t+p]=224|r>>12,e[t+p+1]=128|r>>6&63,e[t+p+2]=128|r>>0&63,p+=3;else{if(4292870144&r)throw"e";e[t+p]=240|r>>18,e[t+p+1]=128|r>>12&63,e[t+p+2]=128|r>>6&63,e[t+p+3]=128|r>>0&63,p+=4}}return p},sizeUTF8:function(e){for(var t=e.length,a=0,o=0;o<t;o++){var p=e.charCodeAt(o);if(!(4294967168&p))a++;else if(!(4294965248&p))a+=2;else if(!(4294901760&p))a+=3;else{if(4292870144&p)throw"e";a+=4}}return a}},i.F={},i.F.deflateRaw=function(e,t,a,o){var p=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][o],y=i.F.U,r=i.F._goodIndex;i.F._hash;var s=i.F._putsE,n=0,l=a<<3,m=0,C=e.length;if(o==0){for(;n<C;)s(t,l,n+(E=Math.min(65535,C-n))==C?1:0),l=i.F._copyExact(e,n,E,t,l+8),n+=E;return l>>>3}var _=y.lits,U=y.strt,P=y.prev,x=0,M=0,k=0,v=0,D=0,c=0;for(C>2&&(U[c=i.F._hash(e,0)]=0),n=0;n<C;n++){if(D=c,n+1<C-2){c=i.F._hash(e,n+1);var u=n+1&32767;P[u]=U[c],U[c]=u}if(m<=n){(x>14e3||M>26697)&&C-n>100&&(m<n&&(_[x]=n-m,x+=2,m=n),l=i.F._writeBlock(n==C-1||m==C?1:0,_,x,v,e,k,n-k,t,l),x=M=v=0,k=n);var A=0;n<C-2&&(A=i.F._bestMatch(e,n,P,D,Math.min(p[2],C-n),p[3]));var E=A>>>16,I=65535&A;if(A!=0){I=65535&A;var T=r(E=A>>>16,y.of0);y.lhst[257+T]++;var w=r(I,y.df0);y.dhst[w]++,v+=y.exb[T]+y.dxb[w],_[x]=E<<23|n-m,_[x+1]=I<<16|T<<8|w,x+=2,m=n+E}else y.lhst[e[n]]++;M++}}for(k==n&&e.length!=0||(m<n&&(_[x]=n-m,x+=2,m=n),l=i.F._writeBlock(1,_,x,v,e,k,n-k,t,l),x=0,M=0,x=M=v=0,k=n);7&l;)l++;return l>>>3},i.F._bestMatch=function(e,t,a,o,p,y){var r=32767&t,s=a[r],n=r-s+32768&32767;if(s==r||o!=i.F._hash(e,t-n))return 0;for(var l=0,m=0,C=Math.min(32767,t);n<=C&&--y!=0&&s!=r;){if(l==0||e[t+l]==e[t+l-n]){var _=i.F._howLong(e,t,n);if(_>l){if(m=n,(l=_)>=p)break;n+2<_&&(_=n+2);for(var U=0,P=0;P<_-2;P++){var x=t-n+P+32768&32767,M=x-a[x]+32768&32767;M>U&&(U=M,s=x)}}}n+=(r=s)-(s=a[r])+32768&32767}return l<<16|m},i.F._howLong=function(e,t,a){if(e[t]!=e[t-a]||e[t+1]!=e[t+1-a]||e[t+2]!=e[t+2-a])return 0;var o=t,p=Math.min(e.length,t+258);for(t+=3;t<p&&e[t]==e[t-a];)t++;return t-o},i.F._hash=function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<4)&65535},i.saved=0,i.F._writeBlock=function(e,t,a,o,p,y,r,s,n){var l,m,C,_,U,P,x,M,k,v=i.F.U,D=i.F._putsF,c=i.F._putsE;v.lhst[256]++,m=(l=i.F.getTrees())[0],C=l[1],_=l[2],U=l[3],P=l[4],x=l[5],M=l[6],k=l[7];var u=32+(n+3&7?8-(n+3&7):0)+(r<<3),A=o+i.F.contSize(v.fltree,v.lhst)+i.F.contSize(v.fdtree,v.dhst),E=o+i.F.contSize(v.ltree,v.lhst)+i.F.contSize(v.dtree,v.dhst);E+=14+3*x+i.F.contSize(v.itree,v.ihst)+(2*v.ihst[16]+3*v.ihst[17]+7*v.ihst[18]);for(var I=0;I<286;I++)v.lhst[I]=0;for(I=0;I<30;I++)v.dhst[I]=0;for(I=0;I<19;I++)v.ihst[I]=0;var T=u<A&&u<E?0:A<E?1:2;if(D(s,n,e),D(s,n+1,T),n+=3,T==0){for(;7&n;)n++;n=i.F._copyExact(p,y,r,s,n)}else{var w,S;if(T==1&&(w=v.fltree,S=v.fdtree),T==2){i.F.makeCodes(v.ltree,m),i.F.revCodes(v.ltree,m),i.F.makeCodes(v.dtree,C),i.F.revCodes(v.dtree,C),i.F.makeCodes(v.itree,_),i.F.revCodes(v.itree,_),w=v.ltree,S=v.dtree,c(s,n,U-257),c(s,n+=5,P-1),c(s,n+=5,x-4),n+=4;for(var h=0;h<x;h++)c(s,n+3*h,v.itree[1+(v.ordr[h]<<1)]);n+=3*x,n=i.F._codeTiny(M,v.itree,s,n),n=i.F._codeTiny(k,v.itree,s,n)}for(var f=y,O=0;O<a;O+=2){for(var F=t[O],N=F>>>23,z=f+(8388607&F);f<z;)n=i.F._writeLit(p[f++],w,s,n);if(N!=0){var H=t[O+1],Q=H>>16,L=H>>8&255,R=255&H;c(s,n=i.F._writeLit(257+L,w,s,n),N-v.of0[L]),n+=v.exb[L],D(s,n=i.F._writeLit(R,S,s,n),Q-v.df0[R]),n+=v.dxb[R],f+=N}}n=i.F._writeLit(256,w,s,n)}return n},i.F._copyExact=function(e,t,a,o,p){var y=p>>>3;return o[y]=a,o[y+1]=a>>>8,o[y+2]=255-o[y],o[y+3]=255-o[y+1],y+=4,o.set(new Uint8Array(e.buffer,t,a),y),p+(a+4<<3)},i.F.getTrees=function(){for(var e=i.F.U,t=i.F._hufTree(e.lhst,e.ltree,15),a=i.F._hufTree(e.dhst,e.dtree,15),o=[],p=i.F._lenCodes(e.ltree,o),y=[],r=i.F._lenCodes(e.dtree,y),s=0;s<o.length;s+=2)e.ihst[o[s]]++;for(s=0;s<y.length;s+=2)e.ihst[y[s]]++;for(var n=i.F._hufTree(e.ihst,e.itree,7),l=19;l>4&&e.itree[1+(e.ordr[l-1]<<1)]==0;)l--;return[t,a,n,p,r,l,o,y]},i.F.getSecond=function(e){for(var t=[],a=0;a<e.length;a+=2)t.push(e[a+1]);return t},i.F.nonZero=function(e){for(var t="",a=0;a<e.length;a+=2)e[a+1]!=0&&(t+=(a>>1)+",");return t},i.F.contSize=function(e,t){for(var a=0,o=0;o<t.length;o++)a+=t[o]*e[1+(o<<1)];return a},i.F._codeTiny=function(e,t,a,o){for(var p=0;p<e.length;p+=2){var y=e[p],r=e[p+1];o=i.F._writeLit(y,t,a,o);var s=y==16?2:y==17?3:7;y>15&&(i.F._putsE(a,o,r,s),o+=s)}return o},i.F._lenCodes=function(e,t){for(var a=e.length;a!=2&&e[a-1]==0;)a-=2;for(var o=0;o<a;o+=2){var p=e[o+1],y=o+3<a?e[o+3]:-1,r=o+5<a?e[o+5]:-1,s=o==0?-1:e[o-1];if(p==0&&y==p&&r==p){for(var n=o+5;n+2<a&&e[n+2]==p;)n+=2;(l=Math.min(n+1-o>>>1,138))<11?t.push(17,l-3):t.push(18,l-11),o+=2*l-2}else if(p==s&&y==p&&r==p){for(n=o+5;n+2<a&&e[n+2]==p;)n+=2;var l=Math.min(n+1-o>>>1,6);t.push(16,l-3),o+=2*l-2}else t.push(p,0)}return a>>>1},i.F._hufTree=function(e,t,a){var o=[],p=e.length,y=t.length,r=0;for(r=0;r<y;r+=2)t[r]=0,t[r+1]=0;for(r=0;r<p;r++)e[r]!=0&&o.push({lit:r,f:e[r]});var s=o.length,n=o.slice(0);if(s==0)return 0;if(s==1){var l=o[0].lit;return n=l==0?1:0,t[1+(l<<1)]=1,t[1+(n<<1)]=1,1}o.sort(function(M,k){return M.f-k.f});var m=o[0],C=o[1],_=0,U=1,P=2;for(o[0]={lit:-1,f:m.f+C.f,l:m,r:C,d:0};U!=s-1;)m=_!=U&&(P==s||o[_].f<o[P].f)?o[_++]:o[P++],C=_!=U&&(P==s||o[_].f<o[P].f)?o[_++]:o[P++],o[U++]={lit:-1,f:m.f+C.f,l:m,r:C};var x=i.F.setDepth(o[U-1],0);for(x>a&&(i.F.restrictDepth(n,a,x),x=a),r=0;r<s;r++)t[1+(n[r].lit<<1)]=n[r].d;return x},i.F.setDepth=function(e,t){return e.lit!=-1?(e.d=t,t):Math.max(i.F.setDepth(e.l,t+1),i.F.setDepth(e.r,t+1))},i.F.restrictDepth=function(e,t,a){var o=0,p=1<<a-t,y=0;for(e.sort(function(s,n){return n.d==s.d?s.f-n.f:n.d-s.d}),o=0;o<e.length&&e[o].d>t;o++){var r=e[o].d;e[o].d=t,y+=p-(1<<a-r)}for(y>>>=a-t;y>0;)(r=e[o].d)<t?(e[o].d++,y-=1<<t-r-1):o++;for(;o>=0;o--)e[o].d==t&&y<0&&(e[o].d--,y++);y!=0&&console.log("debt left")},i.F._goodIndex=function(e,t){var a=0;return t[16|a]<=e&&(a|=16),t[8|a]<=e&&(a|=8),t[4|a]<=e&&(a|=4),t[2|a]<=e&&(a|=2),t[1|a]<=e&&(a|=1),a},i.F._writeLit=function(e,t,a,o){return i.F._putsF(a,o,t[e<<1]),o+t[1+(e<<1)]},i.F.inflate=function(e,t){var a=Uint8Array;if(e[0]==3&&e[1]==0)return t||new a(0);var o=i.F,p=o._bitsF,y=o._bitsE,r=o._decodeTiny,s=o.makeCodes,n=o.codes2map,l=o._get17,m=o.U,C=t==null;C&&(t=new a(e.length>>>2<<3));for(var _,U,P=0,x=0,M=0,k=0,v=0,D=0,c=0,u=0,A=0;P==0;)if(P=p(e,A,1),x=p(e,A+1,2),A+=3,x!=0){if(C&&(t=i.F._check(t,u+(1<<17))),x==1&&(_=m.flmap,U=m.fdmap,D=511,c=31),x==2){M=y(e,A,5)+257,k=y(e,A+5,5)+1,v=y(e,A+10,4)+4,A+=14;for(var E=0;E<38;E+=2)m.itree[E]=0,m.itree[E+1]=0;var I=1;for(E=0;E<v;E++){var T=y(e,A+3*E,3);m.itree[1+(m.ordr[E]<<1)]=T,T>I&&(I=T)}A+=3*v,s(m.itree,I),n(m.itree,I,m.imap),_=m.lmap,U=m.dmap,A=r(m.imap,(1<<I)-1,M+k,e,A,m.ttree);var w=o._copyOut(m.ttree,0,M,m.ltree);D=(1<<w)-1;var S=o._copyOut(m.ttree,M,k,m.dtree);c=(1<<S)-1,s(m.ltree,w),n(m.ltree,w,_),s(m.dtree,S),n(m.dtree,S,U)}for(;;){var h=_[l(e,A)&D];A+=15&h;var f=h>>>4;if(!(f>>>8))t[u++]=f;else{if(f==256)break;var O=u+f-254;if(f>264){var F=m.ldef[f-257];O=u+(F>>>3)+y(e,A,7&F),A+=7&F}var N=U[l(e,A)&c];A+=15&N;var z=N>>>4,H=m.ddef[z],Q=(H>>>4)+p(e,A,15&H);for(A+=15&H,C&&(t=i.F._check(t,u+(1<<17)));u<O;)t[u]=t[u++-Q],t[u]=t[u++-Q],t[u]=t[u++-Q],t[u]=t[u++-Q];u=O}}}else{7&A&&(A+=8-(7&A));var L=4+(A>>>3),R=e[L-4]|e[L-3]<<8;C&&(t=i.F._check(t,u+R)),t.set(new a(e.buffer,e.byteOffset+L,R),u),A=L+R<<3,u+=R}return t.length==u?t:t.slice(0,u)},i.F._check=function(e,t){var a=e.length;if(t<=a)return e;var o=new Uint8Array(Math.max(a<<1,t));return o.set(e,0),o},i.F._decodeTiny=function(e,t,a,o,p,y){for(var r=i.F._bitsE,s=i.F._get17,n=0;n<a;){var l=e[s(o,p)&t];p+=15&l;var m=l>>>4;if(m<=15)y[n]=m,n++;else{var C=0,_=0;m==16?(_=3+r(o,p,2),p+=2,C=y[n-1]):m==17?(_=3+r(o,p,3),p+=3):m==18&&(_=11+r(o,p,7),p+=7);for(var U=n+_;n<U;)y[n]=C,n++}}return p},i.F._copyOut=function(e,t,a,o){for(var p=0,y=0,r=o.length>>>1;y<a;){var s=e[y+t];o[y<<1]=0,o[1+(y<<1)]=s,s>p&&(p=s),y++}for(;y<r;)o[y<<1]=0,o[1+(y<<1)]=0,y++;return p},i.F.makeCodes=function(e,t){for(var a,o,p,y,r=i.F.U,s=e.length,n=r.bl_count,l=0;l<=t;l++)n[l]=0;for(l=1;l<s;l+=2)n[e[l]]++;var m=r.next_code;for(a=0,n[0]=0,o=1;o<=t;o++)a=a+n[o-1]<<1,m[o]=a;for(p=0;p<s;p+=2)(y=e[p+1])!=0&&(e[p]=m[y],m[y]++)},i.F.codes2map=function(e,t,a){for(var o=e.length,p=i.F.U.rev15,y=0;y<o;y+=2)if(e[y+1]!=0)for(var r=y>>1,s=e[y+1],n=r<<4|s,l=t-s,m=e[y]<<l,C=m+(1<<l);m!=C;)a[p[m]>>>15-t]=n,m++},i.F.revCodes=function(e,t){for(var a=i.F.U.rev15,o=15-t,p=0;p<e.length;p+=2){var y=e[p]<<t-e[p+1];e[p]=a[y]>>>o}},i.F._putsE=function(e,t,a){a<<=7&t;var o=t>>>3;e[o]|=a,e[o+1]|=a>>>8},i.F._putsF=function(e,t,a){a<<=7&t;var o=t>>>3;e[o]|=a,e[o+1]|=a>>>8,e[o+2]|=a>>>16},i.F._bitsE=function(e,t,a){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<a)-1},i.F._bitsF=function(e,t,a){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<a)-1},i.F._get17=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)},i.F._get25=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16|e[3+(t>>>3)]<<24)>>>(7&t)},i.F.U=(d=Uint16Array,b=Uint32Array,{next_code:new d(16),bl_count:new d(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new d(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new b(32),flmap:new d(512),fltree:[],fdmap:new d(32),fdtree:[],lmap:new d(32768),ltree:[],ttree:[],dmap:new d(32768),dtree:[],imap:new d(512),itree:[],rev15:new d(32768),lhst:new b(286),dhst:new b(30),ihst:new b(19),lits:new b(15e3),strt:new d(65536),prev:new d(32768)}),function(){for(var e=i.F.U,t=0;t<32768;t++){var a=t;a=(4278255360&(a=(4042322160&(a=(3435973836&(a=(2863311530&a)>>>1|(1431655765&a)<<1))>>>2|(858993459&a)<<2))>>>4|(252645135&a)<<4))>>>8|(16711935&a)<<8,e.rev15[t]=(a>>>16|a<<16)>>>17}function o(p,y,r){for(;y--!=0;)p.push(0,r)}for(t=0;t<32;t++)e.ldef[t]=e.of0[t]<<3|e.exb[t],e.ddef[t]=e.df0[t]<<4|e.dxb[t];o(e.fltree,144,8),o(e.fltree,112,9),o(e.fltree,24,7),o(e.fltree,8,8),i.F.makeCodes(e.fltree,9),i.F.codes2map(e.fltree,9,e.flmap),i.F.revCodes(e.fltree,9),o(e.fdtree,32,5),i.F.makeCodes(e.fdtree,5),i.F.codes2map(e.fdtree,5,e.fdmap),i.F.revCodes(e.fdtree,5),o(e.itree,19,0),o(e.ltree,286,0),o(e.dtree,30,0),o(e.ttree,320,0)}()})();var ln=on({__proto__:null,default:Ke},[Ke]);const ge=function(){var g={nextZero(r,s){for(;r[s]!=0;)s++;return s},readUshort:(r,s)=>r[s]<<8|r[s+1],writeUshort(r,s,n){r[s]=n>>8&255,r[s+1]=255&n},readUint:(r,s)=>16777216*r[s]+(r[s+1]<<16|r[s+2]<<8|r[s+3]),writeUint(r,s,n){r[s]=n>>24&255,r[s+1]=n>>16&255,r[s+2]=n>>8&255,r[s+3]=255&n},readASCII(r,s,n){let l="";for(let m=0;m<n;m++)l+=String.fromCharCode(r[s+m]);return l},writeASCII(r,s,n){for(let l=0;l<n.length;l++)r[s+l]=n.charCodeAt(l)},readBytes(r,s,n){const l=[];for(let m=0;m<n;m++)l.push(r[s+m]);return l},pad:r=>r.length<2?`0${r}`:r,readUTF8(r,s,n){let l,m="";for(let C=0;C<n;C++)m+=`%${g.pad(r[s+C].toString(16))}`;try{l=decodeURIComponent(m)}catch{return g.readASCII(r,s,n)}return l}};function d(r,s,n,l){const m=s*n,C=t(l),_=Math.ceil(s*C/8),U=new Uint8Array(4*m),P=new Uint32Array(U.buffer),{ctype:x}=l,{depth:M}=l,k=g.readUshort;if(x==6){const F=m<<2;if(M==8)for(var v=0;v<F;v+=4)U[v]=r[v],U[v+1]=r[v+1],U[v+2]=r[v+2],U[v+3]=r[v+3];if(M==16)for(v=0;v<F;v++)U[v]=r[v<<1]}else if(x==2){const F=l.tabs.tRNS;if(F==null){if(M==8)for(v=0;v<m;v++){var D=3*v;P[v]=255<<24|r[D+2]<<16|r[D+1]<<8|r[D]}if(M==16)for(v=0;v<m;v++)D=6*v,P[v]=255<<24|r[D+4]<<16|r[D+2]<<8|r[D]}else{var c=F[0];const N=F[1],z=F[2];if(M==8)for(v=0;v<m;v++){var u=v<<2;D=3*v,P[v]=255<<24|r[D+2]<<16|r[D+1]<<8|r[D],r[D]==c&&r[D+1]==N&&r[D+2]==z&&(U[u+3]=0)}if(M==16)for(v=0;v<m;v++)u=v<<2,D=6*v,P[v]=255<<24|r[D+4]<<16|r[D+2]<<8|r[D],k(r,D)==c&&k(r,D+2)==N&&k(r,D+4)==z&&(U[u+3]=0)}}else if(x==3){const F=l.tabs.PLTE,N=l.tabs.tRNS,z=N?N.length:0;if(M==1)for(var A=0;A<n;A++){var E=A*_,I=A*s;for(v=0;v<s;v++){u=I+v<<2;var T=3*(w=r[E+(v>>3)]>>7-((7&v)<<0)&1);U[u]=F[T],U[u+1]=F[T+1],U[u+2]=F[T+2],U[u+3]=w<z?N[w]:255}}if(M==2)for(A=0;A<n;A++)for(E=A*_,I=A*s,v=0;v<s;v++)u=I+v<<2,T=3*(w=r[E+(v>>2)]>>6-((3&v)<<1)&3),U[u]=F[T],U[u+1]=F[T+1],U[u+2]=F[T+2],U[u+3]=w<z?N[w]:255;if(M==4)for(A=0;A<n;A++)for(E=A*_,I=A*s,v=0;v<s;v++)u=I+v<<2,T=3*(w=r[E+(v>>1)]>>4-((1&v)<<2)&15),U[u]=F[T],U[u+1]=F[T+1],U[u+2]=F[T+2],U[u+3]=w<z?N[w]:255;if(M==8)for(v=0;v<m;v++){var w;u=v<<2,T=3*(w=r[v]),U[u]=F[T],U[u+1]=F[T+1],U[u+2]=F[T+2],U[u+3]=w<z?N[w]:255}}else if(x==4){if(M==8)for(v=0;v<m;v++){u=v<<2;var S=r[h=v<<1];U[u]=S,U[u+1]=S,U[u+2]=S,U[u+3]=r[h+1]}if(M==16)for(v=0;v<m;v++){var h;u=v<<2,S=r[h=v<<2],U[u]=S,U[u+1]=S,U[u+2]=S,U[u+3]=r[h+2]}}else if(x==0)for(c=l.tabs.tRNS?l.tabs.tRNS:-1,A=0;A<n;A++){const F=A*_,N=A*s;if(M==1)for(var f=0;f<s;f++){var O=(S=255*(r[F+(f>>>3)]>>>7-(7&f)&1))==255*c?0:255;P[N+f]=O<<24|S<<16|S<<8|S}else if(M==2)for(f=0;f<s;f++)O=(S=85*(r[F+(f>>>2)]>>>6-((3&f)<<1)&3))==85*c?0:255,P[N+f]=O<<24|S<<16|S<<8|S;else if(M==4)for(f=0;f<s;f++)O=(S=17*(r[F+(f>>>1)]>>>4-((1&f)<<2)&15))==17*c?0:255,P[N+f]=O<<24|S<<16|S<<8|S;else if(M==8)for(f=0;f<s;f++)O=(S=r[F+f])==c?0:255,P[N+f]=O<<24|S<<16|S<<8|S;else if(M==16)for(f=0;f<s;f++)S=r[F+(f<<1)],O=k(r,F+(f<<1))==c?0:255,P[N+f]=O<<24|S<<16|S<<8|S}return U}function b(r,s,n,l){const m=t(r),C=Math.ceil(n*m/8),_=new Uint8Array((C+1+r.interlace)*l);return s=r.tabs.CgBI?e(s,_):i(s,_),r.interlace==0?s=a(s,r,0,n,l):r.interlace==1&&(s=function(P,x){const M=x.width,k=x.height,v=t(x),D=v>>3,c=Math.ceil(M*v/8),u=new Uint8Array(k*c);let A=0;const E=[0,0,4,0,2,0,1],I=[0,4,0,2,0,1,0],T=[8,8,8,4,4,2,2],w=[8,8,4,4,2,2,1];let S=0;for(;S<7;){const f=T[S],O=w[S];let F=0,N=0,z=E[S];for(;z<k;)z+=f,N++;let H=I[S];for(;H<M;)H+=O,F++;const Q=Math.ceil(F*v/8);a(P,x,A,F,N);let L=0,R=E[S];for(;R<k;){let $=I[S],Y=A+L*Q<<3;for(;$<M;){var h;if(v==1&&(h=(h=P[Y>>3])>>7-(7&Y)&1,u[R*c+($>>3)]|=h<<7-((7&$)<<0)),v==2&&(h=(h=P[Y>>3])>>6-(7&Y)&3,u[R*c+($>>2)]|=h<<6-((3&$)<<1)),v==4&&(h=(h=P[Y>>3])>>4-(7&Y)&15,u[R*c+($>>1)]|=h<<4-((1&$)<<2)),v>=8){const B=R*c+$*D;for(let W=0;W<D;W++)u[B+W]=P[(Y>>3)+W]}Y+=v,$+=O}L++,R+=f}F*N!=0&&(A+=N*(1+Q)),S+=1}return u}(s,r)),s}function i(r,s){return e(new Uint8Array(r.buffer,2,r.length-6),s)}var e=function(){const r={H:{}};return r.H.N=function(s,n){const l=Uint8Array;let m,C,_=0,U=0,P=0,x=0,M=0,k=0,v=0,D=0,c=0;if(s[0]==3&&s[1]==0)return n||new l(0);const u=r.H,A=u.b,E=u.e,I=u.R,T=u.n,w=u.A,S=u.Z,h=u.m,f=n==null;for(f&&(n=new l(s.length>>>2<<5));_==0;)if(_=A(s,c,1),U=A(s,c+1,2),c+=3,U!=0){if(f&&(n=r.H.W(n,D+(1<<17))),U==1&&(m=h.J,C=h.h,k=511,v=31),U==2){P=E(s,c,5)+257,x=E(s,c+5,5)+1,M=E(s,c+10,4)+4,c+=14;let F=1;for(var O=0;O<38;O+=2)h.Q[O]=0,h.Q[O+1]=0;for(O=0;O<M;O++){const H=E(s,c+3*O,3);h.Q[1+(h.X[O]<<1)]=H,H>F&&(F=H)}c+=3*M,T(h.Q,F),w(h.Q,F,h.u),m=h.w,C=h.d,c=I(h.u,(1<<F)-1,P+x,s,c,h.v);const N=u.V(h.v,0,P,h.C);k=(1<<N)-1;const z=u.V(h.v,P,x,h.D);v=(1<<z)-1,T(h.C,N),w(h.C,N,m),T(h.D,z),w(h.D,z,C)}for(;;){const F=m[S(s,c)&k];c+=15&F;const N=F>>>4;if(!(N>>>8))n[D++]=N;else{if(N==256)break;{let z=D+N-254;if(N>264){const $=h.q[N-257];z=D+($>>>3)+E(s,c,7&$),c+=7&$}const H=C[S(s,c)&v];c+=15&H;const Q=H>>>4,L=h.c[Q],R=(L>>>4)+A(s,c,15&L);for(c+=15&L;D<z;)n[D]=n[D++-R],n[D]=n[D++-R],n[D]=n[D++-R],n[D]=n[D++-R];D=z}}}}else{7&c&&(c+=8-(7&c));const F=4+(c>>>3),N=s[F-4]|s[F-3]<<8;f&&(n=r.H.W(n,D+N)),n.set(new l(s.buffer,s.byteOffset+F,N),D),c=F+N<<3,D+=N}return n.length==D?n:n.slice(0,D)},r.H.W=function(s,n){const l=s.length;if(n<=l)return s;const m=new Uint8Array(l<<1);return m.set(s,0),m},r.H.R=function(s,n,l,m,C,_){const U=r.H.e,P=r.H.Z;let x=0;for(;x<l;){const M=s[P(m,C)&n];C+=15&M;const k=M>>>4;if(k<=15)_[x]=k,x++;else{let v=0,D=0;k==16?(D=3+U(m,C,2),C+=2,v=_[x-1]):k==17?(D=3+U(m,C,3),C+=3):k==18&&(D=11+U(m,C,7),C+=7);const c=x+D;for(;x<c;)_[x]=v,x++}}return C},r.H.V=function(s,n,l,m){let C=0,_=0;const U=m.length>>>1;for(;_<l;){const P=s[_+n];m[_<<1]=0,m[1+(_<<1)]=P,P>C&&(C=P),_++}for(;_<U;)m[_<<1]=0,m[1+(_<<1)]=0,_++;return C},r.H.n=function(s,n){const l=r.H.m,m=s.length;let C,_,U,P;const x=l.j;for(var M=0;M<=n;M++)x[M]=0;for(M=1;M<m;M+=2)x[s[M]]++;const k=l.K;for(C=0,x[0]=0,_=1;_<=n;_++)C=C+x[_-1]<<1,k[_]=C;for(U=0;U<m;U+=2)P=s[U+1],P!=0&&(s[U]=k[P],k[P]++)},r.H.A=function(s,n,l){const m=s.length,C=r.H.m.r;for(let _=0;_<m;_+=2)if(s[_+1]!=0){const U=_>>1,P=s[_+1],x=U<<4|P,M=n-P;let k=s[_]<<M;const v=k+(1<<M);for(;k!=v;)l[C[k]>>>15-n]=x,k++}},r.H.l=function(s,n){const l=r.H.m.r,m=15-n;for(let C=0;C<s.length;C+=2){const _=s[C]<<n-s[C+1];s[C]=l[_]>>>m}},r.H.M=function(s,n,l){l<<=7&n;const m=n>>>3;s[m]|=l,s[m+1]|=l>>>8},r.H.I=function(s,n,l){l<<=7&n;const m=n>>>3;s[m]|=l,s[m+1]|=l>>>8,s[m+2]|=l>>>16},r.H.e=function(s,n,l){return(s[n>>>3]|s[1+(n>>>3)]<<8)>>>(7&n)&(1<<l)-1},r.H.b=function(s,n,l){return(s[n>>>3]|s[1+(n>>>3)]<<8|s[2+(n>>>3)]<<16)>>>(7&n)&(1<<l)-1},r.H.Z=function(s,n){return(s[n>>>3]|s[1+(n>>>3)]<<8|s[2+(n>>>3)]<<16)>>>(7&n)},r.H.i=function(s,n){return(s[n>>>3]|s[1+(n>>>3)]<<8|s[2+(n>>>3)]<<16|s[3+(n>>>3)]<<24)>>>(7&n)},r.H.m=function(){const s=Uint16Array,n=Uint32Array;return{K:new s(16),j:new s(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new s(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new n(32),J:new s(512),_:[],h:new s(32),$:[],w:new s(32768),C:[],v:[],d:new s(32768),D:[],u:new s(512),Q:[],r:new s(32768),s:new n(286),Y:new n(30),a:new n(19),t:new n(15e3),k:new s(65536),g:new s(32768)}}(),function(){const s=r.H.m;for(var n=0;n<32768;n++){let m=n;m=(2863311530&m)>>>1|(1431655765&m)<<1,m=(3435973836&m)>>>2|(858993459&m)<<2,m=(4042322160&m)>>>4|(252645135&m)<<4,m=(4278255360&m)>>>8|(16711935&m)<<8,s.r[n]=(m>>>16|m<<16)>>>17}function l(m,C,_){for(;C--!=0;)m.push(0,_)}for(n=0;n<32;n++)s.q[n]=s.S[n]<<3|s.T[n],s.c[n]=s.p[n]<<4|s.z[n];l(s._,144,8),l(s._,112,9),l(s._,24,7),l(s._,8,8),r.H.n(s._,9),r.H.A(s._,9,s.J),r.H.l(s._,9),l(s.$,32,5),r.H.n(s.$,5),r.H.A(s.$,5,s.h),r.H.l(s.$,5),l(s.Q,19,0),l(s.C,286,0),l(s.D,30,0),l(s.v,320,0)}(),r.H.N}();function t(r){return[1,null,3,1,2,null,4][r.ctype]*r.depth}function a(r,s,n,l,m){let C=t(s);const _=Math.ceil(l*C/8);let U,P;C=Math.ceil(C/8);let x=r[n],M=0;if(x>1&&(r[n]=[0,0,1][x-2]),x==3)for(M=C;M<_;M++)r[M+1]=r[M+1]+(r[M+1-C]>>>1)&255;for(let k=0;k<m;k++)if(U=n+k*_,P=U+k+1,x=r[P-1],M=0,x==0)for(;M<_;M++)r[U+M]=r[P+M];else if(x==1){for(;M<C;M++)r[U+M]=r[P+M];for(;M<_;M++)r[U+M]=r[P+M]+r[U+M-C]}else if(x==2)for(;M<_;M++)r[U+M]=r[P+M]+r[U+M-_];else if(x==3){for(;M<C;M++)r[U+M]=r[P+M]+(r[U+M-_]>>>1);for(;M<_;M++)r[U+M]=r[P+M]+(r[U+M-_]+r[U+M-C]>>>1)}else{for(;M<C;M++)r[U+M]=r[P+M]+o(0,r[U+M-_],0);for(;M<_;M++)r[U+M]=r[P+M]+o(r[U+M-C],r[U+M-_],r[U+M-C-_])}return r}function o(r,s,n){const l=r+s-n,m=l-r,C=l-s,_=l-n;return m*m<=C*C&&m*m<=_*_?r:C*C<=_*_?s:n}function p(r,s,n){n.width=g.readUint(r,s),s+=4,n.height=g.readUint(r,s),s+=4,n.depth=r[s],s++,n.ctype=r[s],s++,n.compress=r[s],s++,n.filter=r[s],s++,n.interlace=r[s],s++}function y(r,s,n,l,m,C,_,U,P){const x=Math.min(s,m),M=Math.min(n,C);let k=0,v=0;for(let S=0;S<M;S++)for(let h=0;h<x;h++)if(_>=0&&U>=0?(k=S*s+h<<2,v=(U+S)*m+_+h<<2):(k=(-U+S)*s-_+h<<2,v=S*m+h<<2),P==0)l[v]=r[k],l[v+1]=r[k+1],l[v+2]=r[k+2],l[v+3]=r[k+3];else if(P==1){var D=r[k+3]*.00392156862745098,c=r[k]*D,u=r[k+1]*D,A=r[k+2]*D,E=l[v+3]*(1/255),I=l[v]*E,T=l[v+1]*E,w=l[v+2]*E;const f=1-D,O=D+E*f,F=O==0?0:1/O;l[v+3]=255*O,l[v+0]=(c+I*f)*F,l[v+1]=(u+T*f)*F,l[v+2]=(A+w*f)*F}else if(P==2)D=r[k+3],c=r[k],u=r[k+1],A=r[k+2],E=l[v+3],I=l[v],T=l[v+1],w=l[v+2],D==E&&c==I&&u==T&&A==w?(l[v]=0,l[v+1]=0,l[v+2]=0,l[v+3]=0):(l[v]=c,l[v+1]=u,l[v+2]=A,l[v+3]=D);else if(P==3){if(D=r[k+3],c=r[k],u=r[k+1],A=r[k+2],E=l[v+3],I=l[v],T=l[v+1],w=l[v+2],D==E&&c==I&&u==T&&A==w)continue;if(D<220&&E>20)return!1}return!0}return{decode:function(s){const n=new Uint8Array(s);let l=8;const m=g,C=m.readUshort,_=m.readUint,U={tabs:{},frames:[]},P=new Uint8Array(n.length);let x,M=0,k=0;const v=[137,80,78,71,13,10,26,10];for(var D=0;D<8;D++)if(n[D]!=v[D])throw"The input is not a PNG file!";for(;l<n.length;){const S=m.readUint(n,l);l+=4;const h=m.readASCII(n,l,4);if(l+=4,h=="IHDR")p(n,l,U);else if(h=="iCCP"){for(var c=l;n[c]!=0;)c++;m.readASCII(n,l,c-l),n[c+1];const f=n.slice(c+2,l+S);let O=null;try{O=i(f)}catch{O=e(f)}U.tabs[h]=O}else if(h=="CgBI")U.tabs[h]=n.slice(l,l+4);else if(h=="IDAT"){for(D=0;D<S;D++)P[M+D]=n[l+D];M+=S}else if(h=="acTL")U.tabs[h]={num_frames:_(n,l),num_plays:_(n,l+4)},x=new Uint8Array(n.length);else if(h=="fcTL"){k!=0&&((w=U.frames[U.frames.length-1]).data=b(U,x.slice(0,k),w.rect.width,w.rect.height),k=0);const f={x:_(n,l+12),y:_(n,l+16),width:_(n,l+4),height:_(n,l+8)};let O=C(n,l+22);O=C(n,l+20)/(O==0?100:O);const F={rect:f,delay:Math.round(1e3*O),dispose:n[l+24],blend:n[l+25]};U.frames.push(F)}else if(h=="fdAT"){for(D=0;D<S-4;D++)x[k+D]=n[l+D+4];k+=S-4}else if(h=="pHYs")U.tabs[h]=[m.readUint(n,l),m.readUint(n,l+4),n[l+8]];else if(h=="cHRM")for(U.tabs[h]=[],D=0;D<8;D++)U.tabs[h].push(m.readUint(n,l+4*D));else if(h=="tEXt"||h=="zTXt"){U.tabs[h]==null&&(U.tabs[h]={});var u=m.nextZero(n,l),A=m.readASCII(n,l,u-l),E=l+S-u-1;if(h=="tEXt")T=m.readASCII(n,u+1,E);else{var I=i(n.slice(u+2,u+2+E));T=m.readUTF8(I,0,I.length)}U.tabs[h][A]=T}else if(h=="iTXt"){U.tabs[h]==null&&(U.tabs[h]={}),u=0,c=l,u=m.nextZero(n,c),A=m.readASCII(n,c,u-c);const f=n[c=u+1];var T;n[c+1],c+=2,u=m.nextZero(n,c),m.readASCII(n,c,u-c),c=u+1,u=m.nextZero(n,c),m.readUTF8(n,c,u-c),E=S-((c=u+1)-l),f==0?T=m.readUTF8(n,c,E):(I=i(n.slice(c,c+E)),T=m.readUTF8(I,0,I.length)),U.tabs[h][A]=T}else if(h=="PLTE")U.tabs[h]=m.readBytes(n,l,S);else if(h=="hIST"){const f=U.tabs.PLTE.length/3;for(U.tabs[h]=[],D=0;D<f;D++)U.tabs[h].push(C(n,l+2*D))}else if(h=="tRNS")U.ctype==3?U.tabs[h]=m.readBytes(n,l,S):U.ctype==0?U.tabs[h]=C(n,l):U.ctype==2&&(U.tabs[h]=[C(n,l),C(n,l+2),C(n,l+4)]);else if(h=="gAMA")U.tabs[h]=m.readUint(n,l)/1e5;else if(h=="sRGB")U.tabs[h]=n[l];else if(h=="bKGD")U.ctype==0||U.ctype==4?U.tabs[h]=[C(n,l)]:U.ctype==2||U.ctype==6?U.tabs[h]=[C(n,l),C(n,l+2),C(n,l+4)]:U.ctype==3&&(U.tabs[h]=n[l]);else if(h=="IEND")break;l+=S,m.readUint(n,l),l+=4}var w;return k!=0&&((w=U.frames[U.frames.length-1]).data=b(U,x.slice(0,k),w.rect.width,w.rect.height)),U.data=b(U,P,U.width,U.height),delete U.compress,delete U.interlace,delete U.filter,U},toRGBA8:function(s){const n=s.width,l=s.height;if(s.tabs.acTL==null)return[d(s.data,n,l,s).buffer];const m=[];s.frames[0].data==null&&(s.frames[0].data=s.data);const C=n*l*4,_=new Uint8Array(C),U=new Uint8Array(C),P=new Uint8Array(C);for(let M=0;M<s.frames.length;M++){const k=s.frames[M],v=k.rect.x,D=k.rect.y,c=k.rect.width,u=k.rect.height,A=d(k.data,c,u,s);if(M!=0)for(var x=0;x<C;x++)P[x]=_[x];if(k.blend==0?y(A,c,u,_,n,l,v,D,0):k.blend==1&&y(A,c,u,_,n,l,v,D,1),m.push(_.buffer.slice(0)),k.dispose!=0){if(k.dispose==1)y(U,c,u,_,n,l,v,D,0);else if(k.dispose==2)for(x=0;x<C;x++)_[x]=P[x]}}return m},_paeth:o,_copyTile:y,_bin:g}}();(function(){const{_copyTile:g}=ge,{_bin:d}=ge,b=ge._paeth;var i={table:function(){const c=new Uint32Array(256);for(let u=0;u<256;u++){let A=u;for(let E=0;E<8;E++)1&A?A=3988292384^A>>>1:A>>>=1;c[u]=A}return c}(),update(c,u,A,E){for(let I=0;I<E;I++)c=i.table[255&(c^u[A+I])]^c>>>8;return c},crc:(c,u,A)=>4294967295^i.update(4294967295,c,u,A)};function e(c,u,A,E){u[A]+=c[0]*E>>4,u[A+1]+=c[1]*E>>4,u[A+2]+=c[2]*E>>4,u[A+3]+=c[3]*E>>4}function t(c){return Math.max(0,Math.min(255,c))}function a(c,u){const A=c[0]-u[0],E=c[1]-u[1],I=c[2]-u[2],T=c[3]-u[3];return A*A+E*E+I*I+T*T}function o(c,u,A,E,I,T,w){w==null&&(w=1);const S=E.length,h=[];for(var f=0;f<S;f++){const R=E[f];h.push([R>>>0&255,R>>>8&255,R>>>16&255,R>>>24&255])}for(f=0;f<S;f++){let R=4294967295;for(var O=0,F=0;F<S;F++){var N=a(h[f],h[F]);F!=f&&N<R&&(R=N,O=F)}}const z=new Uint32Array(I.buffer),H=new Int16Array(u*A*4),Q=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(f=0;f<Q.length;f++)Q[f]=255*((Q[f]+.5)/16-.5);for(let R=0;R<A;R++)for(let $=0;$<u;$++){var L;f=4*(R*u+$),w!=2?L=[t(c[f]+H[f]),t(c[f+1]+H[f+1]),t(c[f+2]+H[f+2]),t(c[f+3]+H[f+3])]:(N=Q[4*(3&R)+(3&$)],L=[t(c[f]+N),t(c[f+1]+N),t(c[f+2]+N),t(c[f+3]+N)]),O=0;let Y=16777215;for(F=0;F<S;F++){const q=a(L,h[F]);q<Y&&(Y=q,O=F)}const B=h[O],W=[L[0]-B[0],L[1]-B[1],L[2]-B[2],L[3]-B[3]];w==1&&($!=u-1&&e(W,H,f+4,7),R!=A-1&&($!=0&&e(W,H,f+4*u-4,3),e(W,H,f+4*u,5),$!=u-1&&e(W,H,f+4*u+4,1))),T[f>>2]=O,z[f>>2]=E[O]}}function p(c,u,A,E,I){I==null&&(I={});const{crc:T}=i,w=d.writeUint,S=d.writeUshort,h=d.writeASCII;let f=8;const O=c.frames.length>1;let F,N=!1,z=33+(O?20:0);if(I.sRGB!=null&&(z+=13),I.pHYs!=null&&(z+=21),I.iCCP!=null&&(F=pako.deflate(I.iCCP),z+=21+F.length+4),c.ctype==3){for(var H=c.plte.length,Q=0;Q<H;Q++)c.plte[Q]>>>24!=255&&(N=!0);z+=8+3*H+4+(N?8+1*H+4:0)}for(var L=0;L<c.frames.length;L++)O&&(z+=38),z+=(B=c.frames[L]).cimg.length+12,L!=0&&(z+=4);z+=12;const R=new Uint8Array(z),$=[137,80,78,71,13,10,26,10];for(Q=0;Q<8;Q++)R[Q]=$[Q];if(w(R,f,13),f+=4,h(R,f,"IHDR"),f+=4,w(R,f,u),f+=4,w(R,f,A),f+=4,R[f]=c.depth,f++,R[f]=c.ctype,f++,R[f]=0,f++,R[f]=0,f++,R[f]=0,f++,w(R,f,T(R,f-17,17)),f+=4,I.sRGB!=null&&(w(R,f,1),f+=4,h(R,f,"sRGB"),f+=4,R[f]=I.sRGB,f++,w(R,f,T(R,f-5,5)),f+=4),I.iCCP!=null){const W=13+F.length;w(R,f,W),f+=4,h(R,f,"iCCP"),f+=4,h(R,f,"ICC profile"),f+=11,f+=2,R.set(F,f),f+=F.length,w(R,f,T(R,f-(W+4),W+4)),f+=4}if(I.pHYs!=null&&(w(R,f,9),f+=4,h(R,f,"pHYs"),f+=4,w(R,f,I.pHYs[0]),f+=4,w(R,f,I.pHYs[1]),f+=4,R[f]=I.pHYs[2],f++,w(R,f,T(R,f-13,13)),f+=4),O&&(w(R,f,8),f+=4,h(R,f,"acTL"),f+=4,w(R,f,c.frames.length),f+=4,w(R,f,I.loop!=null?I.loop:0),f+=4,w(R,f,T(R,f-12,12)),f+=4),c.ctype==3){for(w(R,f,3*(H=c.plte.length)),f+=4,h(R,f,"PLTE"),f+=4,Q=0;Q<H;Q++){const W=3*Q,q=c.plte[Q],V=255&q,te=q>>>8&255,Ce=q>>>16&255;R[f+W+0]=V,R[f+W+1]=te,R[f+W+2]=Ce}if(f+=3*H,w(R,f,T(R,f-3*H-4,3*H+4)),f+=4,N){for(w(R,f,H),f+=4,h(R,f,"tRNS"),f+=4,Q=0;Q<H;Q++)R[f+Q]=c.plte[Q]>>>24&255;f+=H,w(R,f,T(R,f-H-4,H+4)),f+=4}}let Y=0;for(L=0;L<c.frames.length;L++){var B=c.frames[L];O&&(w(R,f,26),f+=4,h(R,f,"fcTL"),f+=4,w(R,f,Y++),f+=4,w(R,f,B.rect.width),f+=4,w(R,f,B.rect.height),f+=4,w(R,f,B.rect.x),f+=4,w(R,f,B.rect.y),f+=4,S(R,f,E[L]),f+=2,S(R,f,1e3),f+=2,R[f]=B.dispose,f++,R[f]=B.blend,f++,w(R,f,T(R,f-30,30)),f+=4);const W=B.cimg;w(R,f,(H=W.length)+(L==0?0:4)),f+=4;const q=f;h(R,f,L==0?"IDAT":"fdAT"),f+=4,L!=0&&(w(R,f,Y++),f+=4),R.set(W,f),f+=H,w(R,f,T(R,q,f-q)),f+=4}return w(R,f,0),f+=4,h(R,f,"IEND"),f+=4,w(R,f,T(R,f-4,4)),f+=4,R.buffer}function y(c,u,A){for(let E=0;E<c.frames.length;E++){const I=c.frames[E];I.rect.width;const T=I.rect.height,w=new Uint8Array(T*I.bpl+T);I.cimg=l(I.img,T,I.bpp,I.bpl,w,u,A)}}function r(c,u,A,E,I){const T=I[0],w=I[1],S=I[2],h=I[3],f=I[4],O=I[5];let F=6,N=8,z=255;for(var H=0;H<c.length;H++){const ie=new Uint8Array(c[H]);for(var Q=ie.length,L=0;L<Q;L+=4)z&=ie[L+3]}const R=z!=255,$=function(Z,K,ne,oe,J,ue){const ee=[];for(var j=0;j<Z.length;j++){const ae=new Uint8Array(Z[j]),he=new Uint32Array(ae.buffer);var ce;let de=0,be=0,me=K,Se=ne,Ve=oe?1:0;if(j!=0){const xt=ue||oe||j==1||ee[j-2].dispose!=0?1:2;let Je=0,ut=1e9;for(let Le=0;Le<xt;Le++){var Ue=new Uint8Array(Z[j-1-Le]);const Ot=new Uint32Array(Z[j-1-Le]);let Ie=K,Ee=ne,De=-1,He=-1;for(let Me=0;Me<ne;Me++)for(let _e=0;_e<K;_e++)he[se=Me*K+_e]!=Ot[se]&&(_e<Ie&&(Ie=_e),_e>De&&(De=_e),Me<Ee&&(Ee=Me),Me>He&&(He=Me));De==-1&&(Ie=Ee=De=He=0),J&&((1&Ie)==1&&Ie--,(1&Ee)==1&&Ee--);const ct=(De-Ie+1)*(He-Ee+1);ct<ut&&(ut=ct,Je=Le,de=Ie,be=Ee,me=De-Ie+1,Se=He-Ee+1)}Ue=new Uint8Array(Z[j-1-Je]),Je==1&&(ee[j-1].dispose=2),ce=new Uint8Array(me*Se*4),g(Ue,K,ne,ce,me,Se,-de,-be,0),Ve=g(ae,K,ne,ce,me,Se,-de,-be,3)?1:0,Ve==1?n(ae,K,ne,ce,{x:de,y:be,width:me,height:Se}):g(ae,K,ne,ce,me,Se,-de,-be,0)}else ce=ae.slice(0);ee.push({rect:{x:de,y:be,width:me,height:Se},img:ce,blend:Ve,dispose:0})}if(oe)for(j=0;j<ee.length;j++){if((Fe=ee[j]).blend==1)continue;const ae=Fe.rect,he=ee[j-1].rect,de=Math.min(ae.x,he.x),be=Math.min(ae.y,he.y),me={x:de,y:be,width:Math.max(ae.x+ae.width,he.x+he.width)-de,height:Math.max(ae.y+ae.height,he.y+he.height)-be};ee[j-1].dispose=1,j-1!=0&&s(Z,K,ne,ee,j-1,me,J),s(Z,K,ne,ee,j,me,J)}let $e=0;if(Z.length!=1)for(var se=0;se<ee.length;se++){var Fe;$e+=(Fe=ee[se]).rect.width*Fe.rect.height}return ee}(c,u,A,T,w,S),Y={},B=[],W=[];if(E!=0){const ie=[];for(L=0;L<$.length;L++)ie.push($[L].img.buffer);const Z=function(J){let ue=0;for(var ee=0;ee<J.length;ee++)ue+=J[ee].byteLength;const j=new Uint8Array(ue);let ce=0;for(ee=0;ee<J.length;ee++){const Ue=new Uint8Array(J[ee]),$e=Ue.length;for(let se=0;se<$e;se+=4){let Fe=Ue[se],ae=Ue[se+1],he=Ue[se+2];const de=Ue[se+3];de==0&&(Fe=ae=he=0),j[ce+se]=Fe,j[ce+se+1]=ae,j[ce+se+2]=he,j[ce+se+3]=de}ce+=$e}return j.buffer}(ie),K=C(Z,E);for(L=0;L<K.plte.length;L++)B.push(K.plte[L].est.rgba);let ne=0;for(L=0;L<$.length;L++){const oe=(V=$[L]).img.length;var q=new Uint8Array(K.inds.buffer,ne>>2,oe>>2);W.push(q);const J=new Uint8Array(K.abuf,ne,oe);O&&o(V.img,V.rect.width,V.rect.height,B,J,q),V.img.set(J),ne+=oe}}else for(H=0;H<$.length;H++){var V=$[H];const ie=new Uint32Array(V.img.buffer);var te=V.rect.width;for(Q=ie.length,q=new Uint8Array(Q),W.push(q),L=0;L<Q;L++){const Z=ie[L];if(L!=0&&Z==ie[L-1])q[L]=q[L-1];else if(L>te&&Z==ie[L-te])q[L]=q[L-te];else{let K=Y[Z];if(K==null&&(Y[Z]=K=B.length,B.push(Z),B.length>=300))break;q[L]=K}}}const Ce=B.length;for(Ce<=256&&f==0&&(N=Ce<=2?1:Ce<=4?2:Ce<=16?4:8,N=Math.max(N,h)),H=0;H<$.length;H++){(V=$[H]).rect.x,V.rect.y,te=V.rect.width;const ie=V.rect.height;let Z=V.img;new Uint32Array(Z.buffer);let K=4*te,ne=4;if(Ce<=256&&f==0){K=Math.ceil(N*te/8);var pe=new Uint8Array(K*ie);const oe=W[H];for(let J=0;J<ie;J++){L=J*K;const ue=J*te;if(N==8)for(var X=0;X<te;X++)pe[L+X]=oe[ue+X];else if(N==4)for(X=0;X<te;X++)pe[L+(X>>1)]|=oe[ue+X]<<4-4*(1&X);else if(N==2)for(X=0;X<te;X++)pe[L+(X>>2)]|=oe[ue+X]<<6-2*(3&X);else if(N==1)for(X=0;X<te;X++)pe[L+(X>>3)]|=oe[ue+X]<<7-1*(7&X)}Z=pe,F=3,ne=1}else if(R==0&&$.length==1){pe=new Uint8Array(te*ie*3);const oe=te*ie;for(L=0;L<oe;L++){const J=3*L,ue=4*L;pe[J]=Z[ue],pe[J+1]=Z[ue+1],pe[J+2]=Z[ue+2]}Z=pe,F=2,ne=3,K=3*te}V.img=Z,V.bpl=K,V.bpp=ne}return{ctype:F,depth:N,plte:B,frames:$}}function s(c,u,A,E,I,T,w){const S=Uint8Array,h=Uint32Array,f=new S(c[I-1]),O=new h(c[I-1]),F=I+1<c.length?new S(c[I+1]):null,N=new S(c[I]),z=new h(N.buffer);let H=u,Q=A,L=-1,R=-1;for(let Y=0;Y<T.height;Y++)for(let B=0;B<T.width;B++){const W=T.x+B,q=T.y+Y,V=q*u+W,te=z[V];te==0||E[I-1].dispose==0&&O[V]==te&&(F==null||F[4*V+3]!=0)||(W<H&&(H=W),W>L&&(L=W),q<Q&&(Q=q),q>R&&(R=q))}L==-1&&(H=Q=L=R=0),w&&((1&H)==1&&H--,(1&Q)==1&&Q--),T={x:H,y:Q,width:L-H+1,height:R-Q+1};const $=E[I];$.rect=T,$.blend=1,$.img=new Uint8Array(T.width*T.height*4),E[I-1].dispose==0?(g(f,u,A,$.img,T.width,T.height,-T.x,-T.y,0),n(N,u,A,$.img,T)):g(N,u,A,$.img,T.width,T.height,-T.x,-T.y,0)}function n(c,u,A,E,I){g(c,u,A,E,I.width,I.height,-I.x,-I.y,2)}function l(c,u,A,E,I,T,w){const S=[];let h,f=[0,1,2,3,4];T!=-1?f=[T]:(u*E>5e5||A==1)&&(f=[0]),w&&(h={level:0});const O=ln;for(var F=0;F<f.length;F++){for(let H=0;H<u;H++)m(I,c,H,E,A,f[F]);S.push(O.deflate(I,h))}let N,z=1e9;for(F=0;F<S.length;F++)S[F].length<z&&(N=F,z=S[F].length);return S[N]}function m(c,u,A,E,I,T){const w=A*E;let S=w+A;if(c[S]=T,S++,T==0)if(E<500)for(var h=0;h<E;h++)c[S+h]=u[w+h];else c.set(new Uint8Array(u.buffer,w,E),S);else if(T==1){for(h=0;h<I;h++)c[S+h]=u[w+h];for(h=I;h<E;h++)c[S+h]=u[w+h]-u[w+h-I]+256&255}else if(A==0){for(h=0;h<I;h++)c[S+h]=u[w+h];if(T==2)for(h=I;h<E;h++)c[S+h]=u[w+h];if(T==3)for(h=I;h<E;h++)c[S+h]=u[w+h]-(u[w+h-I]>>1)+256&255;if(T==4)for(h=I;h<E;h++)c[S+h]=u[w+h]-b(u[w+h-I],0,0)+256&255}else{if(T==2)for(h=0;h<E;h++)c[S+h]=u[w+h]+256-u[w+h-E]&255;if(T==3){for(h=0;h<I;h++)c[S+h]=u[w+h]+256-(u[w+h-E]>>1)&255;for(h=I;h<E;h++)c[S+h]=u[w+h]+256-(u[w+h-E]+u[w+h-I]>>1)&255}if(T==4){for(h=0;h<I;h++)c[S+h]=u[w+h]+256-b(0,u[w+h-E],0)&255;for(h=I;h<E;h++)c[S+h]=u[w+h]+256-b(u[w+h-I],u[w+h-E],u[w+h-I-E])&255}}}function C(c,u){const A=new Uint8Array(c),E=A.slice(0),I=new Uint32Array(E.buffer),T=_(E,u),w=T[0],S=T[1],h=A.length,f=new Uint8Array(h>>2);let O;if(A.length<2e7)for(var F=0;F<h;F+=4)O=U(w,N=A[F]*(1/255),z=A[F+1]*(1/255),H=A[F+2]*(1/255),Q=A[F+3]*(1/255)),f[F>>2]=O.ind,I[F>>2]=O.est.rgba;else for(F=0;F<h;F+=4){var N=A[F]*.00392156862745098,z=A[F+1]*(1/255),H=A[F+2]*(1/255),Q=A[F+3]*(1/255);for(O=w;O.left;)O=P(O.est,N,z,H,Q)<=0?O.left:O.right;f[F>>2]=O.ind,I[F>>2]=O.est.rgba}return{abuf:E.buffer,inds:f,plte:S}}function _(c,u,A){A==null&&(A=1e-4);const E=new Uint32Array(c.buffer),I={i0:0,i1:c.length,bst:null,est:null,tdst:0,left:null,right:null};I.bst=k(c,I.i0,I.i1),I.est=v(I.bst);const T=[I];for(;T.length<u;){let S=0,h=0;for(var w=0;w<T.length;w++)T[w].est.L>S&&(S=T[w].est.L,h=w);if(S<A)break;const f=T[h],O=x(c,E,f.i0,f.i1,f.est.e,f.est.eMq255);if(f.i0>=O||f.i1<=O){f.est.L=0;continue}const F={i0:f.i0,i1:O,bst:null,est:null,tdst:0,left:null,right:null};F.bst=k(c,F.i0,F.i1),F.est=v(F.bst);const N={i0:O,i1:f.i1,bst:null,est:null,tdst:0,left:null,right:null};for(N.bst={R:[],m:[],N:f.bst.N-F.bst.N},w=0;w<16;w++)N.bst.R[w]=f.bst.R[w]-F.bst.R[w];for(w=0;w<4;w++)N.bst.m[w]=f.bst.m[w]-F.bst.m[w];N.est=v(N.bst),f.left=F,f.right=N,T[h]=F,T.push(N)}for(T.sort((S,h)=>h.bst.N-S.bst.N),w=0;w<T.length;w++)T[w].ind=w;return[I,T]}function U(c,u,A,E,I){if(c.left==null)return c.tdst=function(F,N,z,H,Q){const L=N-F[0],R=z-F[1],$=H-F[2],Y=Q-F[3];return L*L+R*R+$*$+Y*Y}(c.est.q,u,A,E,I),c;const T=P(c.est,u,A,E,I);let w=c.left,S=c.right;T>0&&(w=c.right,S=c.left);const h=U(w,u,A,E,I);if(h.tdst<=T*T)return h;const f=U(S,u,A,E,I);return f.tdst<h.tdst?f:h}function P(c,u,A,E,I){const{e:T}=c;return T[0]*u+T[1]*A+T[2]*E+T[3]*I-c.eMq}function x(c,u,A,E,I,T){for(E-=4;A<E;){for(;M(c,A,I)<=T;)A+=4;for(;M(c,E,I)>T;)E-=4;if(A>=E)break;const w=u[A>>2];u[A>>2]=u[E>>2],u[E>>2]=w,A+=4,E-=4}for(;M(c,A,I)>T;)A-=4;return A+4}function M(c,u,A){return c[u]*A[0]+c[u+1]*A[1]+c[u+2]*A[2]+c[u+3]*A[3]}function k(c,u,A){const E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],I=[0,0,0,0],T=A-u>>2;for(let w=u;w<A;w+=4){const S=c[w]*.00392156862745098,h=c[w+1]*(1/255),f=c[w+2]*(1/255),O=c[w+3]*(1/255);I[0]+=S,I[1]+=h,I[2]+=f,I[3]+=O,E[0]+=S*S,E[1]+=S*h,E[2]+=S*f,E[3]+=S*O,E[5]+=h*h,E[6]+=h*f,E[7]+=h*O,E[10]+=f*f,E[11]+=f*O,E[15]+=O*O}return E[4]=E[1],E[8]=E[2],E[9]=E[6],E[12]=E[3],E[13]=E[7],E[14]=E[11],{R:E,m:I,N:T}}function v(c){const{R:u}=c,{m:A}=c,{N:E}=c,I=A[0],T=A[1],w=A[2],S=A[3],h=E==0?0:1/E,f=[u[0]-I*I*h,u[1]-I*T*h,u[2]-I*w*h,u[3]-I*S*h,u[4]-T*I*h,u[5]-T*T*h,u[6]-T*w*h,u[7]-T*S*h,u[8]-w*I*h,u[9]-w*T*h,u[10]-w*w*h,u[11]-w*S*h,u[12]-S*I*h,u[13]-S*T*h,u[14]-S*w*h,u[15]-S*S*h],O=f,F=D;let N=[Math.random(),Math.random(),Math.random(),Math.random()],z=0,H=0;if(E!=0)for(let L=0;L<16&&(N=F.multVec(O,N),H=Math.sqrt(F.dot(N,N)),N=F.sml(1/H,N),!(L!=0&&Math.abs(H-z)<1e-9));L++)z=H;const Q=[I*h,T*h,w*h,S*h];return{Cov:f,q:Q,e:N,L:z,eMq255:F.dot(F.sml(255,Q),N),eMq:F.dot(N,Q),rgba:(Math.round(255*Q[3])<<24|Math.round(255*Q[2])<<16|Math.round(255*Q[1])<<8|Math.round(255*Q[0])<<0)>>>0}}var D={multVec:(c,u)=>[c[0]*u[0]+c[1]*u[1]+c[2]*u[2]+c[3]*u[3],c[4]*u[0]+c[5]*u[1]+c[6]*u[2]+c[7]*u[3],c[8]*u[0]+c[9]*u[1]+c[10]*u[2]+c[11]*u[3],c[12]*u[0]+c[13]*u[1]+c[14]*u[2]+c[15]*u[3]],dot:(c,u)=>c[0]*u[0]+c[1]*u[1]+c[2]*u[2]+c[3]*u[3],sml:(c,u)=>[c*u[0],c*u[1],c*u[2],c*u[3]]};ge.encode=function(u,A,E,I,T,w,S){I==null&&(I=0),S==null&&(S=!1);const h=r(u,A,E,I,[!1,!1,!1,0,S,!1]);return y(h,-1),p(h,A,E,T,w)},ge.encodeLL=function(u,A,E,I,T,w,S,h){const f={ctype:0+(I==1?0:2)+(T==0?0:4),depth:w,frames:[]},O=(I+T)*w,F=O*A;for(let N=0;N<u.length;N++)f.frames.push({rect:{x:0,y:0,width:A,height:E},img:new Uint8Array(u[N]),blend:0,dispose:1,bpp:Math.ceil(O/8),bpl:Math.ceil(F/8)});return y(f,0,!0),p(f,A,E,S,h)},ge.encode.compress=r,ge.encode.dither=o,ge.quantize=C,ge.quantize.getKDtree=_,ge.quantize.getNearest=U})();const Ut={toArrayBuffer(g,d){const b=g.width,i=g.height,e=b<<2,t=g.getContext("2d").getImageData(0,0,b,i),a=new Uint32Array(t.data.buffer),o=(32*b+31)/32<<2,p=o*i,y=122+p,r=new ArrayBuffer(y),s=new DataView(r),n=1<<20;let l,m,C,_,U=n,P=0,x=0,M=0;function k(c){s.setUint16(x,c,!0),x+=2}function v(c){s.setUint32(x,c,!0),x+=4}function D(c){x+=c}k(19778),v(y),D(4),v(122),v(108),v(b),v(-i>>>0),k(1),k(32),v(3),v(p),v(2835),v(2835),D(8),v(16711680),v(65280),v(255),v(4278190080),v(1466527264),function c(){for(;P<i&&U>0;){for(_=122+P*o,l=0;l<e;)U--,m=a[M++],C=m>>>24,s.setUint32(_+l,m<<8|C),l+=4;P++}M<a.length?(U=n,setTimeout(c,Ut._dly)):d(r)}()},toBlob(g,d){this.toArrayBuffer(g,b=>{d(new Blob([b],{type:"image/bmp"}))})},_dly:9};var le={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},un={[le.CHROME]:16384,[le.FIREFOX]:11180,[le.DESKTOP_SAFARI]:16384,[le.IE]:8192,[le.IOS]:4096,[le.ETC]:8192};const ft=typeof window<"u",It=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,je=ft&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),cn=(ft||It)&&(je&&je.getOriginalSymbol(window,"File")||typeof File<"u"&&File),Et=(ft||It)&&(je&&je.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function lt(g,d,b=Date.now()){return new Promise(i=>{const e=g.split(","),t=e[0].match(/:(.*?);/)[1],a=globalThis.atob(e[1]);let o=a.length;const p=new Uint8Array(o);for(;o--;)p[o]=a.charCodeAt(o);const y=new Blob([p],{type:t});y.name=d,y.lastModified=b,i(y)})}function Tt(g){return new Promise((d,b)=>{const i=new Et;i.onload=()=>d(i.result),i.onerror=e=>b(e),i.readAsDataURL(g)})}function Ct(g){return new Promise((d,b)=>{const i=new Image;i.onload=()=>d(i),i.onerror=e=>b(e),i.src=g})}function Re(){if(Re.cachedResult!==void 0)return Re.cachedResult;let g=le.ETC;const{userAgent:d}=navigator;return/Chrom(e|ium)/i.test(d)?g=le.CHROME:/iP(ad|od|hone)/i.test(d)&&/WebKit/i.test(d)?g=le.IOS:/Safari/i.test(d)?g=le.DESKTOP_SAFARI:/Firefox/i.test(d)?g=le.FIREFOX:(/MSIE/i.test(d)||document.documentMode)&&(g=le.IE),Re.cachedResult=g,Re.cachedResult}function Ft(g,d){const b=Re(),i=un[b];let e=g,t=d,a=e*t;const o=e>t?t/e:e/t;for(;a>i*i;){const p=(i+e)/2,y=(i+t)/2;p<y?(t=y,e=y*o):(t=p*o,e=p),a=e*t}return{width:e,height:t}}function Xe(g,d){let b,i;try{if(b=new OffscreenCanvas(g,d),i=b.getContext("2d"),i===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{b=document.createElement("canvas"),i=b.getContext("2d")}return b.width=g,b.height=d,[b,i]}function St(g,d){const{width:b,height:i}=Ft(g.width,g.height),[e,t]=Xe(b,i);return d&&/jpe?g/.test(d)&&(t.fillStyle="white",t.fillRect(0,0,e.width,e.height)),t.drawImage(g,0,0,e.width,e.height),e}function qe(){return qe.cachedResult!==void 0||(qe.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),qe.cachedResult}function Ye(g,d={}){return new Promise(function(b,i){let e,t;var a=function(){try{return t=St(e,d.fileType||g.type),b([e,t])}catch(p){return i(p)}},o=function(p){try{var y=function(r){try{throw r}catch(s){return i(s)}};try{let r;return Tt(g).then(function(s){try{return r=s,Ct(r).then(function(n){try{return e=n,function(){try{return a()}catch(l){return i(l)}}()}catch(l){return y(l)}},y)}catch(n){return y(n)}},y)}catch(r){y(r)}}catch(r){return i(r)}};try{if(qe()||[le.DESKTOP_SAFARI,le.MOBILE_SAFARI].includes(Re()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(g).then(function(p){try{return e=p,a()}catch{return o()}},o)}catch{o()}})}function Ze(g,d,b,i,e=1){return new Promise(function(t,a){let o;if(d==="image/png"){let y,r,s;return y=g.getContext("2d"),{data:r}=y.getImageData(0,0,g.width,g.height),s=ge.encode([r.buffer],g.width,g.height,4096*e),o=new Blob([s],{type:d}),o.name=b,o.lastModified=i,p.call(this)}{let y=function(){return p.call(this)};if(d==="image/bmp")return new Promise(r=>Ut.toBlob(g,r)).then((function(r){try{return o=r,o.name=b,o.lastModified=i,y.call(this)}catch(s){return a(s)}}).bind(this),a);{let r=function(){return y.call(this)};if(typeof OffscreenCanvas=="function"&&g instanceof OffscreenCanvas)return g.convertToBlob({type:d,quality:e}).then((function(s){try{return o=s,o.name=b,o.lastModified=i,r.call(this)}catch(n){return a(n)}}).bind(this),a);{let s;return s=g.toDataURL(d,e),lt(s,b,i).then((function(n){try{return o=n,r.call(this)}catch(l){return a(l)}}).bind(this),a)}}}function p(){return t(o)}})}function ve(g){g.width=0,g.height=0}function ke(){return new Promise(function(g,d){let b,i,e,t;return ke.cachedResult!==void 0?g(ke.cachedResult):lt("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(a){try{return b=a,Ye(b).then(function(o){try{return i=o[1],Ze(i,b.type,b.name,b.lastModified).then(function(p){try{return e=p,ve(i),Ye(e).then(function(y){try{return t=y[0],ke.cachedResult=t.width===1&&t.height===2,g(ke.cachedResult)}catch(r){return d(r)}},d)}catch(y){return d(y)}},d)}catch(p){return d(p)}},d)}catch(o){return d(o)}},d)})}function Mt(g){return new Promise((d,b)=>{const i=new Et;i.onload=e=>{const t=new DataView(e.target.result);if(t.getUint16(0,!1)!=65496)return d(-2);const a=t.byteLength;let o=2;for(;o<a;){if(t.getUint16(o+2,!1)<=8)return d(-1);const p=t.getUint16(o,!1);if(o+=2,p==65505){if(t.getUint32(o+=2,!1)!=1165519206)return d(-1);const y=t.getUint16(o+=6,!1)==18761;o+=t.getUint32(o+4,y);const r=t.getUint16(o,y);o+=2;for(let s=0;s<r;s++)if(t.getUint16(o+12*s,y)==274)return d(t.getUint16(o+12*s+8,y))}else{if((65280&p)!=65280)break;o+=t.getUint16(o,!1)}}return d(-1)},i.onerror=e=>b(e),i.readAsArrayBuffer(g)})}function _t(g,d){const{width:b}=g,{height:i}=g,{maxWidthOrHeight:e}=d;let t,a=g;return isFinite(e)&&(b>e||i>e)&&([a,t]=Xe(b,i),b>i?(a.width=e,a.height=i/b*e):(a.width=b/i*e,a.height=e),t.drawImage(g,0,0,a.width,a.height),ve(g)),a}function Rt(g,d){const{width:b}=g,{height:i}=g,[e,t]=Xe(b,i);switch(d>4&&d<9?(e.width=i,e.height=b):(e.width=b,e.height=i),d){case 2:t.transform(-1,0,0,1,b,0);break;case 3:t.transform(-1,0,0,-1,b,i);break;case 4:t.transform(1,0,0,-1,0,i);break;case 5:t.transform(0,1,1,0,0,0);break;case 6:t.transform(0,1,-1,0,i,0);break;case 7:t.transform(0,-1,-1,0,i,b);break;case 8:t.transform(0,-1,1,0,0,b)}return t.drawImage(g,0,0,b,i),ve(g),e}function gt(g,d,b=0){return new Promise(function(i,e){let t,a,o,p,y,r,s,n,l,m,C,_,U,P,x,M,k,v,D,c;function u(E=5){if(d.signal&&d.signal.aborted)throw d.signal.reason;t+=E,d.onProgress(Math.min(t,100))}function A(E){if(d.signal&&d.signal.aborted)throw d.signal.reason;t=Math.min(Math.max(E,t),100),d.onProgress(t)}return t=b,a=d.maxIteration||10,o=1024*d.maxSizeMB*1024,u(),Ye(g,d).then((function(E){try{return[,p]=E,u(),y=_t(p,d),u(),new Promise(function(I,T){var w;if(!(w=d.exifOrientation))return Mt(g).then((function(h){try{return w=h,S.call(this)}catch(f){return T(f)}}).bind(this),T);function S(){return I(w)}return S.call(this)}).then((function(I){try{return r=I,u(),ke().then((function(T){try{return s=T?y:Rt(y,r),u(),n=d.initialQuality||1,l=d.fileType||g.type,Ze(s,l,g.name,g.lastModified,n).then((function(w){try{{let h=function(){if(a--&&(x>o||x>U)){let O,F;return O=c?.95*D.width:D.width,F=c?.95*D.height:D.height,[k,v]=Xe(O,F),v.drawImage(D,0,0,O,F),n*=l==="image/png"?.85:.95,Ze(k,l,g.name,g.lastModified,n).then(function(N){try{return M=N,ve(D),D=k,x=M.size,A(Math.min(99,Math.floor((P-x)/(P-o)*100))),h}catch(z){return e(z)}},e)}return[1]},f=function(){return ve(D),ve(k),ve(y),ve(s),ve(p),A(100),i(M)};if(m=w,u(),C=m.size>o,_=m.size>g.size,!C&&!_)return A(100),i(m);var S;return U=g.size,P=m.size,x=P,D=s,c=!d.alwaysKeepResolution&&C,(S=(function(O){for(;O;){if(O.then)return void O.then(S,e);try{if(O.pop){if(O.length)return O.pop()?f.call(this):O;O=h}else O=O.call(this)}catch(F){return e(F)}}}).bind(this))(h)}}catch(h){return e(h)}}).bind(this),e)}catch(w){return e(w)}}).bind(this),e)}catch(T){return e(T)}}).bind(this),e)}catch(I){return e(I)}}).bind(this),e)})}const dn=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let nt;function hn(g,d){return new Promise((b,i)=>{nt||(nt=function(a){const o=[];return o.push(a),URL.createObjectURL(new Blob(o))}(dn));const e=new Worker(nt);e.addEventListener("message",function(a){if(d.signal&&d.signal.aborted)e.terminate();else if(a.data.progress===void 0){if(a.data.error)return i(new Error(a.data.error)),void e.terminate();b(a.data.file),e.terminate()}else d.onProgress(a.data.progress)}),e.addEventListener("error",i),d.signal&&d.signal.addEventListener("abort",()=>{i(d.signal.reason),e.terminate()}),e.postMessage({file:g,imageCompressionLibUrl:d.libURL,options:{...d,onProgress:void 0,signal:void 0}})})}function re(g,d){return new Promise(function(b,i){let e,t,a,o,p,y;if(e={...d},a=0,{onProgress:o}=e,e.maxSizeMB=e.maxSizeMB||Number.POSITIVE_INFINITY,p=typeof e.useWebWorker!="boolean"||e.useWebWorker,delete e.useWebWorker,e.onProgress=l=>{a=l,typeof o=="function"&&o(a)},!(g instanceof Blob||g instanceof cn))return i(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(g.type))return i(new Error("The file given is not an image"));if(y=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!p||typeof Worker!="function"||y)return gt(g,e).then((function(l){try{return t=l,n.call(this)}catch(m){return i(m)}}).bind(this),i);var r=(function(){try{return n.call(this)}catch(l){return i(l)}}).bind(this),s=function(l){try{return gt(g,e).then(function(m){try{return t=m,r()}catch(C){return i(C)}},i)}catch(m){return i(m)}};try{return e.libURL=e.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",hn(g,e).then(function(l){try{return t=l,r()}catch{return s()}},s)}catch{s()}function n(){try{t.name=g.name,t.lastModified=g.lastModified}catch{}try{e.preserveExif&&g.type==="image/jpeg"&&(!e.fileType||e.fileType&&e.fileType===g.type)&&(t=At(g,t))}catch{}return b(t)}})}re.getDataUrlFromFile=Tt,re.getFilefromDataUrl=lt,re.loadImage=Ct,re.drawImageInCanvas=St,re.drawFileInCanvas=Ye,re.canvasToFile=Ze,re.getExifOrientation=Mt,re.handleMaxWidthOrHeight=_t,re.followExifOrientation=Rt,re.cleanupCanvasMemory=ve,re.isAutoOrientationInBrowser=ke,re.approximateBelowMaximumCanvasSizeOfBrowser=Ft,re.copyExifWithoutOrientation=At,re.getBrowserName=Re,re.version="2.0.2";const st=g=>!g||g.length<12?null:{tradeId:g[0],date:g[1],time:g[2],amount:parseFloat(g[3])||0,tagId:g[4],tagName:g[5],tagColor:g[6],tagEmoji:g[7],driveImageId:g[8]||null,notes:g[9]||"",createdAt:g[10],updatedAt:g[11]},Dt=async()=>{const g=localStorage.getItem(ot.SHEET_ID);if(!g)return[];try{return((await window.gapi.client.sheets.spreadsheets.values.get({spreadsheetId:g,range:`${Pe.TRADES}!A2:L`})).result.values||[]).map(st).filter(Boolean)}catch(d){return console.error("Failed to fetch trades:",d),[]}},gn=async(g,d)=>(await Dt()).filter(i=>{const[e,t]=i.date.split("-").map(Number);return e===g&&t===d+1}),pn=async g=>{const d=await rt.getOrCreateSpreadsheet();let b=null;if(g.screenshot){const t=await re(g.screenshot,{maxSizeMB:1,maxWidthOrHeight:1200,useWebWorker:!0}),a=`${g.tradeId}_${g.date}.jpg`;b=await rt.uploadImage(t,a)}const i=new Date().toISOString(),e=[g.tradeId,g.date,g.time,g.amount,g.tagId,g.tagName,g.tagColor,g.tagEmoji,b||"",g.notes||"",i,i];return await window.gapi.client.sheets.spreadsheets.values.append({spreadsheetId:d,range:`${Pe.TRADES}!A:L`,valueInputOption:"USER_ENTERED",resource:{values:[e]}}),{...g,driveImageId:b,createdAt:i,updatedAt:i}},mn=async({tradeId:g,updates:d})=>{const b=localStorage.getItem(ot.SHEET_ID),t=((await window.gapi.client.sheets.spreadsheets.values.get({spreadsheetId:b,range:`${Pe.TRADES}!A:A`})).result.values||[]).findIndex(n=>n[0]===g);if(t===-1)throw new Error("Trade not found");const o=(await window.gapi.client.sheets.spreadsheets.values.get({spreadsheetId:b,range:`${Pe.TRADES}!A${t+1}:L${t+1}`})).result.values[0],p=st(o);let y=p.driveImageId;if(d.screenshot){const n=await re(d.screenshot,{maxSizeMB:1,maxWidthOrHeight:1200,useWebWorker:!0}),l=`${g}_${d.date||p.date}.jpg`;y=await rt.uploadImage(n,l)}const r=new Date().toISOString(),s=[g,d.date||p.date,d.time||p.time,d.amount!==void 0?d.amount:p.amount,d.tagId||p.tagId,d.tagName||p.tagName,d.tagColor||p.tagColor,d.tagEmoji||p.tagEmoji,y||"",d.notes!==void 0?d.notes:p.notes,p.createdAt,r];return await window.gapi.client.sheets.spreadsheets.values.update({spreadsheetId:b,range:`${Pe.TRADES}!A${t+1}:L${t+1}`,valueInputOption:"USER_ENTERED",resource:{values:[s]}}),st(s)},vn=async g=>{const d=localStorage.getItem(ot.SHEET_ID),e=((await window.gapi.client.sheets.spreadsheets.values.get({spreadsheetId:d,range:`${Pe.TRADES}!A:A`})).result.values||[]).findIndex(t=>t[0]===g);if(e===-1)throw new Error("Trade not found");await window.gapi.client.sheets.spreadsheets.batchUpdate({spreadsheetId:d,resource:{requests:[{deleteDimension:{range:{sheetId:0,dimension:"ROWS",startIndex:e,endIndex:e+1}}}]}})},Fn=()=>mt({queryKey:["trades"],queryFn:Dt,staleTime:5*60*1e3,cacheTime:30*60*1e3}),Sn=(g,d)=>mt({queryKey:["trades",g,d],queryFn:()=>gn(g,d),staleTime:5*60*1e3}),Mn=()=>{const g=Ge();return at({mutationFn:pn,onMutate:async d=>{await g.cancelQueries({queryKey:["trades"]});const b=g.getQueryData(["trades"]);return b&&g.setQueryData(["trades"],i=>[...i||[],d]),{previousTrades:b}},onError:(d,b,i)=>{i!=null&&i.previousTrades&&g.setQueryData(["trades"],i.previousTrades)},onSettled:()=>{g.invalidateQueries({queryKey:["trades"]})}})},_n=()=>{const g=Ge();return at({mutationFn:mn,onSuccess:()=>{g.invalidateQueries({queryKey:["trades"]})}})},Rn=()=>{const g=Ge();return at({mutationFn:vn,onMutate:async d=>{await g.cancelQueries({queryKey:["trades"]});const b=g.getQueryData(["trades"]);return b&&g.setQueryData(["trades"],i=>(i||[]).filter(e=>e.tradeId!==d)),{previousTrades:b}},onError:(d,b,i)=>{i!=null&&i.previousTrades&&g.setQueryData(["trades"],i.previousTrades)},onSettled:()=>{g.invalidateQueries({queryKey:["trades"]})}})};export{An as a,Mn as b,Tn as c,_n as d,Rn as e,En as f,Cn as g,In as h,Sn as i,Un as m,Fn as u};
