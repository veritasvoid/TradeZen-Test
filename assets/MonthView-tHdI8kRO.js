import{c as we,j as c,d as Pt,R as z,e as dt,r as be,Q as rr,X as sr,f as nr,b as ar,L as ir}from"./index-CxPWYOC1.js";import{a as or,b as cr,c as lr}from"./useTrades-BHk4I1qg.js";import{P as ur,M as $e,S as dr,T as fr,u as hr}from"./Modal-CusBYwUf.js";import{H as ft}from"./Header-DnWHT1ff.js";import{B as ve}from"./Button-BBpB6Fnu.js";import{t as B,s as ht,m as mr,a as Vt,b as Qe,g as yr,d as gr,e as xr,h as br,f as Et,i as mt,j as vr}from"./utils-DVdcGlwm.js";import{u as ze}from"./settingsStore-Cm1O6YjP.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=we("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=we("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=we("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=we("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=we("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=we("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);function ce(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function Ct(e,t){const r=B(e);if(isNaN(t))return ce(e,NaN);if(!t)return r;const s=r.getDate(),a=ce(e,r.getTime());a.setMonth(r.getMonth()+t+1,0);const i=a.getDate();return s>=i?a:(r.setFullYear(a.getFullYear(),a.getMonth(),s),r)}let Mr={};function Ce(){return Mr}function Se(e,t){var d,v,p,O;const r=Ce(),s=(t==null?void 0:t.weekStartsOn)??((v=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:v.weekStartsOn)??r.weekStartsOn??((O=(p=r.locale)==null?void 0:p.options)==null?void 0:O.weekStartsOn)??0,a=B(e),i=a.getDay(),l=(i<s?7:0)+i-s;return a.setDate(a.getDate()-l),a.setHours(0,0,0,0),a}function Pe(e){return Se(e,{weekStartsOn:1})}function At(e){const t=B(e),r=t.getFullYear(),s=ce(e,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const a=Pe(s),i=ce(e,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const l=Pe(i);return t.getTime()>=a.getTime()?r+1:t.getTime()>=l.getTime()?r:r-1}function yt(e){const t=B(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function Fr(e,t){const r=ht(e),s=ht(t),a=+r-yt(r),i=+s-yt(s);return Math.round((a-i)/mr)}function Sr(e){const t=At(e),r=ce(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Pe(r)}function Tr(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Or(e){if(!Tr(e)&&typeof e!="number")return!1;const t=B(e);return!isNaN(Number(t))}function _r(e){const t=B(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function Pr(e,t){const r=B(e.start),s=B(e.end);let a=+r>+s;const i=a?+r:+s,l=a?s:r;l.setHours(0,0,0,0);let d=1;const v=[];for(;+l<=i;)v.push(B(l)),l.setDate(l.getDate()+d),l.setHours(0,0,0,0);return a?v.reverse():v}function Vr(e){const t=B(e);return t.setDate(1),t.setHours(0,0,0,0),t}function Er(e){const t=B(e),r=ce(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}const Cr={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Ar=(e,t,r)=>{let s;const a=Cr[e];return typeof a=="string"?s=a:t===1?s=a.one:s=a.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};function qe(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const Wr={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Ir={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Lr={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Yr={date:qe({formats:Wr,defaultWidth:"full"}),time:qe({formats:Ir,defaultWidth:"full"}),dateTime:qe({formats:Lr,defaultWidth:"full"})},Rr={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},qr=(e,t,r,s)=>Rr[e];function De(e){return(t,r)=>{const s=r!=null&&r.context?String(r.context):"standalone";let a;if(s==="formatting"&&e.formattingValues){const l=e.defaultFormattingWidth||e.defaultWidth,d=r!=null&&r.width?String(r.width):l;a=e.formattingValues[d]||e.formattingValues[l]}else{const l=e.defaultWidth,d=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[d]||e.values[l]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const Ur={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Br={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Hr={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},$r={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Qr={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},zr={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Xr=(e,t)=>{const r=Number(e),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Gr={ordinalNumber:Xr,era:De({values:Ur,defaultWidth:"wide"}),quarter:De({values:Br,defaultWidth:"wide",argumentCallback:e=>e-1}),month:De({values:Hr,defaultWidth:"wide"}),day:De({values:$r,defaultWidth:"wide"}),dayPeriod:De({values:Qr,defaultWidth:"wide",formattingValues:zr,defaultFormattingWidth:"wide"})};function je(e){return(t,r={})=>{const s=r.width,a=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const l=i[0],d=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],v=Array.isArray(d)?Kr(d,D=>D.test(l)):Jr(d,D=>D.test(l));let p;p=e.valueCallback?e.valueCallback(v):v,p=r.valueCallback?r.valueCallback(p):p;const O=t.slice(l.length);return{value:p,rest:O}}}function Jr(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function Kr(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function Zr(e){return(t,r={})=>{const s=t.match(e.matchPattern);if(!s)return null;const a=s[0],i=t.match(e.parsePattern);if(!i)return null;let l=e.valueCallback?e.valueCallback(i[0]):i[0];l=r.valueCallback?r.valueCallback(l):l;const d=t.slice(a.length);return{value:l,rest:d}}}const es=/^(\d+)(th|st|nd|rd)?/i,ts=/\d+/i,rs={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ss={any:[/^b/i,/^(a|c)/i]},ns={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},as={any:[/1/i,/2/i,/3/i,/4/i]},is={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},os={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},cs={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},ls={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},us={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},ds={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},fs={ordinalNumber:Zr({matchPattern:es,parsePattern:ts,valueCallback:e=>parseInt(e,10)}),era:je({matchPatterns:rs,defaultMatchWidth:"wide",parsePatterns:ss,defaultParseWidth:"any"}),quarter:je({matchPatterns:ns,defaultMatchWidth:"wide",parsePatterns:as,defaultParseWidth:"any",valueCallback:e=>e+1}),month:je({matchPatterns:is,defaultMatchWidth:"wide",parsePatterns:os,defaultParseWidth:"any"}),day:je({matchPatterns:cs,defaultMatchWidth:"wide",parsePatterns:ls,defaultParseWidth:"any"}),dayPeriod:je({matchPatterns:us,defaultMatchWidth:"any",parsePatterns:ds,defaultParseWidth:"any"})},hs={code:"en-US",formatDistance:Ar,formatLong:Yr,formatRelative:qr,localize:Gr,match:fs,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ms(e){const t=B(e);return Fr(t,Er(t))+1}function ys(e){const t=B(e),r=+Pe(t)-+Sr(t);return Math.round(r/Vt)+1}function Wt(e,t){var O,D,N,b;const r=B(e),s=r.getFullYear(),a=Ce(),i=(t==null?void 0:t.firstWeekContainsDate)??((D=(O=t==null?void 0:t.locale)==null?void 0:O.options)==null?void 0:D.firstWeekContainsDate)??a.firstWeekContainsDate??((b=(N=a.locale)==null?void 0:N.options)==null?void 0:b.firstWeekContainsDate)??1,l=ce(e,0);l.setFullYear(s+1,0,i),l.setHours(0,0,0,0);const d=Se(l,t),v=ce(e,0);v.setFullYear(s,0,i),v.setHours(0,0,0,0);const p=Se(v,t);return r.getTime()>=d.getTime()?s+1:r.getTime()>=p.getTime()?s:s-1}function gs(e,t){var d,v,p,O;const r=Ce(),s=(t==null?void 0:t.firstWeekContainsDate)??((v=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:v.firstWeekContainsDate)??r.firstWeekContainsDate??((O=(p=r.locale)==null?void 0:p.options)==null?void 0:O.firstWeekContainsDate)??1,a=Wt(e,t),i=ce(e,0);return i.setFullYear(a,0,s),i.setHours(0,0,0,0),Se(i,t)}function xs(e,t){const r=B(e),s=+Se(r,t)-+gs(r,t);return Math.round(s/Vt)+1}function T(e,t){const r=e<0?"-":"",s=Math.abs(e).toString().padStart(t,"0");return r+s}const ue={y(e,t){const r=e.getFullYear(),s=r>0?r:1-r;return T(t==="yy"?s%100:s,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):T(r+1,2)},d(e,t){return T(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return T(e.getHours()%12||12,t.length)},H(e,t){return T(e.getHours(),t.length)},m(e,t){return T(e.getMinutes(),t.length)},s(e,t){return T(e.getSeconds(),t.length)},S(e,t){const r=t.length,s=e.getMilliseconds(),a=Math.trunc(s*Math.pow(10,r-3));return T(a,t.length)}},ye={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},gt={G:function(e,t,r){const s=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});case"GGGG":default:return r.era(s,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const s=e.getFullYear(),a=s>0?s:1-s;return r.ordinalNumber(a,{unit:"year"})}return ue.y(e,t)},Y:function(e,t,r,s){const a=Wt(e,s),i=a>0?a:1-a;if(t==="YY"){const l=i%100;return T(l,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):T(i,t.length)},R:function(e,t){const r=At(e);return T(r,t.length)},u:function(e,t){const r=e.getFullYear();return T(r,t.length)},Q:function(e,t,r){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(s);case"QQ":return T(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,t,r){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(s);case"qq":return T(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,t,r){const s=e.getMonth();switch(t){case"M":case"MM":return ue.M(e,t);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(e,t,r){const s=e.getMonth();switch(t){case"L":return String(s+1);case"LL":return T(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(e,t,r,s){const a=xs(e,s);return t==="wo"?r.ordinalNumber(a,{unit:"week"}):T(a,t.length)},I:function(e,t,r){const s=ys(e);return t==="Io"?r.ordinalNumber(s,{unit:"week"}):T(s,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):ue.d(e,t)},D:function(e,t,r){const s=ms(e);return t==="Do"?r.ordinalNumber(s,{unit:"dayOfYear"}):T(s,t.length)},E:function(e,t,r){const s=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});case"EEEE":default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(e,t,r,s){const a=e.getDay(),i=(a-s.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return T(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,s){const a=e.getDay(),i=(a-s.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return T(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const s=e.getDay(),a=s===0?7:s;switch(t){case"i":return String(a);case"ii":return T(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});case"iiii":default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(e,t,r){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){const s=e.getHours();let a;switch(s===12?a=ye.noon:s===0?a=ye.midnight:a=s/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const s=e.getHours();let a;switch(s>=17?a=ye.evening:s>=12?a=ye.afternoon:s>=4?a=ye.morning:a=ye.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let s=e.getHours()%12;return s===0&&(s=12),r.ordinalNumber(s,{unit:"hour"})}return ue.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):ue.H(e,t)},K:function(e,t,r){const s=e.getHours()%12;return t==="Ko"?r.ordinalNumber(s,{unit:"hour"}):T(s,t.length)},k:function(e,t,r){let s=e.getHours();return s===0&&(s=24),t==="ko"?r.ordinalNumber(s,{unit:"hour"}):T(s,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):ue.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):ue.s(e,t)},S:function(e,t){return ue.S(e,t)},X:function(e,t,r){const s=e.getTimezoneOffset();if(s===0)return"Z";switch(t){case"X":return bt(s);case"XXXX":case"XX":return fe(s);case"XXXXX":case"XXX":default:return fe(s,":")}},x:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"x":return bt(s);case"xxxx":case"xx":return fe(s);case"xxxxx":case"xxx":default:return fe(s,":")}},O:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+xt(s,":");case"OOOO":default:return"GMT"+fe(s,":")}},z:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+xt(s,":");case"zzzz":default:return"GMT"+fe(s,":")}},t:function(e,t,r){const s=Math.trunc(e.getTime()/1e3);return T(s,t.length)},T:function(e,t,r){const s=e.getTime();return T(s,t.length)}};function xt(e,t=""){const r=e>0?"-":"+",s=Math.abs(e),a=Math.trunc(s/60),i=s%60;return i===0?r+String(a):r+String(a)+t+T(i,2)}function bt(e,t){return e%60===0?(e>0?"-":"+")+T(Math.abs(e)/60,2):fe(e,t)}function fe(e,t=""){const r=e>0?"-":"+",s=Math.abs(e),a=T(Math.trunc(s/60),2),i=T(s%60,2);return r+a+t+i}const vt=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},It=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},bs=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],s=r[1],a=r[2];if(!a)return vt(e,t);let i;switch(s){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",vt(s,t)).replace("{{time}}",It(a,t))},vs={p:It,P:bs},ws=/^D+$/,ps=/^Y+$/,ks=["D","DD","YY","YYYY"];function Ds(e){return ws.test(e)}function js(e){return ps.test(e)}function Ns(e,t,r){const s=Ms(e,t,r);if(console.warn(s),ks.includes(e))throw new RangeError(s)}function Ms(e,t,r){const s=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${s} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Fs=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ss=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ts=/^'([^]*?)'?$/,Os=/''/g,_s=/[a-zA-Z]/;function he(e,t,r){var O,D,N,b;const s=Ce(),a=s.locale??hs,i=s.firstWeekContainsDate??((D=(O=s.locale)==null?void 0:O.options)==null?void 0:D.firstWeekContainsDate)??1,l=s.weekStartsOn??((b=(N=s.locale)==null?void 0:N.options)==null?void 0:b.weekStartsOn)??0,d=B(e);if(!Or(d))throw new RangeError("Invalid time value");let v=t.match(Ss).map(F=>{const M=F[0];if(M==="p"||M==="P"){const U=vs[M];return U(F,a.formatLong)}return F}).join("").match(Fs).map(F=>{if(F==="''")return{isToken:!1,value:"'"};const M=F[0];if(M==="'")return{isToken:!1,value:Ps(F)};if(gt[M])return{isToken:!0,value:F};if(M.match(_s))throw new RangeError("Format string contains an unescaped latin alphabet character `"+M+"`");return{isToken:!1,value:F}});a.localize.preprocessor&&(v=a.localize.preprocessor(d,v));const p={firstWeekContainsDate:i,weekStartsOn:l,locale:a};return v.map(F=>{if(!F.isToken)return F.value;const M=F.value;(js(M)||Ds(M))&&Ns(M,t,String(e));const U=gt[M[0]];return U(d,M,a.localize,p)}).join("")}function Ps(e){const t=e.match(Ts);return t?t[1].replace(Os,"'"):e}function Vs(e){return B(e).getDay()}function Es(e,t){return Ct(e,-1)}const Cs=({onClick:e,icon:t=ur,label:r="Add"})=>c.jsx("button",{onClick:e,className:"fixed bottom-6 right-6 z-30 w-14 h-14 bg-accent hover:bg-accent-hover text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-200 flex items-center justify-center active:scale-95","aria-label":r,children:c.jsx(t,{size:24})}),As=({date:e,trades:t,onClose:r,onAddTrade:s})=>{const{showToast:a}=Pt(),i=or(),l=ze(p=>p.settings.currency),d=t.reduce((p,O)=>p+O.amount,0),v=async p=>{if(confirm("Delete this trade?"))try{await i.mutateAsync(p),a("Trade deleted","success")}catch{a("Failed to delete trade","error")}};return c.jsx($e,{isOpen:!0,onClose:r,title:c.jsxs("div",{children:[c.jsx("div",{className:"text-xl font-bold",children:he(new Date(e),"EEEE, MMMM d, yyyy")}),c.jsx("div",{className:`text-2xl font-bold mt-1 ${d>=0?"text-profit":"text-loss"}`,children:Qe(d,l)}),c.jsxs("div",{className:"text-sm text-text-secondary mt-1",children:[t.length," trade",t.length!==1?"s":""]})]}),children:c.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:t.length===0?c.jsxs("div",{className:"text-center py-8",children:[c.jsx("p",{className:"text-text-secondary mb-4",children:"No trades on this day"}),c.jsx(ve,{onClick:s,children:"Add Trade"})]}):c.jsxs(c.Fragment,{children:[t.map(p=>c.jsx(Ws,{trade:p,currency:l,onDelete:v},p.tradeId)),c.jsx(ve,{onClick:s,variant:"secondary",className:"w-full",children:"+ Add Another Trade"})]})})})},Ws=({trade:e,currency:t,onDelete:r})=>{const[s,a]=z.useState(!1);return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"card border-l-4",style:{borderLeftColor:e.tagColor},children:[c.jsxs("div",{className:"flex items-start justify-between mb-2",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:`text-2xl font-bold mb-1 ${e.amount>=0?"text-profit":"text-loss"}`,children:Qe(e.amount,t)}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xl",children:e.tagEmoji}),c.jsx("span",{className:"text-sm font-medium",style:{color:e.tagColor},children:e.tagName})]})]}),c.jsx("div",{className:"text-sm text-text-tertiary",children:e.time})]}),e.driveImageId&&c.jsxs("button",{onClick:()=>a(!0),className:"w-full h-32 rounded-lg overflow-hidden bg-surface-hover mb-2 relative group",children:[c.jsx("img",{src:dt.getImageUrl(e.driveImageId),alt:"Trade screenshot",className:"w-full h-full object-cover"}),c.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:c.jsx(Nr,{size:32,className:"text-white"})})]}),e.notes&&c.jsx("p",{className:"text-sm text-text-secondary mb-3 p-2 bg-surface rounded",children:e.notes}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs(ve,{variant:"ghost",size:"sm",className:"flex-1 text-text-secondary hover:text-accent",children:[c.jsx(dr,{size:16,className:"mr-1"}),"Edit"]}),c.jsxs(ve,{variant:"ghost",size:"sm",onClick:()=>r(e.tradeId),className:"flex-1 text-text-secondary hover:text-loss",children:[c.jsx(fr,{size:16,className:"mr-1"}),"Delete"]})]})]}),s&&c.jsx($e,{isOpen:!0,onClose:()=>a(!1),size:"lg",children:c.jsx("img",{src:dt.getImageUrl(e.driveImageId),alt:"Trade screenshot",className:"w-full h-auto rounded-lg"})})]})};var Te=e=>e.type==="checkbox",me=e=>e instanceof Date,X=e=>e==null;const Lt=e=>typeof e=="object";var R=e=>!X(e)&&!Array.isArray(e)&&Lt(e)&&!me(e),Is=e=>R(e)&&e.target?Te(e.target)?e.target.checked:e.target.value:e,Ls=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Ys=(e,t)=>e.has(Ls(t)),Rs=e=>{const t=e.constructor&&e.constructor.prototype;return R(t)&&t.hasOwnProperty("isPrototypeOf")},Xe=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function q(e){if(e instanceof Date)return new Date(e);const t=typeof FileList<"u"&&e instanceof FileList;if(Xe&&(e instanceof Blob||t))return e;const r=Array.isArray(e);if(!r&&!(R(e)&&Rs(e)))return e;const s=r?[]:Object.create(Object.getPrototypeOf(e));for(const a in e)Object.prototype.hasOwnProperty.call(e,a)&&(s[a]=q(e[a]));return s}var Ae=e=>/^\w*$/.test(e),W=e=>e===void 0,Ge=e=>Array.isArray(e)?e.filter(Boolean):[],Je=e=>Ge(e.replace(/["|']|\]/g,"").split(/\.|\[/)),y=(e,t,r)=>{if(!t||!R(e))return r;const s=(Ae(t)?[t]:Je(t)).reduce((a,i)=>X(a)?a:a[i],e);return W(s)||s===e?W(e[t])?r:e[t]:s},se=e=>typeof e=="boolean",Z=e=>typeof e=="function",C=(e,t,r)=>{let s=-1;const a=Ae(t)?[t]:Je(t),i=a.length,l=i-1;for(;++s<i;){const d=a[s];let v=r;if(s!==l){const p=e[d];v=R(p)||Array.isArray(p)?p:isNaN(+a[s+1])?{}:[]}if(d==="__proto__"||d==="constructor"||d==="prototype")return;e[d]=v,e=e[d]}};const wt={BLUR:"blur",FOCUS_OUT:"focusout"},ee={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},oe={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},qs=z.createContext(null);qs.displayName="HookFormContext";var Us=(e,t,r,s=!0)=>{const a={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(a,i,{get:()=>{const l=i;return t._proxyFormState[l]!==ee.all&&(t._proxyFormState[l]=!s||ee.all),e[l]}});return a};const Bs=typeof window<"u"?z.useLayoutEffect:z.useEffect;var G=e=>typeof e=="string",Hs=(e,t,r,s,a)=>G(e)?(s&&t.watch.add(e),y(r,e,a)):Array.isArray(e)?e.map(i=>(s&&t.watch.add(i),y(r,i))):(s&&(t.watchAll=!0),r),Be=e=>X(e)||!Lt(e);function de(e,t,r=new WeakSet){if(Be(e)||Be(t))return Object.is(e,t);if(me(e)&&me(t))return e.getTime()===t.getTime();const s=Object.keys(e),a=Object.keys(t);if(s.length!==a.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const i of s){const l=e[i];if(!a.includes(i))return!1;if(i!=="ref"){const d=t[i];if(me(l)&&me(d)||R(l)&&R(d)||Array.isArray(l)&&Array.isArray(d)?!de(l,d,r):!Object.is(l,d))return!1}}return!0}var $s=(e,t,r,s,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[s]:a||!0}}:{},Me=e=>Array.isArray(e)?e:[e],pt=()=>{let e=[];return{get observers(){return e},next:a=>{for(const i of e)i.next&&i.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(i=>i!==a)}}),unsubscribe:()=>{e=[]}}};function Yt(e,t){const r={};for(const s in e)if(e.hasOwnProperty(s)){const a=e[s],i=t[s];if(a&&R(a)&&i){const l=Yt(a,i);R(l)&&(r[s]=l)}else e[s]&&(r[s]=i)}return r}var Q=e=>R(e)&&!Object.keys(e).length,Ke=e=>e.type==="file",Ve=e=>{if(!Xe)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Rt=e=>e.type==="select-multiple",Ze=e=>e.type==="radio",Qs=e=>Ze(e)||Te(e),Ue=e=>Ve(e)&&e.isConnected;function zs(e,t){const r=t.slice(0,-1).length;let s=0;for(;s<r;)e=W(e)?s++:e[t[s++]];return e}function Xs(e){for(const t in e)if(e.hasOwnProperty(t)&&!W(e[t]))return!1;return!0}function Y(e,t){const r=Array.isArray(t)?t:Ae(t)?[t]:Je(t),s=r.length===1?e:zs(e,r),a=r.length-1,i=r[a];return s&&delete s[i],a!==0&&(R(s)&&Q(s)||Array.isArray(s)&&Xs(s))&&Y(e,r.slice(0,-1)),e}var Gs=e=>{for(const t in e)if(Z(e[t]))return!0;return!1};function qt(e){return Array.isArray(e)||R(e)&&!Gs(e)}function He(e,t={}){for(const r in e){const s=e[r];qt(s)?(t[r]=Array.isArray(s)?[]:{},He(s,t[r])):W(s)||(t[r]=!0)}return t}function xe(e,t,r){r||(r=He(t));for(const s in e){const a=e[s];if(qt(a))W(t)||Be(r[s])?r[s]=He(a,Array.isArray(a)?[]:{}):xe(a,X(t)?{}:t[s],r[s]);else{const i=t[s];r[s]=!de(a,i)}}return r}const kt={value:!1,isValid:!1},Dt={value:!0,isValid:!0};var Ut=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!W(e[0].attributes.value)?W(e[0].value)||e[0].value===""?Dt:{value:e[0].value,isValid:!0}:Dt:kt}return kt},Bt=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:s})=>W(e)?e:t?e===""?NaN:e&&+e:r&&G(e)?new Date(e):s?s(e):e;const jt={isValid:!1,value:null};var Ht=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,jt):jt;function Nt(e){const t=e.ref;return Ke(t)?t.files:Ze(t)?Ht(e.refs).value:Rt(t)?[...t.selectedOptions].map(({value:r})=>r):Te(t)?Ut(e.refs).value:Bt(W(t.value)?e.ref.value:t.value,e)}var Js=(e,t,r,s)=>{const a={};for(const i of e){const l=y(t,i);l&&C(a,i,l._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:s}},Ee=e=>e instanceof RegExp,Ne=e=>W(e)?e:Ee(e)?e.source:R(e)?Ee(e.value)?e.value.source:e.value:e,Mt=e=>({isOnSubmit:!e||e===ee.onSubmit,isOnBlur:e===ee.onBlur,isOnChange:e===ee.onChange,isOnAll:e===ee.all,isOnTouch:e===ee.onTouched});const Ft="AsyncFunction";var Ks=e=>!!e&&!!e.validate&&!!(Z(e.validate)&&e.validate.constructor.name===Ft||R(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===Ft)),Zs=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),St=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(s=>e.startsWith(s)&&/^\.\w+/.test(e.slice(s.length))));const Fe=(e,t,r,s)=>{for(const a of r||Object.keys(e)){const i=y(e,a);if(i){const{_f:l,...d}=i;if(l){if(l.refs&&l.refs[0]&&t(l.refs[0],a)&&!s)return!0;if(l.ref&&t(l.ref,l.name)&&!s)return!0;if(Fe(d,t))break}else if(R(d)&&Fe(d,t))break}}};function Tt(e,t,r){const s=y(e,r);if(s||Ae(r))return{error:s,name:r};const a=r.split(".");for(;a.length;){const i=a.join("."),l=y(t,i),d=y(e,i);if(l&&!Array.isArray(l)&&r!==i)return{name:r};if(d&&d.type)return{name:i,error:d};if(d&&d.root&&d.root.type)return{name:`${i}.root`,error:d.root};a.pop()}return{name:r}}var en=(e,t,r,s)=>{r(e);const{name:a,...i}=e;return Q(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(l=>t[l]===(!s||ee.all))},tn=(e,t,r)=>!e||!t||e===t||Me(e).some(s=>s&&(r?s===t:s.startsWith(t)||t.startsWith(s))),rn=(e,t,r,s,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(t||e):(r?s.isOnBlur:a.isOnBlur)?!e:(r?s.isOnChange:a.isOnChange)?e:!0,sn=(e,t)=>!Ge(y(e,t)).length&&Y(e,t),nn=(e,t,r)=>{const s=Me(y(e,r));return C(s,"root",t[r]),C(e,r,s),e};function Ot(e,t,r="validate"){if(G(e)||Array.isArray(e)&&e.every(G)||se(e)&&!e)return{type:r,message:G(e)?e:"",ref:t}}var ge=e=>R(e)&&!Ee(e)?e:{value:e,message:""},_t=async(e,t,r,s,a,i)=>{const{ref:l,refs:d,required:v,maxLength:p,minLength:O,min:D,max:N,pattern:b,validate:F,name:M,valueAsNumber:U,mount:A}=e._f,j=y(r,M);if(!A||t.has(M))return{};const H=d?d[0]:l,$=k=>{a&&H.reportValidity&&(H.setCustomValidity(se(k)?"":k||""),H.reportValidity())},E={},te=Ze(l),ne=Te(l),J=te||ne,re=(U||Ke(l))&&W(l.value)&&W(j)||Ve(l)&&l.value===""||j===""||Array.isArray(j)&&!j.length,I=$s.bind(null,M,s,E),ae=(k,x,_,w=oe.maxLength,P=oe.minLength)=>{const L=k?x:_;E[M]={type:k?w:P,message:L,ref:l,...I(k?w:P,L)}};if(i?!Array.isArray(j)||!j.length:v&&(!J&&(re||X(j))||se(j)&&!j||ne&&!Ut(d).isValid||te&&!Ht(d).isValid)){const{value:k,message:x}=G(v)?{value:!!v,message:v}:ge(v);if(k&&(E[M]={type:oe.required,message:x,ref:H,...I(oe.required,x)},!s))return $(x),E}if(!re&&(!X(D)||!X(N))){let k,x;const _=ge(N),w=ge(D);if(!X(j)&&!isNaN(j)){const P=l.valueAsNumber||j&&+j;X(_.value)||(k=P>_.value),X(w.value)||(x=P<w.value)}else{const P=l.valueAsDate||new Date(j),L=ke=>new Date(new Date().toDateString()+" "+ke),ie=l.type=="time",pe=l.type=="week";G(_.value)&&j&&(k=ie?L(j)>L(_.value):pe?j>_.value:P>new Date(_.value)),G(w.value)&&j&&(x=ie?L(j)<L(w.value):pe?j<w.value:P<new Date(w.value))}if((k||x)&&(ae(!!k,_.message,w.message,oe.max,oe.min),!s))return $(E[M].message),E}if((p||O)&&!re&&(G(j)||i&&Array.isArray(j))){const k=ge(p),x=ge(O),_=!X(k.value)&&j.length>+k.value,w=!X(x.value)&&j.length<+x.value;if((_||w)&&(ae(_,k.message,x.message),!s))return $(E[M].message),E}if(b&&!re&&G(j)){const{value:k,message:x}=ge(b);if(Ee(k)&&!j.match(k)&&(E[M]={type:oe.pattern,message:x,ref:l,...I(oe.pattern,x)},!s))return $(x),E}if(F){if(Z(F)){const k=await F(j,r),x=Ot(k,H);if(x&&(E[M]={...x,...I(oe.validate,x.message)},!s))return $(x.message),E}else if(R(F)){let k={};for(const x in F){if(!Q(k)&&!s)break;const _=Ot(await F[x](j,r),H,x);_&&(k={..._,...I(x,_.message)},$(_.message),s&&(E[M]=k))}if(!Q(k)&&(E[M]={ref:H,...k},!s))return E}}return $(!0),E};const an={mode:ee.onSubmit,reValidateMode:ee.onChange,shouldFocusError:!0};function on(e={}){let t={...an,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Z(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},s={},a=R(t.defaultValues)||R(t.values)?q(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:q(a),l={action:!1,mount:!1,watch:!1,keepIsValid:!1},d={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},v,p=0;const O={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},D={...O};let N={...D};const b={array:pt(),state:pt()},F=t.criteriaMode===ee.all,M=n=>o=>{clearTimeout(p),p=setTimeout(n,o)},U=async n=>{if(!l.keepIsValid&&!t.disabled&&(D.isValid||N.isValid||n)){let o;t.resolver?(o=Q((await J()).errors),A()):o=await I(s,!0),o!==r.isValid&&b.state.next({isValid:o})}},A=(n,o)=>{!t.disabled&&(D.isValidating||D.validatingFields||N.isValidating||N.validatingFields)&&((n||Array.from(d.mount)).forEach(u=>{u&&(o?C(r.validatingFields,u,o):Y(r.validatingFields,u))}),b.state.next({validatingFields:r.validatingFields,isValidating:!Q(r.validatingFields)}))},j=(n,o=[],u,m,h=!0,f=!0)=>{if(m&&u&&!t.disabled){if(l.action=!0,f&&Array.isArray(y(s,n))){const g=u(y(s,n),m.argA,m.argB);h&&C(s,n,g)}if(f&&Array.isArray(y(r.errors,n))){const g=u(y(r.errors,n),m.argA,m.argB);h&&C(r.errors,n,g),sn(r.errors,n)}if((D.touchedFields||N.touchedFields)&&f&&Array.isArray(y(r.touchedFields,n))){const g=u(y(r.touchedFields,n),m.argA,m.argB);h&&C(r.touchedFields,n,g)}(D.dirtyFields||N.dirtyFields)&&(r.dirtyFields=xe(a,i)),b.state.next({name:n,isDirty:k(n,o),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else C(i,n,o)},H=(n,o)=>{C(r.errors,n,o),b.state.next({errors:r.errors})},$=n=>{r.errors=n,b.state.next({errors:r.errors,isValid:!1})},E=(n,o,u,m)=>{const h=y(s,n);if(h){const f=y(i,n,W(u)?y(a,n):u);W(f)||m&&m.defaultChecked||o?C(i,n,o?f:Nt(h._f)):w(n,f),l.mount&&!l.action&&U()}},te=(n,o,u,m,h)=>{let f=!1,g=!1;const S={name:n};if(!t.disabled){if(!u||m){(D.isDirty||N.isDirty)&&(g=r.isDirty,r.isDirty=S.isDirty=k(),f=g!==S.isDirty);const V=de(y(a,n),o);g=!!y(r.dirtyFields,n),V?Y(r.dirtyFields,n):C(r.dirtyFields,n,!0),S.dirtyFields=r.dirtyFields,f=f||(D.dirtyFields||N.dirtyFields)&&g!==!V}if(u){const V=y(r.touchedFields,n);V||(C(r.touchedFields,n,u),S.touchedFields=r.touchedFields,f=f||(D.touchedFields||N.touchedFields)&&V!==u)}f&&h&&b.state.next(S)}return f?S:{}},ne=(n,o,u,m)=>{const h=y(r.errors,n),f=(D.isValid||N.isValid)&&se(o)&&r.isValid!==o;if(t.delayError&&u?(v=M(()=>H(n,u)),v(t.delayError)):(clearTimeout(p),v=null,u?C(r.errors,n,u):Y(r.errors,n)),(u?!de(h,u):h)||!Q(m)||f){const g={...m,...f&&se(o)?{isValid:o}:{},errors:r.errors,name:n};r={...r,...g},b.state.next(g)}},J=async n=>(A(n,!0),await t.resolver(i,t.context,Js(n||d.mount,s,t.criteriaMode,t.shouldUseNativeValidation))),re=async n=>{const{errors:o}=await J(n);if(A(n),n)for(const u of n){const m=y(o,u);m?C(r.errors,u,m):Y(r.errors,u)}else r.errors=o;return o},I=async(n,o,u={valid:!0})=>{for(const m in n){const h=n[m];if(h){const{_f:f,...g}=h;if(f){const S=d.array.has(f.name),V=h._f&&Ks(h._f);V&&D.validatingFields&&A([f.name],!0);const K=await _t(h,d.disabled,i,F,t.shouldUseNativeValidation&&!o,S);if(V&&D.validatingFields&&A([f.name]),K[f.name]&&(u.valid=!1,o))break;!o&&(y(K,f.name)?S?nn(r.errors,K,f.name):C(r.errors,f.name,K[f.name]):Y(r.errors,f.name))}!Q(g)&&await I(g,o,u)}}return u.valid},ae=()=>{for(const n of d.unMount){const o=y(s,n);o&&(o._f.refs?o._f.refs.every(u=>!Ue(u)):!Ue(o._f.ref))&&We(n)}d.unMount=new Set},k=(n,o)=>!t.disabled&&(n&&o&&C(i,n,o),!de(et(),a)),x=(n,o,u)=>Hs(n,d,{...l.mount?i:W(o)?a:G(n)?{[n]:o}:o},u,o),_=n=>Ge(y(l.mount?i:a,n,t.shouldUnregister?y(a,n,[]):[])),w=(n,o,u={})=>{const m=y(s,n);let h=o;if(m){const f=m._f;f&&(!f.disabled&&C(i,n,Bt(o,f)),h=Ve(f.ref)&&X(o)?"":o,Rt(f.ref)?[...f.ref.options].forEach(g=>g.selected=h.includes(g.value)):f.refs?Te(f.ref)?f.refs.forEach(g=>{(!g.defaultChecked||!g.disabled)&&(Array.isArray(h)?g.checked=!!h.find(S=>S===g.value):g.checked=h===g.value||!!h)}):f.refs.forEach(g=>g.checked=g.value===h):Ke(f.ref)?f.ref.value="":(f.ref.value=h,f.ref.type||b.state.next({name:n,values:q(i)})))}(u.shouldDirty||u.shouldTouch)&&te(n,h,u.shouldTouch,u.shouldDirty,!0),u.shouldValidate&&ke(n)},P=(n,o,u)=>{for(const m in o){if(!o.hasOwnProperty(m))return;const h=o[m],f=n+"."+m,g=y(s,f);(d.array.has(n)||R(h)||g&&!g._f)&&!me(h)?P(f,h,u):w(f,h,u)}},L=(n,o,u={})=>{const m=y(s,n),h=d.array.has(n),f=q(o);C(i,n,f),h?(b.array.next({name:n,values:q(i)}),(D.isDirty||D.dirtyFields||N.isDirty||N.dirtyFields)&&u.shouldDirty&&b.state.next({name:n,dirtyFields:xe(a,i),isDirty:k(n,f)})):m&&!m._f&&!X(f)?P(n,f,u):w(n,f,u),St(n,d)&&b.state.next({...r,name:n}),b.state.next({name:l.mount?n:void 0,values:q(i)})},ie=async n=>{l.mount=!0;const o=n.target;let u=o.name,m=!0;const h=y(s,u),f=V=>{m=Number.isNaN(V)||me(V)&&isNaN(V.getTime())||de(V,y(i,u,V))},g=Mt(t.mode),S=Mt(t.reValidateMode);if(h){let V,K;const Oe=o.type?Nt(h._f):Is(n),le=n.type===wt.BLUR||n.type===wt.FOCUS_OUT,Zt=!Zs(h._f)&&!t.resolver&&!y(r.errors,u)&&!h._f.deps||rn(le,y(r.touchedFields,u),r.isSubmitted,S,g),Ye=St(u,d,le);C(i,u,Oe),le?(!o||!o.readOnly)&&(h._f.onBlur&&h._f.onBlur(n),v&&v(0)):h._f.onChange&&h._f.onChange(n);const Re=te(u,Oe,le),er=!Q(Re)||Ye;if(!le&&b.state.next({name:u,type:n.type,values:q(i)}),Zt)return(D.isValid||N.isValid)&&(t.mode==="onBlur"?le&&U():le||U()),er&&b.state.next({name:u,...Ye?{}:Re});if(!le&&Ye&&b.state.next({...r}),t.resolver){const{errors:lt}=await J([u]);if(A([u]),f(Oe),m){const tr=Tt(r.errors,s,u),ut=Tt(lt,s,tr.name||u);V=ut.error,u=ut.name,K=Q(lt)}}else A([u],!0),V=(await _t(h,d.disabled,i,F,t.shouldUseNativeValidation))[u],A([u]),f(Oe),m&&(V?K=!1:(D.isValid||N.isValid)&&(K=await I(s,!0)));m&&(h._f.deps&&(!Array.isArray(h._f.deps)||h._f.deps.length>0)&&ke(h._f.deps),ne(u,K,V,Re))}},pe=(n,o)=>{if(y(r.errors,o)&&n.focus)return n.focus(),1},ke=async(n,o={})=>{let u,m;const h=Me(n);if(t.resolver){const f=await re(W(n)?n:h);u=Q(f),m=n?!h.some(g=>y(f,g)):u}else n?(m=(await Promise.all(h.map(async f=>{const g=y(s,f);return await I(g&&g._f?{[f]:g}:g)}))).every(Boolean),!(!m&&!r.isValid)&&U()):m=u=await I(s);return b.state.next({...!G(n)||(D.isValid||N.isValid)&&u!==r.isValid?{}:{name:n},...t.resolver||!n?{isValid:u}:{},errors:r.errors}),o.shouldFocus&&!m&&Fe(s,pe,n?h:d.mount),m},et=(n,o)=>{let u={...l.mount?i:a};return o&&(u=Yt(o.dirtyFields?r.dirtyFields:r.touchedFields,u)),W(n)?u:G(n)?y(u,n):n.map(m=>y(u,m))},tt=(n,o)=>({invalid:!!y((o||r).errors,n),isDirty:!!y((o||r).dirtyFields,n),error:y((o||r).errors,n),isValidating:!!y(r.validatingFields,n),isTouched:!!y((o||r).touchedFields,n)}),$t=n=>{n&&Me(n).forEach(o=>Y(r.errors,o)),b.state.next({errors:n?r.errors:{}})},rt=(n,o,u)=>{const m=(y(s,n,{_f:{}})._f||{}).ref,h=y(r.errors,n)||{},{ref:f,message:g,type:S,...V}=h;C(r.errors,n,{...V,...o,ref:m}),b.state.next({name:n,errors:r.errors,isValid:!1}),u&&u.shouldFocus&&m&&m.focus&&m.focus()},Qt=(n,o)=>Z(n)?b.state.subscribe({next:u=>"values"in u&&n(x(void 0,o),u)}):x(n,o,!0),st=n=>b.state.subscribe({next:o=>{tn(n.name,o.name,n.exact)&&en(o,n.formState||D,Kt,n.reRenderRoot)&&n.callback({values:{...i},...r,...o,defaultValues:a})}}).unsubscribe,zt=n=>(l.mount=!0,N={...N,...n.formState},st({...n,formState:{...O,...n.formState}})),We=(n,o={})=>{for(const u of n?Me(n):d.mount)d.mount.delete(u),d.array.delete(u),o.keepValue||(Y(s,u),Y(i,u)),!o.keepError&&Y(r.errors,u),!o.keepDirty&&Y(r.dirtyFields,u),!o.keepTouched&&Y(r.touchedFields,u),!o.keepIsValidating&&Y(r.validatingFields,u),!t.shouldUnregister&&!o.keepDefaultValue&&Y(a,u);b.state.next({values:q(i)}),b.state.next({...r,...o.keepDirty?{isDirty:k()}:{}}),!o.keepIsValid&&U()},nt=({disabled:n,name:o})=>{(se(n)&&l.mount||n||d.disabled.has(o))&&(n?d.disabled.add(o):d.disabled.delete(o))},Ie=(n,o={})=>{let u=y(s,n);const m=se(o.disabled)||se(t.disabled);return C(s,n,{...u||{},_f:{...u&&u._f?u._f:{ref:{name:n}},name:n,mount:!0,...o}}),d.mount.add(n),u?nt({disabled:se(o.disabled)?o.disabled:t.disabled,name:n}):E(n,!0,o.value),{...m?{disabled:o.disabled||t.disabled}:{},...t.progressive?{required:!!o.required,min:Ne(o.min),max:Ne(o.max),minLength:Ne(o.minLength),maxLength:Ne(o.maxLength),pattern:Ne(o.pattern)}:{},name:n,onChange:ie,onBlur:ie,ref:h=>{if(h){Ie(n,o),u=y(s,n);const f=W(h.value)&&h.querySelectorAll&&h.querySelectorAll("input,select,textarea")[0]||h,g=Qs(f),S=u._f.refs||[];if(g?S.find(V=>V===f):f===u._f.ref)return;C(s,n,{_f:{...u._f,...g?{refs:[...S.filter(Ue),f,...Array.isArray(y(a,n))?[{}]:[]],ref:{type:f.type,name:n}}:{ref:f}}}),E(n,!1,void 0,f)}else u=y(s,n,{}),u._f&&(u._f.mount=!1),(t.shouldUnregister||o.shouldUnregister)&&!(Ys(d.array,n)&&l.action)&&d.unMount.add(n)}}},Le=()=>t.shouldFocusError&&Fe(s,pe,d.mount),Xt=n=>{se(n)&&(b.state.next({disabled:n}),Fe(s,(o,u)=>{const m=y(s,u);m&&(o.disabled=m._f.disabled||n,Array.isArray(m._f.refs)&&m._f.refs.forEach(h=>{h.disabled=m._f.disabled||n}))},0,!1))},at=(n,o)=>async u=>{let m;u&&(u.preventDefault&&u.preventDefault(),u.persist&&u.persist());let h=q(i);if(b.state.next({isSubmitting:!0}),t.resolver){const{errors:f,values:g}=await J();A(),r.errors=f,h=q(g)}else await I(s);if(d.disabled.size)for(const f of d.disabled)Y(h,f);if(Y(r.errors,"root"),Q(r.errors)){b.state.next({errors:{}});try{await n(h,u)}catch(f){m=f}}else o&&await o({...r.errors},u),Le(),setTimeout(Le);if(b.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Q(r.errors)&&!m,submitCount:r.submitCount+1,errors:r.errors}),m)throw m},Gt=(n,o={})=>{y(s,n)&&(W(o.defaultValue)?L(n,q(y(a,n))):(L(n,o.defaultValue),C(a,n,q(o.defaultValue))),o.keepTouched||Y(r.touchedFields,n),o.keepDirty||(Y(r.dirtyFields,n),r.isDirty=o.defaultValue?k(n,q(y(a,n))):k()),o.keepError||(Y(r.errors,n),D.isValid&&U()),b.state.next({...r}))},it=(n,o={})=>{const u=n?q(n):a,m=q(u),h=Q(n),f=h?a:m;if(o.keepDefaultValues||(a=u),!o.keepValues){if(o.keepDirtyValues){const g=new Set([...d.mount,...Object.keys(xe(a,i))]);for(const S of Array.from(g))y(r.dirtyFields,S)?C(f,S,y(i,S)):L(S,y(f,S))}else{if(Xe&&W(n))for(const g of d.mount){const S=y(s,g);if(S&&S._f){const V=Array.isArray(S._f.refs)?S._f.refs[0]:S._f.ref;if(Ve(V)){const K=V.closest("form");if(K){K.reset();break}}}}if(o.keepFieldsRef)for(const g of d.mount)L(g,y(f,g));else s={}}i=t.shouldUnregister?o.keepDefaultValues?q(a):{}:q(f),b.array.next({values:{...f}}),b.state.next({values:{...f}})}d={mount:o.keepDirtyValues?d.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!D.isValid||!!o.keepIsValid||!!o.keepDirtyValues||!t.shouldUnregister&&!Q(f),l.watch=!!t.shouldUnregister,l.keepIsValid=!!o.keepIsValid,l.action=!1,o.keepErrors||(r.errors={}),b.state.next({submitCount:o.keepSubmitCount?r.submitCount:0,isDirty:h?!1:o.keepDirty?r.isDirty:!!(o.keepDefaultValues&&!de(n,a)),isSubmitted:o.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:h?{}:o.keepDirtyValues?o.keepDefaultValues&&i?xe(a,i):r.dirtyFields:o.keepDefaultValues&&n?xe(a,n):o.keepDirty?r.dirtyFields:{},touchedFields:o.keepTouched?r.touchedFields:{},errors:o.keepErrors?r.errors:{},isSubmitSuccessful:o.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:a})},ot=(n,o)=>it(Z(n)?n(i):n,{...t.resetOptions,...o}),Jt=(n,o={})=>{const u=y(s,n),m=u&&u._f;if(m){const h=m.refs?m.refs[0]:m.ref;h.focus&&setTimeout(()=>{h.focus(),o.shouldSelect&&Z(h.select)&&h.select()})}},Kt=n=>{r={...r,...n}},ct={control:{register:Ie,unregister:We,getFieldState:tt,handleSubmit:at,setError:rt,_subscribe:st,_runSchema:J,_updateIsValidating:A,_focusError:Le,_getWatch:x,_getDirty:k,_setValid:U,_setFieldArray:j,_setDisabledField:nt,_setErrors:$,_getFieldArray:_,_reset:it,_resetDefaultValues:()=>Z(t.defaultValues)&&t.defaultValues().then(n=>{ot(n,t.resetOptions),b.state.next({isLoading:!1})}),_removeUnmounted:ae,_disableForm:Xt,_subjects:b,_proxyFormState:D,get _fields(){return s},get _formValues(){return i},get _state(){return l},set _state(n){l=n},get _defaultValues(){return a},get _names(){return d},set _names(n){d=n},get _formState(){return r},get _options(){return t},set _options(n){t={...t,...n}}},subscribe:zt,trigger:ke,register:Ie,handleSubmit:at,watch:Qt,setValue:L,getValues:et,reset:ot,resetField:Gt,clearErrors:$t,unregister:We,setError:rt,setFocus:Jt,getFieldState:tt};return{...ct,formControl:ct}}function cn(e={}){const t=z.useRef(void 0),r=z.useRef(void 0),[s,a]=z.useState({isDirty:!1,isValidating:!1,isLoading:Z(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Z(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:s},e.defaultValues&&!Z(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:l,...d}=on(e);t.current={...d,formState:s}}const i=t.current.control;return i._options=e,Bs(()=>{const l=i._subscribe({formState:i._proxyFormState,callback:()=>a({...i._formState}),reRenderRoot:!0});return a(d=>({...d,isReady:!0})),i._formState.isReady=!0,l},[i]),z.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),z.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),z.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),z.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),z.useEffect(()=>{if(i._proxyFormState.isDirty){const l=i._getDirty();l!==s.isDirty&&i._subjects.state.next({isDirty:l})}},[i,s.isDirty]),z.useEffect(()=>{var l;e.values&&!de(e.values,r.current)?(i._reset(e.values,{keepFieldsRef:!0,...i._options.resetOptions}),!((l=i._options.resetOptions)===null||l===void 0)&&l.keepIsValid||i._setValid(),r.current=e.values,a(d=>({...d}))):i._resetDefaultValues()},[i,e.values]),z.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=Us(s,i),t.current}const ln=({defaultDate:e=null,trade:t=null,tags:r=[],onClose:s})=>{const{showToast:a}=Pt(),i=cr(),l=ze(w=>w.settings.currency),d=!!t,v=new Date,p=e||v.toISOString().split("T")[0],O=v.toTimeString().slice(0,5),D={tagId:"default",name:"Trade",color:"#3b82f6",emoji:""},N=r.length>0?r:[D],{register:b,handleSubmit:F,watch:M,setValue:U,formState:{errors:A}}=cn({defaultValues:{date:(t==null?void 0:t.date)||p,time:(t==null?void 0:t.time)||O,amount:(t==null?void 0:t.amount)||"",tagId:(t==null?void 0:t.tagId)||N[0].tagId,notes:(t==null?void 0:t.notes)||""}}),[j,H]=be.useState(null),[$,E]=be.useState(t!=null&&t.driveImageId?`drive://${t.driveImageId}`:null),[te,ne]=be.useState(!1),J=M("amount"),re=M("tagId"),I=N.find(w=>w.tagId===re)||N[0],ae=w=>{U("amount",w)},k=w=>{var L;const P=(L=w.target.files)==null?void 0:L[0];if(P){if(!P.type.startsWith("image/")){a("Please select an image file","error");return}if(P.size>10*1024*1024){a("Image too large (max 10MB)","error");return}H(P),E(URL.createObjectURL(P))}},x=()=>{H(null),E(null)},_=async w=>{if(!w.amount||w.amount===0){a("Please enter an amount","error");return}try{ne(!0);const P=N.find(ie=>ie.tagId===w.tagId)||N[0],L={tradeId:(t==null?void 0:t.tradeId)||yr(),date:w.date,time:w.time,amount:parseFloat(w.amount),tagId:P.tagId,tagName:P.name,tagColor:P.color,tagEmoji:P.emoji,screenshot:j,notes:w.notes};await i.mutateAsync(L),a(d?"Trade updated":"Trade added","success"),s()}catch(P){console.error("Failed to save trade:",P),a("Failed to save trade","error")}finally{ne(!1)}};return c.jsx($e,{isOpen:!0,onClose:s,title:d?"Edit Trade":"Add Trade",size:"lg",children:c.jsxs("form",{onSubmit:F(_),className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Date"}),c.jsx("input",{type:"date",...b("date",{required:!0}),className:"input"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Time"}),c.jsx("input",{type:"time",...b("time",{required:!0}),className:"input"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Amount"}),c.jsxs("div",{className:"relative",children:[c.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-2xl font-bold text-text-tertiary",children:l}),c.jsx("input",{type:"number",step:"0.01",...b("amount",{required:!0,valueAsNumber:!0}),className:`
                input pl-12 text-3xl font-bold text-center
                ${J>0?"text-profit":J<0?"text-loss":""}
              `,placeholder:"0.00"})]}),c.jsx("div",{className:"flex gap-2 mt-2",children:rr.map(w=>c.jsxs("button",{type:"button",onClick:()=>ae(w),className:`
                  flex-1 py-2 px-3 rounded-md text-sm font-medium
                  transition-colors
                  ${w>0?"bg-profit/10 text-profit hover:bg-profit/20":"bg-loss/10 text-loss hover:bg-loss/20"}
                `,children:[w>0?"+":"",w]},w))})]}),c.jsxs("div",{className:"relative z-20",children:[c.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Strategy Tag ",r.length===0&&c.jsx("span",{className:"text-text-tertiary text-xs",children:"(Create custom tags in Tags section)"})]}),c.jsx("select",{...b("tagId"),className:"input w-full relative z-20",children:N.map(w=>c.jsxs("option",{value:w.tagId,children:[w.emoji," ",w.name]},w.tagId))}),I&&c.jsxs("div",{className:"mt-2 p-3 rounded-md text-sm",style:{backgroundColor:`${I.color}20`,color:I.color},children:[c.jsx("span",{className:"text-xl mr-2",children:I.emoji}),c.jsx("span",{className:"font-medium",children:I.name})]})]}),c.jsxs("div",{className:"relative z-10",children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Notes (optional)"}),c.jsx("textarea",{...b("notes"),rows:3,className:"input resize-none w-full",placeholder:"What happened? What did you learn?"})]}),c.jsxs("div",{className:"relative z-0",children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Screenshot (optional)"}),$?c.jsxs("div",{className:"relative",children:[c.jsx("img",{src:$,alt:"Screenshot preview",className:"w-full h-48 object-cover rounded-lg"}),c.jsx("button",{type:"button",onClick:x,className:"absolute top-2 right-2 p-2 bg-black/50 rounded-full hover:bg-black/70 transition-colors",children:c.jsx(sr,{size:20,className:"text-white"})})]}):c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsxs("label",{className:"cursor-pointer",children:[c.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:k,className:"hidden"}),c.jsxs("div",{className:"card border-2 border-dashed border-border hover:border-accent transition-colors text-center py-8",children:[c.jsx(wr,{size:32,className:"mx-auto mb-2 text-text-secondary"}),c.jsx("div",{className:"text-sm text-text-secondary",children:"Take Photo"})]})]}),c.jsxs("label",{className:"cursor-pointer",children:[c.jsx("input",{type:"file",accept:"image/*",onChange:k,className:"hidden"}),c.jsxs("div",{className:"card border-2 border-dashed border-border hover:border-accent transition-colors text-center py-8",children:[c.jsx(jr,{size:32,className:"mx-auto mb-2 text-text-secondary"}),c.jsx("div",{className:"text-sm text-text-secondary",children:"Upload"})]})]})]})]}),c.jsxs("div",{className:"flex gap-3 pt-4 border-t border-border",children:[c.jsx(ve,{type:"button",variant:"secondary",onClick:s,className:"flex-1",disabled:te,children:"Cancel"}),c.jsx(ve,{type:"submit",className:"flex-1",loading:te,children:d?"Update Trade":"Save Trade"})]})]})})},wn=()=>{const{year:e,month:t}=nr(),r=ar(),s=new Date,a=e?parseInt(e):s.getFullYear(),i=t?parseInt(t):s.getMonth(),l=new Date(a,i),[d,v]=be.useState(null),[p,O]=be.useState(!1),[D,N]=be.useState("calendar"),b=ze(x=>x.settings.currency),{data:F=[],isLoading:M}=lr(a,i),{data:U=[]}=hr(),A=gr(F),j=xr(F),H=br(F),$=Vr(l),E=_r(l),te=Pr({start:$,end:E}),ne=Vs($),J=Array(ne).fill(null),re=()=>{const x=Es(l);r(`/month/${x.getFullYear()}/${x.getMonth()}`)},I=()=>{const x=Ct(l,1);r(`/month/${x.getFullYear()}/${x.getMonth()}`)},ae=x=>{mt(x)||v(he(x,"yyyy-MM-dd"))},k=()=>{O(!0)};return M?c.jsxs(c.Fragment,{children:[c.jsx(ft,{title:"Loading..."}),c.jsx("div",{className:"p-4",children:c.jsx(ir,{type:"spinner"})})]}):c.jsxs(c.Fragment,{children:[c.jsx(ft,{title:he(l,"MMMM yyyy"),showBack:!0,actions:c.jsx("button",{onClick:()=>N(D==="calendar"?"list":"calendar"),className:"p-2 hover:bg-surface rounded-lg transition-colors",title:D==="calendar"?"List view":"Calendar view",children:c.jsx(Dr,{size:20,className:"text-text-secondary"})})}),c.jsxs("div",{className:"p-4 max-w-7xl mx-auto space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("button",{onClick:re,className:"p-2 hover:bg-surface rounded-lg transition-colors",children:c.jsx(pr,{size:24,className:"text-text-secondary"})}),c.jsx("h2",{className:"text-xl font-semibold",children:he(l,"MMMM yyyy")}),c.jsx("button",{onClick:I,className:"p-2 hover:bg-surface rounded-lg transition-colors",children:c.jsx(kr,{size:24,className:"text-text-secondary"})})]}),c.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[c.jsx(_e,{label:"P&L",value:Et(A.totalPL,b),color:A.totalPL>=0?"profit":"loss"}),c.jsx(_e,{label:"Trades",value:A.tradeCount}),c.jsx(_e,{label:"Win Rate",value:`${A.winRate}%`,color:A.winRate>=50?"profit":"loss"}),c.jsx(_e,{label:"W/L",value:`${A.winCount}/${A.lossCount}`})]}),D==="calendar"?c.jsxs("div",{className:"card",children:[c.jsx("div",{className:"grid grid-cols-7 gap-2 mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(x=>c.jsx("div",{className:"text-center text-sm font-medium text-text-secondary py-2",children:x},x))}),c.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[J.map((x,_)=>c.jsx("div",{className:"aspect-square"},`empty-${_}`)),te.map(x=>{const _=he(x,"yyyy-MM-dd"),w=j[_]||0,P=H[_]||[],L=mt(x),ie=vr(x,new Date);return c.jsx(un,{date:x,pl:w,tradeCount:P.length,isWeekend:L,isToday:ie,currency:b,onClick:()=>ae(x)},_)})]})]}):c.jsx(dn,{trades:F,groupedTrades:H,currency:b,onDayClick:ae})]}),c.jsx(Cs,{onClick:k}),d&&c.jsx(As,{date:d,trades:H[d]||[],onClose:()=>v(null),onAddTrade:k}),p&&c.jsx(ln,{defaultDate:d,tags:U,onClose:()=>O(!1)})]})},_e=({label:e,value:t,color:r="default"})=>{const s={profit:"text-profit",loss:"text-loss",default:"text-text-primary"};return c.jsxs("div",{className:"card text-center",children:[c.jsx("div",{className:"text-text-tertiary text-xs mb-1",children:e}),c.jsx("div",{className:`text-lg font-bold ${s[r]}`,children:t})]})},un=({date:e,pl:t,tradeCount:r,isWeekend:s,isToday:a,currency:i,onClick:l})=>{const d=he(e,"d");if(s)return c.jsxs("div",{className:"aspect-square bg-surface/50 rounded-lg p-2 flex flex-col items-center justify-center opacity-50",children:[c.jsx("div",{className:"text-sm text-text-tertiary",children:d}),c.jsx("div",{className:"text-xs text-text-tertiary",children:""})]});const v=t>0?"bg-profit/10":t<0?"bg-loss/10":"bg-surface",p=a?"ring-2 ring-accent":"border border-border";return c.jsxs("button",{onClick:l,className:`
        aspect-square ${v} ${p} rounded-lg p-2
        hover:bg-surface-hover transition-all
        flex flex-col items-center justify-between
        relative
      `,children:[c.jsx("div",{className:"text-sm text-text-secondary",children:d}),r>0&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:`text-sm font-semibold ${t>=0?"text-profit":"text-loss"}`,children:Et(t,i)}),r>1&&c.jsx("div",{className:"absolute bottom-1 right-1 w-5 h-5 rounded-full bg-accent text-white text-xs flex items-center justify-center",children:r})]})]})},dn=({trades:e,groupedTrades:t,currency:r,onDayClick:s})=>{const a=Object.keys(t).sort().reverse();return a.length===0?c.jsx("div",{className:"card text-center py-12",children:c.jsx("p",{className:"text-text-secondary",children:"No trades this month"})}):c.jsx("div",{className:"space-y-2",children:a.map(i=>{const l=t[i],d=l.reduce((v,p)=>v+p.amount,0);return c.jsx("button",{onClick:()=>s(i),className:"card w-full text-left hover:bg-surface-hover transition-colors",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("div",{className:"font-medium",children:he(new Date(i),"EEEE, MMMM d")}),c.jsxs("div",{className:"text-sm text-text-tertiary",children:[l.length," trade",l.length!==1?"s":""]})]}),c.jsx("div",{className:`text-xl font-bold ${d>=0?"text-profit":"text-loss"}`,children:Qe(d,r)})]})},i)})})};export{wn as default};
